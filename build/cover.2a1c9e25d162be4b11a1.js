(function(I){function o(n){for(var l=n[0],v=n[1],O=n[2],y,u,P=0,w=[];P<l.length;P++)u=l[P],Object.prototype.hasOwnProperty.call(m,u)&&m[u]&&w.push(m[u][0]),m[u]=0;for(y in v)Object.prototype.hasOwnProperty.call(v,y)&&(I[y]=v[y]);for(L&&L(n);w.length;)w.shift()();return k.push.apply(k,O||[]),s()}function s(){for(var n,l=0;l<k.length;l++){for(var v=k[l],O=!0,y=1;y<v.length;y++){var u=v[y];m[u]!==0&&(O=!1)}O&&(k.splice(l--,1),n=h(h.s=v[0]))}return n}var e={},m={6:0},k=[];function h(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return I[n].call(l.exports,l,l.exports,h),l.l=!0,l.exports}h.m=I,h.c=e,h.d=function(n,l,v){h.o(n,l)||Object.defineProperty(n,l,{enumerable:!0,get:v})},h.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},h.t=function(n,l){if(l&1&&(n=h(n)),l&8||l&4&&typeof n=="object"&&n&&n.__esModule)return n;var v=Object.create(null);if(h.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:n}),l&2&&typeof n!="string")for(var O in n)h.d(v,O,function(y){return n[y]}.bind(null,O));return v},h.n=function(n){var l=n&&n.__esModule?function(){return n.default}:function(){return n};return h.d(l,"a",l),l},h.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},h.p="build/";var p=window.webpackJsonp=window.webpackJsonp||[],d=p.push.bind(p);p.push=o,p=p.slice();for(var A=0;A<p.length;A++)o(p[A]);var L=d;return k.push([639,0,4]),s()})({17:function(I,o){I.exports=moment},18:function(I,o,s){"use strict";(function(e,m){Object.defineProperty(o,"__esModule",{value:!0}),o.setloginStateChangeEvent=n,o.resetCheckAuth=l,o.setLoginState=v,o.checkLoginStateChanged=O,o.getLoginState=y,o.getUserId=u,o.clearLoginState=P,o.checkIfAuth=w;var k=s(19),h=!1,p=null,d=y(),A=u(),L=null;function n(T){L=T}function l(){h=!1}function v(T,E){e.set("loginstate",T,{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),E?e.set("userid",E,{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}):e.remove("userid",{sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),d=T,A=E,O()}function O(){return y()!==d||u()!==A?(L&&setTimeout(L,100),!0):!1}function y(){var T=e.get("loginstate");return T==="true"||T===!0}function u(){return e.get("userid")}function P(){e.remove("loginstate")}function w(T,E){var J=y();O()&&(h=!1),!h||typeof J=="undefined"?m.get(k.serverurl+"/me").done(function(R){R&&R.status==="ok"?(p=R,T(p),v(!0,R.id)):(E(),v(!1))}).fail(function(){E()}).always(function(){h=!0}):J?T(p):E()}o.default={checkAuth:h,profile:p,lastLoginState:d,lastUserId:A,loginStateChangeEvent:L}}).call(this,s(21),s(2))},19:function(I,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=o.DROPBOX_APP_KEY=window.DROPBOX_APP_KEY||"",m=o.domain=window.domain||"",k=o.urlpath=window.urlpath||"",h=o.debug=window.debug||!1,p=o.port=window.location.port,d=o.serverurl=window.location.protocol+"//"+(m||window.location.hostname)+(p?":"+p:"")+(k?"/"+k:"");window.serverurl=d;var A=o.noteid=decodeURIComponent(k?window.location.pathname.slice(k.length+1,window.location.pathname.length).split("/")[1]:window.location.pathname.split("/")[1]),L=o.noteurl=d+"/"+A,n=o.version=window.version},2:function(I,o){I.exports=$},255:function(I,o,s){"use strict";(function(e,m){Object.defineProperty(o,"__esModule",{value:!0});var k=s(35),h=w(k);o.saveHistory=E,o.saveStorageHistoryToServer=B,o.clearDuplicatedHistory=Y,o.removeHistory=K,o.writeHistory=V,o.getHistory=H,o.getStorageHistory=S,o.parseHistory=M,o.parseServerToHistory=N,o.parseStorageToHistory=z,o.postHistoryToServer=U,o.deleteServerHistory=x;var p=s(226),d=w(p),A=s(46),L=w(A),n=s(227),l=w(n),v=s(228),O=w(v),y=s(256),u=s(18),P=s(19);function w(r){return r&&r.__esModule?r:{default:r}}window.migrateHistoryFromTempCallback=null,T();function T(){(0,O.default)("#tempid")&&e.get(serverurl+"/temp",{tempid:(0,O.default)("#tempid")}).done(function(r){r&&r.temp&&S(function(t){(!t||t.length===0)&&J(JSON.parse(r.temp))})}).always(function(){var r=location.hash.split("#")[1];r=r.split("&");for(var t=0;t<r.length;t++)r[t].indexOf("tempid")===0&&(r.splice(t,1),t--);r=r.join("&"),location.hash=r,window.migrateHistoryFromTempCallback&&window.migrateHistoryFromTempCallback()})}function E(r){(0,u.checkIfAuth)(function(){R(r)},function(){J(r)})}function J(r){d.default.set("notehistory",(0,h.default)(r))}function R(r){e.post(serverurl+"/history",{history:(0,h.default)(r)})}function B(r){var t=d.default.get("notehistory");t&&e.post(serverurl+"/history",{history:t}).done(function(i){r(i)})}function Y(r){for(var t=[],i=0;i<r.length;i++){for(var f=!1,D=0;D<t.length;D++){var C=r[i].id.replace(/=+$/,""),X=t[D].id.replace(/=+$/,"");if(C===X||r[i].id===t[D].id||!r[i].id||!t[D].id){var G=typeof r[i].time=="number"?m(r[i].time):m(r[i].time,"MMMM Do YYYY, h:mm:ss a"),Q=typeof t[i].time=="number"?m(t[i].time):m(t[i].time,"MMMM Do YYYY, h:mm:ss a");G>=Q&&(t[D]=r[i]),f=!0;break}}f||t.push(r[i])}return t}function W(r,t,i,f,D,C){return r&&C.push({id:r,text:t,time:i,tags:f,pinned:D}),C}function K(r,t){for(var i=0;i<t.length;i++)t[i].id===r&&(t.splice(i,1),i-=1);return t}function V(r,t){(0,u.checkIfAuth)(function(){},function(){a(r,t)})}function a(r,t){var i=d.default.get("notehistory"),f=void 0;i&&typeof i=="string"?f=JSON.parse(i):f=[];var D=g(r,t,f);J(D)}Array.isArray||(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"});function c(r,t){var i=P.urlpath?location.pathname.slice(P.urlpath.length+1,location.pathname.length).split("/")[1]:location.pathname.split("/")[1];return{id:i,text:r,time:m().valueOf(),tags:t}}function g(r,t,i){for(var f=c(r,t),D=!1,C=0;C<i.length;C++)if(i[C].id===f.id&&i[C].pinned){D=!0;break}return i=K(f.id,i),i=W(f.id,f.text,f.time,f.tags,D,i),i=Y(i),i}function H(r){(0,u.checkIfAuth)(function(){b(r)},function(){S(r)})}function b(r){e.get(serverurl+"/history").done(function(t){t.history&&r(t.history)}).fail(function(t,i,f){console.error(t.responseText)})}function S(r){var t=d.default.get("notehistory");t&&(typeof t=="string"&&(t=JSON.parse(t)),r(t)),r([])}function M(r,t){(0,u.checkIfAuth)(function(){N(r,t)},function(){z(r,t)})}function N(r,t){e.get(serverurl+"/history").done(function(i){i.history&&F(r,i.history,t)}).fail(function(i,f,D){console.error(i.responseText)})}function z(r,t){var i=d.default.get("notehistory");i&&(typeof i=="string"&&(i=JSON.parse(i)),F(r,i,t)),F(r,[],t)}function F(r,t,i){if(i){if(!r||!t)i(r,t);else if(t&&t.length>0)for(var f=0;f<t.length;f++){try{var D=l.default.decompressFromBase64(t[f].id);D&&(0,y.checkNoteIdValid)(D)&&(t[f].id=(0,y.encodeNoteId)(D))}catch(X){console.error(X)}var C=typeof t[f].time=="number"?m(t[f].time):m(t[f].time,"MMMM Do YYYY, h:mm:ss a");t[f].timestamp=C.valueOf(),t[f].fromNow=C.fromNow(),t[f].time=C.format("llll"),t[f].text=(0,L.default)(t[f].text).escapeHTML().s,t[f].tags=t[f].tags&&t[f].tags.length>0?(0,L.default)(t[f].tags).escapeHTML().s.split(","):[],t[f].id&&r.get("id",t[f].id).length===0&&r.add(t[f])}}else return;i(r,t)}function U(r,t,i){e.post(serverurl+"/history/"+r,t).done(function(f){return i(null,f)}).fail(function(f,D,C){return console.error(f.responseText),i(C,null)})}function x(r,t){e.ajax({url:serverurl+"/history"+(r?"/"+r:""),type:"DELETE"}).done(function(i){return t(null,i)}).fail(function(i,f,D){return console.error(i.responseText),t(D,null)})}}).call(this,s(2),s(17))},256:function(I,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.checkNoteIdValid=d,o.encodeNoteId=A,o.decodeNoteId=L;var m=s(273),k=h(m);function h(n){return n&&n.__esModule?n:{default:n}}var p=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function d(n){var l=n.match(p);return!!(l&&l.length===1)}function A(n){var l=n.replace(/-/g,""),v=e.from(l,"hex");return k.default.encode(v)}function L(n){var l=k.default.toBuffer(n).toString("hex"),v=[];return v.push(l.substr(0,8)),v.push(l.substr(8,4)),v.push(l.substr(12,4)),v.push(l.substr(16,4)),v.push(l.substr(20,12)),v.join("-")}}).call(this,s(26).Buffer)},32:function(I,o,s){"use strict";(function(e,m){var k=s(235),h=n(k),p=s(238),d=n(p),A=s(214),L=n(A);function n(u){return u&&u.__esModule?u:{default:u}}var l=s(33);function v(){if(e.get("locale")){var u=e.get("locale");return u==="zh"&&(u="zh-TW"),u}var P=navigator.language||navigator.userLanguage,w=P.split("-")[0],T=(0,L.default)(l);return T.includes(w)?w:T.includes(P)?P:"en"}var O=v(),y=m(".ui-locale");(0,d.default)(l).forEach(function(u){var P=(0,h.default)(u,2),w=P[0],T=P[1];y.append('<option value="'+w+'">'+T+"</option>")}),y.length>0&&(y.val(O),m('select.ui-locale option[value="'+O+'"]').attr("selected","selected"),y.change(function(){e.set("locale",m(this).val(),{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),window.location.reload()})),window.moment.locale(O)}).call(this,s(21),s(2))},33:function(I){I.exports=JSON.parse('{"en":"English","zh-CN":"\u7B80\u4F53\u4E2D\u6587","zh-TW":"\u7E41\u9AD4\u4E2D\u6587","fr":"Fran\xE7ais","de":"Deutsch","ja":"\u65E5\u672C\u8A9E","es":"Espa\xF1ol","ca":"Catal\xE0","el":"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC","pt":"Portugu\xEAs","it":"Italiano","tr":"T\xFCrk\xE7e","ru":"\u0420\u0443\u0441\u0441\u043A\u0438\u0439","nl":"Nederlands","hr":"Hrvatski","pl":"Polski","uk":"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430","hi":"\u0939\u093F\u0928\u094D\u0926\u0940","sv":"Svenska","eo":"Esperanto","da":"Dansk","ko":"\uD55C\uAD6D\uC5B4","id":"Bahasa Indonesia","sr":"C\u0440\u043F\u0441\u043A\u0438","vi":"Ti\u1EBFng Vi\u1EC7t","ar":"\u0627\u0644\u0639\u0631\u0628\u064A\u0629","cs":"\u010Cesky","sk":"Slovensky","ml":"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02","bg":"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A","fa":"\u0641\u0627\u0631\u0633\u06CC","gl":"Galego","he":"\u05E2\u05D1\u05E8\u05D9\u05EA","hu":"Magyar","oc":"Occitan","pt-br":"Portugu\xEAs do Brasil"}')},34:function(I,o,s){"use strict";s.r(o)},441:function(I,o,s){"use strict";(function(e,m){var k=s(35),h=O(k),p=s(18),d=s(255),A=s(212),L=s(219),n=O(L),l=s(46),v=O(l);function O(a){return a&&a.__esModule?a:{default:a}}s(32),s(454),s(34);var y={valueNames:["id","text","timestamp","fromNow","time","tags","pinned"],item:`<li class="col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <span class="id" style="display:none;"></span>
          <a href="#">
            <div class="item">
              <div class="ui-history-pin fa fa-thumb-tack fa-fw"></div>
              <div class="ui-history-close fa fa-close fa-fw" data-toggle="modal" data-target=".delete-history-modal"></div>
              <div class="content">
                <h4 class="text"></h4>
                <p>
                  <i><i class="fa fa-clock-o"></i> visited </i><i class="fromNow"></i>
                  <br>
                  <i class="timestamp" style="display:none;"></i>
                  <i class="time"></i>
                </p>
                <p class="tags"></p>
              </div>
            </div>
          </a>
        </li>`,page:18,pagination:[{outerWindow:1}]},u=new n.default("history",y);window.migrateHistoryFromTempCallback=P,(0,p.setloginStateChangeEvent)(P),P();function P(){(0,p.checkIfAuth)(function(a){e(".ui-signin").hide(),e(".ui-or").hide(),e(".ui-welcome").show(),a.photo?e(".ui-avatar").prop("src",a.photo).show():e(".ui-avatar").prop("src","").hide(),e(".ui-name").html(a.name),e(".ui-signout").show(),e(".ui-history").click(),(0,d.parseServerToHistory)(u,T)},function(){e(".ui-signin").show(),e(".ui-or").show(),e(".ui-welcome").hide(),e(".ui-avatar").prop("src","").hide(),e(".ui-name").html(""),e(".ui-signout").hide(),(0,d.parseStorageToHistory)(u,T)})}e(".masthead-nav li").click(function(){e(this).siblings().removeClass("active"),e(this).addClass("active")}),e('a[href="#"]').click(function(a){a.preventDefault()}),e(".ui-home").click(function(a){e("#home").is(":visible")||(e(".section:visible").hide(),e("#home").fadeIn())}),e(".ui-history").click(function(){e("#history").is(":visible")||(e(".section:visible").hide(),e("#history").fadeIn())});function w(){e("#history-list").children().length>0?(e(".pagination").show(),e(".ui-nohistory").hide(),e(".ui-import-from-browser").hide()):e("#history-list").children().length===0&&(e(".pagination").hide(),e(".ui-nohistory").slideDown(),(0,d.getStorageHistory)(function(a){a&&a.length>0&&(0,p.getLoginState)()&&u.items.length===0&&e(".ui-import-from-browser").slideDown()}))}function T(a,c){w(),a.sort("",{sortFunction:function(F,U){var x=F.values(),r=U.values();return x.pinned&&!r.pinned?-1:!x.pinned&&r.pinned?1:x.timestamp>r.timestamp?-1:x.timestamp<r.timestamp?1:0}});for(var g=[],H=0,b=a.items.length;H<b;H++){var S=a.items[H]._values.tags;if(S&&S.length>0)for(var M=0;M<S.length;M++){var N=!1;g.includes(S[M])&&(N=!0),N||g.push(S[M])}}V(g)}u.on("updated",function(a){for(var c=0,g=a.items.length;c<g;c++){var H=a.items[c];if(H.visible()){var b=e(H.elm),S=H._values,M=b.find("a"),N=b.find(".ui-history-pin"),z=b.find(".tags");M.attr("href",serverurl+"/"+S.id),S.pinned?N.addClass("active"):N.removeClass("active");var F=S.tags;if(F&&F.length>0&&z.children().length<=0){for(var U=[],x=0;x<F.length;x++)U.push("<span class='label label-default'>"+F[x]+"</span>");z.html(U.join(" "))}}}e(".ui-history-close").off("click"),e(".ui-history-close").on("click",E),e(".ui-history-pin").off("click"),e(".ui-history-pin").on("click",J)});function E(a){a.preventDefault();var c=e(this).closest("a").siblings("span").html(),g=u.get("id",c)[0]._values;e(".ui-delete-history-modal-msg").text("Do you really want to delete below history?"),e(".ui-delete-history-modal-item").html('<i class="fa fa-file-text"></i> '+g.text+'<br><i class="fa fa-clock-o"></i> '+g.time),B=!1,Y=c}function J(a){a.preventDefault();var c=e(this),g=c.closest("a").siblings("span").html(),H=u.get("id",g)[0],b=H._values,S=b.pinned;b.pinned?(S=!1,H._values.pinned=!1):(S=!0,H._values.pinned=!0),(0,p.checkIfAuth)(function(){(0,d.postHistoryToServer)(g,{pinned:S},function(M,N){M||(S?c.addClass("active"):c.removeClass("active"))})},function(){(0,d.getHistory)(function(M){for(var N=0;N<M.length;N++)if(M[N].id===g){M[N].pinned=S;break}(0,d.saveHistory)(M),S?c.addClass("active"):c.removeClass("active")})})}setInterval(R,6e4);function R(){for(var a=e(".item").toArray(),c=0;c<a.length;c++){var g=e(a[c]),H=parseInt(g.find(".timestamp").text());g.find(".fromNow").text(m(H).fromNow())}}var B=!1,Y=null;function W(){(0,p.checkIfAuth)(function(){(0,d.deleteServerHistory)(Y,function(a,c){a||(B?(u.clear(),w()):(u.remove("id",Y),w())),e(".delete-history-modal").modal("hide"),Y=null,B=!1})},function(){if(B)(0,d.saveHistory)([]),u.clear(),w(),Y=null;else{if(!Y)return;(0,d.getHistory)(function(a){var c=(0,d.removeHistory)(Y,a);(0,d.saveHistory)(c),u.remove("id",Y),w(),Y=null})}e(".delete-history-modal").modal("hide"),B=!1})}e(".ui-delete-history-modal-confirm").click(function(){W()}),e(".ui-import-from-browser").click(function(){(0,d.saveStorageHistoryToServer)(function(){(0,d.parseStorageToHistory)(u,T)})}),e(".ui-save-history").click(function(){(0,d.getHistory)(function(a){var c=(0,h.default)(a),g=new Blob([c],{type:"application/json;charset=utf-8"});(0,A.saveAs)(g,"hedgedoc_history_"+m().format("YYYYMMDDHHmmss"),!0)})}),e(".ui-open-history").bind("change",function(a){var c=a.target.files||a.dataTransfer.files,g=c[0],H=new FileReader;H.onload=function(){var b=JSON.parse(H.result);!H.result||((0,d.getHistory)(function(S){var M=S.concat(b);M=(0,d.clearDuplicatedHistory)(M),(0,d.saveHistory)(M),(0,d.parseHistory)(u,T)}),e(".ui-open-history").replaceWith(e(".ui-open-history").val("").clone(!0)))},H.readAsText(g)}),e(".ui-clear-history").click(function(){e(".ui-delete-history-modal-msg").text("Do you really want to clear all history?"),e(".ui-delete-history-modal-item").html("There is no turning back."),B=!0,Y=null}),e(".ui-refresh-history").click(function(){var a=e(".ui-use-tags").select2("val");e(".ui-use-tags").select2("val",""),u.filter();var c=e(".search").val();e(".search").val(""),u.search(),e("#history-list").slideUp("fast"),e(".pagination").hide(),(0,p.resetCheckAuth)(),u.clear(),(0,d.parseHistory)(u,function(g,H){T(g,H),e(".ui-use-tags").select2("val",a),e(".ui-use-tags").trigger("change"),u.search(c),e(".search").val(c),w(),e("#history-list").slideDown("fast")})}),e(".ui-delete-user-modal-cancel").click(function(){e(".ui-delete-user").parent().removeClass("active")}),e(".ui-logout").click(function(){(0,p.clearLoginState)(),location.href=serverurl+"/logout"});var K=[];e(".ui-use-tags").select2({placeholder:e(".ui-use-tags").attr("placeholder"),multiple:!0,data:function(){return{results:K}}}),e(".select2-input").css("width","inherit"),V([]);function V(a){for(var c=0;c<a.length;c++)a[c]={id:c,text:(0,v.default)(a[c]).unescapeHTML().s};K=a}e(".ui-use-tags").on("change",function(){for(var a=[],c=e(this).select2("data"),g=0;g<c.length;g++)a.push(c[g].text);a.length>0?u.filter(function(H){var b=H.values();if(!b.tags)return!1;for(var S=!1,M=0;M<a.length;M++)if(b.tags.includes(a[M])){S=!0;break}return S}):u.filter(),w()}),e(".search").keyup(function(){w()}),e(".signin-modal").on("shown.bs.modal",function(){var a=e("input[name=username]"),c=e("input[name=email]"),g=e("input[name=openid_identifier]");a.length===1?a.focus():c.length===1?c.focus():g.length===1&&g.focus()})}).call(this,s(2),s(17))},454:function(I,o,s){"use strict";s.r(o)},639:function(I,o,s){s(222),I.exports=s(441)}});

//# sourceMappingURL=cover.2a1c9e25d162be4b11a1.js.map