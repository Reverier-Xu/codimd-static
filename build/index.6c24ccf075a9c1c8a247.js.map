{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"moment\"","webpack:///./public/js/lib/common/login.js","webpack:///./public/js/lib/config/index.js","webpack:///external \"$\"","webpack:///./public/js/reveal-markdown-exposed.js","webpack:///./public/js/reveal-markdown.js","webpack:///./public/vendor/md-toc.js","webpack:///./node_modules/codemirror/addon/search/searchcursor.js","webpack:///./public/css/extra.css?2257","webpack:///./public/css/slide-preview.css?e2a7","webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///./node_modules/list.js/src/index.js","webpack:///./node_modules/store/src/util.js","webpack:///./node_modules/codemirror/addon/dialog/dialog.js","webpack:///./node_modules/store/dist/store.legacy.js","webpack:///./node_modules/lz-string/libs/lz-string.js","webpack:///./node_modules/wurl/wurl.js","webpack:///./node_modules/list.js/src/utils/get-by-class.js","webpack:///./node_modules/list.js/src/utils/extend.js","webpack:///./node_modules/list.js/src/utils/index-of.js","webpack:///./node_modules/list.js/src/utils/to-array.js","webpack:///./node_modules/list.js/src/utils/to-string.js","webpack:///./node_modules/list.js/src/item.js","webpack:///./public/js/extra.js","webpack:///./public/js/history.js","webpack:///./public/js/utils.js","webpack:///./node_modules/markdown-it-imsize/lib/imsize/types sync ^\\.\\/.*$","webpack:///./public/js/lib/modeType.js","webpack:///./node_modules/codemirror/addon/edit/matchbrackets.js","webpack:///./node_modules/codemirror/addon/fold/xml-fold.js","webpack:///./node_modules/highlight.js/styles/github-gist.css?9714","webpack:///./public/js/render.js","webpack:///./node_modules/base64url/index.js","webpack:///./node_modules/codemirror/lib/codemirror.js","webpack:///./node_modules/store/src/store-engine.js","webpack:///./public/js/locale.js","webpack:///./node_modules/store/storages/all.js","webpack:///./node_modules/store/storages/localStorage.js","webpack:///./node_modules/store/storages/oldFF-globalStorage.js","webpack:///./node_modules/store/storages/oldIE-userDataStorage.js","webpack:///./node_modules/store/storages/cookieStorage.js","webpack:///./node_modules/store/storages/sessionStorage.js","webpack:///./node_modules/store/storages/memoryStorage.js","webpack:///./node_modules/store/plugins/json2.js","webpack:///./node_modules/store/plugins/lib/json2.js","webpack:///./node_modules/base64url/dist/base64url.js","webpack:///./node_modules/base64url/dist/pad-string.js","webpack:///./node_modules/string-natural-compare/natural-compare.js","webpack:///./node_modules/list.js/src/utils/get-attribute.js","webpack:///./node_modules/list.js/src/add-async.js","webpack:///./node_modules/list.js/src/pagination.js","webpack:///./node_modules/list.js/src/parse.js","webpack:///./node_modules/list.js/src/templater.js","webpack:///./node_modules/list.js/src/search.js","webpack:///./node_modules/list.js/src/filter.js","webpack:///./node_modules/list.js/src/sort.js","webpack:///./public/css/site.css?cc32","webpack:///./node_modules/list.js/src/fuzzy-search.js","webpack:///./node_modules/list.js/src/utils/fuzzy.js","webpack:///./node_modules/visibilityjs/lib/visibility.core.js","webpack:///./node_modules/jquery-ui/ui/widget.js","webpack:///./public/js/lib/appState.js","webpack:///./node_modules/codemirror/addon/mode/overlay.js","webpack:///./node_modules/codemirror/addon/search/matchesonscrollbar.js","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/codemirror/addon/scroll/annotatescrollbar.js","webpack:///./node_modules/codemirror/addon/fold/foldcode.js","webpack:///./public/js/lib/editor/ui-elements.js","webpack:///./node_modules/jquery-ui/ui/version.js","webpack:///./node_modules/lz-string/libs/lz-string-exposed.js","webpack:///./public/js/index.js","webpack:///./node_modules/visibilityjs/index.js","webpack:///./node_modules/visibilityjs/lib/visibility.timers.js","webpack:///./node_modules/keymaster/keymaster.js","webpack:///./node_modules/turndown/lib/turndown.browser.es.js","webpack:///./node_modules/jquery-ui/ui/widgets/resizable.js","webpack:///./node_modules/jquery-ui/ui/widgets/mouse.js","webpack:///./node_modules/jquery-ui/ui/ie.js","webpack:///./node_modules/jquery-ui/ui/disable-selection.js","webpack:///./node_modules/jquery-ui/ui/plugin.js","webpack:///./node_modules/jquery-ui/themes/base/resizable.css?076b","webpack:///./node_modules/Idle.Js/build/idle.js","webpack:///./public/vendor/jquery-textcomplete/jquery.textcomplete.js","webpack:///./public/vendor/ot/ot.min.js","webpack:///./public/vendor/ot/text-operation.js","webpack:///./node_modules/randomcolor/randomColor.js","webpack:///./node_modules/spin.js/spin.js","webpack:///./public/js/lib/syncscroll.js","webpack:///./public/js/lib/editor/index.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/codemirror/keymap/sublime.js","webpack:///./node_modules/codemirror/keymap/emacs.js","webpack:///./node_modules/codemirror/keymap/vim.js","webpack:///./node_modules/codemirror/mode/gfm/gfm.js","webpack:///./node_modules/codemirror/mode/markdown/markdown.js","webpack:///./node_modules/codemirror/mode/xml/xml.js","webpack:///./node_modules/codemirror/mode/meta.js","webpack:///./node_modules/codemirror/addon/mode/simple.js","webpack:///./node_modules/codemirror/addon/mode/multiplex.js","webpack:///./node_modules/codemirror/addon/selection/active-line.js","webpack:///./node_modules/codemirror/addon/search/search.js","webpack:///./node_modules/codemirror/addon/search/jump-to-line.js","webpack:///./node_modules/codemirror/addon/search/match-highlighter.js","webpack:///./node_modules/codemirror/addon/scroll/simplescrollbars.js","webpack:///./node_modules/codemirror/addon/display/panel.js","webpack:///./node_modules/codemirror/addon/display/placeholder.js","webpack:///./node_modules/codemirror/addon/display/fullscreen.js","webpack:///./node_modules/codemirror/addon/display/autorefresh.js","webpack:///./node_modules/codemirror/addon/edit/closebrackets.js","webpack:///./node_modules/codemirror/addon/edit/matchtags.js","webpack:///./node_modules/codemirror/addon/edit/closetag.js","webpack:///./node_modules/codemirror/addon/edit/continuelist.js","webpack:///./node_modules/codemirror/addon/comment/comment.js","webpack:///./node_modules/codemirror/addon/comment/continuecomment.js","webpack:///./node_modules/codemirror/addon/wrap/hardwrap.js","webpack:///./node_modules/codemirror/addon/fold/brace-fold.js","webpack:///./node_modules/codemirror/addon/fold/foldgutter.js","webpack:///./node_modules/codemirror/addon/fold/markdown-fold.js","webpack:///./node_modules/codemirror/addon/merge/merge.js","webpack:///./public/vendor/codemirror-spell-checker/spell-checker.min.js","webpack:///./public/vendor/inlineAttachment/inline-attachment.js","webpack:///./public/vendor/inlineAttachment/codemirror.inline-attachment.js","webpack:///./public/js/lib/editor/utils.js","webpack:///./public/js/lib/editor/config.js","webpack:///./public/js/lib/editor/statusbar.html","webpack:///./public/js/lib/editor/toolbar.html","webpack:///./public/css/ui/toolbar.css?b16c","webpack:///./public/vendor/showup/showup.js","webpack:///./public/css/index.css?d6eb","webpack:///external \"io\"","webpack:///./node_modules/list.js/src/utils/events.js","webpack:///./node_modules/list.js/src/utils/classes.js"],"names":["setloginStateChangeEvent","resetCheckAuth","setLoginState","checkLoginStateChanged","getLoginState","getUserId","clearLoginState","checkIfAuth","checkAuth","profile","lastLoginState","lastUserId","loginStateChangeEvent","func","bool","id","Cookies","set","expires","sameSite","window","cookiePolicy","secure","location","protocol","remove","setTimeout","state","get","yesCallback","noCallback","cookieLoginState","$","serverurl","done","data","status","fail","always","DROPBOX_APP_KEY","domain","urlpath","debug","port","hostname","noteid","decodeURIComponent","pathname","slice","length","split","noteurl","version","root","factory","exports","module","RevealMarkdown","initialize","DEFAULT_SLIDE_SEPARATOR","DEFAULT_NOTES_SEPARATOR","DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR","DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR","SCRIPT_END_PLACEHOLDER","section","template","querySelector","text","textContent","replace","RegExp","leadingWs","match","leadingTabs","attributes","result","i","len","name","value","test","push","join","options","separator","notesSeparator","content","getSlidifyOptions","notesMatch","trim","markdown","separatorRegex","verticalSeparator","horizontalSeparatorRegex","matches","lastIndex","isHorizontal","wasHorizontal","sectionStack","exec","substring","index","markdownSections","Array","forEach","child","createMarkdownSlide","sections","document","querySelectorAll","getAttribute","xhr","XMLHttpRequest","url","datacharset","overrideMimeType","onreadystatechange","readyState","outerHTML","slidify","responseText","getForwardedAttributes","open","send","e","alert","getMarkdownFromSlide","innerHTML","node","elementTarget","mardownClassesInElementsRegex","mardownClassRegex","nodeValue","matchesClass","classes","substr","whiteListAttr","indexOf","setAttribute","element","previousElement","separatorElementAttributes","separatorSectionAttributes","childNodes","undefined","previousParentElement","childElement","j","aPreviousChildElement","tagName","parentSection","nodeName","nodeType","Node","COMMENT_NODE","addAttributes","addAttributeInElement","notes","rendered","md","render","postProcess","parentNode","appendChild","processSlides","convertSlides","updateLastChange","updateLastChangeUser","updateOwner","renderTitle","renderFilename","renderTags","isValidURL","parseMeta","finishView","removeDOMEvents","exportToRawHTML","exportToHTML","generateToc","smoothHashScroll","autoLinkify","deduplicatedHeaderId","renderTOC","scrollToHash","require","ui","createtime","lastchangetime","lastchangeui","statusChanged","statusCreated","time","user","nouser","ownerui","hide","show","html","moment","fromNow","attr","format","setInterval","lastchangeuser","lastchangeuserprofile","icon","children","tooltip","photo","owner","ownerprofile","styleString","view","title","meta","h1s","find","first","getTitle","filename","tags","rawtags","metaTags","each","key","codes","found","newText","stripTags","s","str","URL","includes","edit","toc","tocAffix","lang","dir","breaks","removeAttr","viewAjaxCallback","spaceregex","notinhtmltagregex","coloregex","source","nameregex","timeregex","nameandtimeregex","lis","removeClass","sortByDepth","toArray","li","clone","p","replaceExtraTags","disabled","editor","havePermission","toLowerCase","parentElement","change","toggleTodoEvent","tagColor","closest","addClass","css","click","imgPlayiframe","vimeoLink","ajax","type","encodeURIComponent","jsonp","dataType","success","image","thumbnail_url","prepend","gist","sequences","$value","$ele","parent","sequence","sequenceDiagram","theme","unwrap","svg","err","append","console","warn","flow","chart","flowchart","parse","drawSVG","fill","graphvizs","Viz","graphviz","Error","mermaids","mermaid","startOnLoad","mermaidAPI","init","errormessage","abcs","abcjs","renderAbc","images","onload","blockquote","blockquoteP","blockquoteColor","$html","iframe","caption","inner","height","width","ratio","PDFObject","embed","langDiv","reallang","className","codeDiv","code","unescapeHTML","Prism","highlight","languages","wiki","makefile","hljs","listLanguages","highlightAuto","mathjaxdivs","MathJax","Hub","Queue","linkTag","currentLocation","hash","href","toString","linenumberdivs","hasClass","startnumber","parseInt","last","metaError","warning","domevents","concat","filter","elem","pos","self","l","callback","fetch","then","fr","FileReader","response","blob","readAsDataURL","src","eles","toDataURL","dataURL","style","area","generateCleanHTML","Blob","fn","ar","map","parents","elt","sort","a","b","startline","line","getLine","checked","replacements","replaceRange","ch","history","pushState","search","tocExpand","toggle","target","Toc","level","top","class","ulClass","targetId","process","getHeaderContent","tocMenu","backtotop","gotobottom","checkExpandToggle","preventDefault","stopPropagation","scrollToTop","removeHash","scrollToBottom","hashElements","$element","on","$hash","stop","animate","scrollTop","offset","anchorForId","anchor","createElement","createHeaderId","headerContent","headerIds","slug","slugifyWithUTF8","linkifyHeaderStyle","idBase","has","add","linkifyAnchors","containingElement","headers","getElementsByTagName","header","getElementsByClassName","insertBefore","firstChild","contentBlock","headerHTML","$header","newId","$headerLink","allHeaders","changeHeaderId","duplicatedHeaders","tocs","TOC","replaceWith","escapeHTML","showlinenumbers","lines","linenumbers","continuelinenumber","linegutter","langPrefix","linkify","typographer","highlightRender","use","beforeMath","afterMath","beforeInlineMath","afterInlineMath","beforeDisplayMath","afterDisplayMath","shortcuts","emojify","setConfig","blacklist","elements","img_dir","ignore_emoticons","renderer","rules","emoji","token","idx","markup","tokens","env","attrJoin","info","renderToken","arguments","markdownitContainer","renderContainer","defaultImageRender","list_item_open","blockquote_open","heading_open","fence","utils","unescapeAll","langName","highlighted","escapeHtml","renderAttrs","youtubePlugin","Plugin","videoid","div","thumbnailSrc","vimeoPlugin","gistPlugin","gistid","tocPlugin","slidesharePlugin","slideshareid","speakerdeckPlugin","speakerdeckid","pdfPlugin","pdfurl","emojijsPlugin","emojiNames","item","bMarks","max","eMarks","start","end","silent","blkIndent","tShift","jsyaml","safeLoad","block","ruler","before","alt","metaPlugin","saveHistory","saveStorageHistoryToServer","clearDuplicatedHistory","removeHistory","writeHistory","getHistory","getStorageHistory","parseHistory","parseServerToHistory","parseStorageToHistory","postHistoryToServer","deleteServerHistory","migrateHistoryFromTempCallback","migrateHistoryFromTemp","tempid","temp","olddata","saveHistoryToStorage","JSON","splice","notehistory","saveHistoryToServer","store","post","newnotehistory","newTime","pinned","writeHistoryToStorage","generateHistory","isArray","Object","prototype","call","arg","valueOf","renderHistory","addHistory","getServerHistory","error","list","parseToHistory","LZString","decompressFromBase64","timestamp","noteId","checkNoteIdValid","encodeNoteId","decodeNoteId","uuidRegex","hexStr","Buffer","from","base64url","encode","encodedId","toBuffer","idParts","both","filterXSS","linkRegex","dataUriRegex","whiteList","ol","kbd","summary","ruby","rp","rt","figure","figcaption","filterXSSOptions","allowCommentTag","onIgnoreTag","tag","onTagAttr","isWhiteAttr","escapeAttrValue","onIgnoreTagAttr","preventXSS","supportedLanguages","userLang","navigator","language","userLanguage","userLangCode","supportedLanguagesList","detectLang","localeSelector","isoCode","nativeName","val","reload","locale","syncscroll","currentMode","modeType","nightMode","getUIElements","spinner","toolbar","shortStatus","new","publish","extra","revision","slide","download","rawhtml","export","dropbox","snippet","import","clipboard","mode","night","infobar","lastchange","nolastchangeuser","permission","label","freely","editable","locked","private","limited","protected","delete","affix","dropdown","codemirror","codemirrorScroll","codemirrorSizer","codemirrorSizerInner","resize","handle","syncToggle","modal","snippetImportProjects","snippetImportSnippets","defaultTextHeight","viewportMargin","defaultEditorMode","idleTime","updateViewDebounce","cursorMenuThrottle","cursorActivityDebounce","cursorAnimatePeriod","supportContainers","supportCodeModes","supportCharts","supportHeaders","supportReferrals","supportExternals","supportExtraTags","command","personalInfo","color","statusType","connected","msg","fa","online","offline","loaded","needRefresh","isDirty","editShown","visibleXS","visibleSM","visibleMD","visibleLG","isTouchDevice","documentElement","currentStatus","lastInfo","needRestore","cursor","scroll","left","selections","onlineUsers","fileTypes","pl","cgi","js","php","sh","rb","py","textit","getElementById","editorInstance","Editor","opts","radius","corners","rotate","direction","speed","trail","shadow","hwaccel","zIndex","Spinner","spin","idle","Idle","onAway","isAway","emitUserStatus","updateOnlineStatus","onAwayBack","setHaveUnreadChanges","updateTitleReminder","awayTimeout","onActive","haveUnreadChanges","Visibility","hidden","setOption","socket","disconnect","showStatus","setRefreshModal","setNeedRefresh","wasFocus","editorHasFocus","getInputField","blur","focus","refresh","ready","checkAway","checkResponsive","scrollbarStyle","getOption","checkEditorStyle","$body","showUp","upClass","downClass","changeMode","checkLayout","checkTocStyle","checkCursorMenu","windowResize","windowResizeDebounce","_","debounce","windowResizeInner","autoSyncscroll","updateScrollspy","Infinity","buildCursor","navbarHieght","outerHeight","is","appState","lastEditorWidth","previousFocusOnEditor","desireHeight","statusBar","toolBar","checkEditorScrollbar","setSize","resizable","handles","maxWidth","minWidth","create","preventSyncScrollToView","preventSyncScrollToEdit","hover","checkSyncToggle","delay","fadeIn","fadeOut","operation","checkEditorScrollbarInner","scrollInfo","getScrollInfo","scrollTo","paddingRight","parseFloat","right","outerWidth","newbool","rightMargin","affixLeftMargin","enoughForAffixToc","generateScrollspy","num","shortMsg","shortLabel","lastMode","lockNavbar","saveInfo","responsiveClass","scrollClass","replaceState","addStatusBar","updateStatusBar","addToolBar","body","updateView","restoreInfo","scrollspy","modeIcon","unlockNavbar","prop","appendTo","getValue","event","files","errorMessage","Dropbox","save","accesstoken","baseURL","projects","path_with_namespace","project","snippets_enabled","permissions","project_access","group_access","access_level","showMessageModal","link","importFromUrl","linkType","multiselect","extensions","choose","revisions","revisionViewer","revisionInsert","revisionDelete","revisionInsertAnnotation","revisionDeleteAnnotation","revisionList","revisionTime","parseRevisions","initRevisionViewer","container","display","wrapper","scroller","checkRevisionViewer","_revisions","lastRevision","itemHeading","itemText","selectRevision","lastScrollInfo","setValue","patch","bias","currIndex","start1","diffs","diff","prePos","postPos","posFromIndex","to","markText","update","revisionViewerTextArea","CodeMirror","fromTextArea","lineNumbers","lineWrapping","showCursorWhenSelecting","inputStyle","gutters","flattenSpans","addModeClass","readOnly","autoRefresh","annotateScrollbar","scrollHeight","headerMap","applyScrollspyActive","active","parseToEditor","gisturl","contents","replaceAll","snippeturl","accessToken","fullURL","fileInfo","file_name","raw","visibility_level","visibility","ret","redirect","turndownService","TurndownService","defaultReplacement","isBlock","parsed","turndown","lastLine","method","extension","pop","complete","toggleMode","toggleNightMode","emitPermission","emit","isActive","enabled","_permission","newPermission","refreshView","userid","login","io","connect","path","query","timeout","reconnectionAttempts","apply","message","retryTimer","cmClient","cursorActivity","clearInterval","minimumCompatibleVersion","authors","authorship","authorMarks","addTextMarkers","hasOwnProperty","updatetime","updateAuthorship","updateAuthorshipInner","gutter","textmarkers","mark","author","initMark","addStyleRule","added","styleElement","styleSheet","sheet","insertRule","cssRules","havePendingOperation","atom","preLine","postLine","initMarkAndCheckGutter","startLine","endLine","_postPos","_prePos","eachLine","iterateLine","allTextMarks","getAllMarks","_textMarker","textMarker","obj","clear","rgbcolor","hex2rgb","colorString","red","green","blue","rule","lineNumber","lineNo","currMark","gutterMarkers","setGutterMarker","placement","updateInfo","updatePermission","config","docmaxlength","nocontent","urlMode","updateViewInner","updateHistory","EditorClient","ot","SocketIOAdapter","CodeMirrorAdapter","synchronized_","bodyMismatch","setDoc","force","editorAdapter","ignoreNextChange","clearHistory","setHistory","undoManager","undoStack","redoStack","setState","initializeClientList","initializeClients","clients","serverReconnect","users","valueNames","onlineUserList","List","shortOnlineUserList","_onlineUsers","deduplicateOnlineUsers","items","foundindex","values","sortOnlineUserList","renderUserStatusList","sortFunction","usera","userb","useraIsSelf","userbIsSelf","userstatus","elm","usericon","extend","userStatusCache","userStatus","coord","ele","tagRightMargin","tagBottomMargin","docWidth","editorHeight","padding","docTopOffset","position","offsetLeft","offsetTop","Math","doc","charCoords","iconClass","cursorbar","borderLeft","cursortag","hideCursorTagDelay","hideCursorTagTimer","switchMode","switchTag","hideCursorTag","clearTimeout","checkCursorTag","duration","queue","cm","maxLength","delta","indexFromPos","ignoreEmitEvents","removeNullByte","enforceMaxLength","isIgnoreEmitEvent","origin","canceled","changes","docLength","newViewportMargin","postUpdateEvent","getCursor","cursorActivityInner","statusSelection","selection","ranges","head","selectionCharCount","abs","selectionText","scrollLeft","listSelections","setCursor","setSelections","scrollIntoView","lastResult","lastMeta","slideOptions","slides","partialUpdate","updateDataAttrs","updateHistoryDebounce","updateHistoryInner","des","copyAttribute","tar","rawSrc","cloneAndRemoveDataAttr","rawTar","srcEnd","tarEnd","srcLength","tarLength","overlap","rawTarStart","rawTarEnd","repeatAdd","repeatDiff","newElements","removeElements","insertAfter","el","rawEl","throttle","checkCursorMenuInner","menuRightMargin","menuBottomMargin","upSideDown","lastUpSideDown","reverseSortCursorMenu","textCompleteDropdown","isIndentCode","isInCode","checkAbove","matchInCode","checkInIndentCode","count","lineCount","isInContainer","isInContainerSyntax","matchInContainer","textcomplete","term","context","checkInCode","checkInContainer","checkInContainerSyntax","langs","charts","ending","checkBelow","execCommand","containers","extratag","referral","quote","external","strategy","Up","Right","Down","Left","Enter","Backspace","defaultExtraKeys","setupSyncAreas","clearMap","syncScrollToEdit","syncScrollToView","endline","addPart","table_open","bullet_list_open","ordered_list_open","link_open","paragraph_open","code_block","editScrollThrottle","viewScrollThrottle","buildMapThrottle","viewScrolling","editScrolling","editArea","viewArea","markdownArea","_editor","scrollMap","lineHeightMap","viewTop","viewBottom","buildMap","buildMapInner","acc","_scrollMap","nonEmptyList","_lineHeightMap","lineHeight","h","heightAtLine","round","linesCount","parts","$el","t","viewScrollingTimer","preventAnimate","lineIndex","lineDiff","posTo","topDiffPercent","posToNextDiff","textHeight","preLastLineHeight","clientHeight","preLastLineNo","preLastLinePos","ceil","posDiff","viewScrollingTimeoutInner","editScrollingTimer","floor","diffToBottom","editScrollingTimeoutInner","isMac","keyMap","default","macDefault","jumpToAddressBarKeymapName","jumpToAddressBarKeymapValue","F10","Esc","Pass","Tab","tab","spaces","regex","multiple","getSelection","getSelections","replaceSelection","Home","End","wrapTextWith","eventListeners","cb","args","bind","inlineAttach","inlineAttachment","editors","codemirror4","attach","toolBarTemplate","toolbarPanel","addPanel","makeBold","makeItalic","makeStrike","makeHeader","makeCode","makeQuote","makeGenericList","makeOrderedList","makeCheckList","makeLink","makeImage","makeTable","makeLine","makeComment","uploadImage","insertHeader","insertOnStartOfLines","insertLink","insertText","dataTransfer","onDrop","statusBarTemplate","statusCursor","statusFile","statusIndicators","statusIndent","statusKeymap","statusLength","statusTheme","statusSpellcheck","statusPreferences","statusPanel","setIndent","setKeymap","setTheme","setSpellcheck","setPreferences","cursorText","fileText","cookieIndentType","cookieTabSize","cookieSpaceUnits","widthLabel","widthInput","setType","setUnit","unit","select","cookieKeymap","sublime","emacs","vim","setKeymapLabel","keymap","restoreOverrideEditorKeymap","setOverrideBrowserKeymap","cookieTheme","themeToggle","checkTheme","cookieSpellcheck","spellcheckToggle","checkSpellcheck","num_loaded","spellcheckTimer","overrideBrowserKeymap","resetEditorKeymapToBrowserKeymap","cookieOverrideBrowserKeymap","backdrop","styleActiveLine","highlightSelectionMatches","indentUnit","continueComments","matchBrackets","autoCloseBrackets","matchTags","bothTags","autoCloseTags","foldGutter","extraKeys","otherCursors","placeholder","wrapSymbols","symbol","range","empty","getRange","anchorIndex","headIndex","preEndPos","preText","preIndex","postEndPos","postText","postIndex","cursorEnd","isImage","linkEnd","startOfLine","startOfLineText","cursorFrom","cursorTo","firstLineStart","lastLineEnd"],"mappings":"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ACA,SACA,OACA,OACA,aACA,YACA,OACA,QACA,aACA,SACA,QACA,QACA,OACA,OACA,OACA,OACA,iBACA,aACA,OACA,MACA,MACA,WACA,WACA,cACA,SACA,SACA,MACA,UACA,UACA,QACA,cACA,SACA,aACA,OACA,QACA,MACA,MACA,YACA,OACA,aACA,QACA,WACA,UACA,UACA,OACA,KACA,QACA,MACA,eACA,YACA,OACA,aACA,aACA,UACA,SACA,aACA,WACA,SACA,YACA,SACA,cACA,IACA,MACA,WACA,MACA,IACA,WACA,WACA,MACA,OACA,gBACA,OACA,MACA,QACA,SACA,SACA,OACA,QACA,QACA,YACA,MACA,MACA,MACA,WACA,OACA,QACA,SACA,SACA,UACA,QACA,eACA,MACA,MACA,SACA,KACA,OACA,aACA,OACA,QACA,gBACA,WACA,UACA,OACA,MACA,SACA,KACA,MACA,SACA,OACA,UAEIC,GAAgB,CAAC,WAAY,OAAQ,WAAY,UAAW,OAC5DC,EAAiB,CACrB,CACE7mB,KAAM,OACNyU,OAAQ,KAEV,CACEzU,KAAM,QACNyU,OAAQ,MAEV,CACEzU,KAAM,SACNyU,OAAQ,OAEV,CACEzU,KAAM,UACNyU,OAAQ,QAEV,CACEzU,KAAM,WACNyU,OAAQ,SAEV,CACEzU,KAAM,YACNyU,OAAQ,UAEV,CACEzU,KAAM,yBACNyU,OAAQ,iBAGNqS,GAAmB,CACvB,CACE9mB,KAAM,mBACNyU,OAAQ,MAEV,CACEzU,KAAM,gCACNyU,OAAQ,OAEV,CACEzU,KAAM,mBACNyU,OAAQ,OAEV,CACEzU,KAAM,0CACNyU,OAAQ,QAEV,CACEzU,KAAM,qBACNyU,OAAQ,OAEV,CACEzU,KAAM,yBACNyU,OAAQ,QAEV,CACEzU,KAAM,gCACNyU,OAAQ,QAEV,CACEzU,KAAM,0BACNyU,OAAQ,SAEV,CACEzU,KAAM,iCACNyU,OAAQ,SAEV,CACEzU,KAAM,+CACNyU,OAAQ,SAEV,CACEzU,KAAM,QACNyU,OAAQ,OAGNsS,GAAmB,CACvB,CACE/mB,KAAM,yBACNyU,OAAQ,WAEV,CA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","file":"index.6c24ccf075a9c1c8a247.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t10: 0,\n \t\t4: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".\" + {\"25\":\"ee5f023e73c706a53366\",\"26\":\"ffe25e11343db2a3c281\",\"27\":\"3cb43b612934cad31b12\",\"28\":\"bee5ebab9fd2c590f172\",\"29\":\"60b26a4b0b906ad026af\",\"30\":\"71ec26736f8817836bba\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([872,0,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = moment;","/* eslint-env browser, jquery */\n/* global Cookies */\n\nimport { serverurl } from '../config'\n\nlet checkAuth = false\nlet profile = null\nlet lastLoginState = getLoginState()\nlet lastUserId = getUserId()\nlet loginStateChangeEvent = null\n\nexport function setloginStateChangeEvent (func) {\n  loginStateChangeEvent = func\n}\n\nexport function resetCheckAuth () {\n  checkAuth = false\n}\n\nexport function setLoginState (bool, id) {\n  Cookies.set('loginstate', bool, {\n    expires: 365,\n    sameSite: window.cookiePolicy,\n    secure: window.location.protocol === 'https:'\n  })\n  if (id) {\n    Cookies.set('userid', id, {\n      expires: 365,\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n  } else {\n    Cookies.remove('userid', {\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n  }\n  lastLoginState = bool\n  lastUserId = id\n  checkLoginStateChanged()\n}\n\nexport function checkLoginStateChanged () {\n  if (getLoginState() !== lastLoginState || getUserId() !== lastUserId) {\n    if (loginStateChangeEvent) setTimeout(loginStateChangeEvent, 100)\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function getLoginState () {\n  const state = Cookies.get('loginstate')\n  return state === 'true' || state === true\n}\n\nexport function getUserId () {\n  return Cookies.get('userid')\n}\n\nexport function clearLoginState () {\n  Cookies.remove('loginstate')\n}\n\nexport function checkIfAuth (yesCallback, noCallback) {\n  const cookieLoginState = getLoginState()\n  if (checkLoginStateChanged()) checkAuth = false\n  if (!checkAuth || typeof cookieLoginState === 'undefined') {\n    $.get(`${serverurl}/me`)\n      .done(data => {\n        if (data && data.status === 'ok') {\n          profile = data\n          yesCallback(profile)\n          setLoginState(true, data.id)\n        } else {\n          noCallback()\n          setLoginState(false)\n        }\n      })\n      .fail(() => {\n        noCallback()\n      })\n      .always(() => {\n        checkAuth = true\n      })\n  } else if (cookieLoginState) {\n    yesCallback(profile)\n  } else {\n    noCallback()\n  }\n}\n\nexport default {\n  checkAuth,\n  profile,\n  lastLoginState,\n  lastUserId,\n  loginStateChangeEvent\n}\n","export const DROPBOX_APP_KEY = window.DROPBOX_APP_KEY || ''\n\nexport const domain = window.domain || '' // domain name\nexport const urlpath = window.urlpath || '' // sub url path, like: www.example.com/<urlpath>\nexport const debug = window.debug || false\n\nexport const port = window.location.port\nexport const serverurl = `${window.location.protocol}//${domain || window.location.hostname}${port ? ':' + port : ''}${urlpath ? '/' + urlpath : ''}`\nwindow.serverurl = serverurl\nexport const noteid = decodeURIComponent(urlpath ? window.location.pathname.slice(urlpath.length + 1, window.location.pathname.length).split('/')[1] : window.location.pathname.split('/')[1])\nexport const noteurl = `${serverurl}/${noteid}`\n\nexport const version = window.version\n","module.exports = $;","var ___EXPOSE_LOADER_IMPORT___ = require(\"-!../../node_modules/babel-loader/lib/index.js!./reveal-markdown.js\");\nvar ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = require(\"../../node_modules/expose-loader/dist/runtime/getGlobalThis.js\");\nvar ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"RevealMarkdown\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"RevealMarkdown\"] = ___EXPOSE_LOADER_IMPORT___;\nmodule.exports = ___EXPOSE_LOADER_IMPORT___;\n","/* eslint-env browser, jquery */\n\nimport { preventXSS, escapeAttrValue } from './render'\nimport { md } from './extra'\n\n/**\n * The reveal.js markdown plugin. Handles parsing of\n * markdown inside of presentations as well as loading\n * of external markdown documents.\n */\n(function (root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  } else {\n    // Browser globals (root is window)\n    root.RevealMarkdown = factory()\n    root.RevealMarkdown.initialize()\n  }\n}(this, function () {\n  const DEFAULT_SLIDE_SEPARATOR = '^\\r?\\n---\\r?\\n$'\n  const DEFAULT_NOTES_SEPARATOR = '^note:'\n  const DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR = '\\\\.element\\\\s*?(.+?)$'\n  const DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR = '\\\\.slide:\\\\s*?(\\\\S.+?)$'\n\n  const SCRIPT_END_PLACEHOLDER = '__SCRIPT_END__'\n\n  /**\n   * Retrieves the markdown contents of a slide section\n   * element. Normalizes leading tabs/whitespace.\n   */\n  function getMarkdownFromSlide (section) {\n    const template = section.querySelector('script')\n\n    // strip leading whitespace so it isn't evaluated as code\n    let text = (template || section).textContent\n\n    // restore script end tags\n    text = text.replace(new RegExp(SCRIPT_END_PLACEHOLDER, 'g'), '</script>')\n\n    const leadingWs = text.match(/^\\n?(\\s*)/)[1].length\n    const leadingTabs = text.match(/^\\n?(\\t*)/)[1].length\n\n    if (leadingTabs > 0) {\n      text = text.replace(new RegExp('\\\\n?\\\\t{' + leadingTabs + '}', 'g'), '\\n')\n    } else if (leadingWs > 1) {\n      text = text.replace(new RegExp('\\\\n? {' + leadingWs + '}', 'g'), '\\n')\n    }\n\n    return text\n  }\n\n  /**\n   * Given a markdown slide section element, this will\n   * return all arguments that aren't related to markdown\n   * parsing. Used to forward any other user-defined arguments\n   * to the output markdown slide.\n   */\n  function getForwardedAttributes (section) {\n    const attributes = section.attributes\n    const result = []\n\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      const name = attributes[i].name\n      const value = attributes[i].value\n\n      // disregard attributes that are used for markdown loading/parsing\n      if (/data-(markdown|separator|vertical|notes)/gi.test(name)) continue\n\n      if (value) {\n        result.push(name + '=\"' + value + '\"')\n      } else {\n        result.push(name)\n      }\n    }\n\n    return result.join(' ')\n  }\n\n  /**\n   * Inspects the given options and fills out default\n   * values for what's not defined.\n   */\n  function getSlidifyOptions (options) {\n    options = options || {}\n    options.separator = options.separator || DEFAULT_SLIDE_SEPARATOR\n    options.notesSeparator = options.notesSeparator || DEFAULT_NOTES_SEPARATOR\n    options.attributes = options.attributes || ''\n\n    return options\n  }\n\n  /**\n   * Helper function for constructing a markdown slide.\n   */\n  function createMarkdownSlide (content, options) {\n    options = getSlidifyOptions(options)\n\n    const notesMatch = content.split(new RegExp(options.notesSeparator, 'mgi'))\n\n    if (notesMatch.length === 2) {\n      content = notesMatch[0] + '<aside class=\"notes\" data-markdown>' + notesMatch[1].trim() + '</aside>'\n    }\n\n    // prevent script end tags in the content from interfering\n    // with parsing\n    content = content.replace(/<\\/script>/gi, SCRIPT_END_PLACEHOLDER)\n\n    return '<script type=\"text/template\">' + content + '</script>'\n  }\n\n  /**\n   * Parses a data string into multiple slides based\n   * on the passed in separator arguments.\n   */\n  function slidify (markdown, options) {\n    options = getSlidifyOptions(options)\n\n    const separatorRegex = new RegExp(options.separator + (options.verticalSeparator ? '|' + options.verticalSeparator : ''), 'mg')\n    const horizontalSeparatorRegex = new RegExp(options.separator)\n\n    let matches\n    let lastIndex = 0\n    let isHorizontal\n    let wasHorizontal = true\n    let content\n    const sectionStack = []\n\n    // iterate until all blocks between separators are stacked up\n    while ((matches = separatorRegex.exec(markdown)) !== null) {\n      // determine direction (horizontal by default)\n      isHorizontal = horizontalSeparatorRegex.test(matches[0])\n\n      if (!isHorizontal && wasHorizontal) {\n        // create vertical stack\n        sectionStack.push([])\n      }\n\n      // pluck slide content from markdown input\n      content = markdown.substring(lastIndex, matches.index)\n\n      if (isHorizontal && wasHorizontal) {\n        // add to horizontal stack\n        sectionStack.push(content)\n      } else {\n        // add to vertical stack\n        sectionStack[sectionStack.length - 1].push(content)\n      }\n\n      lastIndex = separatorRegex.lastIndex\n      wasHorizontal = isHorizontal\n    }\n\n    // add the remaining slide\n    (wasHorizontal ? sectionStack : sectionStack[sectionStack.length - 1]).push(markdown.substring(lastIndex))\n\n    let markdownSections = ''\n\n    // flatten the hierarchical stack, and insert <section data-markdown> tags\n    for (let i = 0, len = sectionStack.length; i < len; i++) {\n      // vertical\n      if (sectionStack[i] instanceof Array) {\n        markdownSections += '<section ' + options.attributes + '>'\n\n        sectionStack[i].forEach(function (child) {\n          markdownSections += '<section data-markdown>' + createMarkdownSlide(child, options) + '</section>'\n        })\n\n        markdownSections += '</section>'\n      } else {\n        markdownSections += '<section ' + options.attributes + ' data-markdown>' + createMarkdownSlide(sectionStack[i], options) + '</section>'\n      }\n    }\n\n    return markdownSections\n  }\n\n  /**\n   * Parses any current data-markdown slides, splits\n   * multi-slide markdown into separate sections and\n   * handles loading of external markdown.\n   */\n  function processSlides () {\n    const sections = document.querySelectorAll('[data-markdown]')\n    let section\n\n    for (let i = 0, len = sections.length; i < len; i++) {\n      section = sections[i]\n\n      if (section.getAttribute('data-markdown').length) {\n        const xhr = new XMLHttpRequest()\n        const url = section.getAttribute('data-markdown')\n\n        const datacharset = section.getAttribute('data-charset')\n\n        // see https://developer.mozilla.org/en-US/docs/Web/API/element.getAttribute#Notes\n        if (datacharset !== null && datacharset !== '') {\n          xhr.overrideMimeType('text/html; charset=' + datacharset)\n        }\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            // file protocol yields status code 0 (useful for local debug, mobile applications etc.)\n            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) {\n              section.outerHTML = slidify(xhr.responseText, {\n                separator: section.getAttribute('data-separator'),\n                verticalSeparator: section.getAttribute('data-separator-vertical'),\n                notesSeparator: section.getAttribute('data-separator-notes'),\n                attributes: getForwardedAttributes(section)\n              })\n            } else {\n              section.outerHTML = '<section data-state=\"alert\">' +\n              'ERROR: The attempt to fetch ' + url + ' failed with HTTP status ' + xhr.status + '.' +\n              'Check your browser\\'s JavaScript console for more details.' +\n              '<p>Remember that you need to serve the presentation HTML from a HTTP server.</p>' +\n              '</section>'\n            }\n          }\n        }\n\n        xhr.open('GET', url, false)\n\n        try {\n          xhr.send()\n        } catch (e) {\n          alert('Failed to get the Markdown file ' + url + '. Make sure that the presentation and the file are served by a HTTP server and the file can be found there. ' + e)\n        }\n      } else if (section.getAttribute('data-separator') || section.getAttribute('data-separator-vertical') || section.getAttribute('data-separator-notes')) {\n        section.outerHTML = slidify(getMarkdownFromSlide(section), {\n          separator: section.getAttribute('data-separator'),\n          verticalSeparator: section.getAttribute('data-separator-vertical'),\n          notesSeparator: section.getAttribute('data-separator-notes'),\n          attributes: getForwardedAttributes(section)\n        })\n      } else {\n        section.innerHTML = createMarkdownSlide(getMarkdownFromSlide(section))\n      }\n    }\n  }\n\n  /**\n   * Check if a node value has the attributes pattern.\n   * If yes, extract it and add that value as one or several attributes\n   * the the terget element.\n   *\n   * You need Cache Killer on Chrome to see the effect on any FOM transformation\n   * directly on refresh (F5)\n   * http://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development/7000899#answer-11786277\n   */\n  function addAttributeInElement (node, elementTarget, separator) {\n    const mardownClassesInElementsRegex = new RegExp(separator, 'mg')\n    const mardownClassRegex = /([^\"= ]+?)=\"([^\"=]+?)\"/mg\n    let nodeValue = node.nodeValue\n    let matches\n    let matchesClass\n    if ((matches = mardownClassesInElementsRegex.exec(nodeValue))) {\n      const classes = matches[1]\n      nodeValue = nodeValue.substring(0, matches.index) + nodeValue.substring(mardownClassesInElementsRegex.lastIndex)\n      node.nodeValue = nodeValue\n      while ((matchesClass = mardownClassRegex.exec(classes))) {\n        const name = matchesClass[1]\n        const value = matchesClass[2]\n        if (name.substr(0, 5) === 'data-' || window.whiteListAttr.indexOf(name) !== -1) { elementTarget.setAttribute(name, escapeAttrValue(value)) }\n      }\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Add attributes to the parent element of a text node,\n   * or the element of an attribute node.\n   */\n  function addAttributes (section, element, previousElement, separatorElementAttributes, separatorSectionAttributes) {\n    if (element != null && element.childNodes !== undefined && element.childNodes.length > 0) {\n      let previousParentElement = element\n      for (let i = 0; i < element.childNodes.length; i++) {\n        const childElement = element.childNodes[i]\n        if (i > 0) {\n          let j = i - 1\n          while (j >= 0) {\n            const aPreviousChildElement = element.childNodes[j]\n            if (typeof aPreviousChildElement.setAttribute === 'function' && aPreviousChildElement.tagName !== 'BR') {\n              previousParentElement = aPreviousChildElement\n              break\n            }\n            j = j - 1\n          }\n        }\n        let parentSection = section\n        if (childElement.nodeName === 'section') {\n          parentSection = childElement\n          previousParentElement = childElement\n        }\n        if (typeof childElement.setAttribute === 'function' || childElement.nodeType === Node.COMMENT_NODE) {\n          addAttributes(parentSection, childElement, previousParentElement, separatorElementAttributes, separatorSectionAttributes)\n        }\n      }\n    }\n\n    if (element.nodeType === Node.COMMENT_NODE) {\n      if (addAttributeInElement(element, previousElement, separatorElementAttributes) === false) {\n        addAttributeInElement(element, section, separatorSectionAttributes)\n      }\n    }\n  }\n\n  /**\n   * Converts any current data-markdown slides in the\n   * DOM to HTML.\n   */\n  function convertSlides () {\n    const sections = document.querySelectorAll('[data-markdown]')\n\n    for (let i = 0, len = sections.length; i < len; i++) {\n      const section = sections[i]\n\n      // Only parse the same slide once\n      if (!section.getAttribute('data-markdown-parsed')) {\n        section.setAttribute('data-markdown-parsed', true)\n\n        const notes = section.querySelector('aside.notes')\n        let markdown = getMarkdownFromSlide(section)\n        markdown = markdown.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\n        let rendered = md.render(markdown)\n        rendered = preventXSS(rendered)\n        const result = window.postProcess(rendered)\n        section.innerHTML = result[0].outerHTML\n        addAttributes(section, section, null, section.getAttribute('data-element-attributes') ||\n        section.parentNode.getAttribute('data-element-attributes') ||\n        DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR,\n        section.getAttribute('data-attributes') ||\n        section.parentNode.getAttribute('data-attributes') ||\n        DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR)\n\n        // If there were notes, we need to re-add them after\n        // having overwritten the section's HTML\n        if (notes) {\n          section.appendChild(notes)\n        }\n      }\n    }\n  }\n\n  // API\n  return {\n    initialize: function () {\n      processSlides()\n      convertSlides()\n    },\n    // TODO: Do these belong in the API?\n    processSlides: processSlides,\n    convertSlides: convertSlides,\n    slidify: slidify\n  }\n}))\n","/* eslint-env browser, jquery */\n/**\n * md-toc.js v1.0.2\n * https://github.com/yijian166/md-toc.js\n */\n\n(function (window) {\n  function Toc (id, options) {\n    this.el = document.getElementById(id)\n    if (!this.el) return\n    this.options = options || {}\n    this.tocLevel = parseInt(options.level) || 0\n    this.tocClass = options['class'] || 'toc'\n    this.ulClass = options['ulClass']\n    this.tocTop = parseInt(options.top) || 0\n    this.elChilds = this.el.children\n    this.process = options['process']\n    if (!this.elChilds.length) return\n    this._init()\n  }\n\n  Toc.prototype._init = function () {\n    this._collectTitleElements()\n    this._createTocContent()\n    this._showToc()\n  }\n\n  Toc.prototype._collectTitleElements = function () {\n    this._elTitlesNames = []\n    this.elTitleElements = []\n    for (var i = 1; i < 6; i++) {\n      if (this.el.getElementsByTagName('h' + i).length) {\n        this._elTitlesNames.push('h' + i)\n      }\n    }\n\n    this._elTitlesNames.length = this._elTitlesNames.length > this.tocLevel ? this.tocLevel : this._elTitlesNames.length\n\n    for (var j = 0; j < this.elChilds.length; j++) {\n      this._elChildName = this.elChilds[j].tagName.toLowerCase()\n      if (this._elTitlesNames.toString().match(this._elChildName)) {\n        this.elTitleElements.push(this.elChilds[j])\n      }\n    }\n  }\n\n  Toc.prototype._createTocContent = function recursiveToc(level = 0, titleElements = [], titleNames = [], ulClass = undefined, index = 0) {\n    // Inititalize our elements from the toc object\n    // which is only available on level 0\n    if (level === 0) {\n      titleElements = this.elTitleElements\n      titleNames = this._elTitlesNames\n      ulClass = this.ulClass\n    }\n    // No need to do anything for an empty ToC\n    if (!titleElements.length) return\n\n    var content = '<ul'\n    if (ulClass) {\n      content += ' class=\"' + ulClass + '\"'\n    }\n    content += '>\\n'\n    var iterTag = titleNames[level]\n    var recurse = false\n    var openTag = false\n\n    for (var element; element = titleElements.shift();) {\n      var elementTag = element.tagName.toLowerCase()\n\n      // We only care about tags on our level to add them as list item\n      if (elementTag == iterTag) {\n        // Let's do some cleaning\n        var elementTitle = element.textContent.replace(/\"/g, '&quot;')\n        var elementText = (typeof this.process === 'function' ? this.process(element) : element.innerHTML).replace(/<(?:.|\\n)*?>/gm, '')\n        var id = element.getAttribute('id')\n        if (!id) {\n          element.setAttribute('id', 'tip' + ++index)\n          id = '#tip' + index\n        } else {\n          id = '#' + id\n        }\n        if (openTag) {\n          content += '</li>\\n'\n          openTag = false\n        }\n        content += '<li><a href=\"' + id + '\" title=\"'+ elementTitle +'\">' + elementText + '</a>'\n        // Reset recursion. We need it for the next subsections\n        recurse = false\n        openTag = true\n      // Check if the current element has a lower level than ours, if so, we have to go down the rabbithole!\n      } else if (!recurse && titleNames.indexOf(elementTag.toLowerCase()) > level) {\n        recurse = true\n        if (!openTag) {\n          content += '<li class=\"invisable-node\">'\n          openTag = true\n        }\n        // This element is for the lower lever, we have to re-add it before we send the list down there.\n        titleElements.unshift(element)\n        // Let's call ourself and get to the next level\n        content += recursiveToc(level + 1, titleElements, titleNames, ulClass, index)\n      } else {\n        // When we end up here, met a higher level element\n        // This is not our business so back into the list with the element and let's end this loop\n        titleElements.unshift(element)\n        break\n      }\n    }\n\n    if (openTag) {\n      content += '</li>\\n'\n    }\n    content += '</ul>\\n'\n\n    // Set ToC content of the level 0 everything else pass things to the upper level!\n    if (level === 0) {\n      this.tocContent = content\n    } else {\n      return content\n    }\n  }\n\n  Toc.prototype._showToc = function () {\n    this.toc = document.createElement('div')\n    this.toc.innerHTML = this.tocContent\n    this.toc.setAttribute('class', this.tocClass)\n    if (!this.options.targetId) {\n      this.el.appendChild(this.toc)\n    } else {\n      document.getElementById(this.options.targetId).appendChild(this.toc)\n    }\n    var self = this\n    if (this.tocTop > -1) {\n      window.onscroll = function () {\n        var t = document.documentElement.scrollTop || document.body.scrollTop\n        if (t < self.tocTop) {\n          self.toc.setAttribute('style', 'position:absolute;top:' + self.tocTop + 'px;')\n        } else {\n          self.toc.setAttribute('style', 'position:fixed;top:10px;')\n        }\n      }\n    }\n  }\n  window.Toc = Toc\n})(window)\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp), target = current\n    for (var i = 0; i < flags.length; i++) if (target.indexOf(flags.charAt(i)) == -1)\n      target += flags.charAt(i)\n    return current == target ? regexp : new RegExp(regexp.source, target)\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match, from = 0\n    while (from <= string.length) {\n      regexp.lastIndex = from\n      var newMatch = regexp.exec(string)\n      if (!newMatch) break\n      var end = newMatch.index + newMatch[0].length\n      if (end > string.length - endMargin) break\n      if (!match || end > match.index + match[0].length)\n        match = newMatch\n      from = newMatch.index + 1\n    }\n    return match\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start)\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine : curLine + \"\\n\" + string\n      }\n      chunkSize *= 2\n\n      var match = lastMatchIn(string, regexp, endMargin)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (endString.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureFlags(query, \"gm\")\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to))\n\n      // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatibility with the vim code (unfortunately)\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1)\n          else if (result.from.line == this.doc.firstLine()) result = null\n          else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)))\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1)\n          else if (result.to.line == this.doc.lastLine()) result = null\n          else result = this.matches(reverse, Pos(result.to.line + 1, 0))\n        }\n      }\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","var naturalSort = require('string-natural-compare'),\n  getByClass = require('./utils/get-by-class'),\n  extend = require('./utils/extend'),\n  indexOf = require('./utils/index-of'),\n  events = require('./utils/events'),\n  toString = require('./utils/to-string'),\n  classes = require('./utils/classes'),\n  getAttribute = require('./utils/get-attribute'),\n  toArray = require('./utils/to-array')\n\nmodule.exports = function (id, options, values) {\n  var self = this,\n    init,\n    Item = require('./item')(self),\n    addAsync = require('./add-async')(self),\n    initPagination = require('./pagination')(self)\n\n  init = {\n    start: function () {\n      self.listClass = 'list'\n      self.searchClass = 'search'\n      self.sortClass = 'sort'\n      self.page = 10000\n      self.i = 1\n      self.items = []\n      self.visibleItems = []\n      self.matchingItems = []\n      self.searched = false\n      self.filtered = false\n      self.searchColumns = undefined\n      self.searchDelay = 0\n      self.handlers = { updated: [] }\n      self.valueNames = []\n      self.utils = {\n        getByClass: getByClass,\n        extend: extend,\n        indexOf: indexOf,\n        events: events,\n        toString: toString,\n        naturalSort: naturalSort,\n        classes: classes,\n        getAttribute: getAttribute,\n        toArray: toArray,\n      }\n\n      self.utils.extend(self, options)\n\n      self.listContainer = typeof id === 'string' ? document.getElementById(id) : id\n      if (!self.listContainer) {\n        return\n      }\n      self.list = getByClass(self.listContainer, self.listClass, true)\n\n      self.parse = require('./parse')(self)\n      self.templater = require('./templater')(self)\n      self.search = require('./search')(self)\n      self.filter = require('./filter')(self)\n      self.sort = require('./sort')(self)\n      self.fuzzySearch = require('./fuzzy-search')(self, options.fuzzySearch)\n\n      this.handlers()\n      this.items()\n      this.pagination()\n\n      self.update()\n    },\n    handlers: function () {\n      for (var handler in self.handlers) {\n        if (self[handler] && self.handlers.hasOwnProperty(handler)) {\n          self.on(handler, self[handler])\n        }\n      }\n    },\n    items: function () {\n      self.parse(self.list)\n      if (values !== undefined) {\n        self.add(values)\n      }\n    },\n    pagination: function () {\n      if (options.pagination !== undefined) {\n        if (options.pagination === true) {\n          options.pagination = [{}]\n        }\n        if (options.pagination[0] === undefined) {\n          options.pagination = [options.pagination]\n        }\n        for (var i = 0, il = options.pagination.length; i < il; i++) {\n          initPagination(options.pagination[i])\n        }\n      }\n    },\n  }\n\n  /*\n   * Re-parse the List, use if html have changed\n   */\n  this.reIndex = function () {\n    self.items = []\n    self.visibleItems = []\n    self.matchingItems = []\n    self.searched = false\n    self.filtered = false\n    self.parse(self.list)\n  }\n\n  this.toJSON = function () {\n    var json = []\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      json.push(self.items[i].values())\n    }\n    return json\n  }\n\n  /*\n   * Add object to list\n   */\n  this.add = function (values, callback) {\n    if (values.length === 0) {\n      return\n    }\n    if (callback) {\n      addAsync(values.slice(0), callback)\n      return\n    }\n    var added = [],\n      notCreate = false\n    if (values[0] === undefined) {\n      values = [values]\n    }\n    for (var i = 0, il = values.length; i < il; i++) {\n      var item = null\n      notCreate = self.items.length > self.page ? true : false\n      item = new Item(values[i], undefined, notCreate)\n      self.items.push(item)\n      added.push(item)\n    }\n    self.update()\n    return added\n  }\n\n  this.show = function (i, page) {\n    this.i = i\n    this.page = page\n    self.update()\n    return self\n  }\n\n  /* Removes object from list.\n   * Loops through the list and removes objects where\n   * property \"valuename\" === value\n   */\n  this.remove = function (valueName, value, options) {\n    var found = 0\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      if (self.items[i].values()[valueName] == value) {\n        self.templater.remove(self.items[i], options)\n        self.items.splice(i, 1)\n        il--\n        i--\n        found++\n      }\n    }\n    self.update()\n    return found\n  }\n\n  /* Gets the objects in the list which\n   * property \"valueName\" === value\n   */\n  this.get = function (valueName, value) {\n    var matchedItems = []\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      var item = self.items[i]\n      if (item.values()[valueName] == value) {\n        matchedItems.push(item)\n      }\n    }\n    return matchedItems\n  }\n\n  /*\n   * Get size of the list\n   */\n  this.size = function () {\n    return self.items.length\n  }\n\n  /*\n   * Removes all items from the list\n   */\n  this.clear = function () {\n    self.templater.clear()\n    self.items = []\n    return self\n  }\n\n  this.on = function (event, callback) {\n    self.handlers[event].push(callback)\n    return self\n  }\n\n  this.off = function (event, callback) {\n    var e = self.handlers[event]\n    var index = indexOf(e, callback)\n    if (index > -1) {\n      e.splice(index, 1)\n    }\n    return self\n  }\n\n  this.trigger = function (event) {\n    var i = self.handlers[event].length\n    while (i--) {\n      self.handlers[event][i](self)\n    }\n    return self\n  }\n\n  this.reset = {\n    filter: function () {\n      var is = self.items,\n        il = is.length\n      while (il--) {\n        is[il].filtered = false\n      }\n      return self\n    },\n    search: function () {\n      var is = self.items,\n        il = is.length\n      while (il--) {\n        is[il].found = false\n      }\n      return self\n    },\n  }\n\n  this.update = function () {\n    var is = self.items,\n      il = is.length\n\n    self.visibleItems = []\n    self.matchingItems = []\n    self.templater.clear()\n    for (var i = 0; i < il; i++) {\n      if (is[i].matching() && self.matchingItems.length + 1 >= self.i && self.visibleItems.length < self.page) {\n        is[i].show()\n        self.visibleItems.push(is[i])\n        self.matchingItems.push(is[i])\n      } else if (is[i].matching()) {\n        self.matchingItems.push(is[i])\n        is[i].hide()\n      } else {\n        is[i].hide()\n      }\n    }\n    self.trigger('updated')\n    return self\n  }\n\n  init.start()\n}\n","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    CodeMirror.addClass(wrap, 'dialog-opened');\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(dialog, \"focusout\", function (evt) {\n        if (evt.relatedTarget !== null) close();\n      });\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n","var engine = require('../src/store-engine')\n\nvar storages = require('../storages/all')\nvar plugins = [require('../plugins/json2')]\n\nmodule.exports = engine.createStore(storages, plugins)\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize && typeof w !== 'undefined') {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n} else if( typeof angular !== 'undefined' && angular != null ) {\n  angular.module('LZString', [])\n  .factory('LZString', function () {\n    return LZString;\n  });\n}\n","module.exports = function (arg, url) {\r\n\r\n    function _t() {\r\n        return new RegExp(/(.*?)\\.?([^\\.]*?)\\.(gl|com|net|org|biz|ws|in|me|co\\.uk|co|org\\.uk|ltd\\.uk|plc\\.uk|me\\.uk|edu|mil|br\\.com|cn\\.com|eu\\.com|hu\\.com|no\\.com|qc\\.com|sa\\.com|se\\.com|se\\.net|us\\.com|uy\\.com|ac|co\\.ac|gv\\.ac|or\\.ac|ac\\.ac|af|am|as|at|ac\\.at|co\\.at|gv\\.at|or\\.at|asn\\.au|com\\.au|edu\\.au|org\\.au|net\\.au|id\\.au|be|ac\\.be|adm\\.br|adv\\.br|am\\.br|arq\\.br|art\\.br|bio\\.br|cng\\.br|cnt\\.br|com\\.br|ecn\\.br|eng\\.br|esp\\.br|etc\\.br|eti\\.br|fm\\.br|fot\\.br|fst\\.br|g12\\.br|gov\\.br|ind\\.br|inf\\.br|jor\\.br|lel\\.br|med\\.br|mil\\.br|net\\.br|nom\\.br|ntr\\.br|odo\\.br|org\\.br|ppg\\.br|pro\\.br|psc\\.br|psi\\.br|rec\\.br|slg\\.br|tmp\\.br|tur\\.br|tv\\.br|vet\\.br|zlg\\.br|br|ab\\.ca|bc\\.ca|mb\\.ca|nb\\.ca|nf\\.ca|ns\\.ca|nt\\.ca|on\\.ca|pe\\.ca|qc\\.ca|sk\\.ca|yk\\.ca|ca|cc|ac\\.cn|com\\.cn|edu\\.cn|gov\\.cn|org\\.cn|bj\\.cn|sh\\.cn|tj\\.cn|cq\\.cn|he\\.cn|nm\\.cn|ln\\.cn|jl\\.cn|hl\\.cn|js\\.cn|zj\\.cn|ah\\.cn|gd\\.cn|gx\\.cn|hi\\.cn|sc\\.cn|gz\\.cn|yn\\.cn|xz\\.cn|sn\\.cn|gs\\.cn|qh\\.cn|nx\\.cn|xj\\.cn|tw\\.cn|hk\\.cn|mo\\.cn|cn|cx|cz|de|dk|fo|com\\.ec|tm\\.fr|com\\.fr|asso\\.fr|presse\\.fr|fr|gf|gs|co\\.il|net\\.il|ac\\.il|k12\\.il|gov\\.il|muni\\.il|ac\\.in|co\\.in|org\\.in|ernet\\.in|gov\\.in|net\\.in|res\\.in|is|it|ac\\.jp|co\\.jp|go\\.jp|or\\.jp|ne\\.jp|ac\\.kr|co\\.kr|go\\.kr|ne\\.kr|nm\\.kr|or\\.kr|li|lt|lu|asso\\.mc|tm\\.mc|com\\.mm|org\\.mm|net\\.mm|edu\\.mm|gov\\.mm|ms|nl|no|nu|pl|ro|org\\.ro|store\\.ro|tm\\.ro|firm\\.ro|www\\.ro|arts\\.ro|rec\\.ro|info\\.ro|nom\\.ro|nt\\.ro|se|si|com\\.sg|org\\.sg|net\\.sg|gov\\.sg|sk|st|tf|ac\\.th|co\\.th|go\\.th|mi\\.th|net\\.th|or\\.th|tm|to|com\\.tr|edu\\.tr|gov\\.tr|k12\\.tr|net\\.tr|org\\.tr|com\\.tw|org\\.tw|net\\.tw|ac\\.uk|uk\\.com|uk\\.net|gb\\.com|gb\\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\\.hk|org\\.hk|net\\.hk|edu\\.hk|us|tk|cd|by|ad|lv|eu\\.lv|bz|es|jp|cl|ag|mobi|eu|co\\.nz|org\\.nz|net\\.nz|maori\\.nz|iwi\\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\\.pt|edu\\.pt|asia|fi|com\\.ve|net\\.ve|fi|org\\.ve|web\\.ve|info\\.ve|co\\.ve|tel|im|gr|ru|net\\.ru|org\\.ru|hr|com\\.hr|ly|xyz)$/);\r\n    }\r\n\r\n    function _d(s) {\r\n      return decodeURIComponent(s.replace(/\\+/g, ' '));\r\n    }\r\n\r\n    function _i(arg, str) {\r\n        var sptr = arg.charAt(0),\r\n            split = str.split(sptr);\r\n\r\n        if (sptr === arg) { return split; }\r\n\r\n        arg = parseInt(arg.substring(1), 10);\r\n\r\n        return split[arg < 0 ? split.length + arg : arg - 1];\r\n    }\r\n\r\n    function _f(arg, str) {\r\n        var sptr = arg.charAt(0),\r\n            split = str.split('&'),\r\n            field = [],\r\n            params = {},\r\n            tmp = [],\r\n            arg2 = arg.substring(1);\r\n\r\n        for (var i = 0, ii = split.length; i < ii; i++) {\r\n            field = split[i].match(/(.*?)=(.*)/);\r\n\r\n            // TODO: regex should be able to handle this.\r\n            if ( ! field) {\r\n                field = [split[i], split[i], ''];\r\n            }\r\n\r\n            if (field[1].replace(/\\s/g, '') !== '') {\r\n                field[2] = _d(field[2] || '');\r\n\r\n                // If we have a match just return it right away.\r\n                if (arg2 === field[1]) { return field[2]; }\r\n\r\n                // Check for array pattern.\r\n                tmp = field[1].match(/(.*)\\[([0-9]+)\\]/);\r\n\r\n                if (tmp) {\r\n                    params[tmp[1]] = params[tmp[1]] || [];\r\n                \r\n                    params[tmp[1]][tmp[2]] = field[2];\r\n                }\r\n                else {\r\n                    params[field[1]] = field[2];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (sptr === arg) { return params; }\r\n\r\n        return params[arg2];\r\n    }\r\n\r\n    var _l = {}, tmp, tmp2;\r\n\r\n    if (arg === 'tld?') { return _t(); }\r\n\r\n    url = url || window.location.toString();\r\n\r\n    if ( ! arg) { return url; }\r\n\r\n    arg = arg.toString();\r\n\r\n    if (tmp = url.match(/^mailto:([^\\/].+)/)) {\r\n        _l.protocol = 'mailto';\r\n        _l.email = tmp[1];\r\n    }\r\n    else {\r\n\r\n        // Ignore Hashbangs.\r\n        if (tmp = url.match(/(.*?)\\/#\\!(.*)/)) {\r\n            url = tmp[1] + tmp[2];\r\n        }\r\n\r\n        // Hash.\r\n        if (tmp = url.match(/(.*?)#(.*)/)) {\r\n            _l.hash = tmp[2];\r\n            url = tmp[1];\r\n        }\r\n\r\n        // Return hash parts.\r\n        if (_l.hash && arg.match(/^#/)) { return _f(arg, _l.hash); }\r\n\r\n        // Query\r\n        if (tmp = url.match(/(.*?)\\?(.*)/)) {\r\n            _l.query = tmp[2];\r\n            url = tmp[1];\r\n        }\r\n\r\n        // Return query parts.\r\n        if (_l.query && arg.match(/^\\?/)) { return _f(arg, _l.query); }\r\n\r\n        // Protocol.\r\n        if (tmp = url.match(/(.*?)\\:?\\/\\/(.*)/)) {\r\n            _l.protocol = tmp[1].toLowerCase();\r\n            url = tmp[2];\r\n        }\r\n\r\n        // Path.\r\n        if (tmp = url.match(/(.*?)(\\/.*)/)) {\r\n            _l.path = tmp[2];\r\n            url = tmp[1];\r\n        }\r\n\r\n        // Clean up path.\r\n        _l.path = (_l.path || '').replace(/^([^\\/])/, '/$1');\r\n\r\n        // Return path parts.\r\n        if (arg.match(/^[\\-0-9]+$/)) { arg = arg.replace(/^([^\\/])/, '/$1'); }\r\n        if (arg.match(/^\\//)) { return _i(arg, _l.path.substring(1)); }\r\n\r\n        // File.\r\n        tmp = _i('/-1', _l.path.substring(1));\r\n        \r\n        if (tmp && (tmp = tmp.match(/(.*?)\\.([^.]+)$/))) {\r\n            _l.file = tmp[0];\r\n            _l.filename = tmp[1];\r\n            _l.fileext = tmp[2];\r\n        }\r\n\r\n        // Port.\r\n        if (tmp = url.match(/(.*)\\:([0-9]+)$/)) {\r\n            _l.port = tmp[2];\r\n            url = tmp[1];\r\n        }\r\n\r\n        // Auth.\r\n        if (tmp = url.match(/(.*?)@(.*)/)) {\r\n            _l.auth = tmp[1];\r\n            url = tmp[2];\r\n        }\r\n\r\n        // User and pass.\r\n        if (_l.auth) {\r\n            tmp = _l.auth.match(/(.*)\\:(.*)/);\r\n\r\n            _l.user = tmp ? tmp[1] : _l.auth;\r\n            _l.pass = tmp ? tmp[2] : undefined;\r\n        }\r\n\r\n        // Hostname.\r\n        _l.hostname = url.toLowerCase();\r\n\r\n        // Return hostname parts.\r\n        if (arg.charAt(0) === '.') { return _i(arg, _l.hostname); }\r\n\r\n        // Domain, tld and sub domain.\r\n        if (_t()) {\r\n            tmp = _l.hostname.match(_t());\r\n\r\n            if (tmp) {\r\n                _l.tld = tmp[3];\r\n                _l.domain = tmp[2] ? tmp[2] + '.' + tmp[3] : undefined;\r\n                _l.sub = tmp[1] || undefined;\r\n            }\r\n        }\r\n\r\n        // Set port and protocol defaults if not set.\r\n        _l.port = _l.port || (_l.protocol === 'https' ? '443' : '80');\r\n        _l.protocol = _l.protocol || (_l.port === '443' ? 'https' : 'http');\r\n    }\r\n\r\n    // Return arg.\r\n    if (arg in _l) { return _l[arg]; }\r\n\r\n    // Return everything.\r\n    if (arg === '{}') { return _l; }\r\n\r\n    // Default to undefined for no match.\r\n    return undefined;\r\n};","/**\n * A cross-browser implementation of getElementsByClass.\n * Heavily based on Dustin Diaz's function: http://dustindiaz.com/getelementsbyclass.\n *\n * Find all elements with class `className` inside `container`.\n * Use `single = true` to increase performance in older browsers\n * when only one element is needed.\n *\n * @param {String} className\n * @param {Element} container\n * @param {Boolean} single\n * @api public\n */\n\nvar getElementsByClassName = function (container, className, single) {\n  if (single) {\n    return container.getElementsByClassName(className)[0]\n  } else {\n    return container.getElementsByClassName(className)\n  }\n}\n\nvar querySelector = function (container, className, single) {\n  className = '.' + className\n  if (single) {\n    return container.querySelector(className)\n  } else {\n    return container.querySelectorAll(className)\n  }\n}\n\nvar polyfill = function (container, className, single) {\n  var classElements = [],\n    tag = '*'\n\n  var els = container.getElementsByTagName(tag)\n  var elsLen = els.length\n  var pattern = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\n  for (var i = 0, j = 0; i < elsLen; i++) {\n    if (pattern.test(els[i].className)) {\n      if (single) {\n        return els[i]\n      } else {\n        classElements[j] = els[i]\n        j++\n      }\n    }\n  }\n  return classElements\n}\n\nmodule.exports = (function () {\n  return function (container, className, single, options) {\n    options = options || {}\n    if ((options.test && options.getElementsByClassName) || (!options.test && document.getElementsByClassName)) {\n      return getElementsByClassName(container, className, single)\n    } else if ((options.test && options.querySelector) || (!options.test && document.querySelector)) {\n      return querySelector(container, className, single)\n    } else {\n      return polyfill(container, className, single)\n    }\n  }\n})()\n","/*\n * Source: https://github.com/segmentio/extend\n */\n\nmodule.exports = function extend(object) {\n  // Takes an unlimited number of extenders.\n  var args = Array.prototype.slice.call(arguments, 1)\n\n  // For each extender, copy their properties on our object.\n  for (var i = 0, source; (source = args[i]); i++) {\n    if (!source) continue\n    for (var property in source) {\n      object[property] = source[property]\n    }\n  }\n\n  return object\n}\n","var indexOf = [].indexOf\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0, il = arr.length; i < il; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1\n}\n","/**\n * Source: https://github.com/timoxley/to-array\n *\n * Convert an array-like object into an `Array`.\n * If `collection` is already an `Array`, then will return a clone of `collection`.\n *\n * @param {Array | Mixed} collection An `Array` or array-like object to convert e.g. `arguments` or `NodeList`\n * @return {Array} Naive conversion of `collection` to a new `Array`.\n * @api public\n */\n\nmodule.exports = function toArray(collection) {\n  if (typeof collection === 'undefined') return []\n  if (collection === null) return [null]\n  if (collection === window) return [window]\n  if (typeof collection === 'string') return [collection]\n  if (isArray(collection)) return collection\n  if (typeof collection.length != 'number') return [collection]\n  if (typeof collection === 'function' && collection instanceof Function) return [collection]\n\n  var arr = [];\n  for (var i = 0, il = collection.length; i < il; i++) {\n    if (Object.prototype.hasOwnProperty.call(collection, i) || i in collection) {\n      arr.push(collection[i])\n    }\n  }\n  if (!arr.length) return []\n  return arr\n}\n\nfunction isArray(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\n","module.exports = function (s) {\n  s = s === undefined ? '' : s\n  s = s === null ? '' : s\n  s = s.toString()\n  return s\n}\n","module.exports = function (list) {\n  return function (initValues, element, notCreate) {\n    var item = this\n\n    this._values = {}\n\n    this.found = false // Show if list.searched == true and this.found == true\n    this.filtered = false // Show if list.filtered == true and this.filtered == true\n\n    var init = function (initValues, element, notCreate) {\n      if (element === undefined) {\n        if (notCreate) {\n          item.values(initValues, notCreate)\n        } else {\n          item.values(initValues)\n        }\n      } else {\n        item.elm = element\n        var values = list.templater.get(item, initValues)\n        item.values(values)\n      }\n    }\n\n    this.values = function (newValues, notCreate) {\n      if (newValues !== undefined) {\n        for (var name in newValues) {\n          item._values[name] = newValues[name]\n        }\n        if (notCreate !== true) {\n          list.templater.set(item, item.values())\n        }\n      } else {\n        return item._values\n      }\n    }\n\n    this.show = function () {\n      list.templater.show(item)\n    }\n\n    this.hide = function () {\n      list.templater.hide(item)\n    }\n\n    this.matching = function () {\n      return (\n        (list.filtered && list.searched && item.found && item.filtered) ||\n        (list.filtered && !list.searched && item.filtered) ||\n        (!list.filtered && list.searched && item.found) ||\n        (!list.filtered && !list.searched)\n      )\n    }\n\n    this.visible = function () {\n      return item.elm && item.elm.parentNode == list.list ? true : false\n    }\n\n    init(initValues, element, notCreate)\n  }\n}\n","/* eslint-env browser, jquery */\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"error\"] }] */\n/* global moment, serverurl */\n\nimport Prism from 'prismjs'\nimport PDFObject from 'pdfobject'\nimport S from 'string'\nimport { saveAs } from 'file-saver'\nimport escapeHTML from 'escape-html'\n\nimport getUIElements from './lib/editor/ui-elements'\n\nimport markdownit from 'markdown-it'\nimport markdownitContainer from 'markdown-it-container'\n\n/* Defined regex markdown it plugins */\nimport Plugin from 'markdown-it-regexp'\n\nimport 'gist-embed'\n\nrequire('prismjs/themes/prism.css')\nrequire('prismjs/components/prism-wiki')\nrequire('prismjs/components/prism-haskell')\nrequire('prismjs/components/prism-go')\nrequire('prismjs/components/prism-typescript')\nrequire('prismjs/components/prism-jsx')\nrequire('prismjs/components/prism-makefile')\nrequire('prismjs/components/prism-gherkin')\n\nrequire('./lib/common/login')\nrequire('./locale')\nrequire('../vendor/md-toc')\nconst ui = getUIElements()\n\n// auto update last change\nwindow.createtime = null\nwindow.lastchangetime = null\nwindow.lastchangeui = {\n  statusChanged: $('.ui-status-lastchange.changed'),\n  statusCreated: $('.ui-status-lastchange.created'),\n  time: $('.ui-lastchange'),\n  user: $('.ui-lastchangeuser'),\n  nouser: $('.ui-no-lastchangeuser')\n}\n\nconst ownerui = $('.ui-owner')\n\nexport function updateLastChange () {\n  if (!window.lastchangeui) return\n  if (window.createtime) {\n    if (window.createtime && !window.lastchangetime) {\n      window.lastchangeui.statusChanged.hide()\n      window.lastchangeui.statusCreated.show()\n    } else {\n      window.lastchangeui.statusChanged.show()\n      window.lastchangeui.statusCreated.hide()\n    }\n    const time = window.lastchangetime || window.createtime\n    window.lastchangeui.time.html(moment(time).fromNow())\n    window.lastchangeui.time.attr('title', moment(time).format('llll'))\n  }\n}\nsetInterval(updateLastChange, 60000)\n\nwindow.lastchangeuser = null\nwindow.lastchangeuserprofile = null\n\nexport function updateLastChangeUser () {\n  if (window.lastchangeui) {\n    if (window.lastchangeuser && window.lastchangeuserprofile) {\n      const icon = window.lastchangeui.user.children('i')\n      icon.attr('title', window.lastchangeuserprofile.name).tooltip('fixTitle')\n      if (window.lastchangeuserprofile.photo) { icon.attr('style', `background-image:url(${window.lastchangeuserprofile.photo})`) }\n      window.lastchangeui.user.show()\n      window.lastchangeui.nouser.hide()\n    } else {\n      window.lastchangeui.user.hide()\n      window.lastchangeui.nouser.show()\n    }\n  }\n}\n\nwindow.owner = null\nwindow.ownerprofile = null\n\nexport function updateOwner () {\n  if (ownerui) {\n    if (window.owner && window.ownerprofile && window.owner !== window.lastchangeuser) {\n      const icon = ownerui.children('i')\n      icon.attr('title', window.ownerprofile.name).tooltip('fixTitle')\n      const styleString = `background-image:url(${window.ownerprofile.photo})`\n      if (window.ownerprofile.photo && icon.attr('style') !== styleString) { icon.attr('style', styleString) }\n      ownerui.show()\n    } else {\n      ownerui.hide()\n    }\n  }\n}\n\n// get title\nfunction getTitle (view) {\n  let title = ''\n  if (md && md.meta && md.meta.title && (typeof md.meta.title === 'string' || typeof md.meta.title === 'number')) {\n    title = md.meta.title\n  } else {\n    const h1s = view.find('h1')\n    if (h1s.length > 0) {\n      title = h1s.first().text()\n    } else {\n      title = null\n    }\n  }\n  return title\n}\n\n// render title\nexport function renderTitle (view) {\n  let title = getTitle(view)\n  if (title) {\n    title += ' - HedgeDoc'\n  } else {\n    title = 'HedgeDoc - Collaborative markdown notes'\n  }\n  return title\n}\n\n// render filename\nexport function renderFilename (view) {\n  let filename = getTitle(view)\n  if (!filename) {\n    filename = 'Untitled'\n  }\n  return filename\n}\n\n// render tags\nexport function renderTags (view) {\n  const tags = []\n  const rawtags = []\n  if (md && md.meta && md.meta.tags && (typeof md.meta.tags === 'string' || typeof md.meta.tags === 'number')) {\n    const metaTags = (`${md.meta.tags}`).split(',')\n    for (let i = 0; i < metaTags.length; i++) {\n      const text = metaTags[i].trim()\n      if (text) rawtags.push(text)\n    }\n  } else {\n    view.find('h6').each((key, value) => {\n      if (/^tags/gmi.test($(value).text())) {\n        const codes = $(value).find('code')\n        for (let i = 0; i < codes.length; i++) {\n          const text = codes[i].innerHTML.trim()\n          if (text) rawtags.push(text)\n        }\n      }\n    })\n  }\n  for (let i = 0; i < rawtags.length; i++) {\n    let found = false\n    for (let j = 0; j < tags.length; j++) {\n      if (tags[j] === rawtags[i]) {\n        found = true\n        break\n      }\n    }\n    if (!found) { tags.push(rawtags[i]) }\n  }\n  return tags\n}\n\nfunction slugifyWithUTF8 (text) {\n  // remove HTML tags and trim spaces\n  let newText = S(text).trim().stripTags().s\n  // replace space between words with dashes\n  newText = newText.replace(/\\s+/g, '-')\n  // slugify string to make it valid as an attribute\n  newText = newText.replace(/([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~])/g, '')\n  return newText\n}\n\nexport function isValidURL (str) {\n  try {\n    const url = new URL(str)\n    return ['http:', 'https:'].includes(url.protocol)\n  } catch (e) {\n    return false\n  }\n}\n\n// parse meta\nexport function parseMeta (md, edit, view, toc, tocAffix) {\n  let lang = null\n  let dir = null\n  let breaks = true\n  if (md && md.meta) {\n    const meta = md.meta\n    lang = meta.lang\n    dir = meta.dir\n    breaks = meta.breaks\n  }\n  // text language\n  if (lang && typeof lang === 'string') {\n    view.attr('lang', lang)\n    toc.attr('lang', lang)\n    tocAffix.attr('lang', lang)\n    if (edit) { edit.attr('lang', lang) }\n  } else {\n    view.removeAttr('lang')\n    toc.removeAttr('lang')\n    tocAffix.removeAttr('lang')\n    if (edit) { edit.removeAttr('lang', lang) }\n  }\n  // text direction\n  if (dir && typeof dir === 'string') {\n    view.attr('dir', dir)\n    toc.attr('dir', dir)\n    tocAffix.attr('dir', dir)\n  } else {\n    view.removeAttr('dir')\n    toc.removeAttr('dir')\n    tocAffix.removeAttr('dir')\n  }\n  // breaks\n  if (typeof breaks === 'boolean' && !breaks) {\n    md.options.breaks = false\n  } else {\n    md.options.breaks = true\n  }\n}\n\nwindow.viewAjaxCallback = null\n\n// regex for extra tags\nconst spaceregex = /\\s*/\nconst notinhtmltagregex = /(?![^<]*>|[^<>]*<\\/)/\nlet coloregex = /\\[color=([#|(|)|\\s|,|\\w]*?)\\]/\ncoloregex = new RegExp(coloregex.source + notinhtmltagregex.source, 'g')\nlet nameregex = /\\[name=(.*?)\\]/\nlet timeregex = /\\[time=([:|,|+|-|(|)|\\s|\\w]*?)\\]/\nconst nameandtimeregex = new RegExp(nameregex.source + spaceregex.source + timeregex.source + notinhtmltagregex.source, 'g')\nnameregex = new RegExp(nameregex.source + notinhtmltagregex.source, 'g')\ntimeregex = new RegExp(timeregex.source + notinhtmltagregex.source, 'g')\n\nfunction replaceExtraTags (html) {\n  html = html.replace(coloregex, '<span class=\"color\" data-color=\"$1\"></span>')\n  html = html.replace(nameandtimeregex, '<small><i class=\"fa fa-user\"></i> $1 <i class=\"fa fa-clock-o\"></i> $2</small>')\n  html = html.replace(nameregex, '<small><i class=\"fa fa-user\"></i> $1</small>')\n  html = html.replace(timeregex, '<small><i class=\"fa fa-clock-o\"></i> $1</small>')\n  return html\n}\n\n// dynamic event or object binding here\nexport function finishView (view) {\n  // todo list\n  const lis = view.find('li.raw').removeClass('raw').sortByDepth().toArray()\n\n  for (let li of lis) {\n    let html = $(li).clone()[0].innerHTML\n    const p = $(li).children('p')\n    if (p.length === 1) {\n      html = p.html()\n      li = p[0]\n    }\n    html = replaceExtraTags(html)\n    li.innerHTML = html\n    let disabled = 'disabled'\n    if (typeof editor !== 'undefined' && window.havePermission()) { disabled = '' }\n    if (/^\\s*\\[[xX ]]\\s*/.test(html)) {\n      li.innerHTML = html.replace(/^\\s*\\[ ]\\s*/, `<input type=\"checkbox\" class=\"task-list-item-checkbox\" ${disabled}><label></label>`)\n        .replace(/^\\s*\\[[xX]]\\s*/, `<input type=\"checkbox\" class=\"task-list-item-checkbox\" checked ${disabled}><label></label>`)\n      if (li.tagName.toLowerCase() !== 'li') {\n        li.parentElement.setAttribute('class', 'task-list-item')\n      } else {\n        li.setAttribute('class', 'task-list-item')\n      }\n    }\n    if (typeof editor !== 'undefined' && window.havePermission()) { $(li).find('input').change(toggleTodoEvent) }\n    // color tag in list will convert it to tag icon with color\n    const tagColor = $(li).closest('ul').find('.color')\n    tagColor.each((key, value) => {\n      $(value).addClass('fa fa-tag').css('color', $(value).attr('data-color'))\n    })\n  }\n\n  // youtube\n  view.find('div.youtube.raw').removeClass('raw')\n    .click(function () {\n      imgPlayiframe(this, 'https://www.youtube.com/embed/')\n    })\n    // vimeo\n  view.find('div.vimeo.raw').removeClass('raw')\n    .click(function () {\n      imgPlayiframe(this, 'https://player.vimeo.com/video/')\n    })\n    .each((key, value) => {\n      const vimeoLink = `https://vimeo.com/${$(value).attr('data-videoid')}`\n      $.ajax({\n        type: 'GET',\n        url: `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(vimeoLink)}`,\n        jsonp: 'callback',\n        dataType: 'jsonp',\n        success (data) {\n          const image = `<img src=\"${data.thumbnail_url}\" />`\n          $(value).prepend(image)\n          if (window.viewAjaxCallback) window.viewAjaxCallback()\n        }\n      })\n    })\n    // gist\n  view.find('code[data-gist-id]').each((key, value) => {\n    if ($(value).children().length === 0) { $(value).gist(window.viewAjaxCallback) }\n  })\n  // sequence diagram\n  const sequences = view.find('div.sequence-diagram.raw').removeClass('raw')\n  sequences.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n\n      const sequence = $value\n      sequence.sequenceDiagram({\n        theme: 'simple'\n      })\n\n      $ele.addClass('sequence-diagram')\n      $value.children().unwrap().unwrap()\n      const svg = $ele.find('> svg')\n      svg[0].setAttribute('viewBox', `0 0 ${svg.attr('width')} ${svg.attr('height')}`)\n      svg[0].setAttribute('preserveAspectRatio', 'xMidYMid meet')\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // flowchart\n  const flow = view.find('div.flow-chart.raw').removeClass('raw')\n  flow.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n\n      const chart = window.flowchart.parse($value.text())\n      $value.html('')\n      chart.drawSVG(value, {\n        'line-width': 2,\n        fill: 'none',\n        'font-size': '16px',\n        'font-family': \"'Andale Mono', monospace\"\n      })\n\n      $ele.addClass('flow-chart')\n      $value.children().unwrap().unwrap()\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // graphviz\n  const graphvizs = view.find('div.graphviz.raw').removeClass('raw')\n  graphvizs.each(function (key, value) {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n      require.ensure([], function (require) {\n        const Viz = require('viz.js')\n        const graphviz = Viz($value.text())\n        if (!graphviz) throw Error('viz.js output empty graph')\n        $value.html(graphviz)\n\n        $ele.addClass('graphviz')\n        $value.children().unwrap().unwrap()\n      })\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // mermaid\n  const mermaids = view.find('div.mermaid.raw').removeClass('raw')\n  mermaids.each((key, value) => {\n    const $value = $(value)\n    const $ele = $(value).closest('pre')\n    require.ensure([], function (require) {\n      try {\n        const mermaid = require('mermaid')\n        mermaid.startOnLoad = false\n        mermaid.mermaidAPI.parse($value.text())\n        $ele.addClass('mermaid')\n        $ele.text($value.text())\n        mermaid.init(undefined, $ele)\n      } catch (err) {\n        let errormessage = err\n        if (err.str) {\n          errormessage = err.str\n        }\n        $value.unwrap()\n        $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(errormessage)}</div>`)\n        console.warn(errormessage)\n      }\n    })\n  })\n  // abc.js\n  const abcs = view.find('div.abc.raw').removeClass('raw')\n  abcs.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n      require.ensure([], function (require) {\n        const abcjs = require('abcjs')\n        abcjs.renderAbc(value, $value.text())\n        $ele.addClass('abc')\n        $value.children().unwrap().unwrap()\n        const svg = $ele.find('> svg')\n        svg[0].setAttribute('viewBox', `0 0 ${svg.attr('width')} ${svg.attr('height')}`)\n        svg[0].setAttribute('preserveAspectRatio', 'xMidYMid meet')\n      })\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // image href new window(emoji not included)\n  const images = view.find('img.raw[src]').removeClass('raw')\n  images.each((key, value) => {\n    // if it's already wrapped by link, then ignore\n    const $value = $(value)\n    $value[0].onload = e => {\n      if (window.viewAjaxCallback) window.viewAjaxCallback()\n    }\n  })\n  // blockquote\n  const blockquote = view.find('blockquote.raw').removeClass('raw')\n  const blockquoteP = blockquote.find('p')\n  blockquoteP.each((key, value) => {\n    let html = $(value).html()\n    html = replaceExtraTags(html)\n    $(value).html(html)\n  })\n  // color tag in blockquote will change its left border color\n  const blockquoteColor = blockquote.find('.color')\n  blockquoteColor.each((key, value) => {\n    $(value).closest('blockquote').css('border-left-color', $(value).attr('data-color'))\n  })\n  // slideshare\n  view.find('div.slideshare.raw').removeClass('raw')\n    .each((key, value) => {\n      $.ajax({\n        type: 'GET',\n        url: `https://www.slideshare.net/api/oembed/2?url=https://www.slideshare.net/${$(value).attr('data-slideshareid')}&format=json`,\n        jsonp: 'callback',\n        dataType: 'jsonp',\n        success (data) {\n          const $html = $(data.html)\n          const iframe = $html.closest('iframe')\n          const caption = $html.closest('div')\n          const inner = $('<div class=\"inner\"></div>').append(iframe)\n          const height = iframe.attr('height')\n          const width = iframe.attr('width')\n          const ratio = (height / width) * 100\n          inner.css('padding-bottom', `${ratio}%`)\n          $(value).html(inner).append(caption)\n          if (window.viewAjaxCallback) window.viewAjaxCallback()\n        }\n      })\n    })\n    // speakerdeck\n  view.find('div.speakerdeck.raw').removeClass('raw')\n    .each((key, value) => {\n      const url = `https://speakerdeck.com/${$(value).attr('data-speakerdeckid')}`\n      const inner = $('<a>Speakerdeck</a>')\n      inner.attr('href', url)\n      inner.attr('rel', 'noopener noreferrer')\n      inner.attr('target', '_blank')\n      $(value).append(inner)\n    })\n    // pdf\n  view.find('div.pdf.raw').removeClass('raw')\n    .each(function (key, value) {\n      const url = $(value).attr('data-pdfurl')\n      const inner = $('<div></div>')\n      $(this).append(inner)\n      PDFObject.embed(url, inner, {\n        height: '400px'\n      })\n    })\n    // syntax highlighting\n  view.find('code.raw').removeClass('raw')\n    .each((key, value) => {\n      const langDiv = $(value)\n      if (langDiv.length > 0) {\n        const reallang = langDiv[0].className.replace(/hljs|wrap/g, '').trim()\n        if (reallang === 'mermaid' || reallang === 'abc' || reallang === 'graphviz') {\n          return\n        }\n        const codeDiv = langDiv.find('.code')\n        let code = ''\n        if (codeDiv.length > 0) code = codeDiv.html()\n        else code = langDiv.html()\n        let result\n        if (!reallang) {\n          result = {\n            value: code\n          }\n        } else if (reallang === 'haskell' || reallang === 'go' || reallang === 'typescript' || reallang === 'jsx' || reallang === 'gherkin') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages[reallang])\n          }\n        } else if (reallang === 'tiddlywiki' || reallang === 'mediawiki') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages.wiki)\n          }\n        } else if (reallang === 'cmake') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages.makefile)\n          }\n        } else {\n          require.ensure([], function (require) {\n            const hljs = require('highlight.js')\n            code = S(code).unescapeHTML().s\n            const languages = hljs.listLanguages()\n            if (!languages.includes(reallang)) {\n              result = hljs.highlightAuto(code)\n            } else {\n              result = hljs.highlight(reallang, code)\n            }\n            if (codeDiv.length > 0) codeDiv.html(result.value)\n            else langDiv.html(result.value)\n          })\n          return\n        }\n        if (codeDiv.length > 0) codeDiv.html(result.value)\n        else langDiv.html(result.value)\n      }\n    })\n    // mathjax\n  const mathjaxdivs = view.find('span.mathjax.raw').removeClass('raw').toArray()\n  try {\n    if (mathjaxdivs.length > 1) {\n      window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, mathjaxdivs])\n      window.MathJax.Hub.Queue(window.viewAjaxCallback)\n    } else if (mathjaxdivs.length > 0) {\n      window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, mathjaxdivs[0]])\n      window.MathJax.Hub.Queue(window.viewAjaxCallback)\n    }\n  } catch (err) {\n    console.warn(err)\n  }\n  // render title\n  document.title = renderTitle(view)\n}\n\n// only static transform should be here\nexport function postProcess (code) {\n  const result = $(`<div>${code}</div>`)\n  // process style tags\n  result.find('style').each((key, value) => {\n    let html = $(value).html()\n    // unescape > symbel inside the style tags\n    html = html.replace(/&gt;/g, '>')\n    // remove css @import to prevent XSS\n    html = html.replace(/@import url\\(([^)]*)\\);?/gi, '')\n    $(value).html(html)\n  })\n  // link should open in new window or tab\n  // also add noopener to prevent clickjacking\n  // See details: https://mathiasbynens.github.io/rel-noopener/\n  result.find('a:not([href^=\"#\"]):not([target])').attr('target', '_blank').attr('rel', 'noopener')\n\n  // If it's hashtag link then make it base uri independent\n  result.find('a[href^=\"#\"]').each((index, linkTag) => {\n    const currentLocation = new URL(window.location)\n    currentLocation.hash = linkTag.hash\n    linkTag.href = currentLocation.toString()\n  })\n\n  // update continue line numbers\n  const linenumberdivs = result.find('.gutter.linenumber').toArray()\n  for (let i = 0; i < linenumberdivs.length; i++) {\n    if ($(linenumberdivs[i]).hasClass('continue')) {\n      const startnumber = linenumberdivs[i - 1] ? parseInt($(linenumberdivs[i - 1]).find('> span').last().attr('data-linenumber')) : 0\n      $(linenumberdivs[i]).find('> span').each((key, value) => {\n        $(value).attr('data-linenumber', startnumber + key + 1)\n      })\n    }\n  }\n  // show yaml meta paring error\n  if (md.metaError) {\n    let warning = result.find('div#meta-error')\n    if (warning && warning.length > 0) {\n      warning.text(md.metaError)\n    } else {\n      warning = $(`<div id=\"meta-error\" class=\"alert alert-warning\">${escapeHTML(md.metaError)}</div>`)\n      result.prepend(warning)\n    }\n  }\n  return result\n}\nwindow.postProcess = postProcess\n\nconst domevents = Object.getOwnPropertyNames(document).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(Object.getPrototypeOf(document)))).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(window))).filter(function (i) {\n  return !i.indexOf('on') && (document[i] === null || typeof document[i] === 'function')\n}).filter(function (elem, pos, self) {\n  return self.indexOf(elem) === pos\n})\n\nexport function removeDOMEvents (view) {\n  for (let i = 0, l = domevents.length; i < l; i++) {\n    view.find('[' + domevents[i] + ']').removeAttr(domevents[i])\n  }\n}\nwindow.removeDOMEvents = removeDOMEvents\n\nfunction toDataURL (url, callback) {\n  fetch(url).then(response => {\n    const fr = new FileReader()\n    fr.onload = function () {\n      callback(this.result)\n    }\n    response.blob().then(blob => {\n      fr.readAsDataURL(blob)\n    })\n  })\n}\n\nfunction generateCleanHTML (view) {\n  const src = view.clone()\n  const eles = src.find('*')\n  // remove syncscroll parts\n  eles.removeClass('part')\n  src.find('*[class=\"\"]').removeAttr('class')\n  eles.removeAttr('data-startline data-endline')\n  src.find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  // remove gist content\n  src.find('code[data-gist-id]').children().remove()\n  // disable todo list\n  src.find('input.task-list-item-checkbox').attr('disabled', '')\n  // replace emoji image path\n  src.find('img.emoji').each((key, value) => {\n    toDataURL($(value).attr('src'), dataURL => {\n      $(value).attr('src', dataURL)\n    })\n  })\n  // replace video to iframe\n  src.find('div[data-videoid]').each((key, value) => {\n    const id = $(value).attr('data-videoid')\n    const style = $(value).attr('style')\n    let url = null\n    if ($(value).hasClass('youtube')) {\n      url = 'https://www.youtube.com/embed/'\n    } else if ($(value).hasClass('vimeo')) {\n      url = 'https://player.vimeo.com/video/'\n    }\n    if (url) {\n      const iframe = $('<iframe frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')\n      iframe.attr('src', url + id)\n      iframe.attr('style', style)\n      $(value).html(iframe)\n    }\n  })\n  return src\n}\n\nexport function exportToRawHTML (view) {\n  const filename = `${renderFilename(ui.area.markdown)}.html`\n  const src = generateCleanHTML(view)\n  $(src).find('a.anchor').remove()\n  const html = src[0].outerHTML\n  const blob = new Blob([html], {\n    type: 'text/html;charset=utf-8'\n  })\n  saveAs(blob, filename, true)\n}\n\n// extract markdown body to html and compile to template\nexport function exportToHTML (view) {\n  const title = renderTitle(ui.area.markdown)\n  const filename = `${renderFilename(ui.area.markdown)}.html`\n  const src = generateCleanHTML(view)\n  // generate toc\n  const toc = $('#ui-toc').clone()\n  toc.find('*').removeClass('active').find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  const tocAffix = $('#ui-toc-affix').clone()\n  tocAffix.find('*').removeClass('active').find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  // generate html via template\n  $.get(`${serverurl}/build/htmlexport.html`, template => {\n    let html = template.replace('{{{url}}}', serverurl)\n    html = html.replace('{{title}}', title)\n    html = html.replace('{{{html}}}', src[0].outerHTML)\n    html = html.replace('{{{ui-toc}}}', toc.html())\n    html = html.replace('{{{ui-toc-affix}}}', tocAffix.html())\n    html = html.replace('{{{lang}}}', (md && md.meta && md.meta.lang) ? `lang=\"${md.meta.lang}\"` : '')\n    html = html.replace('{{{dir}}}', (md && md.meta && md.meta.dir) ? `dir=\"${md.meta.dir}\"` : '')\n    const blob = new Blob([html], {\n      type: 'text/html;charset=utf-8'\n    })\n    saveAs(blob, filename, true)\n  })\n}\n\n// jQuery sortByDepth\n$.fn.sortByDepth = function () {\n  const ar = this.map(function () {\n    return {\n      length: $(this).parents().length,\n      elt: this\n    }\n  }).get()\n\n  const result = []\n  let i = ar.length\n  ar.sort((a, b) => a.length - b.length)\n  while (i--) {\n    result.push(ar[i].elt)\n  }\n  return $(result)\n}\n\nfunction toggleTodoEvent (e) {\n  const startline = $(this).closest('li').attr('data-startline') - 1\n  const line = window.editor.getLine(startline)\n  const matches = line.match(/^[>\\s-]*(?:[-+*]|\\d+[.)])\\s\\[([xX ])]/)\n  if (matches && matches.length >= 2) {\n    let checked = null\n    if (matches[1].toLowerCase() === 'x') { checked = true } else if (matches[1] === ' ') { checked = false }\n    const replacements = matches[0].match(/(^[>\\s-]*(?:[-+*]|\\d+[.)])\\s\\[)([xX ])(])/)\n    window.editor.replaceRange(checked ? ' ' : 'x', {\n      line: startline,\n      ch: replacements[1].length\n    }, {\n      line: startline,\n      ch: replacements[1].length + 1\n    }, '+input')\n  }\n}\n\n// remove hash\nfunction removeHash () {\n  history.pushState('', document.title, window.location.pathname + window.location.search)\n}\n\nlet tocExpand = false\n\nfunction checkExpandToggle () {\n  const toc = $('.ui-toc-dropdown .toc')\n  const toggle = $('.expand-toggle')\n  if (!tocExpand) {\n    toc.removeClass('expand')\n    toggle.text('Expand all')\n  } else {\n    toc.addClass('expand')\n    toggle.text('Collapse all')\n  }\n}\n\n// toc\nexport function generateToc (id) {\n  const target = $(`#${id}`)\n  target.html('')\n  /* eslint-disable no-unused-vars */\n  const toc = new window.Toc('doc', {\n    level: 3,\n    top: -1,\n    class: 'toc',\n    ulClass: 'nav',\n    targetId: id,\n    process: getHeaderContent\n  })\n  /* eslint-enable no-unused-vars */\n  if (target.text() === 'undefined') { target.html('') }\n  const tocMenu = $('<div class=\"toc-menu\"></div')\n  const toggle = $('<a class=\"expand-toggle\" href=\"#\">Expand all</a>')\n  const backtotop = $('<a class=\"back-to-top\" href=\"#\">Back to top</a>')\n  const gotobottom = $('<a class=\"go-to-bottom\" href=\"#\">Go to bottom</a>')\n  checkExpandToggle()\n  toggle.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    tocExpand = !tocExpand\n    checkExpandToggle()\n  })\n  backtotop.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (window.scrollToTop) { window.scrollToTop() }\n    removeHash()\n  })\n  gotobottom.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (window.scrollToBottom) { window.scrollToBottom() }\n    removeHash()\n  })\n  tocMenu.append(toggle).append(backtotop).append(gotobottom)\n  target.append(tocMenu)\n}\n\n// smooth all hash trigger scrolling\nexport function smoothHashScroll () {\n  const hashElements = $(\"a[href^='#']:not([smoothhashscroll])\").toArray()\n\n  for (const element of hashElements) {\n    const $element = $(element)\n    const hash = element.hash\n    if (hash) {\n      $element.on('click', function (e) {\n        // store hash\n        const hash = decodeURIComponent(this.hash)\n        // escape special characters in jquery selector\n        const $hash = $(hash.replace(/(:|\\.|\\[|\\]|,)/g, '\\\\$1'))\n        // return if no element been selected\n        if ($hash.length <= 0) return\n        // prevent default anchor click behavior\n        e.preventDefault()\n        // animate\n        $('body, html').stop(true, true).animate({\n          scrollTop: $hash.offset().top\n        }, 100, 'linear', () => {\n          // when done, add hash to url\n          // (default click behaviour)\n          window.location.hash = hash\n        })\n      })\n      $element.attr('smoothhashscroll', '')\n    }\n  }\n}\n\nfunction imgPlayiframe (element, src) {\n  if (!$(element).attr('data-videoid')) return\n  const iframe = $(\"<iframe frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\")\n  $(iframe).attr('src', `${src + $(element).attr('data-videoid')}?autoplay=1`)\n  $(element).find('img').css('visibility', 'hidden')\n  $(element).append(iframe)\n}\n\nconst anchorForId = id => {\n  const anchor = document.createElement('a')\n  anchor.className = 'anchor hidden-xs'\n  anchor.href = `#${id}`\n  anchor.innerHTML = '<i class=\"fa fa-link\"></i>'\n  anchor.title = id\n  return anchor\n}\n\nconst createHeaderId = (headerContent, headerIds = null) => {\n  // to escape characters not allow in css and humanize\n  const slug = slugifyWithUTF8(headerContent)\n  let id\n  if (window.linkifyHeaderStyle === 'keep-case') {\n    id = slug\n  } else if (window.linkifyHeaderStyle === 'lower-case') {\n    // to make compatible with GitHub, GitLab, Pandoc and many more\n    id = slug.toLowerCase()\n  } else if (window.linkifyHeaderStyle === 'gfm') {\n    // see GitHub implementation reference:\n    // https://gist.github.com/asabaylus/3071099#gistcomment-1593627\n    // it works like 'lower-case', but ...\n    const idBase = slug.toLowerCase()\n    id = idBase\n    if (headerIds !== null) {\n      // ... making sure the id is unique\n      let i = 1\n      while (headerIds.has(id)) {\n        id = idBase + '-' + i\n        i++\n      }\n      headerIds.add(id)\n    }\n  } else {\n    throw new Error('Unknown linkifyHeaderStyle value \"' + window.linkifyHeaderStyle + '\"')\n  }\n  return id\n}\n\nconst linkifyAnchors = (level, containingElement) => {\n  const headers = containingElement.getElementsByTagName(`h${level}`)\n\n  for (let i = 0, l = headers.length; i < l; i++) {\n    const header = headers[i]\n    if (header.getElementsByClassName('anchor').length === 0) {\n      if (typeof header.id === 'undefined' || header.id === '') {\n        header.id = createHeaderId(getHeaderContent(header))\n      }\n      if (!(typeof header.id === 'undefined' || header.id === '')) {\n        header.insertBefore(anchorForId(header.id), header.firstChild)\n      }\n    }\n  }\n}\n\nexport function autoLinkify (view) {\n  const contentBlock = view[0]\n  if (!contentBlock) {\n    return\n  }\n  for (let level = 1; level <= 6; level++) {\n    linkifyAnchors(level, contentBlock)\n  }\n}\n\nfunction getHeaderContent (header) {\n  const headerHTML = $(header).clone()\n  headerHTML.find('.MathJax_Preview').remove()\n  headerHTML.find('.MathJax').remove()\n  return headerHTML[0].innerHTML\n}\n\nfunction changeHeaderId ($header, id, newId) {\n  $header.attr('id', newId)\n  const $headerLink = $header.find(`> a.anchor[href=\"#${id}\"]`)\n  $headerLink.attr('href', `#${newId}`)\n  $headerLink.attr('title', newId)\n}\n\nexport function deduplicatedHeaderId (view) {\n  // headers contained in the last change\n  const headers = view.find(':header.raw').removeClass('raw').toArray()\n  if (headers.length === 0) {\n    return\n  }\n  if (window.linkifyHeaderStyle === 'gfm') {\n    // consistent with GitHub, GitLab, Pandoc & co.\n    // all headers contained in the document, in order of appearance\n    const allHeaders = view.find(':header').toArray()\n    // list of finaly assigned header IDs\n    const headerIds = new Set()\n    for (let j = 0; j < allHeaders.length; j++) {\n      const $header = $(allHeaders[j])\n      const id = $header.attr('id')\n      const newId = createHeaderId(getHeaderContent($header), headerIds)\n      changeHeaderId($header, id, newId)\n    }\n  } else {\n    // the legacy way\n    for (let i = 0; i < headers.length; i++) {\n      const id = $(headers[i]).attr('id')\n      if (!id) continue\n      const duplicatedHeaders = view.find(`:header[id=\"${id}\"]`).toArray()\n      for (let j = 0; j < duplicatedHeaders.length; j++) {\n        if (duplicatedHeaders[j] !== headers[i]) {\n          const newId = id + j\n          const $header = $(duplicatedHeaders[j])\n          changeHeaderId($header, id, newId)\n        }\n      }\n    }\n  }\n}\n\nexport function renderTOC (view) {\n  const tocs = view.find('.toc').toArray()\n  for (let i = 0; i < tocs.length; i++) {\n    const toc = $(tocs[i])\n    const id = `toc${i}`\n    toc.attr('id', id)\n    const target = $(`#${id}`)\n    target.html('')\n    /* eslint-disable no-unused-vars */\n    const TOC = new window.Toc('doc', {\n      level: 3,\n      top: -1,\n      class: 'toc',\n      targetId: id,\n      process: getHeaderContent\n    })\n    /* eslint-enable no-unused-vars */\n    if (target.text() === 'undefined') { target.html('') }\n    target.replaceWith(target.html())\n  }\n}\n\nexport function scrollToHash () {\n  const hash = location.hash\n  location.hash = ''\n  location.hash = hash\n}\n\nfunction highlightRender (code, lang) {\n  if (!lang || /no(-?)highlight|plain|text/.test(lang)) { return }\n  code = S(code).escapeHTML().s\n  if (lang === 'sequence') {\n    return `<div class=\"sequence-diagram raw\">${code}</div>`\n  } else if (lang === 'flow') {\n    return `<div class=\"flow-chart raw\">${code}</div>`\n  } else if (lang === 'graphviz') {\n    return `<div class=\"graphviz raw\">${code}</div>`\n  } else if (lang === 'mermaid') {\n    return `<div class=\"mermaid raw\">${code}</div>`\n  } else if (lang === 'abc') {\n    return `<div class=\"abc raw\">${code}</div>`\n  }\n  const result = {\n    value: code\n  }\n  const showlinenumbers = /=$|=\\d+$|=\\+$/.test(lang)\n  if (showlinenumbers) {\n    let startnumber = 1\n    const matches = lang.match(/=(\\d+)$/)\n    if (matches) { startnumber = parseInt(matches[1]) }\n    const lines = result.value.split('\\n')\n    const linenumbers = []\n    for (let i = 0; i < lines.length - 1; i++) {\n      linenumbers[i] = `<span data-linenumber='${startnumber + i}'></span>`\n    }\n    const continuelinenumber = /=\\+$/.test(lang)\n    const linegutter = `<div class='gutter linenumber${continuelinenumber ? ' continue' : ''}'>${linenumbers.join('\\n')}</div>`\n    result.value = `<div class='wrapper'>${linegutter}<div class='code'>${result.value}</div></div>`\n  }\n  return result.value\n}\n\nexport const md = markdownit('default', {\n  html: true,\n  breaks: true,\n  langPrefix: '',\n  linkify: true,\n  typographer: true,\n  highlight: highlightRender\n})\nwindow.md = md\n\nmd.use(require('markdown-it-abbr'))\nmd.use(require('markdown-it-footnote'))\nmd.use(require('markdown-it-deflist'))\nmd.use(require('markdown-it-mark'))\nmd.use(require('markdown-it-ins'))\nmd.use(require('markdown-it-sub'))\nmd.use(require('markdown-it-sup'))\nmd.use(require('markdown-it-mathjax')({\n  beforeMath: '<span class=\"mathjax raw\">',\n  afterMath: '</span>',\n  beforeInlineMath: '<span class=\"mathjax raw\">\\\\(',\n  afterInlineMath: '\\\\)</span>',\n  beforeDisplayMath: '<span class=\"mathjax raw\">\\\\[',\n  afterDisplayMath: '\\\\]</span>'\n}))\nmd.use(require('markdown-it-imsize'))\n\nmd.use(require('markdown-it-emoji'), {\n  shortcuts: {}\n})\n\nwindow.emojify.setConfig({\n  blacklist: {\n    elements: ['script', 'textarea', 'a', 'pre', 'code', 'svg'],\n    classes: ['no-emojify']\n  },\n  img_dir: `${serverurl}/build/emojify.js/dist/images/basic`,\n  ignore_emoticons: true\n})\n\nmd.renderer.rules.emoji = (token, idx) => window.emojify.replace(`:${token[idx].markup}:`)\n\nfunction renderContainer (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('role', 'alert')\n  tokens[idx].attrJoin('class', 'alert')\n  tokens[idx].attrJoin('class', `alert-${tokens[idx].info.trim()}`)\n  return self.renderToken(...arguments)\n}\nmd.use(markdownitContainer, 'success', { render: renderContainer })\nmd.use(markdownitContainer, 'info', { render: renderContainer })\nmd.use(markdownitContainer, 'warning', { render: renderContainer })\nmd.use(markdownitContainer, 'danger', { render: renderContainer })\n\nconst defaultImageRender = md.renderer.rules.image\nmd.renderer.rules.image = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return defaultImageRender(...arguments)\n}\nmd.renderer.rules.list_item_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.blockquote_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.heading_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.fence = (tokens, idx, options, env, self) => {\n  const token = tokens[idx]\n  const info = token.info ? md.utils.unescapeAll(token.info).trim() : ''\n  let langName = ''\n  let highlighted\n\n  if (info) {\n    langName = info.split(/\\s+/g)[0]\n    if (/!$/.test(info)) token.attrJoin('class', 'wrap')\n    token.attrJoin('class', options.langPrefix + langName.replace(/=$|=\\d+$|=\\+$|!$|=!$/, ''))\n    token.attrJoin('class', 'hljs')\n    token.attrJoin('class', 'raw')\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName) || md.utils.escapeHtml(token.content)\n  } else {\n    highlighted = md.utils.escapeHtml(token.content)\n  }\n\n  if (highlighted.indexOf('<pre') === 0) {\n    return `${highlighted}\\n`\n  }\n\n  return `<pre><code${self.renderAttrs(token)}>${highlighted}</code></pre>\\n`\n}\n\n// youtube\nconst youtubePlugin = new Plugin(\n  // regexp to match\n  /{%youtube\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const videoid = match[1]\n    if (!videoid) return\n    const div = $('<div class=\"youtube raw\"></div>')\n    div.attr('data-videoid', videoid)\n    const thumbnailSrc = `https://img.youtube.com/vi/${videoid}/hqdefault.jpg`\n    const image = `<img src=\"${thumbnailSrc}\" />`\n    div.append(image)\n    const icon = '<i class=\"icon fa fa-youtube-play fa-5x\"></i>'\n    div.append(icon)\n    return div[0].outerHTML\n  }\n)\n// vimeo\nconst vimeoPlugin = new Plugin(\n  // regexp to match\n  /{%vimeo\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const videoid = match[1]\n    if (!videoid) return\n    const div = $('<div class=\"vimeo raw\"></div>')\n    div.attr('data-videoid', videoid)\n    const icon = '<i class=\"icon fa fa-vimeo-square fa-5x\"></i>'\n    div.append(icon)\n    return div[0].outerHTML\n  }\n)\n// gist\nconst gistPlugin = new Plugin(\n  // regexp to match\n  /{%gist\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const gistid = match[1]\n    const code = `<code data-gist-id=\"${gistid}\"></code>`\n    return code\n  }\n)\n// TOC\nconst tocPlugin = new Plugin(\n  // regexp to match\n  /^\\[TOC\\]$/i,\n\n  (match, utils) => '<div class=\"toc\"></div>'\n)\n// slideshare\nconst slidesharePlugin = new Plugin(\n  // regexp to match\n  /{%slideshare\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const slideshareid = match[1]\n    const div = $('<div class=\"slideshare raw\"></div>')\n    div.attr('data-slideshareid', slideshareid)\n    return div[0].outerHTML\n  }\n)\n// speakerdeck\nconst speakerdeckPlugin = new Plugin(\n  // regexp to match\n  /{%speakerdeck\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const speakerdeckid = match[1]\n    const div = $('<div class=\"speakerdeck raw\"></div>')\n    div.attr('data-speakerdeckid', speakerdeckid)\n    return div[0].outerHTML\n  }\n)\n// pdf\nconst pdfPlugin = new Plugin(\n  // regexp to match\n  /{%pdf\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const pdfurl = match[1]\n    if (!isValidURL(pdfurl)) return match[0]\n    const div = $('<div class=\"pdf raw\"></div>')\n    div.attr('data-pdfurl', pdfurl)\n    return div[0].outerHTML\n  }\n)\n\nconst emojijsPlugin = new Plugin(\n  // regexp to match emoji shortcodes :something:\n  // We generate an universal regex that guaranteed only contains the\n  // emojies we have available. This should prevent all false-positives\n  new RegExp(':(' + window.emojify.emojiNames.map((item) => { return RegExp.escape(item) }).join('|') + '):', 'i'),\n\n  (match, utils) => {\n    const emoji = match[1].toLowerCase()\n    const div = $(`<img class=\"emoji\" alt=\":${emoji}:\" src=\"${serverurl}/build/emojify.js/dist/images/basic/${emoji}.png\"></img>`)\n    return div[0].outerHTML\n  }\n)\n\n// yaml meta, from https://github.com/eugeneware/remarkable-meta\nfunction get (state, line) {\n  const pos = state.bMarks[line]\n  const max = state.eMarks[line]\n  return state.src.substr(pos, max - pos)\n}\n\nfunction meta (state, start, end, silent) {\n  if (start !== 0 || state.blkIndent !== 0) return false\n  if (state.tShift[start] < 0) return false\n  if (!get(state, start).match(/^---$/)) return false\n\n  const data = []\n  let line\n  for (line = start + 1; line < end; line++) {\n    const str = get(state, line)\n    if (str.match(/^(\\.{3}|-{3})$/)) break\n    if (state.tShift[line] < 0) break\n    data.push(str)\n  }\n\n  if (line >= end) return false\n\n  try {\n    md.meta = window.jsyaml.safeLoad(data.join('\\n')) || {}\n    delete md.metaError\n  } catch (err) {\n    md.metaError = err\n    console.warn(err)\n    return false\n  }\n\n  state.line = line + 1\n\n  return true\n}\n\nfunction metaPlugin (md) {\n  md.meta = md.meta || {}\n  md.block.ruler.before('code', 'meta', meta, {\n    alt: []\n  })\n}\n\nmd.use(metaPlugin)\nmd.use(emojijsPlugin)\nmd.use(youtubePlugin)\nmd.use(vimeoPlugin)\nmd.use(gistPlugin)\nmd.use(tocPlugin)\nmd.use(slidesharePlugin)\nmd.use(speakerdeckPlugin)\nmd.use(pdfPlugin)\n\nexport default {\n  md\n}\n","/* eslint-env browser, jquery */\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"debug\"] }] */\n/* global serverurl, moment */\n\nimport store from 'store'\nimport S from 'string'\nimport LZString from 'lz-string'\nimport url from 'wurl'\n\nimport {\n  checkNoteIdValid,\n  encodeNoteId\n} from './utils'\n\nimport {\n  checkIfAuth\n} from './lib/common/login'\n\nimport {\n  urlpath\n} from './lib/config'\n\nwindow.migrateHistoryFromTempCallback = null\n\nmigrateHistoryFromTemp()\n\nfunction migrateHistoryFromTemp () {\n  if (url('#tempid')) {\n    $.get(`${serverurl}/temp`, {\n      tempid: url('#tempid')\n    })\n      .done(data => {\n        if (data && data.temp) {\n          getStorageHistory(olddata => {\n            if (!olddata || olddata.length === 0) {\n              saveHistoryToStorage(JSON.parse(data.temp))\n            }\n          })\n        }\n      })\n      .always(() => {\n        let hash = location.hash.split('#')[1]\n        hash = hash.split('&')\n        for (let i = 0; i < hash.length; i++) {\n          if (hash[i].indexOf('tempid') === 0) {\n            hash.splice(i, 1)\n            i--\n          }\n        }\n        hash = hash.join('&')\n        location.hash = hash\n        if (window.migrateHistoryFromTempCallback) { window.migrateHistoryFromTempCallback() }\n      })\n  }\n}\n\nexport function saveHistory (notehistory) {\n  checkIfAuth(\n    () => {\n      saveHistoryToServer(notehistory)\n    },\n    () => {\n      saveHistoryToStorage(notehistory)\n    }\n  )\n}\n\nfunction saveHistoryToStorage (notehistory) {\n  store.set('notehistory', JSON.stringify(notehistory))\n}\n\nfunction saveHistoryToServer (notehistory) {\n  $.post(`${serverurl}/history`, {\n    history: JSON.stringify(notehistory)\n  })\n}\n\nexport function saveStorageHistoryToServer (callback) {\n  const data = store.get('notehistory')\n  if (data) {\n    $.post(`${serverurl}/history`, {\n      history: data\n    })\n      .done(data => {\n        callback(data)\n      })\n  }\n}\n\nexport function clearDuplicatedHistory (notehistory) {\n  const newnotehistory = []\n  for (let i = 0; i < notehistory.length; i++) {\n    let found = false\n    for (let j = 0; j < newnotehistory.length; j++) {\n      const id = notehistory[i].id.replace(/=+$/, '')\n      const newId = newnotehistory[j].id.replace(/=+$/, '')\n      if (id === newId || notehistory[i].id === newnotehistory[j].id || !notehistory[i].id || !newnotehistory[j].id) {\n        const time = (typeof notehistory[i].time === 'number' ? moment(notehistory[i].time) : moment(notehistory[i].time, 'MMMM Do YYYY, h:mm:ss a'))\n        const newTime = (typeof newnotehistory[i].time === 'number' ? moment(newnotehistory[i].time) : moment(newnotehistory[i].time, 'MMMM Do YYYY, h:mm:ss a'))\n        if (time >= newTime) {\n          newnotehistory[j] = notehistory[i]\n        }\n        found = true\n        break\n      }\n    }\n    if (!found) { newnotehistory.push(notehistory[i]) }\n  }\n  return newnotehistory\n}\n\nfunction addHistory (id, text, time, tags, pinned, notehistory) {\n  // only add when note id exists\n  if (id) {\n    notehistory.push({\n      id,\n      text,\n      time,\n      tags,\n      pinned\n    })\n  }\n  return notehistory\n}\n\nexport function removeHistory (id, notehistory) {\n  for (let i = 0; i < notehistory.length; i++) {\n    if (notehistory[i].id === id) {\n      notehistory.splice(i, 1)\n      i -= 1\n    }\n  }\n  return notehistory\n}\n\n// used for inner\nexport function writeHistory (title, tags) {\n  checkIfAuth(\n    () => {\n      // no need to do this anymore, this will count from server-side\n      // writeHistoryToServer(title, tags);\n    },\n    () => {\n      writeHistoryToStorage(title, tags)\n    }\n  )\n}\n\nfunction writeHistoryToStorage (title, tags) {\n  const data = store.get('notehistory')\n  let notehistory\n  if (data && typeof data === 'string') {\n    notehistory = JSON.parse(data)\n  } else {\n    notehistory = []\n  }\n\n  const newnotehistory = generateHistory(title, tags, notehistory)\n  saveHistoryToStorage(newnotehistory)\n}\n\nif (!Array.isArray) {\n  Array.isArray = arg => Object.prototype.toString.call(arg) === '[object Array]'\n}\n\nfunction renderHistory (title, tags) {\n  // console.debug(tags);\n  const id = urlpath ? location.pathname.slice(urlpath.length + 1, location.pathname.length).split('/')[1] : location.pathname.split('/')[1]\n  return {\n    id,\n    text: title,\n    time: moment().valueOf(),\n    tags\n  }\n}\n\nfunction generateHistory (title, tags, notehistory) {\n  const info = renderHistory(title, tags)\n  // keep any pinned data\n  let pinned = false\n  for (let i = 0; i < notehistory.length; i++) {\n    if (notehistory[i].id === info.id && notehistory[i].pinned) {\n      pinned = true\n      break\n    }\n  }\n  notehistory = removeHistory(info.id, notehistory)\n  notehistory = addHistory(info.id, info.text, info.time, info.tags, pinned, notehistory)\n  notehistory = clearDuplicatedHistory(notehistory)\n  return notehistory\n}\n\n// used for outer\nexport function getHistory (callback) {\n  checkIfAuth(\n    () => {\n      getServerHistory(callback)\n    },\n    () => {\n      getStorageHistory(callback)\n    }\n  )\n}\n\nfunction getServerHistory (callback) {\n  $.get(`${serverurl}/history`)\n    .done(data => {\n      if (data.history) {\n        callback(data.history)\n      }\n    })\n    .fail((xhr, status, error) => {\n      console.error(xhr.responseText)\n    })\n}\n\nexport function getStorageHistory (callback) {\n  let data = store.get('notehistory')\n  if (data) {\n    if (typeof data === 'string') { data = JSON.parse(data) }\n    callback(data)\n  }\n  // eslint-disable-next-line node/no-callback-literal\n  callback([])\n}\n\nexport function parseHistory (list, callback) {\n  checkIfAuth(\n    () => {\n      parseServerToHistory(list, callback)\n    },\n    () => {\n      parseStorageToHistory(list, callback)\n    }\n  )\n}\n\nexport function parseServerToHistory (list, callback) {\n  $.get(`${serverurl}/history`)\n    .done(data => {\n      if (data.history) {\n        parseToHistory(list, data.history, callback)\n      }\n    })\n    .fail((xhr, status, error) => {\n      console.error(xhr.responseText)\n    })\n}\n\nexport function parseStorageToHistory (list, callback) {\n  let data = store.get('notehistory')\n  if (data) {\n    if (typeof data === 'string') { data = JSON.parse(data) }\n    parseToHistory(list, data, callback)\n  }\n  parseToHistory(list, [], callback)\n}\n\nfunction parseToHistory (list, notehistory, callback) {\n  if (!callback) return\n  else if (!list || !notehistory) callback(list, notehistory)\n  else if (notehistory && notehistory.length > 0) {\n    for (let i = 0; i < notehistory.length; i++) {\n      // migrate LZString encoded id to base64url encoded id\n      try {\n        const id = LZString.decompressFromBase64(notehistory[i].id)\n        if (id && checkNoteIdValid(id)) {\n          notehistory[i].id = encodeNoteId(id)\n        }\n      } catch (err) {\n        console.error(err)\n      }\n      // parse time to timestamp and fromNow\n      const timestamp = (typeof notehistory[i].time === 'number' ? moment(notehistory[i].time) : moment(notehistory[i].time, 'MMMM Do YYYY, h:mm:ss a'))\n      notehistory[i].timestamp = timestamp.valueOf()\n      notehistory[i].fromNow = timestamp.fromNow()\n      notehistory[i].time = timestamp.format('llll')\n      // prevent XSS\n      notehistory[i].text = S(notehistory[i].text).escapeHTML().s\n      notehistory[i].tags = (notehistory[i].tags && notehistory[i].tags.length > 0) ? S(notehistory[i].tags).escapeHTML().s.split(',') : []\n      // add to list\n      if (notehistory[i].id && list.get('id', notehistory[i].id).length === 0) { list.add(notehistory[i]) }\n    }\n  }\n  callback(list, notehistory)\n}\n\nexport function postHistoryToServer (noteId, data, callback) {\n  $.post(`${serverurl}/history/${noteId}`, data)\n    .done(result => callback(null, result))\n    .fail((xhr, status, error) => {\n      console.error(xhr.responseText)\n      return callback(error, null)\n    })\n}\n\nexport function deleteServerHistory (noteId, callback) {\n  $.ajax({\n    url: `${serverurl}/history${noteId ? '/' + noteId : ''}`,\n    type: 'DELETE'\n  })\n    .done(result => callback(null, result))\n    .fail((xhr, status, error) => {\n      console.error(xhr.responseText)\n      return callback(error, null)\n    })\n}\n","import base64url from 'base64url'\n\nconst uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i\n\nexport function checkNoteIdValid (id) {\n  const result = id.match(uuidRegex)\n  if (result && result.length === 1) {\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function encodeNoteId (id) {\n  // remove dashes in UUID and encode in url-safe base64\n  const str = id.replace(/-/g, '')\n  const hexStr = Buffer.from(str, 'hex')\n  return base64url.encode(hexStr)\n}\n\nexport function decodeNoteId (encodedId) {\n  // decode from url-safe base64\n  const id = base64url.toBuffer(encodedId).toString('hex')\n  // add dashes between the UUID string parts\n  const idParts = []\n  idParts.push(id.substr(0, 8))\n  idParts.push(id.substr(8, 4))\n  idParts.push(id.substr(12, 4))\n  idParts.push(id.substr(16, 4))\n  idParts.push(id.substr(20, 12))\n  return idParts.join('-')\n}\n","var map = {\n\t\"./bmp\": 49,\n\t\"./bmp.js\": 49,\n\t\"./gif\": 50,\n\t\"./gif.js\": 50,\n\t\"./jpg\": 51,\n\t\"./jpg.js\": 51,\n\t\"./png\": 52,\n\t\"./png.js\": 52,\n\t\"./psd\": 53,\n\t\"./psd.js\": 53,\n\t\"./svg\": 54,\n\t\"./svg.js\": 54,\n\t\"./tiff\": 55,\n\t\"./tiff.js\": 55,\n\t\"./webp\": 56,\n\t\"./webp.js\": 56\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 263;","export default {\n  edit: {\n    name: 'edit'\n  },\n  view: {\n    name: 'view'\n  },\n  both: {\n    name: 'both'\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\n\n  function bracketRegex(config) {\n    return config && config.bracketRegex || /[(){}[\\]]/\n  }\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n    var re = bracketRegex(config)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\n        re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = bracketRegex(config)\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\n          var match = matching[ch];\n          if (match && (match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textare whever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    function clear(cm) {\n      if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n    }\n\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      cm.off(\"focus\", doMatchBrackets)\n      cm.off(\"blur\", clear)\n      clear(cm);\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n      cm.on(\"focus\", doMatchBrackets)\n      cm.on(\"blur\", clear)\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch; }\n\n  var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n  var nameChar = nameStartChar + \"\\-\\:\\.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n  var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n  function Iter(cm, line, ch, range) {\n    this.line = line; this.ch = ch;\n    this.cm = cm; this.text = cm.getLine(line);\n    this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n    this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n  }\n\n  function tagAt(iter, ch) {\n    var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n    return type && /\\btag\\b/.test(type);\n  }\n\n  function nextLine(iter) {\n    if (iter.line >= iter.max) return;\n    iter.ch = 0;\n    iter.text = iter.cm.getLine(++iter.line);\n    return true;\n  }\n  function prevLine(iter) {\n    if (iter.line <= iter.min) return;\n    iter.text = iter.cm.getLine(--iter.line);\n    iter.ch = iter.text.length;\n    return true;\n  }\n\n  function toTagEnd(iter) {\n    for (;;) {\n      var gt = iter.text.indexOf(\">\", iter.ch);\n      if (gt == -1) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt + 1; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n  function toTagStart(iter) {\n    for (;;) {\n      var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n      if (lt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, lt + 1)) { iter.ch = lt; continue; }\n      xmlTagStart.lastIndex = lt;\n      iter.ch = lt;\n      var match = xmlTagStart.exec(iter.text);\n      if (match && match.index == lt) return match;\n    }\n  }\n\n  function toNextTag(iter) {\n    for (;;) {\n      xmlTagStart.lastIndex = iter.ch;\n      var found = xmlTagStart.exec(iter.text);\n      if (!found) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, found.index + 1)) { iter.ch = found.index + 1; continue; }\n      iter.ch = found.index + found[0].length;\n      return found;\n    }\n  }\n  function toPrevTag(iter) {\n    for (;;) {\n      var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n      if (gt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n\n  function findMatchingClose(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var next = toNextTag(iter), end, startLine = iter.line, startCh = iter.ch - (next ? next[0].length : 0);\n      if (!next || !(end = toTagEnd(iter))) return;\n      if (end == \"selfClose\") continue;\n      if (next[1]) { // closing tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == next[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == next[2])) return {\n          tag: next[2],\n          from: Pos(startLine, startCh),\n          to: Pos(iter.line, iter.ch)\n        };\n      } else { // opening tag\n        stack.push(next[2]);\n      }\n    }\n  }\n  function findMatchingOpen(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var prev = toPrevTag(iter);\n      if (!prev) return;\n      if (prev == \"selfClose\") { toTagStart(iter); continue; }\n      var endLine = iter.line, endCh = iter.ch;\n      var start = toTagStart(iter);\n      if (!start) return;\n      if (start[1]) { // closing tag\n        stack.push(start[2]);\n      } else { // opening tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == start[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == start[2])) return {\n          tag: start[2],\n          from: Pos(iter.line, iter.ch),\n          to: Pos(endLine, endCh)\n        };\n      }\n    }\n  }\n\n  CodeMirror.registerHelper(\"fold\", \"xml\", function(cm, start) {\n    var iter = new Iter(cm, start.line, 0);\n    for (;;) {\n      var openTag = toNextTag(iter)\n      if (!openTag || iter.line != start.line) return\n      var end = toTagEnd(iter)\n      if (!end) return\n      if (!openTag[1] && end != \"selfClose\") {\n        var startPos = Pos(iter.line, iter.ch);\n        var endPos = findMatchingClose(iter, openTag[2]);\n        return endPos && cmp(endPos.from, startPos) > 0 ? {from: startPos, to: endPos.from} : null\n      }\n    }\n  });\n  CodeMirror.findMatchingTag = function(cm, pos, range) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n    var end = toTagEnd(iter), to = end && Pos(iter.line, iter.ch);\n    var start = end && toTagStart(iter);\n    if (!end || !start || cmp(iter, pos) > 0) return;\n    var here = {from: Pos(iter.line, iter.ch), to: to, tag: start[2]};\n    if (end == \"selfClose\") return {open: here, close: null, at: \"open\"};\n\n    if (start[1]) { // closing tag\n      return {open: findMatchingOpen(iter, start[2]), close: here, at: \"close\"};\n    } else { // opening tag\n      iter = new Iter(cm, to.line, to.ch, range);\n      return {open: here, close: findMatchingClose(iter, start[2]), at: \"open\"};\n    }\n  };\n\n  CodeMirror.findEnclosingTag = function(cm, pos, range, tag) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    for (;;) {\n      var open = findMatchingOpen(iter, tag);\n      if (!open) break;\n      var forward = new Iter(cm, pos.line, pos.ch, range);\n      var close = findMatchingClose(forward, open.tag);\n      if (close) return {open: open, close: close};\n    }\n  };\n\n  // Used by addon/edit/closetag.js\n  CodeMirror.scanForClosingTag = function(cm, pos, name, end) {\n    var iter = new Iter(cm, pos.line, pos.ch, end ? {from: 0, to: end} : null);\n    return findMatchingClose(iter, name);\n  };\n});\n","// extracted by mini-css-extract-plugin\nexport {};","/* eslint-env browser, jquery */\n// allow some attributes\n\nconst filterXSS = require('xss')\n\nconst whiteListAttr = ['id', 'class', 'style']\nwindow.whiteListAttr = whiteListAttr\n// allow link starts with '.', '/' and custom protocol with '://', exclude link starts with javascript://\nconst linkRegex = /^(?!javascript:\\/\\/)([\\w|-]+:\\/\\/)|^([.|/])+/i\n// allow data uri, from https://gist.github.com/bgrins/6194623\nconst dataUriRegex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*)\\s*$/i\n// custom white list\nconst whiteList = filterXSS.whiteList\n// allow ol specify start number\nwhiteList.ol = ['start']\n// allow li specify value number\nwhiteList.li = ['value']\n// allow style tag\nwhiteList.style = []\n// allow kbd tag\nwhiteList.kbd = []\n// allow ifram tag with some safe attributes\nwhiteList.iframe = ['allowfullscreen', 'name', 'referrerpolicy', 'src', 'width', 'height']\n// allow summary tag\nwhiteList.summary = []\n// allow ruby tag\nwhiteList.ruby = []\n// allow rp tag for ruby\nwhiteList.rp = []\n// allow rt tag for ruby\nwhiteList.rt = []\n// allow figure tag\nwhiteList.figure = []\n// allow figcaption tag\nwhiteList.figcaption = []\n\nconst filterXSSOptions = {\n  allowCommentTag: true,\n  whiteList: whiteList,\n  escapeHtml: function (html) {\n    // allow html comment in multiple lines\n    return html.replace(/<(?!!--)/g, '&lt;').replace(/-->/g, '__HTML_COMMENT_END__').replace(/>/g, '&gt;').replace(/__HTML_COMMENT_END__/g, '-->')\n  },\n  onIgnoreTag: function (tag, html, options) {\n    // allow comment tag\n    if (tag === '!--') {\n      // do not filter its attributes\n      return html.replace(/<(?!!--)/g, '&lt;').replace(/-->/g, '__HTML_COMMENT_END__').replace(/>/g, '&gt;').replace(/__HTML_COMMENT_END__/g, '-->')\n    }\n  },\n  onTagAttr: function (tag, name, value, isWhiteAttr) {\n    // allow href and src that match linkRegex\n    if (isWhiteAttr && (name === 'href' || name === 'src') && linkRegex.test(value)) {\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n    // allow data uri in img src\n    if (isWhiteAttr && (tag === 'img' && name === 'src') && dataUriRegex.test(value)) {\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n  },\n  onIgnoreTagAttr: function (tag, name, value, isWhiteAttr) {\n    // allow attr start with 'data-' or in the whiteListAttr\n    if (name.substr(0, 5) === 'data-' || window.whiteListAttr.indexOf(name) !== -1) {\n      // escape its value using built-in escapeAttrValue function\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n  }\n}\n\nfunction preventXSS (html) {\n  return filterXSS(html, filterXSSOptions)\n}\nwindow.preventXSS = preventXSS\n\nmodule.exports = {\n  preventXSS: preventXSS,\n  escapeAttrValue: filterXSS.escapeAttrValue\n}\n","module.exports = require('./dist/base64url').default;\nmodule.exports.default = module.exports;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (!cm.options.otherCursors && (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom)) { continue }\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n\n    if (cm.options.otherCursors) {\n      var others = cm.display.lineSpace.getElementsByClassName('CodeMirror-other-cursor');\n      for (var i = 0, l = others.length; i < l; i++) {\n          var other = others[i];\n          var line = parseInt(other.getAttribute('data-line'));\n          var ch = parseInt(other.getAttribute('data-ch'));\n          var offsetLeft = parseFloat(other.getAttribute('data-offset-left'));\n          var offsetTop = parseFloat(other.getAttribute('data-offset-top'));\n          var coord = cm.charCoords({line: line, ch: ch}, 'windows');\n          other.style.left = coord.left + offsetLeft + 'px';\n          other.style.top = coord.top + offsetTop + 'px';\n      }\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    d.otherCursorsDiv = elt(\"div\", null, \"CodeMirror-other-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.otherCursorsDiv, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    if(change.origin == \"ignoreHistory\") { return; }\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history.maxGeneration);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200c\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (unit > 0 ? 0 : -1));\n        if (isNaN(ch)) { next = null; }\n        else { next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (ch >= 0xD800 && ch < 0xDC00 ? 2 : 1))),\n                            -dir); }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = document.activeElement == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || document.activeElement != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      if(!this.composing) { this.textarea.value = content; }\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      if(!this.composing) { this.prevInput = this.textarea.value = \"\"; }\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.58.2\";\n\n  return CodeMirror;\n\n})));\n","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","/* eslint-env browser, jquery */\n/* global Cookies */\nconst supportedLanguages = require('../../locales/_supported.json')\n\nfunction detectLang () {\n  if (Cookies.get('locale')) {\n    let lang = Cookies.get('locale')\n    if (lang === 'zh') {\n      lang = 'zh-TW'\n    }\n    return lang\n  }\n  const userLang = navigator.language || navigator.userLanguage\n  const userLangCode = userLang.split('-')[0]\n  const supportedLanguagesList = Object.keys(supportedLanguages)\n  if (supportedLanguagesList.includes(userLangCode)) {\n    return userLangCode\n  } else if (supportedLanguagesList.includes(userLang)) {\n    return userLang\n  }\n  return 'en'\n}\n\nconst lang = detectLang()\nconst localeSelector = $('.ui-locale')\nObject.entries(supportedLanguages).forEach(function ([isoCode, nativeName]) {\n  localeSelector.append(`<option value=\"${isoCode}\">${nativeName}</option>`)\n})\n\n// the following condition is needed as the selector is only available in the intro/history page\nif (localeSelector.length > 0) {\n  localeSelector.val(lang)\n  $('select.ui-locale option[value=\"' + lang + '\"]').attr('selected', 'selected')\n  localeSelector.change(function () {\n    Cookies.set('locale', $(this).val(), {\n      expires: 365,\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n    window.location.reload()\n  })\n}\n\nwindow.moment.locale(lang)\n","module.exports = [\n\t// Listed in order of usage preference\n\trequire('./localStorage'),\n\trequire('./oldFF-globalStorage'),\n\trequire('./oldIE-userDataStorage'),\n\trequire('./cookieStorage'),\n\trequire('./sessionStorage'),\n\trequire('./memoryStorage')\n]\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","// oldFF-globalStorage provides storage for Firefox\n// versions 6 and 7, where no localStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldFF-globalStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar globalStorage = Global.globalStorage\n\nfunction read(key) {\n\treturn globalStorage[key]\n}\n\nfunction write(key, data) {\n\tglobalStorage[key] = data\n}\n\nfunction each(fn) {\n\tfor (var i = globalStorage.length - 1; i >= 0; i--) {\n\t\tvar key = globalStorage.key(i)\n\t\tfn(globalStorage[key], key)\n\t}\n}\n\nfunction remove(key) {\n\treturn globalStorage.removeItem(key)\n}\n\nfunction clearAll() {\n\teach(function(key, _) {\n\t\tdelete globalStorage[key]\n\t})\n}\n","// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","module.exports = json2Plugin\n\nfunction json2Plugin() {\n\trequire('./lib/json2')\n\treturn {}\n}\n","/* eslint-disable */\n\n//  json2.js\n//  2016-10-28\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//  See http://www.JSON.org/js.html\n//  This code should be minified before deployment.\n//  See http://javascript.crockford.com/jsmin.html\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\n\n//  This file creates a global JSON object containing two methods: stringify\n//  and parse. This file provides the ES5 JSON capability to ES3 systems.\n//  If a project might run on IE8 or earlier, then this file should be included.\n//  This file does nothing on ES5 systems.\n\n//      JSON.stringify(value, replacer, space)\n//          value       any JavaScript value, usually an object or array.\n//          replacer    an optional parameter that determines how object\n//                      values are stringified for objects. It can be a\n//                      function or an array of strings.\n//          space       an optional parameter that specifies the indentation\n//                      of nested structures. If it is omitted, the text will\n//                      be packed without extra whitespace. If it is a number,\n//                      it will specify the number of spaces to indent at each\n//                      level. If it is a string (such as \"\\t\" or \"&nbsp;\"),\n//                      it contains the characters used to indent at each level.\n//          This method produces a JSON text from a JavaScript value.\n//          When an object value is found, if the object contains a toJSON\n//          method, its toJSON method will be called and the result will be\n//          stringified. A toJSON method does not serialize: it returns the\n//          value represented by the name/value pair that should be serialized,\n//          or undefined if nothing should be serialized. The toJSON method\n//          will be passed the key associated with the value, and this will be\n//          bound to the value.\n\n//          For example, this would serialize Dates as ISO strings.\n\n//              Date.prototype.toJSON = function (key) {\n//                  function f(n) {\n//                      // Format integers to have at least two digits.\n//                      return (n < 10)\n//                          ? \"0\" + n\n//                          : n;\n//                  }\n//                  return this.getUTCFullYear()   + \"-\" +\n//                       f(this.getUTCMonth() + 1) + \"-\" +\n//                       f(this.getUTCDate())      + \"T\" +\n//                       f(this.getUTCHours())     + \":\" +\n//                       f(this.getUTCMinutes())   + \":\" +\n//                       f(this.getUTCSeconds())   + \"Z\";\n//              };\n\n//          You can provide an optional replacer method. It will be passed the\n//          key and value of each member, with this bound to the containing\n//          object. The value that is returned from your method will be\n//          serialized. If your method returns undefined, then the member will\n//          be excluded from the serialization.\n\n//          If the replacer parameter is an array of strings, then it will be\n//          used to select the members to be serialized. It filters the results\n//          such that only members with keys listed in the replacer array are\n//          stringified.\n\n//          Values that do not have JSON representations, such as undefined or\n//          functions, will not be serialized. Such values in objects will be\n//          dropped; in arrays they will be replaced with null. You can use\n//          a replacer function to replace those with JSON values.\n\n//          JSON.stringify(undefined) returns undefined.\n\n//          The optional space parameter produces a stringification of the\n//          value that is filled with line breaks and indentation to make it\n//          easier to read.\n\n//          If the space parameter is a non-empty string, then that string will\n//          be used for indentation. If the space parameter is a number, then\n//          the indentation will be that many spaces.\n\n//          Example:\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}]);\n//          // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}], null, \"\\t\");\n//          // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n//          text = JSON.stringify([new Date()], function (key, value) {\n//              return this[key] instanceof Date\n//                  ? \"Date(\" + this[key] + \")\"\n//                  : value;\n//          });\n//          // text is '[\"Date(---current time---)\"]'\n\n//      JSON.parse(text, reviver)\n//          This method parses a JSON text to produce an object or array.\n//          It can throw a SyntaxError exception.\n\n//          The optional reviver parameter is a function that can filter and\n//          transform the results. It receives each of the keys and values,\n//          and its return value is used instead of the original value.\n//          If it returns what it received, then the structure is not modified.\n//          If it returns undefined then the member is deleted.\n\n//          Example:\n\n//          // Parse the text. Values that look like ISO date strings will\n//          // be converted to Date objects.\n\n//          myData = JSON.parse(text, function (key, value) {\n//              var a;\n//              if (typeof value === \"string\") {\n//                  a =\n//   /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n//                  if (a) {\n//                      return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n//                          +a[5], +a[6]));\n//                  }\n//              }\n//              return value;\n//          });\n\n//          myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n//              var d;\n//              if (typeof value === \"string\" &&\n//                      value.slice(0, 5) === \"Date(\" &&\n//                      value.slice(-1) === \")\") {\n//                  d = new Date(value.slice(5, -1));\n//                  if (d) {\n//                      return d;\n//                  }\n//              }\n//              return value;\n//          });\n\n//  This is a reference implementation. You are free to copy, modify, or\n//  redistribute.\n\n/*jslint\n    eval, for, this\n*/\n\n/*property\n    JSON, apply, call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nif (typeof JSON !== \"object\") {\n    JSON = {};\n}\n\n(function () {\n    \"use strict\";\n\n    var rx_one = /^[\\],:{}\\s]*$/;\n    var rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n    var rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n    var rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n    var rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    var rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10\n            ? \"0\" + n\n            : n;\n    }\n\n    function this_value() {\n        return this.valueOf();\n    }\n\n    if (typeof Date.prototype.toJSON !== \"function\") {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear() + \"-\" +\n                        f(this.getUTCMonth() + 1) + \"-\" +\n                        f(this.getUTCDate()) + \"T\" +\n                        f(this.getUTCHours()) + \":\" +\n                        f(this.getUTCMinutes()) + \":\" +\n                        f(this.getUTCSeconds()) + \"Z\"\n                : null;\n        };\n\n        Boolean.prototype.toJSON = this_value;\n        Number.prototype.toJSON = this_value;\n        String.prototype.toJSON = this_value;\n    }\n\n    var gap;\n    var indent;\n    var meta;\n    var rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        rx_escapable.lastIndex = 0;\n        return rx_escapable.test(string)\n            ? \"\\\"\" + string.replace(rx_escapable, function (a) {\n                var c = meta[a];\n                return typeof c === \"string\"\n                    ? c\n                    : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + \"\\\"\"\n            : \"\\\"\" + string + \"\\\"\";\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i;          // The loop counter.\n        var k;          // The member key.\n        var v;          // The member value.\n        var length;\n        var mind = gap;\n        var partial;\n        var value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === \"object\" &&\n                typeof value.toJSON === \"function\") {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === \"function\") {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case \"string\":\n            return quote(value);\n\n        case \"number\":\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value)\n                ? String(value)\n                : \"null\";\n\n        case \"boolean\":\n        case \"null\":\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce \"null\". The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is \"object\", we might be dealing with an object or an array or\n// null.\n\n        case \"object\":\n\n// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n// so watch out for that case.\n\n            if (!value) {\n                return \"null\";\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || \"null\";\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? \"[]\"\n                    : gap\n                        ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\n                        : \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === \"object\") {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === \"string\") {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? \"{}\"\n                : gap\n                    ? \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n                    : \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== \"function\") {\n        meta = {    // table of character substitutions\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\": \"\\\\\\\"\",\n            \"\\\\\": \"\\\\\\\\\"\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === \"number\") {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === \"string\") {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== \"function\" &&\n                    (typeof replacer !== \"object\" ||\n                    typeof replacer.length !== \"number\")) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n// Make a fake root object containing our value under the key of \"\".\n// Return the result of stringifying the value.\n\n            return str(\"\", {\"\": value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== \"function\") {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k;\n                var v;\n                var value = holder[key];\n                if (value && typeof value === \"object\") {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            rx_dangerous.lastIndex = 0;\n            if (rx_dangerous.test(text)) {\n                text = text.replace(rx_dangerous, function (a) {\n                    return \"\\\\u\" +\n                            (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n// because they can cause invocation, and \"=\" because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n// replace all simple value tokens with \"]\" characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or \"]\" or\n// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n            if (\n                rx_one.test(\n                    text\n                        .replace(rx_two, \"@\")\n                        .replace(rx_three, \"]\")\n                        .replace(rx_four, \"\")\n                )\n            ) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval(\"(\" + text + \")\");\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return (typeof reviver === \"function\")\n                    ? walk({\"\": j}, \"\")\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError(\"JSON.parse\");\n        };\n    }\n}());","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pad_string_1 = require(\"./pad-string\");\nfunction encode(input, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n    }\n    return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n}\n;\nfunction decode(base64url, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n}\nfunction toBase64(base64url) {\n    base64url = base64url.toString();\n    return pad_string_1.default(base64url)\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\");\n}\nfunction fromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction toBuffer(base64url) {\n    return Buffer.from(toBase64(base64url), \"base64\");\n}\nvar base64url = encode;\nbase64url.encode = encode;\nbase64url.decode = decode;\nbase64url.toBase64 = toBase64;\nbase64url.fromBase64 = fromBase64;\nbase64url.toBuffer = toBuffer;\nexports.default = base64url;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction padString(input) {\n    var segmentLength = 4;\n    var stringLength = input.length;\n    var diff = stringLength % segmentLength;\n    if (!diff) {\n        return input;\n    }\n    var position = stringLength;\n    var padLength = segmentLength - diff;\n    var paddedStringLength = stringLength + padLength;\n    var buffer = Buffer.alloc(paddedStringLength);\n    buffer.write(input);\n    while (padLength--) {\n        buffer.write(\"=\", position++);\n    }\n    return buffer.toString();\n}\nexports.default = padString;\n","'use strict';\n\nvar alphabet;\nvar alphabetIndexMap;\nvar alphabetIndexMapLength = 0;\n\nfunction isNumberCode(code) {\n  return code >= 48 && code <= 57;\n}\n\nfunction naturalCompare(a, b) {\n  var lengthA = (a += '').length;\n  var lengthB = (b += '').length;\n  var aIndex = 0;\n  var bIndex = 0;\n\n  while (aIndex < lengthA && bIndex < lengthB) {\n    var charCodeA = a.charCodeAt(aIndex);\n    var charCodeB = b.charCodeAt(bIndex);\n\n    if (isNumberCode(charCodeA)) {\n      if (!isNumberCode(charCodeB)) {\n        return charCodeA - charCodeB;\n      }\n\n      var numStartA = aIndex;\n      var numStartB = bIndex;\n\n      while (charCodeA === 48 && ++numStartA < lengthA) {\n        charCodeA = a.charCodeAt(numStartA);\n      }\n      while (charCodeB === 48 && ++numStartB < lengthB) {\n        charCodeB = b.charCodeAt(numStartB);\n      }\n\n      var numEndA = numStartA;\n      var numEndB = numStartB;\n\n      while (numEndA < lengthA && isNumberCode(a.charCodeAt(numEndA))) {\n        ++numEndA;\n      }\n      while (numEndB < lengthB && isNumberCode(b.charCodeAt(numEndB))) {\n        ++numEndB;\n      }\n\n      var difference = numEndA - numStartA - numEndB + numStartB; // numA length - numB length\n      if (difference) {\n        return difference;\n      }\n\n      while (numStartA < numEndA) {\n        difference = a.charCodeAt(numStartA++) - b.charCodeAt(numStartB++);\n        if (difference) {\n          return difference;\n        }\n      }\n\n      aIndex = numEndA;\n      bIndex = numEndB;\n      continue;\n    }\n\n    if (charCodeA !== charCodeB) {\n      if (\n        charCodeA < alphabetIndexMapLength &&\n        charCodeB < alphabetIndexMapLength &&\n        alphabetIndexMap[charCodeA] !== -1 &&\n        alphabetIndexMap[charCodeB] !== -1\n      ) {\n        return alphabetIndexMap[charCodeA] - alphabetIndexMap[charCodeB];\n      }\n\n      return charCodeA - charCodeB;\n    }\n\n    ++aIndex;\n    ++bIndex;\n  }\n\n  if (aIndex >= lengthA && bIndex < lengthB && lengthA >= lengthB) {\n    return -1;\n  }\n\n  if (bIndex >= lengthB && aIndex < lengthA && lengthB >= lengthA) {\n    return 1;\n  }\n\n  return lengthA - lengthB;\n}\n\nnaturalCompare.caseInsensitive = naturalCompare.i = function(a, b) {\n  return naturalCompare(('' + a).toLowerCase(), ('' + b).toLowerCase());\n};\n\nObject.defineProperties(naturalCompare, {\n  alphabet: {\n    get: function() {\n      return alphabet;\n    },\n\n    set: function(value) {\n      alphabet = value;\n      alphabetIndexMap = [];\n\n      var i = 0;\n\n      if (alphabet) {\n        for (; i < alphabet.length; i++) {\n          alphabetIndexMap[alphabet.charCodeAt(i)] = i;\n        }\n      }\n\n      alphabetIndexMapLength = alphabetIndexMap.length;\n\n      for (i = 0; i < alphabetIndexMapLength; i++) {\n        if (alphabetIndexMap[i] === undefined) {\n          alphabetIndexMap[i] = -1;\n        }\n      }\n    },\n  },\n});\n\nmodule.exports = naturalCompare;\n","/**\n * A cross-browser implementation of getAttribute.\n * Source found here: http://stackoverflow.com/a/3755343/361337 written by Vivin Paliath\n *\n * Return the value for `attr` at `element`.\n *\n * @param {Element} el\n * @param {String} attr\n * @api public\n */\n\nmodule.exports = function (el, attr) {\n  var result = (el.getAttribute && el.getAttribute(attr)) || null\n  if (!result) {\n    var attrs = el.attributes\n    var length = attrs.length\n    for (var i = 0; i < length; i++) {\n      if (attrs[i] !== undefined) {\n        if (attrs[i].nodeName === attr) {\n          result = attrs[i].nodeValue\n        }\n      }\n    }\n  }\n  return result\n}\n","module.exports = function (list) {\n  var addAsync = function (values, callback, items) {\n    var valuesToAdd = values.splice(0, 50)\n    items = items || []\n    items = items.concat(list.add(valuesToAdd))\n    if (values.length > 0) {\n      setTimeout(function () {\n        addAsync(values, callback, items)\n      }, 1)\n    } else {\n      list.update()\n      callback(items)\n    }\n  }\n  return addAsync\n}\n","var classes = require('./utils/classes'),\n  events = require('./utils/events'),\n  List = require('./index')\n\nmodule.exports = function (list) {\n  var isHidden = false\n\n  var refresh = function (pagingList, options) {\n    if (list.page < 1) {\n      list.listContainer.style.display = 'none'\n      isHidden = true\n      return\n    } else if (isHidden) {\n      list.listContainer.style.display = 'block'\n    }\n\n    var item,\n      l = list.matchingItems.length,\n      index = list.i,\n      page = list.page,\n      pages = Math.ceil(l / page),\n      currentPage = Math.ceil(index / page),\n      innerWindow = options.innerWindow || 2,\n      left = options.left || options.outerWindow || 0,\n      right = options.right || options.outerWindow || 0\n\n    right = pages - right\n    pagingList.clear()\n    for (var i = 1; i <= pages; i++) {\n      var className = currentPage === i ? 'active' : ''\n\n      //console.log(i, left, right, currentPage, (currentPage - innerWindow), (currentPage + innerWindow), className);\n\n      if (is.number(i, left, right, currentPage, innerWindow)) {\n        item = pagingList.add({\n          page: i,\n          dotted: false,\n        })[0]\n        if (className) {\n          classes(item.elm).add(className)\n        }\n        item.elm.firstChild.setAttribute('data-i', i)\n        item.elm.firstChild.setAttribute('data-page', page)\n      } else if (is.dotted(pagingList, i, left, right, currentPage, innerWindow, pagingList.size())) {\n        item = pagingList.add({\n          page: '...',\n          dotted: true,\n        })[0]\n        classes(item.elm).add('disabled')\n      }\n    }\n  }\n\n  var is = {\n    number: function (i, left, right, currentPage, innerWindow) {\n      return this.left(i, left) || this.right(i, right) || this.innerWindow(i, currentPage, innerWindow)\n    },\n    left: function (i, left) {\n      return i <= left\n    },\n    right: function (i, right) {\n      return i > right\n    },\n    innerWindow: function (i, currentPage, innerWindow) {\n      return i >= currentPage - innerWindow && i <= currentPage + innerWindow\n    },\n    dotted: function (pagingList, i, left, right, currentPage, innerWindow, currentPageItem) {\n      return (\n        this.dottedLeft(pagingList, i, left, right, currentPage, innerWindow) ||\n        this.dottedRight(pagingList, i, left, right, currentPage, innerWindow, currentPageItem)\n      )\n    },\n    dottedLeft: function (pagingList, i, left, right, currentPage, innerWindow) {\n      return i == left + 1 && !this.innerWindow(i, currentPage, innerWindow) && !this.right(i, right)\n    },\n    dottedRight: function (pagingList, i, left, right, currentPage, innerWindow, currentPageItem) {\n      if (pagingList.items[currentPageItem - 1].values().dotted) {\n        return false\n      } else {\n        return i == right && !this.innerWindow(i, currentPage, innerWindow) && !this.right(i, right)\n      }\n    },\n  }\n\n  return function (options) {\n    var pagingList = new List(list.listContainer.id, {\n      listClass: options.paginationClass || 'pagination',\n      item: options.item || \"<li><a class='page' href='#'></a></li>\",\n      valueNames: ['page', 'dotted'],\n      searchClass: 'pagination-search-that-is-not-supposed-to-exist',\n      sortClass: 'pagination-sort-that-is-not-supposed-to-exist',\n    })\n\n    events.bind(pagingList.listContainer, 'click', function (e) {\n      var target = e.target || e.srcElement,\n        page = list.utils.getAttribute(target, 'data-page'),\n        i = list.utils.getAttribute(target, 'data-i')\n      if (i) {\n        list.show((i - 1) * page + 1, page)\n      }\n    })\n\n    list.on('updated', function () {\n      refresh(pagingList, options)\n    })\n    refresh(pagingList, options)\n  }\n}\n","module.exports = function (list) {\n  var Item = require('./item')(list)\n\n  var getChildren = function (parent) {\n    var nodes = parent.childNodes,\n      items = []\n    for (var i = 0, il = nodes.length; i < il; i++) {\n      // Only textnodes have a data attribute\n      if (nodes[i].data === undefined) {\n        items.push(nodes[i])\n      }\n    }\n    return items\n  }\n\n  var parse = function (itemElements, valueNames) {\n    for (var i = 0, il = itemElements.length; i < il; i++) {\n      list.items.push(new Item(valueNames, itemElements[i]))\n    }\n  }\n  var parseAsync = function (itemElements, valueNames) {\n    var itemsToIndex = itemElements.splice(0, 50) // TODO: If < 100 items, what happens in IE etc?\n    parse(itemsToIndex, valueNames)\n    if (itemElements.length > 0) {\n      setTimeout(function () {\n        parseAsync(itemElements, valueNames)\n      }, 1)\n    } else {\n      list.update()\n      list.trigger('parseComplete')\n    }\n  }\n\n  list.handlers.parseComplete = list.handlers.parseComplete || []\n\n  return function () {\n    var itemsToIndex = getChildren(list.list),\n      valueNames = list.valueNames\n\n    if (list.indexAsync) {\n      parseAsync(itemsToIndex, valueNames)\n    } else {\n      parse(itemsToIndex, valueNames)\n    }\n  }\n}\n","var Templater = function (list) {\n  var createItem,\n    templater = this\n\n  var init = function () {\n    var itemSource\n\n    if (typeof list.item === 'function') {\n      createItem = function (values) {\n        var item = list.item(values)\n        return getItemSource(item)\n      }\n      return\n    }\n\n    if (typeof list.item === 'string') {\n      if (list.item.indexOf('<') === -1) {\n        itemSource = document.getElementById(list.item)\n      } else {\n        itemSource = getItemSource(list.item)\n      }\n    } else {\n      /* If item source does not exists, use the first item in list as\n      source for new items */\n      itemSource = getFirstListItem()\n    }\n\n    if (!itemSource) {\n      throw new Error(\"The list needs to have at least one item on init otherwise you'll have to add a template.\")\n    }\n\n    itemSource = createCleanTemplateItem(itemSource, list.valueNames)\n\n    createItem = function () {\n      return itemSource.cloneNode(true)\n    }\n  }\n\n  var createCleanTemplateItem = function (templateNode, valueNames) {\n    var el = templateNode.cloneNode(true)\n    el.removeAttribute('id')\n\n    for (var i = 0, il = valueNames.length; i < il; i++) {\n      var elm = undefined,\n        valueName = valueNames[i]\n      if (valueName.data) {\n        for (var j = 0, jl = valueName.data.length; j < jl; j++) {\n          el.setAttribute('data-' + valueName.data[j], '')\n        }\n      } else if (valueName.attr && valueName.name) {\n        elm = list.utils.getByClass(el, valueName.name, true)\n        if (elm) {\n          elm.setAttribute(valueName.attr, '')\n        }\n      } else {\n        elm = list.utils.getByClass(el, valueName, true)\n        if (elm) {\n          elm.innerHTML = ''\n        }\n      }\n    }\n    return el\n  }\n\n  var getFirstListItem = function () {\n    var nodes = list.list.childNodes\n\n    for (var i = 0, il = nodes.length; i < il; i++) {\n      // Only textnodes have a data attribute\n      if (nodes[i].data === undefined) {\n        return nodes[i].cloneNode(true)\n      }\n    }\n    return undefined\n  }\n\n  var getItemSource = function (itemHTML) {\n    if (typeof itemHTML !== 'string') return undefined\n    if (/<tr[\\s>]/g.exec(itemHTML)) {\n      var tbody = document.createElement('tbody')\n      tbody.innerHTML = itemHTML\n      return tbody.firstElementChild\n    } else if (itemHTML.indexOf('<') !== -1) {\n      var div = document.createElement('div')\n      div.innerHTML = itemHTML\n      return div.firstElementChild\n    }\n    return undefined\n  }\n\n  var getValueName = function (name) {\n    for (var i = 0, il = list.valueNames.length; i < il; i++) {\n      var valueName = list.valueNames[i]\n      if (valueName.data) {\n        var data = valueName.data\n        for (var j = 0, jl = data.length; j < jl; j++) {\n          if (data[j] === name) {\n            return { data: name }\n          }\n        }\n      } else if (valueName.attr && valueName.name && valueName.name == name) {\n        return valueName\n      } else if (valueName === name) {\n        return name\n      }\n    }\n  }\n\n  var setValue = function (item, name, value) {\n    var elm = undefined,\n      valueName = getValueName(name)\n    if (!valueName) return\n    if (valueName.data) {\n      item.elm.setAttribute('data-' + valueName.data, value)\n    } else if (valueName.attr && valueName.name) {\n      elm = list.utils.getByClass(item.elm, valueName.name, true)\n      if (elm) {\n        elm.setAttribute(valueName.attr, value)\n      }\n    } else {\n      elm = list.utils.getByClass(item.elm, valueName, true)\n      if (elm) {\n        elm.innerHTML = value\n      }\n    }\n  }\n\n  this.get = function (item, valueNames) {\n    templater.create(item)\n    var values = {}\n    for (var i = 0, il = valueNames.length; i < il; i++) {\n      var elm = undefined,\n        valueName = valueNames[i]\n      if (valueName.data) {\n        for (var j = 0, jl = valueName.data.length; j < jl; j++) {\n          values[valueName.data[j]] = list.utils.getAttribute(item.elm, 'data-' + valueName.data[j])\n        }\n      } else if (valueName.attr && valueName.name) {\n        elm = list.utils.getByClass(item.elm, valueName.name, true)\n        values[valueName.name] = elm ? list.utils.getAttribute(elm, valueName.attr) : ''\n      } else {\n        elm = list.utils.getByClass(item.elm, valueName, true)\n        values[valueName] = elm ? elm.innerHTML : ''\n      }\n    }\n    return values\n  }\n\n  this.set = function (item, values) {\n    if (!templater.create(item)) {\n      for (var v in values) {\n        if (values.hasOwnProperty(v)) {\n          setValue(item, v, values[v])\n        }\n      }\n    }\n  }\n\n  this.create = function (item) {\n    if (item.elm !== undefined) {\n      return false\n    }\n    item.elm = createItem(item.values())\n    templater.set(item, item.values())\n    return true\n  }\n  this.remove = function (item) {\n    if (item.elm.parentNode === list.list) {\n      list.list.removeChild(item.elm)\n    }\n  }\n  this.show = function (item) {\n    templater.create(item)\n    list.list.appendChild(item.elm)\n  }\n  this.hide = function (item) {\n    if (item.elm !== undefined && item.elm.parentNode === list.list) {\n      list.list.removeChild(item.elm)\n    }\n  }\n  this.clear = function () {\n    /* .innerHTML = ''; fucks up IE */\n    if (list.list.hasChildNodes()) {\n      while (list.list.childNodes.length >= 1) {\n        list.list.removeChild(list.list.firstChild)\n      }\n    }\n  }\n\n  init()\n}\n\nmodule.exports = function (list) {\n  return new Templater(list)\n}\n","module.exports = function (list) {\n  var item, text, columns, searchString, customSearch\n\n  var prepare = {\n    resetList: function () {\n      list.i = 1\n      list.templater.clear()\n      customSearch = undefined\n    },\n    setOptions: function (args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1]\n      } else if (args.length == 2 && typeof args[1] == 'function') {\n        columns = undefined\n        customSearch = args[1]\n      } else if (args.length == 3) {\n        columns = args[1]\n        customSearch = args[2]\n      } else {\n        columns = undefined\n      }\n    },\n    setColumns: function () {\n      if (list.items.length === 0) return\n      if (columns === undefined) {\n        columns = list.searchColumns === undefined ? prepare.toArray(list.items[0].values()) : list.searchColumns\n      }\n    },\n    setSearchString: function (s) {\n      s = list.utils.toString(s).toLowerCase()\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&') // Escape regular expression characters\n      searchString = s\n    },\n    toArray: function (values) {\n      var tmpColumn = []\n      for (var name in values) {\n        tmpColumn.push(name)\n      }\n      return tmpColumn\n    },\n  }\n  var search = {\n    list: function () {\n      // Extract quoted phrases \"word1 word2\" from original searchString\n      // searchString is converted to lowercase by List.js\n      var words = [],\n        phrase,\n        ss = searchString\n      while ((phrase = ss.match(/\"([^\"]+)\"/)) !== null) {\n        words.push(phrase[1])\n        ss = ss.substring(0, phrase.index) + ss.substring(phrase.index + phrase[0].length)\n      }\n      // Get remaining space-separated words (if any)\n      ss = ss.trim()\n      if (ss.length) words = words.concat(ss.split(/\\s+/))\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        var item = list.items[k]\n        item.found = false\n        if (!words.length) continue\n        for (var i = 0, il = words.length; i < il; i++) {\n          var word_found = false\n          for (var j = 0, jl = columns.length; j < jl; j++) {\n            var values = item.values(),\n              column = columns[j]\n            if (values.hasOwnProperty(column) && values[column] !== undefined && values[column] !== null) {\n              var text = typeof values[column] !== 'string' ? values[column].toString() : values[column]\n              if (text.toLowerCase().indexOf(words[i]) !== -1) {\n                // word found, so no need to check it against any other columns\n                word_found = true\n                break\n              }\n            }\n          }\n          // this word not found? no need to check any other words, the item cannot match\n          if (!word_found) break\n        }\n        item.found = word_found\n      }\n    },\n    // Removed search.item() and search.values()\n    reset: function () {\n      list.reset.search()\n      list.searched = false\n    },\n  }\n\n  var searchMethod = function (str) {\n    list.trigger('searchStart')\n\n    prepare.resetList()\n    prepare.setSearchString(str)\n    prepare.setOptions(arguments) // str, cols|searchFunction, searchFunction\n    prepare.setColumns()\n\n    if (searchString === '') {\n      search.reset()\n    } else {\n      list.searched = true\n      if (customSearch) {\n        customSearch(searchString, columns)\n      } else {\n        search.list()\n      }\n    }\n\n    list.update()\n    list.trigger('searchComplete')\n    return list.visibleItems\n  }\n\n  list.handlers.searchStart = list.handlers.searchStart || []\n  list.handlers.searchComplete = list.handlers.searchComplete || []\n\n  list.utils.events.bind(\n    list.utils.getByClass(list.listContainer, list.searchClass),\n    'keyup',\n    list.utils.events.debounce(function (e) {\n      var target = e.target || e.srcElement, // IE have srcElement\n        alreadyCleared = target.value === '' && !list.searched\n      if (!alreadyCleared) {\n        // If oninput already have resetted the list, do nothing\n        searchMethod(target.value)\n      }\n    }, list.searchDelay)\n  )\n\n  // Used to detect click on HTML5 clear button\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'input', function (e) {\n    var target = e.target || e.srcElement\n    if (target.value === '') {\n      searchMethod('')\n    }\n  })\n\n  return searchMethod\n}\n","module.exports = function (list) {\n  // Add handlers\n  list.handlers.filterStart = list.handlers.filterStart || []\n  list.handlers.filterComplete = list.handlers.filterComplete || []\n\n  return function (filterFunction) {\n    list.trigger('filterStart')\n    list.i = 1 // Reset paging\n    list.reset.filter()\n    if (filterFunction === undefined) {\n      list.filtered = false\n    } else {\n      list.filtered = true\n      var is = list.items\n      for (var i = 0, il = is.length; i < il; i++) {\n        var item = is[i]\n        if (filterFunction(item)) {\n          item.filtered = true\n        } else {\n          item.filtered = false\n        }\n      }\n    }\n    list.update()\n    list.trigger('filterComplete')\n    return list.visibleItems\n  }\n}\n","module.exports = function (list) {\n  var buttons = {\n    els: undefined,\n    clear: function () {\n      for (var i = 0, il = buttons.els.length; i < il; i++) {\n        list.utils.classes(buttons.els[i]).remove('asc')\n        list.utils.classes(buttons.els[i]).remove('desc')\n      }\n    },\n    getOrder: function (btn) {\n      var predefinedOrder = list.utils.getAttribute(btn, 'data-order')\n      if (predefinedOrder == 'asc' || predefinedOrder == 'desc') {\n        return predefinedOrder\n      } else if (list.utils.classes(btn).has('desc')) {\n        return 'asc'\n      } else if (list.utils.classes(btn).has('asc')) {\n        return 'desc'\n      } else {\n        return 'asc'\n      }\n    },\n    getInSensitive: function (btn, options) {\n      var insensitive = list.utils.getAttribute(btn, 'data-insensitive')\n      if (insensitive === 'false') {\n        options.insensitive = false\n      } else {\n        options.insensitive = true\n      }\n    },\n    setOrder: function (options) {\n      for (var i = 0, il = buttons.els.length; i < il; i++) {\n        var btn = buttons.els[i]\n        if (list.utils.getAttribute(btn, 'data-sort') !== options.valueName) {\n          continue\n        }\n        var predefinedOrder = list.utils.getAttribute(btn, 'data-order')\n        if (predefinedOrder == 'asc' || predefinedOrder == 'desc') {\n          if (predefinedOrder == options.order) {\n            list.utils.classes(btn).add(options.order)\n          }\n        } else {\n          list.utils.classes(btn).add(options.order)\n        }\n      }\n    },\n  }\n\n  var sort = function () {\n    list.trigger('sortStart')\n    var options = {}\n\n    var target = arguments[0].currentTarget || arguments[0].srcElement || undefined\n\n    if (target) {\n      options.valueName = list.utils.getAttribute(target, 'data-sort')\n      buttons.getInSensitive(target, options)\n      options.order = buttons.getOrder(target)\n    } else {\n      options = arguments[1] || options\n      options.valueName = arguments[0]\n      options.order = options.order || 'asc'\n      options.insensitive = typeof options.insensitive == 'undefined' ? true : options.insensitive\n    }\n\n    buttons.clear()\n    buttons.setOrder(options)\n\n    // caseInsensitive\n    // alphabet\n    var customSortFunction = options.sortFunction || list.sortFunction || null,\n      multi = options.order === 'desc' ? -1 : 1,\n      sortFunction\n\n    if (customSortFunction) {\n      sortFunction = function (itemA, itemB) {\n        return customSortFunction(itemA, itemB, options) * multi\n      }\n    } else {\n      sortFunction = function (itemA, itemB) {\n        var sort = list.utils.naturalSort\n        sort.alphabet = list.alphabet || options.alphabet || undefined\n        if (!sort.alphabet && options.insensitive) {\n          sort = list.utils.naturalSort.caseInsensitive\n        }\n        return sort(itemA.values()[options.valueName], itemB.values()[options.valueName]) * multi\n      }\n    }\n\n    list.items.sort(sortFunction)\n    list.update()\n    list.trigger('sortComplete')\n  }\n\n  // Add handlers\n  list.handlers.sortStart = list.handlers.sortStart || []\n  list.handlers.sortComplete = list.handlers.sortComplete || []\n\n  buttons.els = list.utils.getByClass(list.listContainer, list.sortClass)\n  list.utils.events.bind(buttons.els, 'click', sort)\n  list.on('searchStart', buttons.clear)\n  list.on('filterStart', buttons.clear)\n\n  return sort\n}\n","// extracted by mini-css-extract-plugin\nexport {};","var classes = require('./utils/classes'),\n  events = require('./utils/events'),\n  extend = require('./utils/extend'),\n  toString = require('./utils/to-string'),\n  getByClass = require('./utils/get-by-class'),\n  fuzzy = require('./utils/fuzzy')\n\nmodule.exports = function (list, options) {\n  options = options || {}\n\n  options = extend(\n    {\n      location: 0,\n      distance: 100,\n      threshold: 0.4,\n      multiSearch: true,\n      searchClass: 'fuzzy-search',\n    },\n    options\n  )\n\n  var fuzzySearch = {\n    search: function (searchString, columns) {\n      // Substract arguments from the searchString or put searchString as only argument\n      var searchArguments = options.multiSearch ? searchString.replace(/ +$/, '').split(/ +/) : [searchString]\n\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        fuzzySearch.item(list.items[k], columns, searchArguments)\n      }\n    },\n    item: function (item, columns, searchArguments) {\n      var found = true\n      for (var i = 0; i < searchArguments.length; i++) {\n        var foundArgument = false\n        for (var j = 0, jl = columns.length; j < jl; j++) {\n          if (fuzzySearch.values(item.values(), columns[j], searchArguments[i])) {\n            foundArgument = true\n          }\n        }\n        if (!foundArgument) {\n          found = false\n        }\n      }\n      item.found = found\n    },\n    values: function (values, value, searchArgument) {\n      if (values.hasOwnProperty(value)) {\n        var text = toString(values[value]).toLowerCase()\n\n        if (fuzzy(text, searchArgument, options)) {\n          return true\n        }\n      }\n      return false\n    },\n  }\n\n  events.bind(\n    getByClass(list.listContainer, options.searchClass),\n    'keyup',\n    list.utils.events.debounce(function (e) {\n      var target = e.target || e.srcElement // IE have srcElement\n      list.search(target.value, fuzzySearch.search)\n    }, list.searchDelay)\n  )\n\n  return function (str, columns) {\n    list.search(str, columns, fuzzySearch.search)\n  }\n}\n","module.exports = function (text, pattern, options) {\n  // Aproximately where in the text is the pattern expected to be found?\n  var Match_Location = options.location || 0\n\n  //Determines how close the match must be to the fuzzy location (specified above). An exact letter match which is 'distance' characters away from the fuzzy location would score as a complete mismatch. A distance of '0' requires the match be at the exact location specified, a threshold of '1000' would require a perfect match to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  var Match_Distance = options.distance || 100\n\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match (of both letters and location), a threshold of '1.0' would match anything.\n  var Match_Threshold = options.threshold || 0.4\n\n  if (pattern === text) return true // Exact match\n  if (pattern.length > 32) return false // This algorithm cannot be used\n\n  // Set starting location at beginning text and initialise the alphabet.\n  var loc = Match_Location,\n    s = (function () {\n      var q = {},\n        i\n\n      for (i = 0; i < pattern.length; i++) {\n        q[pattern.charAt(i)] = 0\n      }\n\n      for (i = 0; i < pattern.length; i++) {\n        q[pattern.charAt(i)] |= 1 << (pattern.length - i - 1)\n      }\n\n      return q\n    })()\n\n  // Compute and return the score for a match with e errors and x location.\n  // Accesses loc and pattern through being a closure.\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length,\n      proximity = Math.abs(loc - x)\n\n    if (!Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy\n    }\n    return accuracy + proximity / Match_Distance\n  }\n\n  var score_threshold = Match_Threshold, // Highest score beyond which we give up.\n    best_loc = text.indexOf(pattern, loc) // Is there a nearby exact match? (speedup)\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold)\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length)\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold)\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << (pattern.length - 1)\n  best_loc = -1\n\n  var bin_min, bin_mid\n  var bin_max = pattern.length + text.length\n  var last_rd\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0\n    bin_mid = bin_max\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid\n      } else {\n        bin_max = bin_mid\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min)\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid\n    var start = Math.max(1, loc - bin_mid + 1)\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length\n\n    var rd = Array(finish + 2)\n    rd[finish + 1] = (1 << d) - 1\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)]\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) | (((last_rd[j + 1] | last_rd[j]) << 1) | 1) | last_rd[j + 1]\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1)\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score\n          best_loc = j - 1\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc)\n          } else {\n            // Already passed loc, downhill from here on in.\n            break\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break\n    }\n    last_rd = rd\n  }\n\n  return best_loc < 0 ? false : true\n}\n",";(function (global) {\n    var lastId = -1;\n\n    // Visibility.js allow you to know, that your web page is in the background\n    // tab and thus not visible to the user. This library is wrap under\n    // Page Visibility API. It fix problems with different vendor prefixes and\n    // add high-level useful functions.\n    var self = {\n\n        // Call callback only when page become to visible for user or\n        // call it now if page is visible now or Page Visibility API\n        // doesnt supported.\n        //\n        // Return false if API isnt supported, true if page is already visible\n        // or listener ID (you can use it in `unbind` method) if page isnt\n        // visible now.\n        //\n        //   Visibility.onVisible(function () {\n        //       startIntroAnimation();\n        //   });\n        onVisible: function (callback) {\n            var support = self.isSupported();\n            if ( !support || !self.hidden() ) {\n                callback();\n                return support;\n            }\n\n            var listener = self.change(function (e, state) {\n                if ( !self.hidden() ) {\n                    self.unbind(listener);\n                    callback();\n                }\n            });\n            return listener;\n        },\n\n        // Call callback when visibility will be changed. First argument for\n        // callback will be original event object, second will be visibility\n        // state name.\n        //\n        // Return listener ID to unbind listener by `unbind` method.\n        //\n        // If Page Visibility API doesnt supported method will be return false\n        // and callback never will be called.\n        //\n        //   Visibility.change(function(e, state) {\n        //       Statistics.visibilityChange(state);\n        //   });\n        //\n        // It is just proxy to `visibilitychange` event, but use vendor prefix.\n        change: function (callback) {\n            if ( !self.isSupported() ) {\n                return false;\n            }\n            lastId += 1;\n            var number = lastId;\n            self._callbacks[number] = callback;\n            self._listen();\n            return number;\n        },\n\n        // Remove `change` listener by it ID.\n        //\n        //   var id = Visibility.change(function(e, state) {\n        //       firstChangeCallback();\n        //       Visibility.unbind(id);\n        //   });\n        unbind: function (id) {\n            delete self._callbacks[id];\n        },\n\n        // Call `callback` in any state, expect prerender. If current state\n        // is prerender it will wait until state will be changed.\n        // If Page Visibility API doesnt supported, it will call `callback`\n        // immediately.\n        //\n        // Return false if API isnt supported, true if page is already after\n        // prerendering or listener ID (you can use it in `unbind` method)\n        // if page is prerended now.\n        //\n        //   Visibility.afterPrerendering(function () {\n        //       Statistics.countVisitor();\n        //   });\n        afterPrerendering: function (callback) {\n            var support   = self.isSupported();\n            var prerender = 'prerender';\n\n            if ( !support || prerender != self.state() ) {\n                callback();\n                return support;\n            }\n\n            var listener = self.change(function (e, state) {\n                if ( prerender != state ) {\n                    self.unbind(listener);\n                    callback();\n                }\n            });\n            return listener;\n        },\n\n        // Return true if page now isnt visible to user.\n        //\n        //   if ( !Visibility.hidden() ) {\n        //       VideoPlayer.play();\n        //   }\n        //\n        // It is just proxy to `document.hidden`, but use vendor prefix.\n        hidden: function () {\n            return !!(self._doc.hidden || self._doc.webkitHidden);\n        },\n\n        // Return visibility state: 'visible', 'hidden' or 'prerender'.\n        //\n        //   if ( 'prerender' == Visibility.state() ) {\n        //       Statistics.pageIsPrerendering();\n        //   }\n        //\n        // Dont use `Visibility.state()` to detect, is page visible, because\n        // visibility states can extend in next API versions.\n        // Use more simpler and general `Visibility.hidden()` for this cases.\n        //\n        // It is just proxy to `document.visibilityState`, but use\n        // vendor prefix.\n        state: function () {\n            return self._doc.visibilityState       ||\n                   self._doc.webkitVisibilityState ||\n                   'visible';\n        },\n\n        // Return true if browser support Page Visibility API.\n        // refs: https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\n        //\n        //   if ( Visibility.isSupported() ) {\n        //       Statistics.startTrackingVisibility();\n        //       Visibility.change(function(e, state)) {\n        //           Statistics.trackVisibility(state);\n        //       });\n        //   }\n        isSupported: function () {\n            return self._doc.hidden !== undefined || self._doc.webkitHidden !== undefined;\n        },\n\n        // Link to document object to change it in tests.\n        _doc: document || {},\n\n        // Callbacks from `change` method, that wait visibility changes.\n        _callbacks: { },\n\n        // Listener for `visibilitychange` event.\n        _change: function(event) {\n            var state = self.state();\n\n            for ( var i in self._callbacks ) {\n                self._callbacks[i].call(self._doc, event, state);\n            }\n        },\n\n        // Set listener for `visibilitychange` event.\n        _listen: function () {\n            if ( self._init ) {\n                return;\n            }\n\n            var event = 'visibilitychange';\n            if ( self._doc.webkitVisibilityState ) {\n                event = 'webkit' + event;\n            }\n\n            var listener = function () {\n                self._change.apply(self, arguments);\n            };\n            if ( self._doc.addEventListener ) {\n                self._doc.addEventListener(event, listener);\n            } else {\n                self._doc.attachEvent(event, listener);\n            }\n            self._init = true;\n        }\n\n    };\n\n    if ( typeof(module) != 'undefined' && module.exports ) {\n        module.exports = self;\n    } else {\n        global.Visibility = self;\n    }\n\n})(this);\n","/*!\n * jQuery UI Widget 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Widget\n//>>group: Core\n//>>description: Provides a factory for creating stateful widgets with a common API.\n//>>docs: http://api.jqueryui.com/jQuery.widget/\n//>>demos: http://jqueryui.com/widget/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nvar widgetUuid = 0;\nvar widgetSlice = Array.prototype.slice;\n\n$.cleanData = ( function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// Http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n} )( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar existingConstructor, constructor, basePrototype;\n\n\t// ProxiedPrototype allows the provided prototype to remain unmodified\n\t// so that it can be used as a mixin for multiple widgets (#8876)\n\tvar proxiedPrototype = {};\n\n\tvar namespace = name.split( \".\" )[ 0 ];\n\tname = name.split( \".\" )[ 1 ];\n\tvar fullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\tif ( $.isArray( prototype ) ) {\n\t\tprototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n\t}\n\n\t// Create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\n\t\t// Allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// Allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\n\t// Extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\n\t\t// Copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\n\t\t// Track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t} );\n\n\tbasePrototype = new base();\n\n\t// We need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = ( function() {\n\t\t\tfunction _super() {\n\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t}\n\n\t\t\tfunction _superApply( args ) {\n\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super;\n\t\t\t\tvar __superApply = this._superApply;\n\t\t\t\tvar returnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t} )();\n\t} );\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t} );\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// Redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor,\n\t\t\t\tchild._proto );\n\t\t} );\n\n\t\t// Remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widgetSlice.call( arguments, 1 );\n\tvar inputIndex = 0;\n\tvar inputLength = input.length;\n\tvar key;\n\tvar value;\n\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\";\n\t\tvar args = widgetSlice.call( arguments, 1 );\n\t\tvar returnValue = this;\n\n\t\tif ( isMethodCall ) {\n\n\t\t\t// If this is an empty collection, we need to have the instance method\n\t\t\t// return undefined instead of the jQuery instance\n\t\t\tif ( !this.length && options === \"instance\" ) {\n\t\t\t\treturnValue = undefined;\n\t\t\t} else {\n\t\t\t\tthis.each( function() {\n\t\t\t\t\tvar methodValue;\n\t\t\t\t\tvar instance = $.data( this, fullName );\n\n\t\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\t\treturnValue = instance;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !instance ) {\n\t\t\t\t\t\treturn $.error( \"cannot call methods on \" + name +\n\t\t\t\t\t\t\t\" prior to initialization; \" +\n\t\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name +\n\t\t\t\t\t\t\t\" widget instance\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\n\t\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\t\tmethodValue;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat( args ) );\n\t\t\t}\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\n\toptions: {\n\t\tclasses: {},\n\t\tdisabled: false,\n\n\t\t// Callbacks\n\t\tcreate: null\n\t},\n\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widgetUuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\t\tthis.classesElementLookup = {};\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.document = $( element.style ?\n\n\t\t\t\t// Element within the document\n\t\t\t\telement.ownerDocument :\n\n\t\t\t\t// Element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._setOptionDisabled( this.options.disabled );\n\t\t}\n\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn {};\n\t},\n\n\t_getCreateEventData: $.noop,\n\n\t_create: $.noop,\n\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tvar that = this;\n\n\t\tthis._destroy();\n\t\t$.each( this.classesElementLookup, function( key, value ) {\n\t\t\tthat._removeClass( value, key );\n\t\t} );\n\n\t\t// We can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName );\n\t\tthis.widget()\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" );\n\n\t\t// Clean up events and states\n\t\tthis.bindings.off( this.eventNamespace );\n\t},\n\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key;\n\t\tvar parts;\n\t\tvar curOption;\n\t\tvar i;\n\n\t\tif ( arguments.length === 0 ) {\n\n\t\t\t// Don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\n\t\t\t// Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"classes\" ) {\n\t\t\tthis._setOptionClasses( value );\n\t\t}\n\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._setOptionDisabled( value );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOptionClasses: function( value ) {\n\t\tvar classKey, elements, currentElements;\n\n\t\tfor ( classKey in value ) {\n\t\t\tcurrentElements = this.classesElementLookup[ classKey ];\n\t\t\tif ( value[ classKey ] === this.options.classes[ classKey ] ||\n\t\t\t\t\t!currentElements ||\n\t\t\t\t\t!currentElements.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We are doing this to create a new jQuery object because the _removeClass() call\n\t\t\t// on the next line is going to destroy the reference to the current elements being\n\t\t\t// tracked. We need to save a copy of this collection so that we can add the new classes\n\t\t\t// below.\n\t\t\telements = $( currentElements.get() );\n\t\t\tthis._removeClass( currentElements, classKey );\n\n\t\t\t// We don't use _addClass() here, because that uses this.options.classes\n\t\t\t// for generating the string of classes. We want to use the value passed in from\n\t\t\t// _setOption(), this is the new value of the classes option which was passed to\n\t\t\t// _setOption(). We pass this value directly to _classes().\n\t\t\telements.addClass( this._classes( {\n\t\t\t\telement: elements,\n\t\t\t\tkeys: classKey,\n\t\t\t\tclasses: value,\n\t\t\t\tadd: true\n\t\t\t} ) );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._toggleClass( this.widget(), this.widgetFullName + \"-disabled\", null, !!value );\n\n\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\tif ( value ) {\n\t\t\tthis._removeClass( this.hoverable, null, \"ui-state-hover\" );\n\t\t\tthis._removeClass( this.focusable, null, \"ui-state-focus\" );\n\t\t}\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions( { disabled: false } );\n\t},\n\n\tdisable: function() {\n\t\treturn this._setOptions( { disabled: true } );\n\t},\n\n\t_classes: function( options ) {\n\t\tvar full = [];\n\t\tvar that = this;\n\n\t\toptions = $.extend( {\n\t\t\telement: this.element,\n\t\t\tclasses: this.options.classes || {}\n\t\t}, options );\n\n\t\tfunction processClassString( classes, checkOption ) {\n\t\t\tvar current, i;\n\t\t\tfor ( i = 0; i < classes.length; i++ ) {\n\t\t\t\tcurrent = that.classesElementLookup[ classes[ i ] ] || $();\n\t\t\t\tif ( options.add ) {\n\t\t\t\t\tcurrent = $( $.unique( current.get().concat( options.element.get() ) ) );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent = $( current.not( options.element ).get() );\n\t\t\t\t}\n\t\t\t\tthat.classesElementLookup[ classes[ i ] ] = current;\n\t\t\t\tfull.push( classes[ i ] );\n\t\t\t\tif ( checkOption && options.classes[ classes[ i ] ] ) {\n\t\t\t\t\tfull.push( options.classes[ classes[ i ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._on( options.element, {\n\t\t\t\"remove\": \"_untrackClassesElement\"\n\t\t} );\n\n\t\tif ( options.keys ) {\n\t\t\tprocessClassString( options.keys.match( /\\S+/g ) || [], true );\n\t\t}\n\t\tif ( options.extra ) {\n\t\t\tprocessClassString( options.extra.match( /\\S+/g ) || [] );\n\t\t}\n\n\t\treturn full.join( \" \" );\n\t},\n\n\t_untrackClassesElement: function( event ) {\n\t\tvar that = this;\n\t\t$.each( that.classesElementLookup, function( key, value ) {\n\t\t\tif ( $.inArray( event.target, value ) !== -1 ) {\n\t\t\t\tthat.classesElementLookup[ key ] = $( value.not( event.target ).get() );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_removeClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, false );\n\t},\n\n\t_addClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, true );\n\t},\n\n\t_toggleClass: function( element, keys, extra, add ) {\n\t\tadd = ( typeof add === \"boolean\" ) ? add : extra;\n\t\tvar shift = ( typeof element === \"string\" || element === null ),\n\t\t\toptions = {\n\t\t\t\textra: shift ? keys : extra,\n\t\t\t\tkeys: shift ? element : keys,\n\t\t\t\telement: shift ? this.element : element,\n\t\t\t\tadd: add\n\t\t\t};\n\t\toptions.element.toggleClass( this._classes( options ), add );\n\t\treturn this;\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement;\n\t\tvar instance = this;\n\n\t\t// No suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// No element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\n\t\t\t\t// Allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// Copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ );\n\t\t\tvar eventName = match[ 1 ] + instance.eventNamespace;\n\t\t\tvar selector = match[ 2 ];\n\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.on( eventName, selector, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.on( eventName, handlerProxy );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = ( eventName || \"\" ).split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.off( eventName ).off( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig;\n\t\tvar callback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\n\t\t// The original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// Copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\n\t\tvar hasOptions;\n\t\tvar effectName = !options ?\n\t\t\tmethod :\n\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\tdefaultEffect :\n\t\t\t\toptions.effect || defaultEffect;\n\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue( function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t} );\n\t\t}\n\t};\n} );\n\nreturn $.widget;\n\n} ) );\n","import modeType from './modeType'\n\nconst state = {\n  syncscroll: true,\n  currentMode: modeType.view,\n  nightMode: false\n}\n\nexport default state\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.overlayMode = function(base, overlay, combine) {\n  return {\n    startState: function() {\n      return {\n        base: CodeMirror.startState(base),\n        overlay: CodeMirror.startState(overlay),\n        basePos: 0, baseCur: null,\n        overlayPos: 0, overlayCur: null,\n        streamSeen: null\n      };\n    },\n    copyState: function(state) {\n      return {\n        base: CodeMirror.copyState(base, state.base),\n        overlay: CodeMirror.copyState(overlay, state.overlay),\n        basePos: state.basePos, baseCur: null,\n        overlayPos: state.overlayPos, overlayCur: null\n      };\n    },\n\n    token: function(stream, state) {\n      if (stream != state.streamSeen ||\n          Math.min(state.basePos, state.overlayPos) < stream.start) {\n        state.streamSeen = stream;\n        state.basePos = state.overlayPos = stream.start;\n      }\n\n      if (stream.start == state.basePos) {\n        state.baseCur = base.token(stream, state.base);\n        state.basePos = stream.pos;\n      }\n      if (stream.start == state.overlayPos) {\n        stream.pos = stream.start;\n        state.overlayCur = overlay.token(stream, state.overlay);\n        state.overlayPos = stream.pos;\n      }\n      stream.pos = Math.min(state.basePos, state.overlayPos);\n\n      // state.overlay.combineTokens always takes precedence over combine,\n      // unless set to null\n      if (state.overlayCur == null) return state.baseCur;\n      else if (state.baseCur != null &&\n               state.overlay.combineTokens ||\n               combine && state.overlay.combineTokens == null)\n        return state.baseCur + \" \" + state.overlayCur;\n      else return state.overlayCur;\n    },\n\n    indent: base.indent && function(state, textAfter, line) {\n      return base.indent(state.base, textAfter, line);\n    },\n    electricChars: base.electricChars,\n\n    innerMode: function(state) { return {state: state.base, mode: base}; },\n\n    blankLine: function(state) {\n      var baseToken, overlayToken;\n      if (base.blankLine) baseToken = base.blankLine(state.base);\n      if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n\n      return overlayToken == null ?\n        baseToken :\n        (combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken);\n    }\n  };\n};\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./searchcursor\"), require(\"../scroll/annotatescrollbar\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../scroll/annotatescrollbar\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"showMatchesOnScrollbar\", function(query, caseFold, options) {\n    if (typeof options == \"string\") options = {className: options};\n    if (!options) options = {};\n    return new SearchAnnotation(this, query, caseFold, options);\n  });\n\n  function SearchAnnotation(cm, query, caseFold, options) {\n    this.cm = cm;\n    this.options = options;\n    var annotateOptions = {listenForChanges: false};\n    for (var prop in options) annotateOptions[prop] = options[prop];\n    if (!annotateOptions.className) annotateOptions.className = \"CodeMirror-search-match\";\n    this.annotation = cm.annotateScrollbar(annotateOptions);\n    this.query = query;\n    this.caseFold = caseFold;\n    this.gap = {from: cm.firstLine(), to: cm.lastLine() + 1};\n    this.matches = [];\n    this.update = null;\n\n    this.findMatches();\n    this.annotation.update(this.matches);\n\n    var self = this;\n    cm.on(\"change\", this.changeHandler = function(_cm, change) { self.onChange(change); });\n  }\n\n  var MAX_MATCHES = 1000;\n\n  SearchAnnotation.prototype.findMatches = function() {\n    if (!this.gap) return;\n    for (var i = 0; i < this.matches.length; i++) {\n      var match = this.matches[i];\n      if (match.from.line >= this.gap.to) break;\n      if (match.to.line >= this.gap.from) this.matches.splice(i--, 1);\n    }\n    var cursor = this.cm.getSearchCursor(this.query, CodeMirror.Pos(this.gap.from, 0), {caseFold: this.caseFold, multiline: this.options.multiline});\n    var maxMatches = this.options && this.options.maxMatches || MAX_MATCHES;\n    while (cursor.findNext()) {\n      var match = {from: cursor.from(), to: cursor.to()};\n      if (match.from.line >= this.gap.to) break;\n      this.matches.splice(i++, 0, match);\n      if (this.matches.length > maxMatches) break;\n    }\n    this.gap = null;\n  };\n\n  function offsetLine(line, changeStart, sizeChange) {\n    if (line <= changeStart) return line;\n    return Math.max(changeStart, line + sizeChange);\n  }\n\n  SearchAnnotation.prototype.onChange = function(change) {\n    var startLine = change.from.line;\n    var endLine = CodeMirror.changeEnd(change).line;\n    var sizeChange = endLine - change.to.line;\n    if (this.gap) {\n      this.gap.from = Math.min(offsetLine(this.gap.from, startLine, sizeChange), change.from.line);\n      this.gap.to = Math.max(offsetLine(this.gap.to, startLine, sizeChange), change.from.line);\n    } else {\n      this.gap = {from: change.from.line, to: endLine + 1};\n    }\n\n    if (sizeChange) for (var i = 0; i < this.matches.length; i++) {\n      var match = this.matches[i];\n      var newFrom = offsetLine(match.from.line, startLine, sizeChange);\n      if (newFrom != match.from.line) match.from = CodeMirror.Pos(newFrom, match.from.ch);\n      var newTo = offsetLine(match.to.line, startLine, sizeChange);\n      if (newTo != match.to.line) match.to = CodeMirror.Pos(newTo, match.to.ch);\n    }\n    clearTimeout(this.update);\n    var self = this;\n    this.update = setTimeout(function() { self.updateAfterChange(); }, 250);\n  };\n\n  SearchAnnotation.prototype.updateAfterChange = function() {\n    this.findMatches();\n    this.annotation.update(this.matches);\n  };\n\n  SearchAnnotation.prototype.clear = function() {\n    this.cm.off(\"change\", this.changeHandler);\n    this.annotation.clear();\n  };\n});\n","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"annotateScrollbar\", function(options) {\n    if (typeof options == \"string\") options = {className: options};\n    return new Annotation(this, options);\n  });\n\n  CodeMirror.defineOption(\"scrollButtonHeight\", 0);\n\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption(\"scrollButtonHeight\");\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement().appendChild(document.createElement(\"div\"));\n    this.div.style.cssText = \"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\";\n    this.computeScale();\n\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(function() { self.redraw(); }, delay);\n    }\n\n    var self = this;\n    cm.on(\"refresh\", this.resizeHandler = function() {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(function() {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on(\"markerAdded\", this.resizeHandler);\n    cm.on(\"markerCleared\", this.resizeHandler);\n    if (options.listenForChanges !== false)\n      cm.on(\"changes\", this.changeHandler = function() {\n        scheduleRedraw(250);\n      });\n  }\n\n  Annotation.prototype.computeScale = function() {\n    var cm = this.cm;\n    var hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) /\n      cm.getScrollerElement().scrollHeight\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n\n  Annotation.prototype.update = function(annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n\n  Annotation.prototype.redraw = function(compute) {\n    if (compute !== false) this.computeScale();\n    var cm = this.cm, hScale = this.hScale;\n\n    var frag = document.createDocumentFragment(), anns = this.annotations;\n\n    var wrapping = cm.getOption(\"lineWrapping\");\n    var singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    var curLine = null, curLineObj = null;\n\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line\n        curLineObj = cm.getLineHandle(pos.line)\n        var visual = cm.getLineHandleVisualStart(curLineObj)\n        if (visual != curLineObj) {\n          curLine = cm.getLineNumber(visual)\n          curLineObj = visual\n        }\n      }\n      if ((curLineObj.widgets && curLineObj.widgets.length) ||\n          (wrapping && curLineObj.height > singleLineH))\n        return cm.charCoords(pos, \"local\")[top ? \"top\" : \"bottom\"];\n      var topY = cm.heightAtLine(curLineObj, \"local\");\n      return topY + (top ? 0 : curLineObj.height);\n    }\n\n    var lastLine = cm.lastLine()\n    if (cm.display.barWidth) for (var i = 0, nextTop; i < anns.length; i++) {\n      var ann = anns[i];\n      if (ann.to.line > lastLine) continue;\n      var top = nextTop || getY(ann.from, true) * hScale;\n      var bottom = getY(ann.to, false) * hScale;\n      while (i < anns.length - 1) {\n        if (anns[i + 1].to.line > lastLine) break;\n        nextTop = getY(anns[i + 1].from, true) * hScale;\n        if (nextTop > bottom + .9) break;\n        ann = anns[++i];\n        bottom = getY(ann.to, false) * hScale;\n      }\n      if (bottom == top) continue;\n      var height = Math.max(bottom - top, 3);\n\n      var elt = frag.appendChild(document.createElement(\"div\"));\n      elt.style.cssText = \"position: absolute; right: 0px; width: \" + Math.max(cm.display.barWidth * 1.5, 2) + \"px; top: \"\n        + (top + this.buttonHeight) + \"px; height: \" + height + \"px\";\n      elt.className = this.options.className;\n      if (ann.id) {\n        elt.setAttribute(\"annotation-id\", ann.id);\n      }\n    }\n    this.div.textContent = \"\";\n    this.div.appendChild(frag);\n  };\n\n  Annotation.prototype.clear = function() {\n    this.cm.off(\"refresh\", this.resizeHandler);\n    this.cm.off(\"markerAdded\", this.resizeHandler);\n    this.cm.off(\"markerCleared\", this.resizeHandler);\n    if (this.changeHandler) this.cm.off(\"changes\", this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold && force !== \"fold\") {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options, range);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options, range) {\n    var widget = getOption(cm, options, \"widget\");\n\n    if (typeof widget == \"function\") {\n      widget = widget(range.from, range.to);\n    }\n\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true)\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n","/*\n *  Global UI elements references\n */\n\nexport const getUIElements = () => ({\n  spinner: $('.ui-spinner'),\n  content: $('.ui-content'),\n  toolbar: {\n    shortStatus: $('.ui-short-status'),\n    status: $('.ui-status'),\n    new: $('.ui-new'),\n    publish: $('.ui-publish'),\n    extra: {\n      revision: $('.ui-extra-revision'),\n      slide: $('.ui-extra-slide')\n    },\n    download: {\n      markdown: $('.ui-download-markdown'),\n      html: $('.ui-download-html'),\n      rawhtml: $('.ui-download-raw-html')\n    },\n    export: {\n      dropbox: $('.ui-save-dropbox'),\n      gist: $('.ui-save-gist'),\n      snippet: $('.ui-save-snippet')\n    },\n    import: {\n      dropbox: $('.ui-import-dropbox'),\n      gist: $('.ui-import-gist'),\n      snippet: $('.ui-import-snippet'),\n      clipboard: $('.ui-import-clipboard')\n    },\n    mode: $('.ui-mode'),\n    edit: $('.ui-edit'),\n    view: $('.ui-view'),\n    both: $('.ui-both'),\n    night: $('.ui-night')\n  },\n  infobar: {\n    lastchange: $('.ui-lastchange'),\n    lastchangeuser: $('.ui-lastchangeuser'),\n    nolastchangeuser: $('.ui-no-lastchangeuser'),\n    permission: {\n      permission: $('.ui-permission'),\n      label: $('.ui-permission-label'),\n      freely: $('.ui-permission-freely'),\n      editable: $('.ui-permission-editable'),\n      locked: $('.ui-permission-locked'),\n      private: $('.ui-permission-private'),\n      limited: $('.ui-permission-limited'),\n      protected: $('.ui-permission-protected')\n    },\n    delete: $('.ui-delete-note')\n  },\n  toc: {\n    toc: $('.ui-toc'),\n    affix: $('.ui-affix-toc'),\n    label: $('.ui-toc-label'),\n    dropdown: $('.ui-toc-dropdown')\n  },\n  area: {\n    edit: $('.ui-edit-area'),\n    view: $('.ui-view-area'),\n    codemirror: $('.ui-edit-area .CodeMirror'),\n    codemirrorScroll: $('.ui-edit-area .CodeMirror .CodeMirror-scroll'),\n    codemirrorSizer: $('.ui-edit-area .CodeMirror .CodeMirror-sizer'),\n    codemirrorSizerInner: $(\n      '.ui-edit-area .CodeMirror .CodeMirror-sizer > div'\n    ),\n    markdown: $('.ui-view-area .markdown-body'),\n    resize: {\n      handle: $('.ui-resizable-handle'),\n      syncToggle: $('.ui-sync-toggle')\n    }\n  },\n  modal: {\n    snippetImportProjects: $('#snippetImportModalProjects'),\n    snippetImportSnippets: $('#snippetImportModalSnippets'),\n    revision: $('#revisionModal')\n  }\n})\n\nexport default getUIElements\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n$.ui = $.ui || {};\n\nreturn $.ui.version = \"1.12.1\";\n\n} ) );\n","var ___EXPOSE_LOADER_IMPORT___ = require(\"-!./lz-string.js\");\nvar ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = require(\"../../expose-loader/dist/runtime/getGlobalThis.js\");\nvar ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"LZString\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"LZString\"] = ___EXPOSE_LOADER_IMPORT___;\nmodule.exports = ___EXPOSE_LOADER_IMPORT___;\n","/* eslint-env browser, jquery */\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"debug\"] }] */\n/* global Cookies, moment, serverurl,\n   key, Dropbox, hex2rgb, Visibility */\n\nimport TurndownService from 'turndown'\nimport CodeMirror from 'codemirror/lib/codemirror.js'\n\nimport 'jquery-ui/ui/widgets/resizable'\nimport 'jquery-ui/themes/base/resizable.css'\n\nimport Idle from 'Idle.Js'\n\nimport '../vendor/jquery-textcomplete/jquery.textcomplete'\n\nimport { ot } from '../vendor/ot/ot.min.js'\n\nimport { saveAs } from 'file-saver'\nimport randomColor from 'randomcolor'\nimport store from 'store'\nimport url from 'wurl'\nimport { Spinner } from 'spin.js'\n\nimport _ from 'lodash'\n\nimport List from 'list.js'\n\nimport {\n  checkLoginStateChanged,\n  setloginStateChangeEvent\n} from './lib/common/login'\n\nimport {\n  debug,\n  DROPBOX_APP_KEY,\n  noteid,\n  noteurl,\n  urlpath,\n  version\n} from './lib/config'\n\nimport {\n  autoLinkify,\n  deduplicatedHeaderId,\n  exportToHTML,\n  exportToRawHTML,\n  removeDOMEvents,\n  finishView,\n  generateToc,\n  isValidURL,\n  md,\n  parseMeta,\n  postProcess,\n  renderFilename,\n  renderTOC,\n  renderTags,\n  renderTitle,\n  scrollToHash,\n  smoothHashScroll,\n  updateLastChange,\n  updateLastChangeUser,\n  updateOwner\n} from './extra'\n\nimport {\n  clearMap,\n  setupSyncAreas,\n  syncScrollToEdit,\n  syncScrollToView\n} from './lib/syncscroll'\n\nimport {\n  writeHistory,\n  deleteServerHistory,\n  getHistory,\n  saveHistory,\n  removeHistory\n} from './history'\n\nimport { preventXSS } from './render'\n\nimport Editor from './lib/editor'\n\nimport getUIElements from './lib/editor/ui-elements'\nimport modeType from './lib/modeType'\nimport appState from './lib/appState'\n\nrequire('../vendor/showup/showup')\n\nrequire('../css/index.css')\nrequire('../css/extra.css')\nrequire('../css/slide-preview.css')\nrequire('../css/site.css')\n\nrequire('highlight.js/styles/github-gist.css')\n\nlet defaultTextHeight = 20\nlet viewportMargin = 20\nconst defaultEditorMode = 'gfm'\n\nconst idleTime = 300000 // 5 mins\nconst updateViewDebounce = 100\nconst cursorMenuThrottle = 50\nconst cursorActivityDebounce = 50\nconst cursorAnimatePeriod = 100\nconst supportContainers = ['success', 'info', 'warning', 'danger']\nconst supportCodeModes = [\n  '1c',\n  'abnf',\n  'accesslog',\n  'actionscript',\n  'ada',\n  'angelscript',\n  'apache',\n  'applescript',\n  'arcade',\n  'arduino',\n  'armasm',\n  'asciidoc',\n  'aspectj',\n  'autohotkey',\n  'autoit',\n  'avrasm',\n  'awk',\n  'axapta',\n  'bash',\n  'basic',\n  'bnf',\n  'brainfuck',\n  'cal',\n  'capnproto',\n  'ceylon',\n  'c',\n  'clean',\n  'c-like',\n  'clojure',\n  'clojure-repl',\n  'cmake',\n  'coffeescript',\n  'coq',\n  'cos',\n  'cpp',\n  'crmsh',\n  'crystal',\n  'csharp',\n  'csp',\n  'css',\n  'dart',\n  'delphi',\n  'diff',\n  'django',\n  'd',\n  'dns',\n  'dockerfile',\n  'dos',\n  'dsconfig',\n  'dts',\n  'dust',\n  'ebnf',\n  'elixir',\n  'elm',\n  'erb',\n  'erlang',\n  'erlang-repl',\n  'excel',\n  'fix',\n  'flix',\n  'fortran',\n  'fsharp',\n  'gams',\n  'gauss',\n  'gcode',\n  'gherkin',\n  'glsl',\n  'gml',\n  'go',\n  'golo',\n  'gradle',\n  'groovy',\n  'haml',\n  'handlebars',\n  'haskell',\n  'haxe',\n  'hsp',\n  'htmlbars',\n  'http',\n  'hy',\n  'inform7',\n  'ini',\n  'irpf90',\n  'isbl',\n  'java',\n  'javascript',\n  'jboss-cli',\n  'json',\n  'julia',\n  'julia-repl',\n  'kotlin',\n  'lasso',\n  'latex',\n  'ldif',\n  'leaf',\n  'less',\n  'lisp',\n  'livecodeserver',\n  'livescript',\n  'llvm',\n  'lsl',\n  'lua',\n  'makefile',\n  'markdown',\n  'mathematica',\n  'matlab',\n  'maxima',\n  'mel',\n  'mercury',\n  'mipsasm',\n  'mizar',\n  'mojolicious',\n  'monkey',\n  'moonscript',\n  'n1ql',\n  'nginx',\n  'nim',\n  'nix',\n  'node-repl',\n  'nsis',\n  'objectivec',\n  'ocaml',\n  'openscad',\n  'oxygene',\n  'parser3',\n  'perl',\n  'pf',\n  'pgsql',\n  'php',\n  'php-template',\n  'plaintext',\n  'pony',\n  'powershell',\n  'processing',\n  'profile',\n  'prolog',\n  'properties',\n  'protobuf',\n  'puppet',\n  'purebasic',\n  'python',\n  'python-repl',\n  'q',\n  'qml',\n  'reasonml',\n  'rib',\n  'r',\n  'roboconf',\n  'routeros',\n  'rsl',\n  'ruby',\n  'ruleslanguage',\n  'rust',\n  'sas',\n  'scala',\n  'scheme',\n  'scilab',\n  'scss',\n  'shell',\n  'smali',\n  'smalltalk',\n  'sml',\n  'sqf',\n  'sql',\n  'sql_more',\n  'stan',\n  'stata',\n  'step21',\n  'stylus',\n  'subunit',\n  'swift',\n  'taggerscript',\n  'tap',\n  'tcl',\n  'thrift',\n  'tp',\n  'twig',\n  'typescript',\n  'vala',\n  'vbnet',\n  'vbscript-html',\n  'vbscript',\n  'verilog',\n  'vhdl',\n  'vim',\n  'x86asm',\n  'xl',\n  'xml',\n  'xquery',\n  'yaml',\n  'zephir'\n]\nconst supportCharts = ['sequence', 'flow', 'graphviz', 'mermaid', 'abc']\nconst supportHeaders = [\n  {\n    text: '# h1',\n    search: '#'\n  },\n  {\n    text: '## h2',\n    search: '##'\n  },\n  {\n    text: '### h3',\n    search: '###'\n  },\n  {\n    text: '#### h4',\n    search: '####'\n  },\n  {\n    text: '##### h5',\n    search: '#####'\n  },\n  {\n    text: '###### h6',\n    search: '######'\n  },\n  {\n    text: '###### tags: `example`',\n    search: '###### tags:'\n  }\n]\nconst supportReferrals = [\n  {\n    text: '[reference link]',\n    search: '[]'\n  },\n  {\n    text: '[reference]: https:// \"title\"',\n    search: '[]:'\n  },\n  {\n    text: '[^footnote link]',\n    search: '[^]'\n  },\n  {\n    text: '[^footnote reference]: https:// \"title\"',\n    search: '[^]:'\n  },\n  {\n    text: '^[inline footnote]',\n    search: '^[]'\n  },\n  {\n    text: '[link text][reference]',\n    search: '[][]'\n  },\n  {\n    text: '[link text](https:// \"title\")',\n    search: '[]()'\n  },\n  {\n    text: '![image alt][reference]',\n    search: '![][]'\n  },\n  {\n    text: '![image alt](https:// \"title\")',\n    search: '![]()'\n  },\n  {\n    text: '![image alt](https:// \"title\" =WidthxHeight)',\n    search: '![]()'\n  },\n  {\n    text: '[TOC]',\n    search: '[]'\n  }\n]\nconst supportExternals = [\n  {\n    text: '{%youtube youtubeid %}',\n    search: 'youtube'\n  },\n  {\n    text: '{%vimeo vimeoid %}',\n    search: 'vimeo'\n  },\n  {\n    text: '{%gist gistid %}',\n    search: 'gist'\n  },\n  {\n    text: '{%slideshare slideshareid %}',\n    search: 'slideshare'\n  },\n  {\n    text: '{%speakerdeck speakerdeckid %}',\n    search: 'speakerdeck'\n  },\n  {\n    text: '{%pdf pdfurl %}',\n    search: 'pdf'\n  }\n]\nconst supportExtraTags = [\n  {\n    text: '[name tag]',\n    search: '[]',\n    command: function () {\n      return '[name=' + personalInfo.name + ']'\n    }\n  },\n  {\n    text: '[time tag]',\n    search: '[]',\n    command: function () {\n      return '[time=' + moment().format('llll') + ']'\n    }\n  },\n  {\n    text: '[my color tag]',\n    search: '[]',\n    command: function () {\n      return '[color=' + personalInfo.color + ']'\n    }\n  },\n  {\n    text: '[random color tag]',\n    search: '[]',\n    command: function () {\n      const color = randomColor()\n      return '[color=' + color + ']'\n    }\n  }\n]\nconst statusType = {\n  connected: {\n    msg: 'CONNECTED',\n    label: 'label-warning',\n    fa: 'fa-wifi'\n  },\n  online: {\n    msg: 'ONLINE',\n    label: 'label-primary',\n    fa: 'fa-users'\n  },\n  offline: {\n    msg: 'OFFLINE',\n    label: 'label-danger',\n    fa: 'fa-plug'\n  }\n}\n\n// global vars\nwindow.loaded = false\nlet needRefresh = false\nlet isDirty = false\nlet editShown = false\nlet visibleXS = false\nlet visibleSM = false\nlet visibleMD = false\nlet visibleLG = false\nconst isTouchDevice = 'ontouchstart' in document.documentElement\nlet currentStatus = statusType.offline\nconst lastInfo = {\n  needRestore: false,\n  cursor: null,\n  scroll: null,\n  edit: {\n    scroll: {\n      left: null,\n      top: null\n    },\n    cursor: {\n      line: null,\n      ch: null\n    },\n    selections: null\n  },\n  view: {\n    scroll: {\n      left: null,\n      top: null\n    }\n  },\n  history: null\n}\nlet personalInfo = {}\nlet onlineUsers = []\nconst fileTypes = {\n  pl: 'perl',\n  cgi: 'perl',\n  js: 'javascript',\n  php: 'php',\n  sh: 'bash',\n  rb: 'ruby',\n  html: 'html',\n  py: 'python'\n}\n\n// editor settings\nconst textit = document.getElementById('textit')\nif (!textit) {\n  throw new Error('There was no textit area!')\n}\n\nconst editorInstance = new Editor()\nconst editor = editorInstance.init(textit)\n\n// FIXME: global referncing in jquery-textcomplete patch\nwindow.editor = editor\n\ndefaultTextHeight = parseInt($('.CodeMirror').css('line-height'))\n\n//  initalize ui reference\nconst ui = getUIElements()\n\n// page actions\nconst opts = {\n  lines: 11, // The number of lines to draw\n  length: 20, // The length of each line\n  width: 2, // The line thickness\n  radius: 30, // The radius of the inner circle\n  corners: 0, // Corner roundness (0..1)\n  rotate: 0, // The rotation offset\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#000', // #rgb or #rrggbb or array of colors\n  speed: 1.1, // Rounds per second\n  trail: 60, // Afterglow percentage\n  shadow: false, // Whether to render a shadow\n  hwaccel: true, // Whether to use hardware acceleration\n  className: 'spinner', // The CSS class to assign to the spinner\n  zIndex: 2e9, // The z-index (defaults to 2000000000)\n  top: '50%', // Top position relative to parent\n  left: '50%' // Left position relative to parent\n}\n\n/* eslint-disable no-unused-vars */\nconst spinner = new Spinner(opts).spin(ui.spinner[0])\n/* eslint-enable no-unused-vars */\n\n// idle\nconst idle = new Idle({\n  onAway: function () {\n    idle.isAway = true\n    emitUserStatus()\n    updateOnlineStatus()\n  },\n  onAwayBack: function () {\n    idle.isAway = false\n    emitUserStatus()\n    updateOnlineStatus()\n    setHaveUnreadChanges(false)\n    updateTitleReminder()\n  },\n  awayTimeout: idleTime\n})\nui.area.codemirror.on('touchstart', function () {\n  idle.onActive()\n})\n\nlet haveUnreadChanges = false\n\nfunction setHaveUnreadChanges (bool) {\n  if (!window.loaded) return\n  if (bool && (idle.isAway || Visibility.hidden())) {\n    haveUnreadChanges = true\n  } else if (!bool && !idle.isAway && !Visibility.hidden()) {\n    haveUnreadChanges = false\n  }\n}\n\nfunction updateTitleReminder () {\n  if (!window.loaded) return\n  if (haveUnreadChanges) {\n    document.title = ' ' + renderTitle(ui.area.markdown)\n  } else {\n    document.title = renderTitle(ui.area.markdown)\n  }\n}\n\nfunction setRefreshModal (status) {\n  $('#refreshModal').modal('show')\n  $('#refreshModal').find('.modal-body > div').hide()\n  $('#refreshModal')\n    .find('.' + status)\n    .show()\n}\n\nfunction setNeedRefresh () {\n  needRefresh = true\n  editor.setOption('readOnly', true)\n  socket.disconnect()\n  showStatus(statusType.offline)\n}\n\nsetloginStateChangeEvent(function () {\n  setRefreshModal('user-state-changed')\n  setNeedRefresh()\n})\n\n// visibility\nlet wasFocus = false\nVisibility.change(function (e, state) {\n  const hidden = Visibility.hidden()\n  if (hidden) {\n    if (editorHasFocus()) {\n      wasFocus = true\n      editor.getInputField().blur()\n    }\n  } else {\n    if (wasFocus) {\n      if (!visibleXS) {\n        editor.focus()\n        editor.refresh()\n      }\n      wasFocus = false\n    }\n    setHaveUnreadChanges(false)\n  }\n  updateTitleReminder()\n})\n\n// when page ready\n$(document).ready(function () {\n  idle.checkAway()\n  checkResponsive()\n  // if in smaller screen, we don't need advanced scrollbar\n  let scrollbarStyle\n  if (visibleXS) {\n    scrollbarStyle = 'native'\n  } else {\n    scrollbarStyle = 'overlay'\n  }\n  if (scrollbarStyle !== editor.getOption('scrollbarStyle')) {\n    editor.setOption('scrollbarStyle', scrollbarStyle)\n    clearMap()\n  }\n  checkEditorStyle()\n\n  /* cache dom references */\n  const $body = $('body')\n\n  /* we need this only on touch devices */\n  if (isTouchDevice) {\n    /* bind events */\n    $(document)\n      .on('focus', 'textarea, input', function () {\n        $body.addClass('fixfixed')\n      })\n      .on('blur', 'textarea, input', function () {\n        $body.removeClass('fixfixed')\n      })\n  }\n\n  // Re-enable nightmode\n  if (store.get('nightMode') || Cookies.get('nightMode')) {\n    $body.addClass('night')\n    ui.toolbar.night.addClass('active')\n  }\n\n  // showup\n  $().showUp('.navbar', {\n    upClass: 'navbar-hide',\n    downClass: 'navbar-show'\n  })\n  // tooltip\n  $('[data-toggle=\"tooltip\"]').tooltip()\n  // shortcuts\n  // allow on all tags\n  key.filter = function (e) {\n    return true\n  }\n  key('ctrl+alt+e', function (e) {\n    changeMode(modeType.edit)\n  })\n  key('ctrl+alt+v', function (e) {\n    changeMode(modeType.view)\n  })\n  key('ctrl+alt+b', function (e) {\n    changeMode(modeType.both)\n  })\n  // toggle-dropdown\n  $(document).on('click', '.toggle-dropdown .dropdown-menu', function (e) {\n    e.stopPropagation()\n  })\n})\n// when page resize\n$(window).resize(function () {\n  checkLayout()\n  checkEditorStyle()\n  checkTocStyle()\n  checkCursorMenu()\n  windowResize()\n})\n// when page unload\n$(window).on('unload', function () {\n  // updateHistoryInner();\n})\n$(window).on('error', function () {\n  // setNeedRefresh();\n})\n\nsetupSyncAreas(\n  ui.area.codemirrorScroll,\n  ui.area.view,\n  ui.area.markdown,\n  editor\n)\n\nfunction autoSyncscroll () {\n  if (editorHasFocus()) {\n    syncScrollToView()\n  } else {\n    syncScrollToEdit()\n  }\n}\n\nconst windowResizeDebounce = 200\nconst windowResize = _.debounce(windowResizeInner, windowResizeDebounce)\n\nfunction windowResizeInner (callback) {\n  checkLayout()\n  checkResponsive()\n  checkEditorStyle()\n  checkTocStyle()\n  checkCursorMenu()\n  // refresh editor\n  if (window.loaded) {\n    if (editor.getOption('scrollbarStyle') === 'native') {\n      setTimeout(function () {\n        clearMap()\n        autoSyncscroll()\n        updateScrollspy()\n        if (callback && typeof callback === 'function') {\n          callback()\n        }\n      }, 1)\n    } else {\n      // force it load all docs at once to prevent scroll knob blink\n      editor.setOption('viewportMargin', Infinity)\n      setTimeout(function () {\n        clearMap()\n        autoSyncscroll()\n        editor.setOption('viewportMargin', viewportMargin)\n        // add or update user cursors\n        for (let i = 0; i < onlineUsers.length; i++) {\n          if (onlineUsers[i].id !== personalInfo.id) {\n            buildCursor(onlineUsers[i])\n          }\n        }\n        updateScrollspy()\n        if (callback && typeof callback === 'function') {\n          callback()\n        }\n      }, 1)\n    }\n  }\n}\n\nfunction checkLayout () {\n  const navbarHieght = $('.navbar').outerHeight()\n  $('body').css('padding-top', navbarHieght + 'px')\n}\n\nfunction editorHasFocus () {\n  return $(editor.getInputField()).is(':focus')\n}\n\n// 768-792px have a gap\nfunction checkResponsive () {\n  visibleXS = $('.visible-xs').is(':visible')\n  visibleSM = $('.visible-sm').is(':visible')\n  visibleMD = $('.visible-md').is(':visible')\n  visibleLG = $('.visible-lg').is(':visible')\n\n  if (visibleXS && appState.currentMode === modeType.both) {\n    if (editorHasFocus()) {\n      changeMode(modeType.edit)\n    } else {\n      changeMode(modeType.view)\n    }\n  }\n\n  emitUserStatus()\n}\n\nlet lastEditorWidth = 0\nlet previousFocusOnEditor = null\n\nfunction checkEditorStyle () {\n  let desireHeight = editorInstance.statusBar\n    ? ui.area.edit.height() - editorInstance.statusBar.outerHeight()\n    : ui.area.edit.height()\n  if (editorInstance.toolBar) {\n    desireHeight = desireHeight - editorInstance.toolBar.outerHeight()\n  }\n  // set editor height and min height based on scrollbar style and mode\n  const scrollbarStyle = editor.getOption('scrollbarStyle')\n  if (scrollbarStyle === 'overlay' || appState.currentMode === modeType.both) {\n    ui.area.codemirrorScroll.css('height', desireHeight + 'px')\n    ui.area.codemirrorScroll.css('min-height', '')\n    checkEditorScrollbar()\n  } else if (scrollbarStyle === 'native') {\n    ui.area.codemirrorScroll.css('height', '')\n    ui.area.codemirrorScroll.css('min-height', desireHeight + 'px')\n  }\n  // workaround editor will have wrong doc height when editor height changed\n  editor.setSize(null, ui.area.edit.height())\n  // make editor resizable\n  if (!ui.area.resize.handle.length) {\n    ui.area.edit.resizable({\n      handles: 'e',\n      maxWidth: $(window).width() * 0.7,\n      minWidth: $(window).width() * 0.2,\n      create: function (e, ui) {\n        $(this)\n          .parent()\n          .on('resize', function (e) {\n            e.stopPropagation()\n          })\n      },\n      start: function (e) {\n        editor.setOption('viewportMargin', Infinity)\n      },\n      resize: function (e) {\n        ui.area.resize.syncToggle.stop(true, true).show()\n        checkTocStyle()\n      },\n      stop: function (e) {\n        lastEditorWidth = ui.area.edit.width()\n        // workaround that scroll event bindings\n        window.preventSyncScrollToView = 2\n        window.preventSyncScrollToEdit = true\n        editor.setOption('viewportMargin', viewportMargin)\n        if (editorHasFocus()) {\n          windowResizeInner(function () {\n            ui.area.codemirrorScroll.scroll()\n          })\n        } else {\n          windowResizeInner(function () {\n            ui.area.view.scroll()\n          })\n        }\n        checkEditorScrollbar()\n      }\n    })\n    ui.area.resize.handle = $('.ui-resizable-handle')\n  }\n  if (!ui.area.resize.syncToggle.length) {\n    ui.area.resize.syncToggle = $(\n      '<button class=\"btn btn-lg btn-default ui-sync-toggle\" title=\"Toggle sync scrolling\"><i class=\"fa fa-link fa-fw\"></i></button>'\n    )\n    ui.area.resize.syncToggle.hover(\n      function () {\n        previousFocusOnEditor = editorHasFocus()\n      },\n      function () {\n        previousFocusOnEditor = null\n      }\n    )\n    ui.area.resize.syncToggle.click(function () {\n      appState.syncscroll = !appState.syncscroll\n      checkSyncToggle()\n    })\n    ui.area.resize.handle.append(ui.area.resize.syncToggle)\n    ui.area.resize.syncToggle.hide()\n    ui.area.resize.handle.hover(\n      function () {\n        ui.area.resize.syncToggle.stop(true, true).delay(200).fadeIn(100)\n      },\n      function () {\n        ui.area.resize.syncToggle.stop(true, true).delay(300).fadeOut(300)\n      }\n    )\n  }\n}\n\nfunction checkSyncToggle () {\n  if (appState.syncscroll) {\n    if (previousFocusOnEditor) {\n      window.preventSyncScrollToView = false\n      syncScrollToView()\n    } else {\n      window.preventSyncScrollToEdit = false\n      syncScrollToEdit()\n    }\n    ui.area.resize.syncToggle\n      .find('i')\n      .removeClass('fa-unlink')\n      .addClass('fa-link')\n  } else {\n    ui.area.resize.syncToggle\n      .find('i')\n      .removeClass('fa-link')\n      .addClass('fa-unlink')\n  }\n}\n\nconst checkEditorScrollbar = _.debounce(function () {\n  editor.operation(checkEditorScrollbarInner)\n}, 50)\n\nfunction checkEditorScrollbarInner () {\n  // workaround simple scroll bar knob\n  // will get wrong position when editor height changed\n  const scrollInfo = editor.getScrollInfo()\n  editor.scrollTo(null, scrollInfo.top - 1)\n  editor.scrollTo(null, scrollInfo.top)\n}\n\nfunction checkTocStyle () {\n  // toc right\n  const paddingRight = parseFloat(ui.area.markdown.css('padding-right'))\n  const right =\n    $(window).width() -\n    (ui.area.markdown.offset().left +\n      ui.area.markdown.outerWidth() -\n      paddingRight)\n  ui.toc.toc.css('right', right + 'px')\n  // affix toc left\n  let newbool\n  const rightMargin =\n    (ui.area.markdown.parent().outerWidth() - ui.area.markdown.outerWidth()) /\n    2\n  // for ipad or wider device\n  if (rightMargin >= 133) {\n    newbool = true\n    const affixLeftMargin =\n      (ui.toc.affix.outerWidth() - ui.toc.affix.width()) / 2\n    const left =\n      ui.area.markdown.offset().left +\n      ui.area.markdown.outerWidth() -\n      affixLeftMargin\n    ui.toc.affix.css('left', left + 'px')\n    ui.toc.affix.css('width', rightMargin + 'px')\n  } else {\n    newbool = false\n  }\n  // toc scrollspy\n  ui.toc.toc.removeClass('scrollspy-body, scrollspy-view')\n  ui.toc.affix.removeClass('scrollspy-body, scrollspy-view')\n  if (appState.currentMode === modeType.both) {\n    ui.toc.toc.addClass('scrollspy-view')\n    ui.toc.affix.addClass('scrollspy-view')\n  } else if (appState.currentMode !== modeType.both && !newbool) {\n    ui.toc.toc.addClass('scrollspy-body')\n    ui.toc.affix.addClass('scrollspy-body')\n  } else {\n    ui.toc.toc.addClass('scrollspy-view')\n    ui.toc.affix.addClass('scrollspy-body')\n  }\n  if (newbool !== enoughForAffixToc) {\n    enoughForAffixToc = newbool\n    generateScrollspy()\n  }\n}\n\nfunction showStatus (type, num) {\n  currentStatus = type\n  const shortStatus = ui.toolbar.shortStatus\n  const status = ui.toolbar.status\n  const label = $('<span class=\"label\"></span>')\n  const fa = $('<i class=\"fa\"></i>')\n  let msg = ''\n  let shortMsg = ''\n\n  shortStatus.html('')\n  status.html('')\n\n  switch (currentStatus) {\n    case statusType.connected:\n      label.addClass(statusType.connected.label)\n      fa.addClass(statusType.connected.fa)\n      msg = statusType.connected.msg\n      break\n    case statusType.online:\n      label.addClass(statusType.online.label)\n      fa.addClass(statusType.online.fa)\n      shortMsg = num\n      msg = num + ' ' + statusType.online.msg\n      break\n    case statusType.offline:\n      label.addClass(statusType.offline.label)\n      fa.addClass(statusType.offline.fa)\n      msg = statusType.offline.msg\n      break\n  }\n\n  label.append(fa)\n  const shortLabel = label.clone()\n\n  shortLabel.append(' ' + shortMsg)\n  shortStatus.append(shortLabel)\n\n  label.append(' ' + msg)\n  status.append(label)\n}\n\nfunction toggleMode () {\n  switch (appState.currentMode) {\n    case modeType.edit:\n      changeMode(modeType.view)\n      break\n    case modeType.view:\n      changeMode(modeType.edit)\n      break\n    case modeType.both:\n      changeMode(modeType.view)\n      break\n  }\n}\n\nlet lastMode = null\n\nfunction changeMode (type) {\n  // lock navbar to prevent it hide after changeMode\n  lockNavbar()\n  saveInfo()\n  if (type) {\n    lastMode = appState.currentMode\n    appState.currentMode = type\n  }\n  const responsiveClass = 'col-lg-6 col-md-6 col-sm-6'\n  const scrollClass = 'ui-scrollable'\n  ui.area.codemirror.removeClass(scrollClass)\n  ui.area.edit.removeClass(responsiveClass)\n  ui.area.view.removeClass(scrollClass)\n  ui.area.view.removeClass(responsiveClass)\n  switch (appState.currentMode) {\n    case modeType.edit:\n      ui.area.edit.show()\n      ui.area.view.hide()\n      if (!editShown) {\n        editor.refresh()\n        editShown = true\n      }\n      break\n    case modeType.view:\n      ui.area.edit.hide()\n      ui.area.view.show()\n      break\n    case modeType.both:\n      ui.area.codemirror.addClass(scrollClass)\n      ui.area.edit.addClass(responsiveClass).show()\n      ui.area.view.addClass(scrollClass)\n      ui.area.view.show()\n      break\n  }\n  // save mode to url\n  if (history.replaceState && window.loaded) {\n    history.replaceState(\n      null,\n      '',\n      serverurl + '/' + noteid + '?' + appState.currentMode.name\n    )\n  }\n  if (appState.currentMode === modeType.view) {\n    editor.getInputField().blur()\n  }\n  if (\n    appState.currentMode === modeType.edit ||\n    appState.currentMode === modeType.both\n  ) {\n    // add and update status bar\n    if (!editorInstance.statusBar) {\n      editorInstance.addStatusBar()\n      editorInstance.updateStatusBar()\n    }\n    // add and update tool bar\n    if (!editorInstance.toolBar) {\n      editorInstance.addToolBar()\n    }\n    // work around foldGutter might not init properly\n    editor.setOption('foldGutter', false)\n    editor.setOption('foldGutter', true)\n  }\n  if (appState.currentMode !== modeType.edit) {\n    $(document.body).css('background-color', 'white')\n    updateView()\n  } else {\n    $(document.body).css(\n      'background-color',\n      ui.area.codemirror.css('background-color')\n    )\n  }\n  // check resizable editor style\n  if (appState.currentMode === modeType.both) {\n    if (lastEditorWidth > 0) {\n      ui.area.edit.css('width', lastEditorWidth + 'px')\n    } else {\n      ui.area.edit.css('width', '')\n    }\n    ui.area.resize.handle.show()\n  } else {\n    ui.area.edit.css('width', '')\n    ui.area.resize.handle.hide()\n  }\n\n  windowResizeInner()\n\n  restoreInfo()\n\n  if (lastMode === modeType.view && appState.currentMode === modeType.both) {\n    window.preventSyncScrollToView = 2\n    syncScrollToEdit(null, true)\n  }\n\n  if (lastMode === modeType.edit && appState.currentMode === modeType.both) {\n    window.preventSyncScrollToEdit = 2\n    syncScrollToView(null, true)\n  }\n\n  if (lastMode === modeType.both && appState.currentMode !== modeType.both) {\n    window.preventSyncScrollToView = false\n    window.preventSyncScrollToEdit = false\n  }\n\n  if (lastMode !== modeType.edit && appState.currentMode === modeType.edit) {\n    editor.refresh()\n  }\n\n  $(document.body).scrollspy('refresh')\n  ui.area.view.scrollspy('refresh')\n\n  ui.toolbar.both.removeClass('active')\n  ui.toolbar.edit.removeClass('active')\n  ui.toolbar.view.removeClass('active')\n  const modeIcon = ui.toolbar.mode.find('i')\n  modeIcon.removeClass('fa-pencil').removeClass('fa-eye')\n  if (ui.area.edit.is(':visible') && ui.area.view.is(':visible')) {\n    // both\n    ui.toolbar.both.addClass('active')\n    modeIcon.addClass('fa-eye')\n  } else if (ui.area.edit.is(':visible')) {\n    // edit\n    ui.toolbar.edit.addClass('active')\n    modeIcon.addClass('fa-eye')\n  } else if (ui.area.view.is(':visible')) {\n    // view\n    ui.toolbar.view.addClass('active')\n    modeIcon.addClass('fa-pencil')\n  }\n  unlockNavbar()\n}\n\nfunction lockNavbar () {\n  $('.navbar').addClass('locked')\n}\n\nconst unlockNavbar = _.debounce(function () {\n  $('.navbar').removeClass('locked')\n}, 200)\n\nfunction showMessageModal (title, header, href, text, success) {\n  const modal = $('.message-modal')\n  modal.find('.modal-title').html(title)\n  modal.find('.modal-body h5').html(header)\n  if (href) {\n    modal.find('.modal-body a').attr('href', href).text(text)\n  } else {\n    modal.find('.modal-body a').removeAttr('href').text(text)\n  }\n  modal\n    .find('.modal-footer button')\n    .removeClass('btn-default btn-success btn-danger')\n  if (success) {\n    modal.find('.modal-footer button').addClass('btn-success')\n  } else {\n    modal.find('.modal-footer button').addClass('btn-danger')\n  }\n  modal.modal('show')\n}\n\n// check if dropbox app key is set and load scripts\nif (DROPBOX_APP_KEY) {\n  $('<script>')\n    .attr('type', 'text/javascript')\n    .attr('src', 'https://www.dropbox.com/static/api/2/dropins.js')\n    .attr('id', 'dropboxjs')\n    .attr('data-app-key', DROPBOX_APP_KEY)\n    .prop('async', true)\n    .prop('defer', true)\n    .appendTo('body')\n} else {\n  ui.toolbar.import.dropbox.hide()\n  ui.toolbar.export.dropbox.hide()\n}\n\n// button actions\n// share\nui.toolbar.publish.attr('href', noteurl + '/publish')\n// extra\n// slide\nui.toolbar.extra.slide.attr('href', noteurl + '/slide')\n// download\n// markdown\nui.toolbar.download.markdown.click(function (e) {\n  e.preventDefault()\n  e.stopPropagation()\n  const filename = renderFilename(ui.area.markdown) + '.md'\n  const markdown = editor.getValue()\n  const blob = new Blob([markdown], {\n    type: 'text/markdown;charset=utf-8'\n  })\n  saveAs(blob, filename, true)\n})\n// html\nui.toolbar.download.html.click(function (e) {\n  e.preventDefault()\n  e.stopPropagation()\n  exportToHTML(ui.area.markdown)\n})\n// raw html\nui.toolbar.download.rawhtml.click(function (e) {\n  e.preventDefault()\n  e.stopPropagation()\n  exportToRawHTML(ui.area.markdown)\n})\n// export to dropbox\nui.toolbar.export.dropbox.click(function (event) {\n  event.preventDefault()\n  const filename = renderFilename(ui.area.markdown) + '.md'\n  const options = {\n    files: [\n      {\n        url: noteurl + '/download',\n        filename: filename\n      }\n    ],\n    error: function (errorMessage) {\n      console.error(errorMessage)\n    }\n  }\n  Dropbox.save(options)\n})\n// export to gist\nui.toolbar.export.gist.attr('href', noteurl + '/gist')\n// export to snippet\nui.toolbar.export.snippet.click(function () {\n  ui.spinner.show()\n  $.get(serverurl + '/auth/gitlab/callback/' + noteid + '/projects')\n    .done(function (data) {\n      $('#snippetExportModalAccessToken').val(data.accesstoken)\n      $('#snippetExportModalBaseURL').val(data.baseURL)\n      $('#snippetExportModalVersion').val(data.version)\n      $('#snippetExportModalLoading').hide()\n      $('#snippetExportModal').modal('toggle')\n      $('#snippetExportModalProjects')\n        .find('option')\n        .remove()\n        .end()\n        .append(\n          '<option value=\"init\" selected=\"selected\" disabled=\"disabled\">Select From Available Projects</option>'\n        )\n      if (data.projects) {\n        data.projects.sort(function (a, b) {\n          return a.path_with_namespace < b.path_with_namespace\n            ? -1\n            : a.path_with_namespace > b.path_with_namespace\n              ? 1\n              : 0\n        })\n        data.projects.forEach(function (project) {\n          if (\n            !project.snippets_enabled ||\n            (project.permissions.project_access === null &&\n              project.permissions.group_access === null) ||\n            (project.permissions.project_access !== null &&\n              project.permissions.project_access.access_level < 20)\n          ) {\n            return\n          }\n          $('<option>')\n            .val(project.id)\n            .text(project.path_with_namespace)\n            .appendTo('#snippetExportModalProjects')\n        })\n        $('#snippetExportModalProjects').prop('disabled', false)\n      }\n      $('#snippetExportModalLoading').hide()\n    })\n    .fail(function (data) {\n      showMessageModal(\n        '<i class=\"fa fa-gitlab\"></i> Import from Snippet',\n        'Unable to fetch gitlab parameters :(',\n        '',\n        '',\n        false\n      )\n    })\n    .always(function () {\n      ui.spinner.hide()\n    })\n})\n// import from dropbox\nui.toolbar.import.dropbox.click(function (event) {\n  event.preventDefault()\n  const options = {\n    success: function (files) {\n      ui.spinner.show()\n      const url = files[0].link\n      importFromUrl(url)\n    },\n    linkType: 'direct',\n    multiselect: false,\n    extensions: ['.md', '.html']\n  }\n  Dropbox.choose(options)\n})\n// import from gist\nui.toolbar.import.gist.click(function () {\n  // na\n})\n// import from snippet\nui.toolbar.import.snippet.click(function () {\n  ui.spinner.show()\n  $.get(serverurl + '/auth/gitlab/callback/' + noteid + '/projects')\n    .done(function (data) {\n      $('#snippetImportModalAccessToken').val(data.accesstoken)\n      $('#snippetImportModalBaseURL').val(data.baseURL)\n      $('#snippetImportModalVersion').val(data.version)\n      $('#snippetImportModalContent').prop('disabled', false)\n      $('#snippetImportModalConfirm').prop('disabled', false)\n      $('#snippetImportModalLoading').hide()\n      $('#snippetImportModal').modal('toggle')\n      $('#snippetImportModalProjects')\n        .find('option')\n        .remove()\n        .end()\n        .append(\n          '<option value=\"init\" selected=\"selected\" disabled=\"disabled\">Select From Available Projects</option>'\n        )\n      if (data.projects) {\n        data.projects.sort(function (a, b) {\n          return a.path_with_namespace < b.path_with_namespace\n            ? -1\n            : a.path_with_namespace > b.path_with_namespace\n              ? 1\n              : 0\n        })\n        data.projects.forEach(function (project) {\n          if (\n            !project.snippets_enabled ||\n            (project.permissions.project_access === null &&\n              project.permissions.group_access === null) ||\n            (project.permissions.project_access !== null &&\n              project.permissions.project_access.access_level < 20)\n          ) {\n            return\n          }\n          $('<option>')\n            .val(project.id)\n            .text(project.path_with_namespace)\n            .appendTo('#snippetImportModalProjects')\n        })\n        $('#snippetImportModalProjects').prop('disabled', false)\n      }\n      $('#snippetImportModalLoading').hide()\n    })\n    .fail(function (data) {\n      showMessageModal(\n        '<i class=\"fa fa-gitlab\"></i> Import from Snippet',\n        'Unable to fetch gitlab parameters :(',\n        '',\n        '',\n        false\n      )\n    })\n    .always(function () {\n      ui.spinner.hide()\n    })\n})\n// toc\nui.toc.dropdown.click(function (e) {\n  e.stopPropagation()\n})\n// prevent empty link change hash\n$('a[href=\"#\"]').click(function (e) {\n  e.preventDefault()\n})\n\n// modal actions\nlet revisions = []\nlet revisionViewer = null\nlet revisionInsert = []\nlet revisionDelete = []\nlet revisionInsertAnnotation = null\nlet revisionDeleteAnnotation = null\nconst revisionList = ui.modal.revision.find('.ui-revision-list')\nlet revision = null\nlet revisionTime = null\nui.modal.revision.on('show.bs.modal', function (e) {\n  $.get(noteurl + '/revision')\n    .done(function (data) {\n      parseRevisions(data.revision)\n      initRevisionViewer()\n    })\n    .fail(function (err) {\n      if (debug) {\n        // eslint-disable-next-line no-console\n        console.debug(err)\n      }\n    })\n    .always(function () {\n      // na\n    })\n})\nfunction checkRevisionViewer () {\n  if (revisionViewer) {\n    const container = $(revisionViewer.display.wrapper).parent()\n    $(revisionViewer.display.scroller).css('height', container.height() + 'px')\n    revisionViewer.refresh()\n  }\n}\nui.modal.revision.on('shown.bs.modal', checkRevisionViewer)\n$(window).resize(checkRevisionViewer)\nfunction parseRevisions (_revisions) {\n  if (_revisions.length !== revisions) {\n    revisions = _revisions\n    let lastRevision = null\n    if (revisionList.children().length > 0) {\n      lastRevision = revisionList.find('.active').attr('data-revision-time')\n    }\n    revisionList.html('')\n    for (let i = 0; i < revisions.length; i++) {\n      const revision = revisions[i]\n      const item = $('<a class=\"list-group-item\"></a>')\n      item.attr('data-revision-time', revision.time)\n      if (lastRevision === revision.time) item.addClass('active')\n      const itemHeading = $('<h5 class=\"list-group-item-heading\"></h5>')\n      itemHeading.html(\n        '<i class=\"fa fa-clock-o\"></i> ' + moment(revision.time).format('llll')\n      )\n      const itemText = $('<p class=\"list-group-item-text\"></p>')\n      itemText.html(\n        '<i class=\"fa fa-file-text\"></i> Length: ' + revision.length\n      )\n      item.append(itemHeading).append(itemText)\n      item.click(function (e) {\n        const time = $(this).attr('data-revision-time')\n        selectRevision(time)\n      })\n      revisionList.append(item)\n    }\n    if (!lastRevision) {\n      selectRevision(revisions[0].time)\n    }\n  }\n}\nfunction selectRevision (time) {\n  if (time === revisionTime) return\n  $.get(noteurl + '/revision/' + time)\n    .done(function (data) {\n      revision = data\n      revisionTime = time\n      const lastScrollInfo = revisionViewer.getScrollInfo()\n      revisionList.children().removeClass('active')\n      revisionList\n        .find('[data-revision-time=\"' + time + '\"]')\n        .addClass('active')\n      const content = revision.content\n      revisionViewer.setValue(content)\n      revisionViewer.scrollTo(null, lastScrollInfo.top)\n      revisionInsert = []\n      revisionDelete = []\n      // mark the text which have been insert or delete\n      if (revision.patch.length > 0) {\n        let bias = 0\n        for (let j = 0; j < revision.patch.length; j++) {\n          const patch = revision.patch[j]\n          let currIndex = patch.start1 + bias\n          for (let i = 0; i < patch.diffs.length; i++) {\n            const diff = patch.diffs[i]\n            // ignore if diff only contains line breaks\n            if ((diff[1].match(/\\n/g) || []).length === diff[1].length) { continue }\n            let prePos, postPos\n            switch (diff[0]) {\n              case 0: // retain\n                currIndex += diff[1].length\n                break\n              case 1: // insert\n                prePos = revisionViewer.posFromIndex(currIndex)\n                postPos = revisionViewer.posFromIndex(\n                  currIndex + diff[1].length\n                )\n                revisionInsert.push({\n                  from: prePos,\n                  to: postPos\n                })\n                revisionViewer.markText(prePos, postPos, {\n                  css:\n                    'background-color: rgba(230,255,230,0.7); text-decoration: underline;'\n                })\n                currIndex += diff[1].length\n                break\n              case -1: // delete\n                prePos = revisionViewer.posFromIndex(currIndex)\n                revisionViewer.replaceRange(diff[1], prePos)\n                postPos = revisionViewer.posFromIndex(\n                  currIndex + diff[1].length\n                )\n                revisionDelete.push({\n                  from: prePos,\n                  to: postPos\n                })\n                revisionViewer.markText(prePos, postPos, {\n                  css:\n                    'background-color: rgba(255,230,230,0.7); text-decoration: line-through;'\n                })\n                bias += diff[1].length\n                currIndex += diff[1].length\n                break\n            }\n          }\n        }\n      }\n      revisionInsertAnnotation.update(revisionInsert)\n      revisionDeleteAnnotation.update(revisionDelete)\n    })\n    .fail(function (err) {\n      if (debug) {\n        // eslint-disable-next-line no-console\n        console.debug(err)\n      }\n    })\n    .always(function () {\n      // na\n    })\n}\nfunction initRevisionViewer () {\n  if (revisionViewer) return\n  const revisionViewerTextArea = document.getElementById('revisionViewer')\n  revisionViewer = CodeMirror.fromTextArea(revisionViewerTextArea, {\n    mode: defaultEditorMode,\n    viewportMargin: viewportMargin,\n    lineNumbers: true,\n    lineWrapping: true,\n    showCursorWhenSelecting: true,\n    inputStyle: 'textarea',\n    gutters: ['CodeMirror-linenumbers'],\n    flattenSpans: true,\n    addModeClass: true,\n    readOnly: true,\n    autoRefresh: true,\n    scrollbarStyle: 'overlay'\n  })\n  revisionInsertAnnotation = revisionViewer.annotateScrollbar({\n    className: 'CodeMirror-insert-match'\n  })\n  revisionDeleteAnnotation = revisionViewer.annotateScrollbar({\n    className: 'CodeMirror-delete-match'\n  })\n  checkRevisionViewer()\n}\n$('#revisionModalDownload').click(function () {\n  if (!revision) return\n  const filename =\n    renderFilename(ui.area.markdown) + '_' + revisionTime + '.md'\n  const blob = new Blob([revision.content], {\n    type: 'text/markdown;charset=utf-8'\n  })\n  saveAs(blob, filename, true)\n})\n$('#revisionModalRevert').click(function () {\n  if (!revision) return\n  editor.setValue(revision.content)\n  ui.modal.revision.modal('hide')\n})\n// snippet projects\nui.modal.snippetImportProjects.change(function () {\n  const accesstoken = $('#snippetImportModalAccessToken').val()\n  const baseURL = $('#snippetImportModalBaseURL').val()\n  const project = $('#snippetImportModalProjects').val()\n  const version = $('#snippetImportModalVersion').val()\n  $('#snippetImportModalLoading').show()\n  $('#snippetImportModalContent').val('/projects/' + project)\n  $.get(\n    baseURL +\n      '/api/' +\n      version +\n      '/projects/' +\n      project +\n      '/snippets?access_token=' +\n      accesstoken\n  )\n    .done(function (data) {\n      $('#snippetImportModalSnippets')\n        .find('option')\n        .remove()\n        .end()\n        .append(\n          '<option value=\"init\" selected=\"selected\" disabled=\"disabled\">Select From Available Snippets</option>'\n        )\n      data.forEach(function (snippet) {\n        $('<option>')\n          .val(snippet.id)\n          .text(snippet.title)\n          .appendTo($('#snippetImportModalSnippets'))\n      })\n      $('#snippetImportModalLoading').hide()\n      $('#snippetImportModalSnippets').prop('disabled', false)\n    })\n    .fail(function (err) {\n      if (debug) {\n        // eslint-disable-next-line no-console\n        console.debug(err)\n      }\n    })\n    .always(function () {\n      // na\n    })\n})\n// snippet snippets\nui.modal.snippetImportSnippets.change(function () {\n  const snippet = $('#snippetImportModalSnippets').val()\n  $('#snippetImportModalContent').val(\n    $('#snippetImportModalContent').val() + '/snippets/' + snippet\n  )\n})\n\nfunction scrollToTop () {\n  if (appState.currentMode === modeType.both) {\n    if (editor.getScrollInfo().top !== 0) {\n      editor.scrollTo(0, 0)\n    } else {\n      ui.area.view.animate(\n        {\n          scrollTop: 0\n        },\n        100,\n        'linear'\n      )\n    }\n  } else {\n    $('body, html').stop(true, true).animate(\n      {\n        scrollTop: 0\n      },\n      100,\n      'linear'\n    )\n  }\n}\n\nfunction scrollToBottom () {\n  if (appState.currentMode === modeType.both) {\n    const scrollInfo = editor.getScrollInfo()\n    const scrollHeight = scrollInfo.height\n    if (scrollInfo.top !== scrollHeight) {\n      editor.scrollTo(0, scrollHeight * 2)\n    } else {\n      ui.area.view.animate(\n        {\n          scrollTop: ui.area.view[0].scrollHeight\n        },\n        100,\n        'linear'\n      )\n    }\n  } else {\n    $('body, html')\n      .stop(true, true)\n      .animate(\n        {\n          scrollTop: $(document.body)[0].scrollHeight\n        },\n        100,\n        'linear'\n      )\n  }\n}\n\nwindow.scrollToTop = scrollToTop\nwindow.scrollToBottom = scrollToBottom\n\nlet enoughForAffixToc = true\n\n// scrollspy\nfunction generateScrollspy () {\n  $(document.body).scrollspy({\n    target: '.scrollspy-body'\n  })\n  ui.area.view.scrollspy({\n    target: '.scrollspy-view'\n  })\n  $(document.body).scrollspy('refresh')\n  ui.area.view.scrollspy('refresh')\n  if (enoughForAffixToc) {\n    ui.toc.toc.hide()\n    ui.toc.affix.show()\n  } else {\n    ui.toc.affix.hide()\n    ui.toc.toc.show()\n  }\n  // $(document.body).scroll();\n  // ui.area.view.scroll();\n}\n\nfunction updateScrollspy () {\n  const headers = ui.area.markdown.find('h1, h2, h3').toArray()\n  const headerMap = []\n  for (let i = 0; i < headers.length; i++) {\n    headerMap.push(\n      $(headers[i]).offset().top - parseInt($(headers[i]).css('margin-top'))\n    )\n  }\n  applyScrollspyActive(\n    $(window).scrollTop(),\n    headerMap,\n    headers,\n    $('.scrollspy-body'),\n    0\n  )\n  const offset = ui.area.view.scrollTop() - ui.area.view.offset().top\n  applyScrollspyActive(\n    ui.area.view.scrollTop(),\n    headerMap,\n    headers,\n    $('.scrollspy-view'),\n    offset - 10\n  )\n}\n\nfunction applyScrollspyActive (top, headerMap, headers, target, offset) {\n  let index = 0\n  for (let i = headerMap.length - 1; i >= 0; i--) {\n    if (\n      top >= headerMap[i] + offset &&\n      headerMap[i + 1] &&\n      top < headerMap[i + 1] + offset\n    ) {\n      index = i\n      break\n    }\n  }\n  const header = $(headers[index])\n  const active = target.find('a[href=\"#' + header.attr('id') + '\"]')\n  active\n    .closest('li')\n    .addClass('active')\n    .parent()\n    .closest('li')\n    .addClass('active')\n    .parent()\n    .closest('li')\n    .addClass('active')\n}\n\n// clipboard modal\n// fix for wrong autofocus\n$('#clipboardModal').on('shown.bs.modal', function () {\n  $('#clipboardModal').blur()\n})\n$('#clipboardModalClear').click(function () {\n  $('#clipboardModalContent').html('')\n})\n$('#clipboardModalConfirm').click(function () {\n  const data = $('#clipboardModalContent').text()\n  if (data) {\n    parseToEditor(data)\n    $('#clipboardModal').modal('hide')\n    $('#clipboardModalContent').html('')\n  }\n})\n\n// refresh modal\n$('#refreshModalRefresh').click(function () {\n  location.reload(true)\n})\n\n// gist import modal\n$('#gistImportModalClear').click(function () {\n  $('#gistImportModalContent').val('')\n})\n$('#gistImportModalConfirm').click(function () {\n  const gisturl = $('#gistImportModalContent').val()\n  if (!gisturl) return\n  $('#gistImportModal').modal('hide')\n  $('#gistImportModalContent').val('')\n  if (!isValidURL(gisturl)) {\n    showMessageModal(\n      '<i class=\"fa fa-github\"></i> Import from Gist',\n      'Not a valid URL :(',\n      '',\n      '',\n      false\n    )\n  } else {\n    const hostname = url('hostname', gisturl)\n    if (hostname !== 'gist.github.com') {\n      showMessageModal(\n        '<i class=\"fa fa-github\"></i> Import from Gist',\n        'Not a valid Gist URL :(',\n        '',\n        '',\n        false\n      )\n    } else {\n      ui.spinner.show()\n      $.get('https://api.github.com/gists/' + url('-1', gisturl))\n        .done(function (data) {\n          if (data.files) {\n            let contents = ''\n            Object.keys(data.files).forEach(function (key) {\n              contents += key\n              contents += '\\n---\\n'\n              contents += data.files[key].content\n              contents += '\\n\\n'\n            })\n            replaceAll(contents)\n          } else {\n            showMessageModal(\n              '<i class=\"fa fa-github\"></i> Import from Gist',\n              'Unable to fetch gist files :(',\n              '',\n              '',\n              false\n            )\n          }\n        })\n        .fail(function (data) {\n          showMessageModal(\n            '<i class=\"fa fa-github\"></i> Import from Gist',\n            'Not a valid Gist URL :(',\n            '',\n            JSON.stringify(data),\n            false\n          )\n        })\n        .always(function () {\n          ui.spinner.hide()\n        })\n    }\n  }\n})\n\n// snippet import modal\n$('#snippetImportModalClear').click(function () {\n  $('#snippetImportModalContent').val('')\n  $('#snippetImportModalProjects').val('init')\n  $('#snippetImportModalSnippets').val('init')\n  $('#snippetImportModalSnippets').prop('disabled', true)\n})\n$('#snippetImportModalConfirm').click(function () {\n  const snippeturl = $('#snippetImportModalContent').val()\n  if (!snippeturl) return\n  $('#snippetImportModal').modal('hide')\n  $('#snippetImportModalContent').val('')\n  if (!/^.+\\/snippets\\/.+$/.test(snippeturl)) {\n    showMessageModal(\n      '<i class=\"fa fa-github\"></i> Import from Snippet',\n      'Not a valid Snippet URL :(',\n      '',\n      '',\n      false\n    )\n  } else {\n    ui.spinner.show()\n    const accessToken =\n      '?access_token=' + $('#snippetImportModalAccessToken').val()\n    const fullURL =\n      $('#snippetImportModalBaseURL').val() +\n      '/api/' +\n      $('#snippetImportModalVersion').val() +\n      snippeturl\n    $.get(fullURL + accessToken)\n      .done(function (data) {\n        let content = '# ' + (data.title || 'Snippet Import')\n        const fileInfo = data.file_name.split('.')\n        fileInfo[1] = fileInfo[1] ? fileInfo[1] : 'md'\n        $.get(fullURL + '/raw' + accessToken)\n          .done(function (raw) {\n            if (raw) {\n              content += '\\n\\n'\n              if (fileInfo[1] !== 'md') {\n                content += '```' + fileTypes[fileInfo[1]] + '\\n'\n              }\n              content += raw\n              if (fileInfo[1] !== 'md') {\n                content += '\\n```'\n              }\n              replaceAll(content)\n            }\n          })\n          .fail(function (data) {\n            showMessageModal(\n              '<i class=\"fa fa-gitlab\"></i> Import from Snippet',\n              'Not a valid Snippet URL :(',\n              '',\n              JSON.stringify(data),\n              false\n            )\n          })\n          .always(function () {\n            ui.spinner.hide()\n          })\n      })\n      .fail(function (data) {\n        showMessageModal(\n          '<i class=\"fa fa-gitlab\"></i> Import from Snippet',\n          'Not a valid Snippet URL :(',\n          '',\n          JSON.stringify(data),\n          false\n        )\n      })\n  }\n})\n\n// snippet export modal\n$('#snippetExportModalConfirm').click(function () {\n  const accesstoken = $('#snippetExportModalAccessToken').val()\n  const baseURL = $('#snippetExportModalBaseURL').val()\n  const version = $('#snippetExportModalVersion').val()\n\n  const data = {\n    title: $('#snippetExportModalTitle').val(),\n    file_name: $('#snippetExportModalFileName').val(),\n    code: editor.getValue(),\n    visibility_level: $('#snippetExportModalVisibility').val(),\n    visibility:\n      $('#snippetExportModalVisibility').val() === '0'\n        ? 'private'\n        : $('#snippetExportModalVisibility').val() === '10'\n          ? 'internal'\n          : 'private'\n  }\n\n  if (\n    !data.title ||\n    !data.file_name ||\n    !data.code ||\n    !data.visibility_level ||\n    !$('#snippetExportModalProjects').val()\n  ) { return }\n  $('#snippetExportModalLoading').show()\n  const fullURL =\n    baseURL +\n    '/api/' +\n    version +\n    '/projects/' +\n    $('#snippetExportModalProjects').val() +\n    '/snippets?access_token=' +\n    accesstoken\n  $.post(fullURL, data, function (ret) {\n    $('#snippetExportModalLoading').hide()\n    $('#snippetExportModal').modal('hide')\n    const redirect =\n      baseURL +\n      '/' +\n      $(\n        \"#snippetExportModalProjects option[value='\" +\n          $('#snippetExportModalProjects').val() +\n          \"']\"\n      ).text() +\n      '/snippets/' +\n      ret.id\n    showMessageModal(\n      '<i class=\"fa fa-gitlab\"></i> Export to Snippet',\n      'Export Successful!',\n      redirect,\n      'View Snippet Here',\n      true\n    )\n  })\n})\n\nfunction parseToEditor (data) {\n  const turndownService = new TurndownService({\n    defaultReplacement: function (innerHTML, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    }\n  })\n  const parsed = turndownService.turndown(data)\n  if (parsed) {\n    replaceAll(parsed)\n  }\n}\n\nfunction replaceAll (data) {\n  editor.replaceRange(\n    data,\n    {\n      line: 0,\n      ch: 0\n    },\n    {\n      line: editor.lastLine(),\n      ch: editor.lastLine().length\n    },\n    '+input'\n  )\n}\n\nfunction importFromUrl (url) {\n  // console.debug(url);\n  if (!url) return\n  if (!isValidURL(url)) {\n    showMessageModal(\n      '<i class=\"fa fa-cloud-download\"></i> Import from URL',\n      'Not a valid URL :(',\n      '',\n      '',\n      false\n    )\n    return\n  }\n  $.ajax({\n    method: 'GET',\n    url: url,\n    success: function (data) {\n      const extension = url.split('.').pop()\n      if (extension === 'html') {\n        parseToEditor(data)\n      } else {\n        replaceAll(data)\n      }\n    },\n    error: function (data) {\n      showMessageModal(\n        '<i class=\"fa fa-cloud-download\"></i> Import from URL',\n        'Import failed :(',\n        '',\n        JSON.stringify(data),\n        false\n      )\n    },\n    complete: function () {\n      ui.spinner.hide()\n    }\n  })\n}\n\n// mode\nui.toolbar.mode.click(function () {\n  toggleMode()\n})\n// edit\nui.toolbar.edit.click(function () {\n  changeMode(modeType.edit)\n})\n// view\nui.toolbar.view.click(function () {\n  changeMode(modeType.view)\n})\n// both\nui.toolbar.both.click(function () {\n  changeMode(modeType.both)\n})\n\nui.toolbar.night.click(function () {\n  toggleNightMode()\n})\n// permission\n// freely\nui.infobar.permission.freely.click(function () {\n  emitPermission('freely')\n})\n// editable\nui.infobar.permission.editable.click(function () {\n  emitPermission('editable')\n})\n// locked\nui.infobar.permission.locked.click(function () {\n  emitPermission('locked')\n})\n// private\nui.infobar.permission.private.click(function () {\n  emitPermission('private')\n})\n// limited\nui.infobar.permission.limited.click(function () {\n  emitPermission('limited')\n})\n// protected\nui.infobar.permission.protected.click(function () {\n  emitPermission('protected')\n})\n// delete note\nui.infobar.delete.click(function () {\n  $('.delete-modal').modal('show')\n})\n$('.ui-delete-modal-confirm').click(function () {\n  socket.emit('delete')\n})\n\nfunction toggleNightMode () {\n  const $body = $('body')\n  const isActive = ui.toolbar.night.hasClass('active')\n  if (isActive) {\n    $body.removeClass('night')\n    appState.nightMode = false\n  } else {\n    $body.addClass('night')\n    appState.nightMode = true\n  }\n  if (store.enabled) {\n    store.set('nightMode', !isActive)\n  } else {\n    Cookies.set('nightMode', !isActive, {\n      expires: 365,\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n  }\n}\nfunction emitPermission (_permission) {\n  if (_permission !== permission) {\n    socket.emit('permission', _permission)\n  }\n}\n\nfunction updatePermission (newPermission) {\n  if (permission !== newPermission) {\n    permission = newPermission\n    if (window.loaded) refreshView()\n  }\n  let label = null\n  let title = null\n  switch (permission) {\n    case 'freely':\n      label = '<i class=\"fa fa-leaf\"></i> Freely'\n      title = 'Anyone can edit'\n      break\n    case 'editable':\n      label = '<i class=\"fa fa-shield\"></i> Editable'\n      title = 'Signed people can edit'\n      break\n    case 'limited':\n      label = '<i class=\"fa fa-id-card\"></i> Limited'\n      title = 'Signed people can edit (forbid guest)'\n      break\n    case 'locked':\n      label = '<i class=\"fa fa-lock\"></i> Locked'\n      title = 'Only owner can edit'\n      break\n    case 'protected':\n      label = '<i class=\"fa fa-umbrella\"></i> Protected'\n      title = 'Only owner can edit (forbid guest)'\n      break\n    case 'private':\n      label = '<i class=\"fa fa-hand-stop-o\"></i> Private'\n      title = 'Only owner can view & edit'\n      break\n  }\n  if (\n    personalInfo.userid &&\n    window.owner &&\n    personalInfo.userid === window.owner\n  ) {\n    label += ' <i class=\"fa fa-caret-down\"></i>'\n    ui.infobar.permission.label.removeClass('disabled')\n  } else {\n    ui.infobar.permission.label.addClass('disabled')\n  }\n  ui.infobar.permission.label.html(label).attr('title', title)\n}\n\nfunction havePermission () {\n  let bool = false\n  switch (permission) {\n    case 'freely':\n      bool = true\n      break\n    case 'editable':\n    case 'limited':\n      if (!personalInfo.login) {\n        bool = false\n      } else {\n        bool = true\n      }\n      break\n    case 'locked':\n    case 'private':\n    case 'protected':\n      if (!window.owner || personalInfo.userid !== window.owner) {\n        bool = false\n      } else {\n        bool = true\n      }\n      break\n  }\n  return bool\n}\n// global module workaround\nwindow.havePermission = havePermission\n\n// socket.io actions\nconst io = require('socket.io-client')\nconst socket = io.connect({\n  path: urlpath ? '/' + urlpath + '/socket.io/' : '',\n  query: {\n    noteId: noteid\n  },\n  timeout: 5000, // 5 secs to timeout,\n  reconnectionAttempts: 20 // retry 20 times on connect failed\n})\n// overwrite original event for checking login state\nconst on = socket.on\nsocket.on = function () {\n  if (!checkLoginStateChanged() && !needRefresh) {\n    return on.apply(socket, arguments)\n  }\n}\nconst emit = socket.emit\nsocket.emit = function () {\n  if (!checkLoginStateChanged() && !needRefresh) {\n    emit.apply(socket, arguments)\n  }\n}\nsocket.on('info', function (data) {\n  console.error(data)\n  switch (data.code) {\n    case 403:\n      location.href = serverurl + '/403'\n      break\n    case 404:\n      location.href = serverurl + '/404'\n      break\n    case 500:\n      location.href = serverurl + '/500'\n      break\n  }\n})\nsocket.on('error', function (data) {\n  console.error(data)\n  if (data.message && data.message.indexOf('AUTH failed') === 0) {\n    location.href = serverurl + '/403'\n  }\n})\nsocket.on('delete', function () {\n  if (personalInfo.login) {\n    deleteServerHistory(noteid, function (err, data) {\n      if (!err) location.href = serverurl\n    })\n  } else {\n    getHistory(function (notehistory) {\n      const newnotehistory = removeHistory(noteid, notehistory)\n      saveHistory(newnotehistory)\n      location.href = serverurl\n    })\n  }\n})\nlet retryTimer = null\nsocket.on('maintenance', function () {\n  cmClient.revision = -1\n})\nsocket.on('disconnect', function (data) {\n  showStatus(statusType.offline)\n  if (window.loaded) {\n    saveInfo()\n    lastInfo.history = editor.getHistory()\n  }\n  if (!editor.getOption('readOnly')) {\n    editor.setOption('readOnly', true)\n  }\n  if (!retryTimer) {\n    retryTimer = setInterval(function () {\n      if (!needRefresh) socket.connect()\n    }, 1000)\n  }\n})\nsocket.on('reconnect', function (data) {\n  // sync back any change in offline\n  emitUserStatus(true)\n  cursorActivity(editor)\n  socket.emit('online users')\n})\nsocket.on('connect', function (data) {\n  clearInterval(retryTimer)\n  retryTimer = null\n  personalInfo.id = socket.id\n  showStatus(statusType.connected)\n  socket.emit('version')\n})\nsocket.on('version', function (data) {\n  if (version !== data.version) {\n    if (version < data.minimumCompatibleVersion) {\n      setRefreshModal('incompatible-version')\n      setNeedRefresh()\n    } else {\n      setRefreshModal('new-version')\n    }\n  }\n})\nlet authors = []\nlet authorship = []\nlet authorMarks = {} // temp variable\nlet addTextMarkers = [] // temp variable\nfunction updateInfo (data) {\n  // console.debug(data);\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'createtime') &&\n    window.createtime !== data.createtime\n  ) {\n    window.createtime = data.createtime\n    updateLastChange()\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'updatetime') &&\n    window.lastchangetime !== data.updatetime\n  ) {\n    window.lastchangetime = data.updatetime\n    updateLastChange()\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'owner') &&\n    window.owner !== data.owner\n  ) {\n    window.owner = data.owner\n    window.ownerprofile = data.ownerprofile\n    updateOwner()\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'lastchangeuser') &&\n    window.lastchangeuser !== data.lastchangeuser\n  ) {\n    window.lastchangeuser = data.lastchangeuser\n    window.lastchangeuserprofile = data.lastchangeuserprofile\n    updateLastChangeUser()\n    updateOwner()\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'authors') &&\n    authors !== data.authors\n  ) {\n    authors = data.authors\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(data, 'authorship') &&\n    authorship !== data.authorship\n  ) {\n    authorship = data.authorship\n    updateAuthorship()\n  }\n}\nconst updateAuthorship = _.debounce(function () {\n  editor.operation(updateAuthorshipInner)\n}, 50)\nfunction initMark () {\n  return {\n    gutter: {\n      userid: null,\n      timestamp: null\n    },\n    textmarkers: []\n  }\n}\nfunction initMarkAndCheckGutter (mark, author, timestamp) {\n  if (!mark) mark = initMark()\n  if (!mark.gutter.userid || mark.gutter.timestamp > timestamp) {\n    mark.gutter.userid = author.userid\n    mark.gutter.timestamp = timestamp\n  }\n  return mark\n}\nconst addStyleRule = (function () {\n  const added = {}\n  const styleElement = document.createElement('style')\n  document.documentElement\n    .getElementsByTagName('head')[0]\n    .appendChild(styleElement)\n  const styleSheet = styleElement.sheet\n\n  return function (css) {\n    if (added[css]) {\n      return\n    }\n    added[css] = true\n    styleSheet.insertRule(\n      css,\n      (styleSheet.cssRules || styleSheet.rules).length\n    )\n  }\n})()\nfunction updateAuthorshipInner () {\n  // ignore when ot not synced yet\n  if (havePendingOperation()) return\n  authorMarks = {}\n  for (let i = 0; i < authorship.length; i++) {\n    const atom = authorship[i]\n    const author = authors[atom[0]]\n    if (author) {\n      const prePos = editor.posFromIndex(atom[1])\n      const preLine = editor.getLine(prePos.line)\n      const postPos = editor.posFromIndex(atom[2])\n      const postLine = editor.getLine(postPos.line)\n      if (prePos.ch === 0 && postPos.ch === postLine.length) {\n        for (let j = prePos.line; j <= postPos.line; j++) {\n          if (editor.getLine(j)) {\n            authorMarks[j] = initMarkAndCheckGutter(\n              authorMarks[j],\n              author,\n              atom[3]\n            )\n          }\n        }\n      } else if (postPos.line - prePos.line >= 1) {\n        let startLine = prePos.line\n        let endLine = postPos.line\n        if (prePos.ch === preLine.length) {\n          startLine++\n        } else if (prePos.ch !== 0) {\n          const mark = initMarkAndCheckGutter(\n            authorMarks[prePos.line],\n            author,\n            atom[3]\n          )\n          const _postPos = {\n            line: prePos.line,\n            ch: preLine.length\n          }\n          if (JSON.stringify(prePos) !== JSON.stringify(_postPos)) {\n            mark.textmarkers.push({\n              userid: author.userid,\n              pos: [prePos, _postPos]\n            })\n            startLine++\n          }\n          authorMarks[prePos.line] = mark\n        }\n        if (postPos.ch === 0) {\n          endLine--\n        } else if (postPos.ch !== postLine.length) {\n          const mark = initMarkAndCheckGutter(\n            authorMarks[postPos.line],\n            author,\n            atom[3]\n          )\n          const _prePos = {\n            line: postPos.line,\n            ch: 0\n          }\n          if (JSON.stringify(_prePos) !== JSON.stringify(postPos)) {\n            mark.textmarkers.push({\n              userid: author.userid,\n              pos: [_prePos, postPos]\n            })\n            endLine--\n          }\n          authorMarks[postPos.line] = mark\n        }\n        for (let j = startLine; j <= endLine; j++) {\n          if (editor.getLine(j)) {\n            authorMarks[j] = initMarkAndCheckGutter(\n              authorMarks[j],\n              author,\n              atom[3]\n            )\n          }\n        }\n      } else {\n        const mark = initMarkAndCheckGutter(\n          authorMarks[prePos.line],\n          author,\n          atom[3]\n        )\n        if (JSON.stringify(prePos) !== JSON.stringify(postPos)) {\n          mark.textmarkers.push({\n            userid: author.userid,\n            pos: [prePos, postPos]\n          })\n        }\n        authorMarks[prePos.line] = mark\n      }\n    }\n  }\n  addTextMarkers = []\n  editor.eachLine(iterateLine)\n  const allTextMarks = editor.getAllMarks()\n  for (let i = 0; i < allTextMarks.length; i++) {\n    const _textMarker = allTextMarks[i]\n    const pos = _textMarker.find()\n    let found = false\n    for (let j = 0; j < addTextMarkers.length; j++) {\n      const textMarker = addTextMarkers[j]\n      const author = authors[textMarker.userid]\n      const className = 'authorship-inline-' + author.color.substr(1)\n      const obj = {\n        from: textMarker.pos[0],\n        to: textMarker.pos[1]\n      }\n      if (\n        JSON.stringify(pos) === JSON.stringify(obj) &&\n        _textMarker.className &&\n        _textMarker.className.indexOf(className) > -1\n      ) {\n        addTextMarkers.splice(j, 1)\n        j--\n        found = true\n        break\n      }\n    }\n    if (\n      !found &&\n      _textMarker.className &&\n      _textMarker.className.indexOf('authorship-inline') > -1\n    ) {\n      _textMarker.clear()\n    }\n  }\n  for (let i = 0; i < addTextMarkers.length; i++) {\n    const textMarker = addTextMarkers[i]\n    const author = authors[textMarker.userid]\n    const rgbcolor = hex2rgb(author.color)\n    const colorString = `rgba(${rgbcolor.red},${rgbcolor.green},${rgbcolor.blue},0.7)`\n    const styleString = `background-image: linear-gradient(to top, ${colorString} 1px, transparent 1px);`\n    const className = `authorship-inline-${author.color.substr(1)}`\n    const rule = `.${className} { ${styleString} }`\n    addStyleRule(rule)\n    editor.markText(textMarker.pos[0], textMarker.pos[1], {\n      className: 'authorship-inline ' + className,\n      title: author.name\n    })\n  }\n}\nfunction iterateLine (line) {\n  const lineNumber = line.lineNo()\n  const currMark = authorMarks[lineNumber]\n  const author = currMark ? authors[currMark.gutter.userid] : null\n  if (currMark && author) {\n    const className = 'authorship-gutter-' + author.color.substr(1)\n    const gutters = line.gutterMarkers\n    if (\n      !gutters ||\n      !gutters['authorship-gutters'] ||\n      !gutters['authorship-gutters'].className ||\n      !gutters['authorship-gutters'].className.indexOf(className) < 0\n    ) {\n      const styleString = `border-left: 3px solid ${author.color}; height: ${defaultTextHeight}px; margin-left: 3px;`\n      const rule = `.${className} { ${styleString} }`\n      addStyleRule(rule)\n      const gutter = $('<div>', {\n        class: 'authorship-gutter ' + className,\n        title: author.name\n      })\n      editor.setGutterMarker(line, 'authorship-gutters', gutter[0])\n    }\n  } else {\n    editor.setGutterMarker(line, 'authorship-gutters', null)\n  }\n  if (currMark && currMark.textmarkers.length > 0) {\n    for (let i = 0; i < currMark.textmarkers.length; i++) {\n      const textMarker = currMark.textmarkers[i]\n      if (textMarker.userid !== currMark.gutter.userid) {\n        addTextMarkers.push(textMarker)\n      }\n    }\n  }\n}\neditorInstance.on('update', function () {\n  $('.authorship-gutter:not([data-original-title])').tooltip({\n    container: '.CodeMirror-lines',\n    placement: 'right',\n    delay: { show: 500, hide: 100 }\n  })\n  $('.authorship-inline:not([data-original-title])').tooltip({\n    container: '.CodeMirror-lines',\n    placement: 'bottom',\n    delay: { show: 500, hide: 100 }\n  })\n  // clear tooltip which described element has been removed\n  $('[id^=\"tooltip\"]').each(function (index, element) {\n    const $ele = $(element)\n    if ($('[aria-describedby=\"' + $ele.attr('id') + '\"]').length <= 0) { $ele.remove() }\n  })\n})\nsocket.on('check', function (data) {\n  // console.debug(data);\n  updateInfo(data)\n})\nsocket.on('permission', function (data) {\n  updatePermission(data.permission)\n})\n\nlet permission = null\nsocket.on('refresh', function (data) {\n  // console.debug(data);\n  editorInstance.config.docmaxlength = data.docmaxlength\n  editor.setOption('maxLength', editorInstance.config.docmaxlength)\n  updateInfo(data)\n  updatePermission(data.permission)\n  if (!window.loaded) {\n    // auto change mode if no content detected\n    const nocontent = editor.getValue().length <= 0\n    if (nocontent) {\n      if (visibleXS) {\n        appState.currentMode = modeType.edit\n      } else {\n        appState.currentMode = modeType.both\n      }\n    }\n    // parse mode from url\n    if (window.location.search.length > 0) {\n      const urlMode = modeType[window.location.search.substr(1)]\n      if (urlMode) appState.currentMode = urlMode\n    }\n    changeMode(appState.currentMode)\n    if (nocontent && !visibleXS) {\n      editor.focus()\n      editor.refresh()\n    }\n    updateViewInner() // bring up view rendering earlier\n    updateHistory() // update history whether have content or not\n    window.loaded = true\n    emitUserStatus() // send first user status\n    updateOnlineStatus() // update first online status\n    setTimeout(function () {\n      // work around editor not refresh or doc not fully loaded\n      windowResizeInner()\n      // work around might not scroll to hash\n      scrollToHash()\n    }, 1)\n  }\n  if (editor.getOption('readOnly')) {\n    editor.setOption('readOnly', false)\n  }\n})\n\nconst EditorClient = ot.EditorClient\nconst SocketIOAdapter = ot.SocketIOAdapter\nconst CodeMirrorAdapter = ot.CodeMirrorAdapter\nlet cmClient = null\nlet synchronized_ = null\n\nfunction havePendingOperation () {\n  return !!(\n    cmClient &&\n    cmClient.state &&\n    Object.prototype.hasOwnProperty.call(cmClient, 'outstanding')\n  )\n}\n\nsocket.on('doc', function (obj) {\n  const body = obj.str\n  const bodyMismatch = editor.getValue() !== body\n  const setDoc =\n    !cmClient ||\n    (cmClient &&\n      (cmClient.revision === -1 ||\n        (cmClient.revision !== obj.revision && !havePendingOperation()))) ||\n    obj.force\n\n  saveInfo()\n  if (setDoc && bodyMismatch) {\n    if (cmClient) cmClient.editorAdapter.ignoreNextChange = true\n    if (body) editor.setValue(body)\n    else editor.setValue('')\n  }\n\n  if (!window.loaded) {\n    editor.clearHistory()\n    ui.spinner.hide()\n    ui.content.fadeIn()\n  } else {\n    // if current doc is equal to the doc before disconnect\n    if (setDoc && bodyMismatch) editor.clearHistory()\n    else if (lastInfo.history) editor.setHistory(lastInfo.history)\n    lastInfo.history = null\n  }\n\n  if (!cmClient) {\n    cmClient = window.cmClient = new EditorClient(\n      obj.revision,\n      obj.clients,\n      new SocketIOAdapter(socket),\n      new CodeMirrorAdapter(editor)\n    )\n    synchronized_ = cmClient.state\n  } else if (setDoc) {\n    if (bodyMismatch) {\n      cmClient.undoManager.undoStack.length = 0\n      cmClient.undoManager.redoStack.length = 0\n    }\n    cmClient.revision = obj.revision\n    cmClient.setState(synchronized_)\n    cmClient.initializeClientList()\n    cmClient.initializeClients(obj.clients)\n  } else if (havePendingOperation()) {\n    cmClient.serverReconnect()\n  }\n\n  if (setDoc && bodyMismatch) {\n    isDirty = true\n    updateView()\n  }\n\n  restoreInfo()\n})\n\nsocket.on('ack', function () {\n  isDirty = true\n  updateView()\n})\n\nsocket.on('operation', function () {\n  isDirty = true\n  updateView()\n})\n\nsocket.on('online users', function (data) {\n  if (debug) {\n    console.debug(data)\n  }\n  onlineUsers = data.users\n  updateOnlineStatus()\n  $('.CodeMirror-other-cursors')\n    .children()\n    .each(function (key, value) {\n      let found = false\n      for (let i = 0; i < data.users.length; i++) {\n        const user = data.users[i]\n        if ($(this).attr('id') === user.id) {\n          found = true\n        }\n      }\n      if (!found) {\n        $(this)\n          .stop(true)\n          .fadeOut('normal', function () {\n            $(this).remove()\n          })\n      }\n    })\n  for (let i = 0; i < data.users.length; i++) {\n    const user = data.users[i]\n    if (user.id !== socket.id) {\n      buildCursor(user)\n    } else {\n      personalInfo = user\n    }\n  }\n})\nsocket.on('user status', function (data) {\n  if (debug) {\n    console.debug(data)\n  }\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === data.id) {\n      onlineUsers[i] = data\n    }\n  }\n  updateOnlineStatus()\n  if (data.id !== socket.id) {\n    buildCursor(data)\n  }\n})\nsocket.on('cursor focus', function (data) {\n  if (debug) {\n    console.debug(data)\n  }\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === data.id) {\n      onlineUsers[i].cursor = data.cursor\n    }\n  }\n  if (data.id !== socket.id) {\n    buildCursor(data)\n  }\n  // force show\n  const cursor = $('div[data-clientid=\"' + data.id + '\"]')\n  if (cursor.length > 0) {\n    cursor.stop(true).fadeIn()\n  }\n})\nsocket.on('cursor activity', function (data) {\n  if (debug) {\n    console.debug(data)\n  }\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === data.id) {\n      onlineUsers[i].cursor = data.cursor\n    }\n  }\n  if (data.id !== socket.id) {\n    buildCursor(data)\n  }\n})\nsocket.on('cursor blur', function (data) {\n  if (debug) {\n    console.debug(data)\n  }\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === data.id) {\n      onlineUsers[i].cursor = null\n    }\n  }\n  if (data.id !== socket.id) {\n    buildCursor(data)\n  }\n  // force hide\n  const cursor = $('div[data-clientid=\"' + data.id + '\"]')\n  if (cursor.length > 0) {\n    cursor.stop(true).fadeOut()\n  }\n})\n\nconst options = {\n  valueNames: ['id', 'name'],\n  item:\n    '<li class=\"ui-user-item\">' +\n    '<span class=\"id\" style=\"display:none;\"></span>' +\n    '<a href=\"#\">' +\n    '<span class=\"pull-left\"><i class=\"ui-user-icon\"></i></span><span class=\"ui-user-name name\"></span><span class=\"pull-right\"><i class=\"fa fa-circle ui-user-status\"></i></span>' +\n    '</a>' +\n    '</li>'\n}\nconst onlineUserList = new List('online-user-list', options)\nconst shortOnlineUserList = new List('short-online-user-list', options)\n\nfunction updateOnlineStatus () {\n  if (!window.loaded || !socket.connected) return\n  const _onlineUsers = deduplicateOnlineUsers(onlineUsers)\n  showStatus(statusType.online, _onlineUsers.length)\n  const items = onlineUserList.items\n  // update or remove current list items\n  for (let i = 0; i < items.length; i++) {\n    let found = false\n    let foundindex = null\n    for (let j = 0; j < _onlineUsers.length; j++) {\n      if (items[i].values().id === _onlineUsers[j].id) {\n        foundindex = j\n        found = true\n        break\n      }\n    }\n    const id = items[i].values().id\n    if (found) {\n      onlineUserList.get('id', id)[0].values(_onlineUsers[foundindex])\n      shortOnlineUserList.get('id', id)[0].values(_onlineUsers[foundindex])\n    } else {\n      onlineUserList.remove('id', id)\n      shortOnlineUserList.remove('id', id)\n    }\n  }\n  // add not in list items\n  for (let i = 0; i < _onlineUsers.length; i++) {\n    let found = false\n    for (let j = 0; j < items.length; j++) {\n      if (items[j].values().id === _onlineUsers[i].id) {\n        found = true\n        break\n      }\n    }\n    if (!found) {\n      onlineUserList.add(_onlineUsers[i])\n      shortOnlineUserList.add(_onlineUsers[i])\n    }\n  }\n  // sorting\n  sortOnlineUserList(onlineUserList)\n  sortOnlineUserList(shortOnlineUserList)\n  // render list items\n  renderUserStatusList(onlineUserList)\n  renderUserStatusList(shortOnlineUserList)\n}\n\nfunction sortOnlineUserList (list) {\n  // sort order by isSelf, login state, idle state, alphabet name, color brightness\n  list.sort('', {\n    sortFunction: function (a, b) {\n      const usera = a.values()\n      const userb = b.values()\n      const useraIsSelf =\n        usera.id === personalInfo.id ||\n        (usera.login && usera.userid === personalInfo.userid)\n      const userbIsSelf =\n        userb.id === personalInfo.id ||\n        (userb.login && userb.userid === personalInfo.userid)\n      if (useraIsSelf && !userbIsSelf) {\n        return -1\n      } else if (!useraIsSelf && userbIsSelf) {\n        return 1\n      } else {\n        if (usera.login && !userb.login) {\n          return -1\n        } else if (!usera.login && userb.login) {\n          return 1\n        } else {\n          if (!usera.idle && userb.idle) {\n            return -1\n          } else if (usera.idle && !userb.idle) {\n            return 1\n          } else {\n            if (\n              usera.name &&\n              userb.name &&\n              usera.name.toLowerCase() < userb.name.toLowerCase()\n            ) {\n              return -1\n            } else if (\n              usera.name &&\n              userb.name &&\n              usera.name.toLowerCase() > userb.name.toLowerCase()\n            ) {\n              return 1\n            } else {\n              if (\n                usera.color &&\n                userb.color &&\n                usera.color.toLowerCase() < userb.color.toLowerCase()\n              ) {\n                return -1\n              } else if (\n                usera.color &&\n                userb.color &&\n                usera.color.toLowerCase() > userb.color.toLowerCase()\n              ) {\n                return 1\n              } else {\n                return 0\n              }\n            }\n          }\n        }\n      }\n    }\n  })\n}\n\nfunction renderUserStatusList (list) {\n  const items = list.items\n  for (let j = 0; j < items.length; j++) {\n    const item = items[j]\n    const userstatus = $(item.elm).find('.ui-user-status')\n    const usericon = $(item.elm).find('.ui-user-icon')\n    if (item.values().login && item.values().photo) {\n      usericon.css('background-image', 'url(' + item.values().photo + ')')\n      // add 1px more to right, make it feel aligned\n      usericon.css('margin-right', '6px')\n      $(item.elm).css('border-left', '4px solid ' + item.values().color)\n      usericon.css('margin-left', '-4px')\n    } else {\n      usericon.css('background-color', item.values().color)\n    }\n    userstatus.removeClass(\n      'ui-user-status-offline ui-user-status-online ui-user-status-idle'\n    )\n    if (item.values().idle) {\n      userstatus.addClass('ui-user-status-idle')\n    } else {\n      userstatus.addClass('ui-user-status-online')\n    }\n  }\n}\n\nfunction deduplicateOnlineUsers (list) {\n  const _onlineUsers = []\n  for (let i = 0; i < list.length; i++) {\n    const user = $.extend({}, list[i])\n    if (!user.userid) {\n      _onlineUsers.push(user)\n    } else {\n      let found = false\n      for (let j = 0; j < _onlineUsers.length; j++) {\n        if (_onlineUsers[j].userid === user.userid) {\n          // keep self color when login\n          if (user.id === personalInfo.id) {\n            _onlineUsers[j].color = user.color\n          }\n          // keep idle state if any of self client not idle\n          if (!user.idle) {\n            _onlineUsers[j].idle = user.idle\n            _onlineUsers[j].color = user.color\n          }\n          found = true\n          break\n        }\n      }\n      if (!found) {\n        _onlineUsers.push(user)\n      }\n    }\n  }\n  return _onlineUsers\n}\n\nlet userStatusCache = null\n\nfunction emitUserStatus (force) {\n  if (!window.loaded) return\n  let type = null\n  if (visibleXS) {\n    type = 'xs'\n  } else if (visibleSM) {\n    type = 'sm'\n  } else if (visibleMD) {\n    type = 'md'\n  } else if (visibleLG) {\n    type = 'lg'\n  }\n\n  personalInfo.idle = idle.isAway\n  personalInfo.type = type\n\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === personalInfo.id) {\n      onlineUsers[i] = personalInfo\n    }\n  }\n\n  const userStatus = {\n    idle: idle.isAway,\n    type: type\n  }\n\n  if (force || JSON.stringify(userStatus) !== JSON.stringify(userStatusCache)) {\n    socket.emit('user status', userStatus)\n    userStatusCache = userStatus\n  }\n}\n\nfunction checkCursorTag (coord, ele) {\n  if (!ele) return // return if element not exists\n  // set margin\n  const tagRightMargin = 0\n  const tagBottomMargin = 2\n  // use sizer to get the real doc size (won't count status bar and gutters)\n  const docWidth = ui.area.codemirrorSizer.width()\n  // get editor size (status bar not count in)\n  const editorHeight = ui.area.codemirror.height()\n  // get element size\n  const width = ele.outerWidth()\n  const height = ele.outerHeight()\n  const padding = (ele.outerWidth() - ele.width()) / 2\n  // get coord position\n  const left = coord.left\n  const top = coord.top\n  // get doc top offset (to workaround with viewport)\n  const docTopOffset = ui.area.codemirrorSizerInner.position().top\n  // set offset\n  let offsetLeft = -3\n  let offsetTop = defaultTextHeight\n  // only do when have width and height\n  if (width > 0 && height > 0) {\n    // flip x when element right bound larger than doc width\n    if (left + width + offsetLeft + tagRightMargin > docWidth) {\n      offsetLeft = -(width + tagRightMargin) + padding + offsetLeft\n    }\n    // flip y when element bottom bound larger than doc height\n    // and element top position is larger than element height\n    if (\n      top + docTopOffset + height + offsetTop + tagBottomMargin >\n        Math.max(editor.doc.height, editorHeight) &&\n      top + docTopOffset > height + tagBottomMargin\n    ) {\n      offsetTop = -height\n    }\n  }\n  // set position\n  ele[0].style.left = offsetLeft + 'px'\n  ele[0].style.top = offsetTop + 'px'\n}\n\nfunction buildCursor (user) {\n  if (appState.currentMode === modeType.view) return\n  if (!user.cursor) return\n  const coord = editor.charCoords(user.cursor, 'windows')\n  coord.left = coord.left < 4 ? 4 : coord.left\n  coord.top = coord.top < 0 ? 0 : coord.top\n  let iconClass = 'fa-user'\n  switch (user.type) {\n    case 'xs':\n      iconClass = 'fa-mobile'\n      break\n    case 'sm':\n      iconClass = 'fa-tablet'\n      break\n    case 'md':\n      iconClass = 'fa-desktop'\n      break\n    case 'lg':\n      iconClass = 'fa-desktop'\n      break\n  }\n  if ($('div[data-clientid=\"' + user.id + '\"]').length <= 0) {\n    const cursor = $(\n      '<div data-clientid=\"' +\n        user.id +\n        '\" class=\"CodeMirror-other-cursor\" style=\"display:none;\"></div>'\n    )\n    cursor.attr('data-line', user.cursor.line)\n    cursor.attr('data-ch', user.cursor.ch)\n    cursor.attr('data-offset-left', 0)\n    cursor.attr('data-offset-top', 0)\n\n    const cursorbar = $('<div class=\"cursorbar\">&nbsp;</div>')\n    cursorbar[0].style.height = defaultTextHeight + 'px'\n    cursorbar[0].style.borderLeft = '2px solid ' + user.color\n\n    const icon = '<i class=\"fa ' + iconClass + '\"></i>'\n\n    const cursortag = $(\n      '<div class=\"cursortag\">' +\n        icon +\n        '&nbsp;<span class=\"name\">' +\n        user.name +\n        '</span></div>'\n    )\n    // cursortag[0].style.background = color;\n    cursortag[0].style.color = user.color\n\n    cursor.attr('data-mode', 'hover')\n    cursortag.delay(2000).fadeOut('fast')\n    cursor.hover(\n      function () {\n        if (cursor.attr('data-mode') === 'hover') {\n          cursortag.stop(true).fadeIn('fast')\n        }\n      },\n      function () {\n        if (cursor.attr('data-mode') === 'hover') {\n          cursortag.stop(true).fadeOut('fast')\n        }\n      }\n    )\n\n    const hideCursorTagDelay = 2000\n    let hideCursorTagTimer = null\n\n    const switchMode = function (ele) {\n      if (ele.attr('data-mode') === 'state') {\n        ele.attr('data-mode', 'hover')\n      } else if (ele.attr('data-mode') === 'hover') {\n        ele.attr('data-mode', 'state')\n      }\n    }\n\n    const switchTag = function (ele) {\n      if (ele.css('display') === 'none') {\n        ele.stop(true).fadeIn('fast')\n      } else {\n        ele.stop(true).fadeOut('fast')\n      }\n    }\n\n    const hideCursorTag = function () {\n      if (cursor.attr('data-mode') === 'hover') {\n        cursortag.fadeOut('fast')\n      }\n    }\n    cursor.on('touchstart', function (e) {\n      const display = cursortag.css('display')\n      cursortag.stop(true).fadeIn('fast')\n      clearTimeout(hideCursorTagTimer)\n      hideCursorTagTimer = setTimeout(hideCursorTag, hideCursorTagDelay)\n      if (display === 'none') {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n    cursortag.on('mousedown touchstart', function (e) {\n      if (cursor.attr('data-mode') === 'state') {\n        switchTag(cursortag)\n      }\n      switchMode(cursor)\n      e.preventDefault()\n      e.stopPropagation()\n    })\n\n    cursor.append(cursorbar)\n    cursor.append(cursortag)\n\n    cursor[0].style.left = coord.left + 'px'\n    cursor[0].style.top = coord.top + 'px'\n    $('.CodeMirror-other-cursors').append(cursor)\n\n    if (!user.idle) {\n      cursor.stop(true).fadeIn()\n    }\n\n    checkCursorTag(coord, cursortag)\n  } else {\n    const cursor = $('div[data-clientid=\"' + user.id + '\"]')\n    cursor.attr('data-line', user.cursor.line)\n    cursor.attr('data-ch', user.cursor.ch)\n\n    const cursorbar = cursor.find('.cursorbar')\n    cursorbar[0].style.height = defaultTextHeight + 'px'\n    cursorbar[0].style.borderLeft = '2px solid ' + user.color\n\n    const cursortag = cursor.find('.cursortag')\n    cursortag.find('i').removeClass().addClass('fa').addClass(iconClass)\n    cursortag.find('.name').text(user.name)\n\n    if (cursor.css('display') === 'none') {\n      cursor[0].style.left = coord.left + 'px'\n      cursor[0].style.top = coord.top + 'px'\n    } else {\n      cursor.animate(\n        {\n          left: coord.left,\n          top: coord.top\n        },\n        {\n          duration: cursorAnimatePeriod,\n          queue: false\n        }\n      )\n    }\n\n    if (user.idle && cursor.css('display') !== 'none') {\n      cursor.stop(true).fadeOut()\n    } else if (!user.idle && cursor.css('display') === 'none') {\n      cursor.stop(true).fadeIn()\n    }\n\n    checkCursorTag(coord, cursortag)\n  }\n}\n\n// editor actions\nfunction removeNullByte (cm, change) {\n  const str = change.text.join('\\n')\n  // eslint-disable-next-line no-control-regex\n  if (/\\u0000/g.test(str) && change.update) {\n    change.update(\n      change.from,\n      change.to,\n      // eslint-disable-next-line no-control-regex\n      str.replace(/\\u0000/g, '').split('\\n')\n    )\n  }\n}\nfunction enforceMaxLength (cm, change) {\n  const maxLength = cm.getOption('maxLength')\n  if (maxLength && change.update) {\n    let str = change.text.join('\\n')\n    let delta =\n      str.length - (cm.indexFromPos(change.to) - cm.indexFromPos(change.from))\n    if (delta <= 0) {\n      return false\n    }\n    delta = cm.getValue().length + delta - maxLength\n    if (delta > 0) {\n      str = str.substr(0, str.length - delta)\n      change.update(change.from, change.to, str.split('\\n'))\n      return true\n    }\n  }\n  return false\n}\nconst ignoreEmitEvents = ['setValue', 'ignoreHistory']\neditorInstance.on('beforeChange', function (cm, change) {\n  if (debug) {\n    console.debug(change)\n  }\n  removeNullByte(cm, change)\n  if (enforceMaxLength(cm, change)) {\n    $('.limit-modal').modal('show')\n  }\n  const isIgnoreEmitEvent = ignoreEmitEvents.indexOf(change.origin) !== -1\n  if (!isIgnoreEmitEvent) {\n    if (!havePermission()) {\n      change.canceled = true\n      switch (permission) {\n        case 'editable':\n          $('.signin-modal').modal('show')\n          break\n        case 'locked':\n        case 'private':\n          $('.locked-modal').modal('show')\n          break\n      }\n    }\n  } else {\n    if (change.origin === 'ignoreHistory') {\n      setHaveUnreadChanges(true)\n      updateTitleReminder()\n    }\n  }\n  if (cmClient && !socket.connected) {\n    cmClient.editorAdapter.ignoreNextChange = true\n  }\n})\neditorInstance.on('cut', function () {\n  // na\n})\neditorInstance.on('paste', function () {\n  // na\n})\neditorInstance.on('changes', function (editor, changes) {\n  updateHistory()\n  const docLength = editor.getValue().length\n  // workaround for big documents\n  let newViewportMargin = 20\n  if (docLength > 20000) {\n    newViewportMargin = 1\n  } else if (docLength > 10000) {\n    newViewportMargin = 10\n  } else if (docLength > 5000) {\n    newViewportMargin = 15\n  }\n  if (newViewportMargin !== viewportMargin) {\n    viewportMargin = newViewportMargin\n    windowResize()\n  }\n  checkEditorScrollbar()\n  if (\n    ui.area.codemirrorScroll[0].scrollHeight > ui.area.view[0].scrollHeight &&\n    editorHasFocus()\n  ) {\n    postUpdateEvent = function () {\n      syncScrollToView()\n      postUpdateEvent = null\n    }\n  }\n})\neditorInstance.on('focus', function (editor) {\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === personalInfo.id) {\n      onlineUsers[i].cursor = editor.getCursor()\n    }\n  }\n  personalInfo.cursor = editor.getCursor()\n  socket.emit('cursor focus', editor.getCursor())\n})\n\nconst cursorActivity = _.debounce(cursorActivityInner, cursorActivityDebounce)\n\nfunction cursorActivityInner (editor) {\n  if (editorHasFocus() && !Visibility.hidden()) {\n    for (let i = 0; i < onlineUsers.length; i++) {\n      if (onlineUsers[i].id === personalInfo.id) {\n        onlineUsers[i].cursor = editor.getCursor()\n      }\n    }\n    personalInfo.cursor = editor.getCursor()\n    socket.emit('cursor activity', editor.getCursor())\n  }\n}\n\neditorInstance.on('cursorActivity', editorInstance.updateStatusBar)\neditorInstance.on('cursorActivity', cursorActivity)\n\neditorInstance.on('beforeSelectionChange', editorInstance.updateStatusBar)\neditorInstance.on('beforeSelectionChange', function (doc, selections) {\n  // check selection and whether the statusbar has added\n  if (selections && editorInstance.statusSelection) {\n    const selection = selections.ranges[0]\n\n    const anchor = selection.anchor\n    const head = selection.head\n    const start = head.line <= anchor.line ? head : anchor\n    const end = head.line >= anchor.line ? head : anchor\n    const selectionCharCount = Math.abs(head.ch - anchor.ch)\n\n    let selectionText = '  Selected '\n\n    // borrow from brackets EditorStatusBar.js\n    if (start.line !== end.line) {\n      let lines = end.line - start.line + 1\n      if (end.ch === 0) {\n        lines--\n      }\n      selectionText += lines + ' lines'\n    } else if (selectionCharCount > 0) {\n      selectionText += selectionCharCount + ' columns'\n    }\n\n    if (start.line !== end.line || selectionCharCount > 0) {\n      editorInstance.statusSelection.text(selectionText)\n    } else {\n      editorInstance.statusSelection.text('')\n    }\n  }\n})\n\neditorInstance.on('blur', function (cm) {\n  for (let i = 0; i < onlineUsers.length; i++) {\n    if (onlineUsers[i].id === personalInfo.id) {\n      onlineUsers[i].cursor = null\n    }\n  }\n  personalInfo.cursor = null\n  socket.emit('cursor blur')\n})\n\nfunction saveInfo () {\n  const scrollbarStyle = editor.getOption('scrollbarStyle')\n  const left = $(window).scrollLeft()\n  const top = $(window).scrollTop()\n  switch (appState.currentMode) {\n    case modeType.edit:\n      if (scrollbarStyle === 'native') {\n        lastInfo.edit.scroll.left = left\n        lastInfo.edit.scroll.top = top\n      } else {\n        lastInfo.edit.scroll = editor.getScrollInfo()\n      }\n      break\n    case modeType.view:\n      lastInfo.view.scroll.left = left\n      lastInfo.view.scroll.top = top\n      break\n    case modeType.both:\n      lastInfo.edit.scroll = editor.getScrollInfo()\n      lastInfo.view.scroll.left = ui.area.view.scrollLeft()\n      lastInfo.view.scroll.top = ui.area.view.scrollTop()\n      break\n  }\n  lastInfo.edit.cursor = editor.getCursor()\n  lastInfo.edit.selections = editor.listSelections()\n  lastInfo.needRestore = true\n}\n\nfunction restoreInfo () {\n  const scrollbarStyle = editor.getOption('scrollbarStyle')\n  if (lastInfo.needRestore) {\n    const line = lastInfo.edit.cursor.line\n    const ch = lastInfo.edit.cursor.ch\n    editor.setCursor(line, ch)\n    editor.setSelections(lastInfo.edit.selections)\n    switch (appState.currentMode) {\n      case modeType.edit:\n        if (scrollbarStyle === 'native') {\n          $(window).scrollLeft(lastInfo.edit.scroll.left)\n          $(window).scrollTop(lastInfo.edit.scroll.top)\n        } else {\n          const left = lastInfo.edit.scroll.left\n          const top = lastInfo.edit.scroll.top\n          editor.scrollIntoView()\n          editor.scrollTo(left, top)\n        }\n        break\n      case modeType.view:\n        $(window).scrollLeft(lastInfo.view.scroll.left)\n        $(window).scrollTop(lastInfo.view.scroll.top)\n        break\n      case modeType.both:\n        editor.scrollIntoView()\n        editor.scrollTo(lastInfo.edit.scroll.left, lastInfo.edit.scroll.top)\n        ui.area.view.scrollLeft(lastInfo.view.scroll.left)\n        ui.area.view.scrollTop(lastInfo.view.scroll.top)\n        break\n    }\n\n    lastInfo.needRestore = false\n  }\n}\n\n// view actions\nfunction refreshView () {\n  ui.area.markdown.html('')\n  isDirty = true\n  updateViewInner()\n}\n\nconst updateView = _.debounce(function () {\n  editor.operation(updateViewInner)\n}, updateViewDebounce)\n\nlet lastResult = null\nlet postUpdateEvent = null\n\nfunction updateViewInner () {\n  if (appState.currentMode === modeType.edit || !isDirty) return\n  const value = editor.getValue()\n  const lastMeta = md.meta\n  md.meta = {}\n  delete md.metaError\n  let rendered = md.render(value)\n  if (md.meta.type && md.meta.type === 'slide') {\n    ui.area.view.addClass('black')\n    const slideOptions = {\n      separator: '^(\\r\\n?|\\n)---(\\r\\n?|\\n)$',\n      verticalSeparator: '^(\\r\\n?|\\n)----(\\r\\n?|\\n)$'\n    }\n    const slides = window.RevealMarkdown.slidify(\n      editor.getValue(),\n      slideOptions\n    )\n    ui.area.markdown.html(slides)\n    window.RevealMarkdown.initialize()\n    // prevent XSS\n    ui.area.markdown.html(preventXSS(ui.area.markdown.html()))\n    ui.area.markdown.addClass('slides')\n    appState.syncscroll = false\n    checkSyncToggle()\n  } else {\n    if (lastMeta.type && lastMeta.type === 'slide') {\n      refreshView()\n      ui.area.markdown.removeClass('slides')\n      ui.area.view.removeClass('black')\n      appState.syncscroll = true\n      checkSyncToggle()\n    }\n    // only render again when meta changed\n    if (JSON.stringify(md.meta) !== JSON.stringify(lastMeta)) {\n      parseMeta(\n        md,\n        ui.area.codemirror,\n        ui.area.markdown,\n        $('#ui-toc'),\n        $('#ui-toc-affix')\n      )\n      rendered = md.render(value)\n    }\n    // prevent XSS\n    rendered = preventXSS(rendered)\n    const result = postProcess(rendered).children().toArray()\n    partialUpdate(result, lastResult, ui.area.markdown.children().toArray())\n    if (result && lastResult && result.length !== lastResult.length) {\n      updateDataAttrs(result, ui.area.markdown.children().toArray())\n    }\n    lastResult = $(result).clone()\n  }\n  removeDOMEvents(ui.area.markdown)\n  finishView(ui.area.markdown)\n  autoLinkify(ui.area.markdown)\n  deduplicatedHeaderId(ui.area.markdown)\n  renderTOC(ui.area.markdown)\n  generateToc('ui-toc')\n  generateToc('ui-toc-affix')\n  autoLinkify(ui.area.markdown)\n  generateScrollspy()\n  updateScrollspy()\n  smoothHashScroll()\n  isDirty = false\n  clearMap()\n  // buildMap();\n  updateTitleReminder()\n  if (postUpdateEvent && typeof postUpdateEvent === 'function') {\n    postUpdateEvent()\n  }\n}\n\nconst updateHistoryDebounce = 600\n\nconst updateHistory = _.debounce(updateHistoryInner, updateHistoryDebounce)\n\nfunction updateHistoryInner () {\n  writeHistory(renderFilename(ui.area.markdown), renderTags(ui.area.markdown))\n}\n\nfunction updateDataAttrs (src, des) {\n  // sync data attr startline and endline\n  for (let i = 0; i < src.length; i++) {\n    copyAttribute(src[i], des[i], 'data-startline')\n    copyAttribute(src[i], des[i], 'data-endline')\n  }\n}\n\nfunction partialUpdate (src, tar, des) {\n  if (\n    !src ||\n    src.length === 0 ||\n    !tar ||\n    tar.length === 0 ||\n    !des ||\n    des.length === 0\n  ) {\n    ui.area.markdown.html(src)\n    return\n  }\n  if (src.length === tar.length) {\n    // same length\n    for (let i = 0; i < src.length; i++) {\n      copyAttribute(src[i], des[i], 'data-startline')\n      copyAttribute(src[i], des[i], 'data-endline')\n      const rawSrc = cloneAndRemoveDataAttr(src[i])\n      const rawTar = cloneAndRemoveDataAttr(tar[i])\n      if (rawSrc.outerHTML !== rawTar.outerHTML) {\n        // console.debug(rawSrc);\n        // console.debug(rawTar);\n        $(des[i]).replaceWith(src[i])\n      }\n    }\n  } else {\n    // diff length\n    let start = 0\n    // find diff start position\n    for (let i = 0; i < tar.length; i++) {\n      // copyAttribute(src[i], des[i], 'data-startline');\n      // copyAttribute(src[i], des[i], 'data-endline');\n      const rawSrc = cloneAndRemoveDataAttr(src[i])\n      const rawTar = cloneAndRemoveDataAttr(tar[i])\n      if (!rawSrc || !rawTar || rawSrc.outerHTML !== rawTar.outerHTML) {\n        start = i\n        break\n      }\n    }\n    // find diff end position\n    let srcEnd = 0\n    let tarEnd = 0\n    for (let i = 0; i < src.length; i++) {\n      // copyAttribute(src[i], des[i], 'data-startline');\n      // copyAttribute(src[i], des[i], 'data-endline');\n      const rawSrc = cloneAndRemoveDataAttr(src[i])\n      const rawTar = cloneAndRemoveDataAttr(tar[i])\n      if (!rawSrc || !rawTar || rawSrc.outerHTML !== rawTar.outerHTML) {\n        start = i\n        break\n      }\n    }\n    // tar end\n    for (let i = 1; i <= tar.length + 1; i++) {\n      const srcLength = src.length\n      const tarLength = tar.length\n      // copyAttribute(src[srcLength - i], des[srcLength - i], 'data-startline');\n      // copyAttribute(src[srcLength - i], des[srcLength - i], 'data-endline');\n      const rawSrc = cloneAndRemoveDataAttr(src[srcLength - i])\n      const rawTar = cloneAndRemoveDataAttr(tar[tarLength - i])\n      if (!rawSrc || !rawTar || rawSrc.outerHTML !== rawTar.outerHTML) {\n        tarEnd = tar.length - i\n        break\n      }\n    }\n    // src end\n    for (let i = 1; i <= src.length + 1; i++) {\n      const srcLength = src.length\n      const tarLength = tar.length\n      // copyAttribute(src[srcLength - i], des[srcLength - i], 'data-startline');\n      // copyAttribute(src[srcLength - i], des[srcLength - i], 'data-endline');\n      const rawSrc = cloneAndRemoveDataAttr(src[srcLength - i])\n      const rawTar = cloneAndRemoveDataAttr(tar[tarLength - i])\n      if (!rawSrc || !rawTar || rawSrc.outerHTML !== rawTar.outerHTML) {\n        srcEnd = src.length - i\n        break\n      }\n    }\n    // check if tar end overlap tar start\n    let overlap = 0\n    for (let i = start; i >= 0; i--) {\n      const rawTarStart = cloneAndRemoveDataAttr(tar[i - 1])\n      const rawTarEnd = cloneAndRemoveDataAttr(tar[tarEnd + 1 + start - i])\n      if (\n        rawTarStart &&\n        rawTarEnd &&\n        rawTarStart.outerHTML === rawTarEnd.outerHTML\n      ) {\n        overlap++\n      } else {\n        break\n      }\n    }\n    if (debug) {\n      console.debug('overlap:' + overlap)\n    }\n    // show diff content\n    if (debug) {\n      console.debug('start:' + start)\n      console.debug('tarEnd:' + tarEnd)\n      console.debug('srcEnd:' + srcEnd)\n    }\n    tarEnd += overlap\n    srcEnd += overlap\n    const repeatAdd = start - srcEnd < start - tarEnd\n    const repeatDiff = Math.abs(srcEnd - tarEnd) - 1\n    // push new elements\n    const newElements = []\n    if (srcEnd >= start) {\n      for (let j = start; j <= srcEnd; j++) {\n        if (!src[j]) continue\n        newElements.push(src[j].outerHTML)\n      }\n    } else if (repeatAdd) {\n      for (let j = srcEnd - repeatDiff; j <= srcEnd; j++) {\n        if (!des[j]) continue\n        newElements.push(des[j].outerHTML)\n      }\n    }\n    // push remove elements\n    const removeElements = []\n    if (tarEnd >= start) {\n      for (let j = start; j <= tarEnd; j++) {\n        if (!des[j]) continue\n        removeElements.push(des[j])\n      }\n    } else if (!repeatAdd) {\n      for (let j = start; j <= start + repeatDiff; j++) {\n        if (!des[j]) continue\n        removeElements.push(des[j])\n      }\n    }\n    // add elements\n    if (debug) {\n      console.debug('ADD ELEMENTS')\n      console.debug(newElements.join('\\n'))\n    }\n    if (des[start]) {\n      $(newElements.join('')).insertBefore(des[start])\n    } else {\n      $(newElements.join('')).insertAfter(des[start - 1])\n    }\n    // remove elements\n    if (debug) {\n      console.debug('REMOVE ELEMENTS')\n    }\n    for (let j = 0; j < removeElements.length; j++) {\n      if (debug) {\n        console.debug(removeElements[j].outerHTML)\n      }\n      if (removeElements[j]) {\n        $(removeElements[j]).remove()\n      }\n    }\n  }\n}\n\nfunction cloneAndRemoveDataAttr (el) {\n  if (!el) return\n  const rawEl = $(el).clone()\n  rawEl.removeAttr('data-startline data-endline')\n  rawEl.find('[data-startline]').removeAttr('data-startline data-endline')\n  return rawEl[0]\n}\n\nfunction copyAttribute (src, des, attr) {\n  if (src && src.getAttribute(attr) && des) {\n    des.setAttribute(attr, src.getAttribute(attr))\n  }\n}\n\nif ($('.cursor-menu').length <= 0) {\n  $(\"<div class='cursor-menu'>\").insertAfter('.CodeMirror-cursors')\n}\n\nfunction reverseSortCursorMenu (dropdown) {\n  const items = dropdown.find('.textcomplete-item')\n  items.sort(function (a, b) {\n    return $(b).attr('data-index') - $(a).attr('data-index')\n  })\n  return items\n}\n\nconst checkCursorMenu = _.throttle(checkCursorMenuInner, cursorMenuThrottle)\n\nfunction checkCursorMenuInner () {\n  // get element\n  const dropdown = $('.cursor-menu > .dropdown-menu')\n  // return if not exists\n  if (dropdown.length <= 0) return\n  // set margin\n  const menuRightMargin = 10\n  const menuBottomMargin = 4\n  // use sizer to get the real doc size (won't count status bar and gutters)\n  const docWidth = ui.area.codemirrorSizer.width()\n  // get editor size (status bar not count in)\n  const editorHeight = ui.area.codemirror.height()\n  // get element size\n  const width = dropdown.outerWidth()\n  const height = dropdown.outerHeight()\n  // get cursor\n  const cursor = editor.getCursor()\n  // set element cursor data\n  if (!dropdown.hasClass('CodeMirror-other-cursor')) {\n    dropdown.addClass('CodeMirror-other-cursor')\n  }\n  dropdown.attr('data-line', cursor.line)\n  dropdown.attr('data-ch', cursor.ch)\n  // get coord position\n  const coord = editor.charCoords(\n    {\n      line: cursor.line,\n      ch: cursor.ch\n    },\n    'windows'\n  )\n  const left = coord.left\n  const top = coord.top\n  // get doc top offset (to workaround with viewport)\n  const docTopOffset = ui.area.codemirrorSizerInner.position().top\n  // set offset\n  let offsetLeft = 0\n  let offsetTop = defaultTextHeight\n  // set up side down\n  window.upSideDown = false\n  let lastUpSideDown = (window.upSideDown = false)\n  // only do when have width and height\n  if (width > 0 && height > 0) {\n    // make element right bound not larger than doc width\n    if (left + width + offsetLeft + menuRightMargin > docWidth) {\n      offsetLeft = -(left + width - docWidth + menuRightMargin)\n    }\n    // flip y when element bottom bound larger than doc height\n    // and element top position is larger than element height\n    if (\n      top + docTopOffset + height + offsetTop + menuBottomMargin >\n        Math.max(editor.doc.height, editorHeight) &&\n      top + docTopOffset > height + menuBottomMargin\n    ) {\n      offsetTop = -(height + menuBottomMargin)\n      // reverse sort menu because upSideDown\n      dropdown.html(reverseSortCursorMenu(dropdown))\n      window.upSideDown = true\n    }\n    const textCompleteDropdown = $(editor.getInputField()).data('textComplete')\n      .dropdown\n    lastUpSideDown = textCompleteDropdown.upSideDown\n    textCompleteDropdown.upSideDown = window.upSideDown\n  }\n  // make menu scroll top only if upSideDown changed\n  if (window.upSideDown !== lastUpSideDown) {\n    dropdown.scrollTop(dropdown[0].scrollHeight)\n  }\n  // set element offset data\n  dropdown.attr('data-offset-left', offsetLeft)\n  dropdown.attr('data-offset-top', offsetTop)\n  // set position\n  dropdown[0].style.left = left + offsetLeft + 'px'\n  dropdown[0].style.top = top + offsetTop + 'px'\n}\n\nfunction checkInIndentCode () {\n  // if line starts with tab or four spaces is a code block\n  const line = editor.getLine(editor.getCursor().line)\n  const isIndentCode =\n    line.substr(0, 4) === '    ' || line.substr(0, 1) === '\\t'\n  return isIndentCode\n}\n\nlet isInCode = false\n\nfunction checkInCode () {\n  isInCode = checkAbove(matchInCode) || checkInIndentCode()\n}\n\nfunction checkAbove (method) {\n  const cursor = editor.getCursor()\n  let text = []\n  for (let i = 0; i < cursor.line; i++) {\n    // contain current line\n    text.push(editor.getLine(i))\n  }\n  text =\n    text.join('\\n') + '\\n' + editor.getLine(cursor.line).slice(0, cursor.ch)\n  // console.debug(text);\n  return method(text)\n}\n\nfunction checkBelow (method) {\n  const cursor = editor.getCursor()\n  const count = editor.lineCount()\n  let text = []\n  for (let i = cursor.line + 1; i < count; i++) {\n    // contain current line\n    text.push(editor.getLine(i))\n  }\n  text = editor.getLine(cursor.line).slice(cursor.ch) + '\\n' + text.join('\\n')\n  // console.debug(text);\n  return method(text)\n}\n\nfunction matchInCode (text) {\n  let match\n  match = text.match(/`{3,}/g)\n  if (match && match.length % 2) {\n    return true\n  } else {\n    match = text.match(/`/g)\n    if (match && match.length % 2) {\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\nlet isInContainer = false\nlet isInContainerSyntax = false\n\nfunction checkInContainer () {\n  isInContainer = checkAbove(matchInContainer) && !checkInIndentCode()\n}\n\nfunction checkInContainerSyntax () {\n  // if line starts with :::, it's in container syntax\n  const line = editor.getLine(editor.getCursor().line)\n  isInContainerSyntax = line.substr(0, 3) === ':::'\n}\n\nfunction matchInContainer (text) {\n  const match = text.match(/:{3,}/g)\n  if (match && match.length % 2) {\n    return true\n  } else {\n    return false\n  }\n}\n\n$(editor.getInputField())\n  .textcomplete(\n    [\n      {\n        // emoji strategy\n        match: /(^|\\n|\\s)\\B:([-+\\w]*)$/,\n        search: function (term, callback) {\n          const line = editor.getLine(editor.getCursor().line)\n          term = line.match(this.match)[2]\n          const list = []\n          $.map(window.emojify.emojiNames, function (emoji) {\n            if (emoji.indexOf(term) === 0) {\n              // match at first character\n              list.push(emoji)\n            }\n          })\n          $.map(window.emojify.emojiNames, function (emoji) {\n            if (emoji.indexOf(term) !== -1) {\n              // match inside the word\n              list.push(emoji)\n            }\n          })\n          callback(list)\n        },\n        template: function (value) {\n          return (\n            '<img class=\"emoji\" src=\"' +\n            serverurl +\n            '/build/emojify.js/dist/images/basic/' +\n            value +\n            '.png\"></img> ' +\n            value\n          )\n        },\n        replace: function (value) {\n          return '$1:' + value + ': '\n        },\n        index: 1,\n        context: function (text) {\n          checkInCode()\n          checkInContainer()\n          checkInContainerSyntax()\n          return !isInCode && !isInContainerSyntax\n        }\n      },\n      {\n        // Code block language strategy\n        langs: supportCodeModes,\n        charts: supportCharts,\n        match: /(^|\\n)```(\\w+)$/,\n        search: function (term, callback) {\n          const line = editor.getLine(editor.getCursor().line)\n          term = line.match(this.match)[2]\n          const list = []\n          $.map(this.langs, function (lang) {\n            if (lang.indexOf(term) === 0 && lang !== term) {\n              list.push(lang)\n            }\n          })\n          $.map(this.charts, function (chart) {\n            if (chart.indexOf(term) === 0 && chart !== term) {\n              list.push(chart)\n            }\n          })\n          callback(list)\n        },\n        replace: function (lang) {\n          let ending = ''\n          if (!checkBelow(matchInCode)) {\n            ending = '\\n\\n```'\n          }\n          if (this.langs.indexOf(lang) !== -1) {\n            return '$1```' + lang + '=' + ending\n          } else if (this.charts.indexOf(lang) !== -1) {\n            return '$1```' + lang + ending\n          }\n        },\n        done: function () {\n          const cursor = editor.getCursor()\n          let text = []\n          text.push(editor.getLine(cursor.line - 1))\n          text.push(editor.getLine(cursor.line))\n          text = text.join('\\n')\n          // console.debug(text);\n          if (text === '\\n```') {\n            editor.doc.cm.execCommand('goLineUp')\n          }\n        },\n        context: function (text) {\n          return isInCode\n        }\n      },\n      {\n        // Container strategy\n        containers: supportContainers,\n        match: /(^|\\n):::(\\s*)(\\w*)$/,\n        search: function (term, callback) {\n          const line = editor.getLine(editor.getCursor().line)\n          term = line.match(this.match)[3].trim()\n          const list = []\n          $.map(this.containers, function (container) {\n            if (container.indexOf(term) === 0 && container !== term) {\n              list.push(container)\n            }\n          })\n          callback(list)\n        },\n        replace: function (lang) {\n          let ending = ''\n          if (!checkBelow(matchInContainer)) {\n            ending = '\\n\\n:::'\n          }\n          if (this.containers.indexOf(lang) !== -1) {\n            return '$1:::$2' + lang + ending\n          }\n        },\n        done: function () {\n          const cursor = editor.getCursor()\n          let text = []\n          text.push(editor.getLine(cursor.line - 1))\n          text.push(editor.getLine(cursor.line))\n          text = text.join('\\n')\n          // console.debug(text);\n          if (text === '\\n:::') {\n            editor.doc.cm.execCommand('goLineUp')\n          }\n        },\n        context: function (text) {\n          return !isInCode && isInContainer\n        }\n      },\n      {\n        // header\n        match: /(?:^|\\n)(\\s{0,3})(#{1,6}\\w*)$/,\n        search: function (term, callback) {\n          callback(\n            $.map(supportHeaders, function (header) {\n              return header.search.indexOf(term) === 0 ? header.text : null\n            })\n          )\n        },\n        replace: function (value) {\n          return '$1' + value\n        },\n        context: function (text) {\n          return !isInCode\n        }\n      },\n      {\n        // extra tags for list\n        match: /(^[>\\s]*[-+*]\\s(?:\\[[x ]\\]|.*))(\\[\\])(\\w*)$/,\n        search: function (term, callback) {\n          const list = []\n          $.map(supportExtraTags, function (extratag) {\n            if (extratag.search.indexOf(term) === 0) {\n              list.push(extratag.command())\n            }\n          })\n          $.map(supportReferrals, function (referral) {\n            if (referral.search.indexOf(term) === 0) {\n              list.push(referral.text)\n            }\n          })\n          callback(list)\n        },\n        replace: function (value) {\n          return '$1' + value\n        },\n        context: function (text) {\n          return !isInCode\n        }\n      },\n      {\n        // extra tags for blockquote\n        match: /(?:^|\\n|\\s)(>.*|\\s|)((\\^|)\\[(\\^|)\\](\\[\\]|\\(\\)|:|)\\s*\\w*)$/,\n        search: function (term, callback) {\n          const line = editor.getLine(editor.getCursor().line)\n          const quote = line.match(this.match)[1].trim()\n          const list = []\n          if (quote.indexOf('>') === 0) {\n            $.map(supportExtraTags, function (extratag) {\n              if (extratag.search.indexOf(term) === 0) {\n                list.push(extratag.command())\n              }\n            })\n          }\n          $.map(supportReferrals, function (referral) {\n            if (referral.search.indexOf(term) === 0) {\n              list.push(referral.text)\n            }\n          })\n          callback(list)\n        },\n        replace: function (value) {\n          return '$1' + value\n        },\n        context: function (text) {\n          return !isInCode\n        }\n      },\n      {\n        // referral\n        match: /(^\\s*|\\n|\\s{2})((\\[\\]|\\[\\]\\[\\]|\\[\\]\\(\\)|!|!\\[\\]|!\\[\\]\\[\\]|!\\[\\]\\(\\))\\s*\\w*)$/,\n        search: function (term, callback) {\n          callback(\n            $.map(supportReferrals, function (referral) {\n              return referral.search.indexOf(term) === 0 ? referral.text : null\n            })\n          )\n        },\n        replace: function (value) {\n          return '$1' + value\n        },\n        context: function (text) {\n          return !isInCode\n        }\n      },\n      {\n        // externals\n        match: /(^|\\n|\\s)\\{\\}(\\w*)$/,\n        search: function (term, callback) {\n          callback(\n            $.map(supportExternals, function (external) {\n              return external.search.indexOf(term) === 0 ? external.text : null\n            })\n          )\n        },\n        replace: function (value) {\n          return '$1' + value\n        },\n        context: function (text) {\n          return !isInCode\n        }\n      }\n    ],\n    {\n      appendTo: $('.cursor-menu')\n    }\n  )\n  .on({\n    'textComplete:beforeSearch': function (e) {\n      // NA\n    },\n    'textComplete:afterSearch': function (e) {\n      checkCursorMenu()\n    },\n    'textComplete:select': function (e, value, strategy) {\n      // NA\n    },\n    'textComplete:show': function (e) {\n      $(this).data('autocompleting', true)\n      editor.setOption('extraKeys', {\n        Up: function () {\n          return false\n        },\n        Right: function () {\n          editor.doc.cm.execCommand('goCharRight')\n        },\n        Down: function () {\n          return false\n        },\n        Left: function () {\n          editor.doc.cm.execCommand('goCharLeft')\n        },\n        Enter: function () {\n          return false\n        },\n        Backspace: function () {\n          editor.doc.cm.execCommand('delCharBefore')\n        }\n      })\n    },\n    'textComplete:hide': function (e) {\n      $(this).data('autocompleting', false)\n      editor.setOption('extraKeys', editorInstance.defaultExtraKeys)\n    }\n  })\n","module.exports = require('./lib/visibility.timers.js')\n",";(function (window) {\n    var lastTimer = -1;\n\n    var install = function (Visibility) {\n\n        // Run callback every `interval` milliseconds if page is visible and\n        // every `hiddenInterval` milliseconds if page is hidden.\n        //\n        //   Visibility.every(60 * 1000, 5 * 60 * 1000, function () {\n        //       checkNewMails();\n        //   });\n        //\n        // You can skip `hiddenInterval` and callback will be called only if\n        // page is visible.\n        //\n        //   Visibility.every(1000, function () {\n        //       updateCountdown();\n        //   });\n        //\n        // It is analog of `setInterval(callback, interval)` but use visibility\n        // state.\n        //\n        // It return timer ID, that you can use in `Visibility.stop(id)` to stop\n        // timer (`clearInterval` analog).\n        // Warning: timer ID is different from interval ID from `setInterval`,\n        // so dont use it in `clearInterval`.\n        //\n        // On change state from hidden to visible timers will be execute.\n        Visibility.every = function (interval, hiddenInterval, callback) {\n            Visibility._time();\n\n            if ( !callback ) {\n                callback = hiddenInterval;\n                hiddenInterval = null;\n            }\n\n            lastTimer += 1;\n            var number = lastTimer;\n\n            Visibility._timers[number] = {\n                visible:  interval,\n                hidden:   hiddenInterval,\n                callback: callback\n            };\n            Visibility._run(number, false);\n\n            if ( Visibility.isSupported() ) {\n                Visibility._listen();\n            }\n            return number;\n        };\n\n        // Stop timer from `every` method by it ID (`every` method return it).\n        //\n        //   slideshow = Visibility.every(5 * 1000, function () {\n        //       changeSlide();\n        //   });\n        //   $('.stopSlideshow').click(function () {\n        //       Visibility.stop(slideshow);\n        //   });\n        Visibility.stop = function(id) {\n            if ( !Visibility._timers[id] ) {\n                return false;\n            }\n            Visibility._stop(id);\n            delete Visibility._timers[id];\n            return true;\n        };\n\n        // Callbacks and intervals added by `every` method.\n        Visibility._timers = { };\n\n        // Initialize variables on page loading.\n        Visibility._time = function () {\n            if ( Visibility._timed ) {\n                return;\n            }\n            Visibility._timed     = true;\n            Visibility._wasHidden = Visibility.hidden();\n\n            Visibility.change(function () {\n                Visibility._stopRun();\n                Visibility._wasHidden = Visibility.hidden();\n            });\n        };\n\n        // Try to run timer from every method by its ID. It will be use\n        // `interval` or `hiddenInterval` depending on visibility state.\n        // If page is hidden and `hiddenInterval` is null,\n        // it will not run timer.\n        //\n        // Argument `runNow` say, that timers must be execute now too.\n        Visibility._run = function (id, runNow) {\n            var interval,\n                timer = Visibility._timers[id];\n\n            if ( Visibility.hidden() ) {\n                if ( null === timer.hidden ) {\n                    return;\n                }\n                interval = timer.hidden;\n            } else {\n                interval = timer.visible;\n            }\n\n            var runner = function () {\n                timer.last = new Date();\n                timer.callback.call(window);\n            }\n\n            if ( runNow ) {\n                var now  = new Date();\n                var last = now - timer.last ;\n\n                if ( interval > last ) {\n                    timer.delay = setTimeout(function () {\n                        timer.id = setInterval(runner, interval);\n                        runner();\n                    }, interval - last);\n                } else {\n                    timer.id = setInterval(runner, interval);\n                    runner();\n                }\n\n            } else {\n              timer.id = setInterval(runner, interval);\n            }\n        };\n\n        // Stop timer from `every` method by its ID.\n        Visibility._stop = function (id) {\n            var timer = Visibility._timers[id];\n            clearInterval(timer.id);\n            clearTimeout(timer.delay);\n            delete timer.id;\n            delete timer.delay;\n        };\n\n        // Listener for `visibilitychange` event.\n        Visibility._stopRun = function (event) {\n            var isHidden  = Visibility.hidden(),\n                wasHidden = Visibility._wasHidden;\n\n            if ( (isHidden && !wasHidden) || (!isHidden && wasHidden) ) {\n                for ( var i in Visibility._timers ) {\n                    Visibility._stop(i);\n                    Visibility._run(i, !isHidden);\n                }\n            }\n        };\n\n        return Visibility;\n    }\n\n    if ( typeof(module) != 'undefined' && module.exports ) {\n        module.exports = install(require('./visibility.core'));\n    } else {\n        install(window.Visibility || require('./visibility.core'))\n    }\n\n})(window);\n","//     keymaster.js\n//     (c) 2011-2013 Thomas Fuchs\n//     keymaster.js may be freely distributed under the MIT license.\n\n;(function(global){\n  var k,\n    _handlers = {},\n    _mods = { 16: false, 18: false, 17: false, 91: false },\n    _scope = 'all',\n    // modifier keys\n    _MODIFIERS = {\n      '': 16, shift: 16,\n      '': 18, alt: 18, option: 18,\n      '': 17, ctrl: 17, control: 17,\n      '': 91, command: 91\n    },\n    // special keys\n    _MAP = {\n      backspace: 8, tab: 9, clear: 12,\n      enter: 13, 'return': 13,\n      esc: 27, escape: 27, space: 32,\n      left: 37, up: 38,\n      right: 39, down: 40,\n      del: 46, 'delete': 46,\n      home: 36, end: 35,\n      pageup: 33, pagedown: 34,\n      ',': 188, '.': 190, '/': 191,\n      '`': 192, '-': 189, '=': 187,\n      ';': 186, '\\'': 222,\n      '[': 219, ']': 221, '\\\\': 220\n    },\n    code = function(x){\n      return _MAP[x] || x.toUpperCase().charCodeAt(0);\n    },\n    _downKeys = [];\n\n  for(k=1;k<20;k++) _MAP['f'+k] = 111+k;\n\n  // IE doesn't support Array#indexOf, so have a simple replacement\n  function index(array, item){\n    var i = array.length;\n    while(i--) if(array[i]===item) return i;\n    return -1;\n  }\n\n  // for comparing mods before unassignment\n  function compareArray(a1, a2) {\n    if (a1.length != a2.length) return false;\n    for (var i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) return false;\n    }\n    return true;\n  }\n\n  var modifierMap = {\n      16:'shiftKey',\n      18:'altKey',\n      17:'ctrlKey',\n      91:'metaKey'\n  };\n  function updateModifierKey(event) {\n      for(k in _mods) _mods[k] = event[modifierMap[k]];\n  };\n\n  // handle keydown event\n  function dispatch(event) {\n    var key, handler, k, i, modifiersMatch, scope;\n    key = event.keyCode;\n\n    if (index(_downKeys, key) == -1) {\n        _downKeys.push(key);\n    }\n\n    // if a modifier key, set the key.<modifierkeyname> property to true and return\n    if(key == 93 || key == 224) key = 91; // right command on webkit, command on Gecko\n    if(key in _mods) {\n      _mods[key] = true;\n      // 'assignKey' from inside this closure is exported to window.key\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = true;\n      return;\n    }\n    updateModifierKey(event);\n\n    // see if we need to ignore the keypress (filter() can can be overridden)\n    // by default ignore key presses if a select, textarea, or input is focused\n    if(!assignKey.filter.call(this, event)) return;\n\n    // abort if no potentially matching shortcuts found\n    if (!(key in _handlers)) return;\n\n    scope = getScope();\n\n    // for each potential shortcut\n    for (i = 0; i < _handlers[key].length; i++) {\n      handler = _handlers[key][i];\n\n      // see if it's in the current scope\n      if(handler.scope == scope || handler.scope == 'all'){\n        // check if modifiers match if any\n        modifiersMatch = handler.mods.length > 0;\n        for(k in _mods)\n          if((!_mods[k] && index(handler.mods, +k) > -1) ||\n            (_mods[k] && index(handler.mods, +k) == -1)) modifiersMatch = false;\n        // call the handler and stop the event if neccessary\n        if((handler.mods.length == 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91]) || modifiersMatch){\n          if(handler.method(event, handler)===false){\n            if(event.preventDefault) event.preventDefault();\n              else event.returnValue = false;\n            if(event.stopPropagation) event.stopPropagation();\n            if(event.cancelBubble) event.cancelBubble = true;\n          }\n        }\n      }\n    }\n  };\n\n  // unset modifier keys on keyup\n  function clearModifier(event){\n    var key = event.keyCode, k,\n        i = index(_downKeys, key);\n\n    // remove key from _downKeys\n    if (i >= 0) {\n        _downKeys.splice(i, 1);\n    }\n\n    if(key == 93 || key == 224) key = 91;\n    if(key in _mods) {\n      _mods[key] = false;\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = false;\n    }\n  };\n\n  function resetModifiers() {\n    for(k in _mods) _mods[k] = false;\n    for(k in _MODIFIERS) assignKey[k] = false;\n  };\n\n  // parse and assign shortcut\n  function assignKey(key, scope, method){\n    var keys, mods;\n    keys = getKeys(key);\n    if (method === undefined) {\n      method = scope;\n      scope = 'all';\n    }\n\n    // for each shortcut\n    for (var i = 0; i < keys.length; i++) {\n      // set modifier keys if any\n      mods = [];\n      key = keys[i].split('+');\n      if (key.length > 1){\n        mods = getMods(key);\n        key = [key[key.length-1]];\n      }\n      // convert to keycode and...\n      key = key[0]\n      key = code(key);\n      // ...store handler\n      if (!(key in _handlers)) _handlers[key] = [];\n      _handlers[key].push({ shortcut: keys[i], scope: scope, method: method, key: keys[i], mods: mods });\n    }\n  };\n\n  // unbind all handlers for given key in current scope\n  function unbindKey(key, scope) {\n    var multipleKeys, keys,\n      mods = [],\n      i, j, obj;\n\n    multipleKeys = getKeys(key);\n\n    for (j = 0; j < multipleKeys.length; j++) {\n      keys = multipleKeys[j].split('+');\n\n      if (keys.length > 1) {\n        mods = getMods(keys);\n        key = keys[keys.length - 1];\n      }\n\n      key = code(key);\n\n      if (scope === undefined) {\n        scope = getScope();\n      }\n      if (!_handlers[key]) {\n        return;\n      }\n      for (i = 0; i < _handlers[key].length; i++) {\n        obj = _handlers[key][i];\n        // only clear handlers if correct scope and mods match\n        if (obj.scope === scope && compareArray(obj.mods, mods)) {\n          _handlers[key][i] = {};\n        }\n      }\n    }\n  };\n\n  // Returns true if the key with code 'keyCode' is currently down\n  // Converts strings into key codes.\n  function isPressed(keyCode) {\n      if (typeof(keyCode)=='string') {\n        keyCode = code(keyCode);\n      }\n      return index(_downKeys, keyCode) != -1;\n  }\n\n  function getPressedKeyCodes() {\n      return _downKeys.slice(0);\n  }\n\n  function filter(event){\n    var tagName = (event.target || event.srcElement).tagName;\n    // ignore keypressed in any elements that support keyboard data input\n    return !(tagName == 'INPUT' || tagName == 'SELECT' || tagName == 'TEXTAREA');\n  }\n\n  // initialize key.<modifier> to false\n  for(k in _MODIFIERS) assignKey[k] = false;\n\n  // set current scope (default 'all')\n  function setScope(scope){ _scope = scope || 'all' };\n  function getScope(){ return _scope || 'all' };\n\n  // delete all handlers for a given scope\n  function deleteScope(scope){\n    var key, handlers, i;\n\n    for (key in _handlers) {\n      handlers = _handlers[key];\n      for (i = 0; i < handlers.length; ) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);\n        else i++;\n      }\n    }\n  };\n\n  // abstract key logic for assign and unassign\n  function getKeys(key) {\n    var keys;\n    key = key.replace(/\\s/g, '');\n    keys = key.split(',');\n    if ((keys[keys.length - 1]) == '') {\n      keys[keys.length - 2] += ',';\n    }\n    return keys;\n  }\n\n  // abstract mods logic for assign and unassign\n  function getMods(key) {\n    var mods = key.slice(0, key.length - 1);\n    for (var mi = 0; mi < mods.length; mi++)\n    mods[mi] = _MODIFIERS[mods[mi]];\n    return mods;\n  }\n\n  // cross-browser events\n  function addEvent(object, event, method) {\n    if (object.addEventListener)\n      object.addEventListener(event, method, false);\n    else if(object.attachEvent)\n      object.attachEvent('on'+event, function(){ method(window.event) });\n  };\n\n  // set the handlers globally on document\n  addEvent(document, 'keydown', function(event) { dispatch(event) }); // Passing _scope to a callback to ensure it remains the same by execution. Fixes #48\n  addEvent(document, 'keyup', clearModifier);\n\n  // reset modifiers to false whenever the window is (re)focused.\n  addEvent(window, 'focus', resetModifiers);\n\n  // store previously defined key\n  var previousKey = global.key;\n\n  // restore previously defined key and return reference to our key object\n  function noConflict() {\n    var k = global.key;\n    global.key = previousKey;\n    return k;\n  }\n\n  // set window.key and window.key.set/get/deleteScope, and the default filter\n  global.key = assignKey;\n  global.key.setScope = setScope;\n  global.key.getScope = getScope;\n  global.key.deleteScope = deleteScope;\n  global.key.filter = filter;\n  global.key.isPressed = isPressed;\n  global.key.getPressedKeyCodes = getPressedKeyCodes;\n  global.key.noConflict = noConflict;\n  global.key.unbind = unbindKey;\n\n  if(typeof module !== 'undefined') module.exports = assignKey;\n\n})(this);\n","function extend (destination) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) destination[key] = source[key];\n    }\n  }\n  return destination\n}\n\nfunction repeat (character, count) {\n  return Array(count + 1).join(character)\n}\n\nfunction trimLeadingNewlines (string) {\n  return string.replace(/^\\n*/, '')\n}\n\nfunction trimTrailingNewlines (string) {\n  // avoid match-at-end regexp bottleneck, see #370\n  var indexEnd = string.length;\n  while (indexEnd > 0 && string[indexEnd - 1] === '\\n') indexEnd--;\n  return string.substring(0, indexEnd)\n}\n\nvar blockElements = [\n  'ADDRESS', 'ARTICLE', 'ASIDE', 'AUDIO', 'BLOCKQUOTE', 'BODY', 'CANVAS',\n  'CENTER', 'DD', 'DIR', 'DIV', 'DL', 'DT', 'FIELDSET', 'FIGCAPTION', 'FIGURE',\n  'FOOTER', 'FORM', 'FRAMESET', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'HEADER',\n  'HGROUP', 'HR', 'HTML', 'ISINDEX', 'LI', 'MAIN', 'MENU', 'NAV', 'NOFRAMES',\n  'NOSCRIPT', 'OL', 'OUTPUT', 'P', 'PRE', 'SECTION', 'TABLE', 'TBODY', 'TD',\n  'TFOOT', 'TH', 'THEAD', 'TR', 'UL'\n];\n\nfunction isBlock (node) {\n  return is(node, blockElements)\n}\n\nvar voidElements = [\n  'AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT',\n  'KEYGEN', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'\n];\n\nfunction isVoid (node) {\n  return is(node, voidElements)\n}\n\nfunction hasVoid (node) {\n  return has(node, voidElements)\n}\n\nvar meaningfulWhenBlankElements = [\n  'A', 'TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TH', 'TD', 'IFRAME', 'SCRIPT',\n  'AUDIO', 'VIDEO'\n];\n\nfunction isMeaningfulWhenBlank (node) {\n  return is(node, meaningfulWhenBlankElements)\n}\n\nfunction hasMeaningfulWhenBlank (node) {\n  return has(node, meaningfulWhenBlankElements)\n}\n\nfunction is (node, tagNames) {\n  return tagNames.indexOf(node.nodeName) >= 0\n}\n\nfunction has (node, tagNames) {\n  return (\n    node.getElementsByTagName &&\n    tagNames.some(function (tagName) {\n      return node.getElementsByTagName(tagName).length\n    })\n  )\n}\n\nvar rules = {};\n\nrules.paragraph = {\n  filter: 'p',\n\n  replacement: function (content) {\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.lineBreak = {\n  filter: 'br',\n\n  replacement: function (content, node, options) {\n    return options.br + '\\n'\n  }\n};\n\nrules.heading = {\n  filter: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n  replacement: function (content, node, options) {\n    var hLevel = Number(node.nodeName.charAt(1));\n\n    if (options.headingStyle === 'setext' && hLevel < 3) {\n      var underline = repeat((hLevel === 1 ? '=' : '-'), content.length);\n      return (\n        '\\n\\n' + content + '\\n' + underline + '\\n\\n'\n      )\n    } else {\n      return '\\n\\n' + repeat('#', hLevel) + ' ' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.blockquote = {\n  filter: 'blockquote',\n\n  replacement: function (content) {\n    content = content.replace(/^\\n+|\\n+$/g, '');\n    content = content.replace(/^/gm, '> ');\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.list = {\n  filter: ['ul', 'ol'],\n\n  replacement: function (content, node) {\n    var parent = node.parentNode;\n    if (parent.nodeName === 'LI' && parent.lastElementChild === node) {\n      return '\\n' + content\n    } else {\n      return '\\n\\n' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.listItem = {\n  filter: 'li',\n\n  replacement: function (content, node, options) {\n    content = content\n      .replace(/^\\n+/, '') // remove leading newlines\n      .replace(/\\n+$/, '\\n') // replace trailing newlines with just a single one\n      .replace(/\\n/gm, '\\n    '); // indent\n    var prefix = options.bulletListMarker + '   ';\n    var parent = node.parentNode;\n    if (parent.nodeName === 'OL') {\n      var start = parent.getAttribute('start');\n      var index = Array.prototype.indexOf.call(parent.children, node);\n      prefix = (start ? Number(start) + index : index + 1) + '.  ';\n    }\n    return (\n      prefix + content + (node.nextSibling && !/\\n$/.test(content) ? '\\n' : '')\n    )\n  }\n};\n\nrules.indentedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'indented' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    return (\n      '\\n\\n    ' +\n      node.firstChild.textContent.replace(/\\n/g, '\\n    ') +\n      '\\n\\n'\n    )\n  }\n};\n\nrules.fencedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'fenced' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var className = node.firstChild.getAttribute('class') || '';\n    var language = (className.match(/language-(\\S+)/) || [null, ''])[1];\n    var code = node.firstChild.textContent;\n\n    var fenceChar = options.fence.charAt(0);\n    var fenceSize = 3;\n    var fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');\n\n    var match;\n    while ((match = fenceInCodeRegex.exec(code))) {\n      if (match[0].length >= fenceSize) {\n        fenceSize = match[0].length + 1;\n      }\n    }\n\n    var fence = repeat(fenceChar, fenceSize);\n\n    return (\n      '\\n\\n' + fence + language + '\\n' +\n      code.replace(/\\n$/, '') +\n      '\\n' + fence + '\\n\\n'\n    )\n  }\n};\n\nrules.horizontalRule = {\n  filter: 'hr',\n\n  replacement: function (content, node, options) {\n    return '\\n\\n' + options.hr + '\\n\\n'\n  }\n};\n\nrules.inlineLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'inlined' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    return '[' + content + '](' + href + title + ')'\n  }\n};\n\nrules.referenceLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'referenced' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    var replacement;\n    var reference;\n\n    switch (options.linkReferenceStyle) {\n      case 'collapsed':\n        replacement = '[' + content + '][]';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      case 'shortcut':\n        replacement = '[' + content + ']';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      default:\n        var id = this.references.length + 1;\n        replacement = '[' + content + '][' + id + ']';\n        reference = '[' + id + ']: ' + href + title;\n    }\n\n    this.references.push(reference);\n    return replacement\n  },\n\n  references: [],\n\n  append: function (options) {\n    var references = '';\n    if (this.references.length) {\n      references = '\\n\\n' + this.references.join('\\n') + '\\n\\n';\n      this.references = []; // Reset references\n    }\n    return references\n  }\n};\n\nrules.emphasis = {\n  filter: ['em', 'i'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.emDelimiter + content + options.emDelimiter\n  }\n};\n\nrules.strong = {\n  filter: ['strong', 'b'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.strongDelimiter + content + options.strongDelimiter\n  }\n};\n\nrules.code = {\n  filter: function (node) {\n    var hasSiblings = node.previousSibling || node.nextSibling;\n    var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n    return node.nodeName === 'CODE' && !isCodeBlock\n  },\n\n  replacement: function (content) {\n    if (!content) return ''\n    content = content.replace(/\\r?\\n|\\r/g, ' ');\n\n    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? ' ' : '';\n    var delimiter = '`';\n    var matches = content.match(/`+/gm) || [];\n    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + '`';\n\n    return delimiter + extraSpace + content + extraSpace + delimiter\n  }\n};\n\nrules.image = {\n  filter: 'img',\n\n  replacement: function (content, node) {\n    var alt = cleanAttribute(node.getAttribute('alt'));\n    var src = node.getAttribute('src') || '';\n    var title = cleanAttribute(node.getAttribute('title'));\n    var titlePart = title ? ' \"' + title + '\"' : '';\n    return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : ''\n  }\n};\n\nfunction cleanAttribute (attribute) {\n  return attribute ? attribute.replace(/(\\n+\\s*)+/g, '\\n') : ''\n}\n\n/**\n * Manages a collection of rules used to convert HTML to Markdown\n */\n\nfunction Rules (options) {\n  this.options = options;\n  this._keep = [];\n  this._remove = [];\n\n  this.blankRule = {\n    replacement: options.blankReplacement\n  };\n\n  this.keepReplacement = options.keepReplacement;\n\n  this.defaultRule = {\n    replacement: options.defaultReplacement\n  };\n\n  this.array = [];\n  for (var key in options.rules) this.array.push(options.rules[key]);\n}\n\nRules.prototype = {\n  add: function (key, rule) {\n    this.array.unshift(rule);\n  },\n\n  keep: function (filter) {\n    this._keep.unshift({\n      filter: filter,\n      replacement: this.keepReplacement\n    });\n  },\n\n  remove: function (filter) {\n    this._remove.unshift({\n      filter: filter,\n      replacement: function () {\n        return ''\n      }\n    });\n  },\n\n  forNode: function (node) {\n    if (node.isBlank) return this.blankRule\n    var rule;\n\n    if ((rule = findRule(this.array, node, this.options))) return rule\n    if ((rule = findRule(this._keep, node, this.options))) return rule\n    if ((rule = findRule(this._remove, node, this.options))) return rule\n\n    return this.defaultRule\n  },\n\n  forEach: function (fn) {\n    for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n  }\n};\n\nfunction findRule (rules, node, options) {\n  for (var i = 0; i < rules.length; i++) {\n    var rule = rules[i];\n    if (filterValue(rule, node, options)) return rule\n  }\n  return void 0\n}\n\nfunction filterValue (rule, node, options) {\n  var filter = rule.filter;\n  if (typeof filter === 'string') {\n    if (filter === node.nodeName.toLowerCase()) return true\n  } else if (Array.isArray(filter)) {\n    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true\n  } else if (typeof filter === 'function') {\n    if (filter.call(rule, node, options)) return true\n  } else {\n    throw new TypeError('`filter` needs to be a string, array, or function')\n  }\n}\n\n/**\n * The collapseWhitespace function is adapted from collapse-whitespace\n * by Luc Thevenard.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n *\n * @param {Object} options\n */\nfunction collapseWhitespace (options) {\n  var element = options.element;\n  var isBlock = options.isBlock;\n  var isVoid = options.isVoid;\n  var isPre = options.isPre || function (node) {\n    return node.nodeName === 'PRE'\n  };\n\n  if (!element.firstChild || isPre(element)) return\n\n  var prevText = null;\n  var keepLeadingWs = false;\n\n  var prev = null;\n  var node = next(prev, element, isPre);\n\n  while (node !== element) {\n    if (node.nodeType === 3 || node.nodeType === 4) { // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue\n      }\n\n      node.data = text;\n\n      prevText = node;\n    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        keepLeadingWs = false;\n      } else if (isVoid(node) || isPre(node)) {\n        // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n        prevText = null;\n        keepLeadingWs = true;\n      } else if (prevText) {\n        // Drop protection if set previously.\n        keepLeadingWs = false;\n      }\n    } else {\n      node = remove(node);\n      continue\n    }\n\n    var nextNode = next(prev, node, isPre);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove (node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next\n}\n\n/**\n * next(prev, current, isPre) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @param {Function} isPre\n * @return {Node}\n */\nfunction next (prev, current, isPre) {\n  if ((prev && prev.parentNode === current) || isPre(current)) {\n    return current.nextSibling || current.parentNode\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode\n}\n\n/*\n * Set up window for Node.js\n */\n\nvar root = (typeof window !== 'undefined' ? window : {});\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHTMLNatively () {\n  var Parser = root.DOMParser;\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse\n}\n\nfunction createHTMLParser () {\n  var Parser = function () {};\n\n  {\n    if (shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new window.ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    }\n  }\n  return Parser\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (window.ActiveXObject) useActiveX = true;\n  }\n  return useActiveX\n}\n\nvar HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\nfunction RootNode (input, options) {\n  var root;\n  if (typeof input === 'string') {\n    var doc = htmlParser().parseFromString(\n      // DOM parsers arrange elements in the <head> and <body>.\n      // Wrapping in a custom element ensures elements are reliably arranged in\n      // a single element.\n      '<x-turndown id=\"turndown-root\">' + input + '</x-turndown>',\n      'text/html'\n    );\n    root = doc.getElementById('turndown-root');\n  } else {\n    root = input.cloneNode(true);\n  }\n  collapseWhitespace({\n    element: root,\n    isBlock: isBlock,\n    isVoid: isVoid,\n    isPre: options.preformattedCode ? isPreOrCode : null\n  });\n\n  return root\n}\n\nvar _htmlParser;\nfunction htmlParser () {\n  _htmlParser = _htmlParser || new HTMLParser();\n  return _htmlParser\n}\n\nfunction isPreOrCode (node) {\n  return node.nodeName === 'PRE' || node.nodeName === 'CODE'\n}\n\nfunction Node (node, options) {\n  node.isBlock = isBlock(node);\n  node.isCode = node.nodeName === 'CODE' || node.parentNode.isCode;\n  node.isBlank = isBlank(node);\n  node.flankingWhitespace = flankingWhitespace(node, options);\n  return node\n}\n\nfunction isBlank (node) {\n  return (\n    !isVoid(node) &&\n    !isMeaningfulWhenBlank(node) &&\n    /^\\s*$/i.test(node.textContent) &&\n    !hasVoid(node) &&\n    !hasMeaningfulWhenBlank(node)\n  )\n}\n\nfunction flankingWhitespace (node, options) {\n  if (node.isBlock || (options.preformattedCode && node.isCode)) {\n    return { leading: '', trailing: '' }\n  }\n\n  var edges = edgeWhitespace(node.textContent);\n\n  // abandon leading ASCII WS if left-flanked by ASCII WS\n  if (edges.leadingAscii && isFlankedByWhitespace('left', node, options)) {\n    edges.leading = edges.leadingNonAscii;\n  }\n\n  // abandon trailing ASCII WS if right-flanked by ASCII WS\n  if (edges.trailingAscii && isFlankedByWhitespace('right', node, options)) {\n    edges.trailing = edges.trailingNonAscii;\n  }\n\n  return { leading: edges.leading, trailing: edges.trailing }\n}\n\nfunction edgeWhitespace (string) {\n  var m = string.match(/^(([ \\t\\r\\n]*)(\\s*))[\\s\\S]*?((\\s*?)([ \\t\\r\\n]*))$/);\n  return {\n    leading: m[1], // whole string for whitespace-only strings\n    leadingAscii: m[2],\n    leadingNonAscii: m[3],\n    trailing: m[4], // empty for whitespace-only strings\n    trailingNonAscii: m[5],\n    trailingAscii: m[6]\n  }\n}\n\nfunction isFlankedByWhitespace (side, node, options) {\n  var sibling;\n  var regExp;\n  var isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  } else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    } else if (options.preformattedCode && sibling.nodeName === 'CODE') {\n      isFlanked = false;\n    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked\n}\n\nvar reduce = Array.prototype.reduce;\nvar escapes = [\n  [/\\\\/g, '\\\\\\\\'],\n  [/\\*/g, '\\\\*'],\n  [/^-/g, '\\\\-'],\n  [/^\\+ /g, '\\\\+ '],\n  [/^(=+)/g, '\\\\$1'],\n  [/^(#{1,6}) /g, '\\\\$1 '],\n  [/`/g, '\\\\`'],\n  [/^~~~/g, '\\\\~~~'],\n  [/\\[/g, '\\\\['],\n  [/\\]/g, '\\\\]'],\n  [/^>/g, '\\\\>'],\n  [/_/g, '\\\\_'],\n  [/^(\\d+)\\. /g, '$1\\\\. ']\n];\n\nfunction TurndownService (options) {\n  if (!(this instanceof TurndownService)) return new TurndownService(options)\n\n  var defaults = {\n    rules: rules,\n    headingStyle: 'setext',\n    hr: '* * *',\n    bulletListMarker: '*',\n    codeBlockStyle: 'indented',\n    fence: '```',\n    emDelimiter: '_',\n    strongDelimiter: '**',\n    linkStyle: 'inlined',\n    linkReferenceStyle: 'full',\n    br: '  ',\n    preformattedCode: false,\n    blankReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' : ''\n    },\n    keepReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    },\n    defaultReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + content + '\\n\\n' : content\n    }\n  };\n  this.options = extend({}, defaults, options);\n  this.rules = new Rules(this.options);\n}\n\nTurndownService.prototype = {\n  /**\n   * The entry point for converting a string or DOM node to Markdown\n   * @public\n   * @param {String|HTMLElement} input The string or DOM node to convert\n   * @returns A Markdown representation of the input\n   * @type String\n   */\n\n  turndown: function (input) {\n    if (!canConvert(input)) {\n      throw new TypeError(\n        input + ' is not a string, or an element/document/fragment node.'\n      )\n    }\n\n    if (input === '') return ''\n\n    var output = process.call(this, new RootNode(input, this.options));\n    return postProcess.call(this, output)\n  },\n\n  /**\n   * Add one or more plugins\n   * @public\n   * @param {Function|Array} plugin The plugin or array of plugins to add\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  use: function (plugin) {\n    if (Array.isArray(plugin)) {\n      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n    } else if (typeof plugin === 'function') {\n      plugin(this);\n    } else {\n      throw new TypeError('plugin must be a Function or an Array of Functions')\n    }\n    return this\n  },\n\n  /**\n   * Adds a rule\n   * @public\n   * @param {String} key The unique key of the rule\n   * @param {Object} rule The rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  addRule: function (key, rule) {\n    this.rules.add(key, rule);\n    return this\n  },\n\n  /**\n   * Keep a node (as HTML) that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  keep: function (filter) {\n    this.rules.keep(filter);\n    return this\n  },\n\n  /**\n   * Remove a node that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  remove: function (filter) {\n    this.rules.remove(filter);\n    return this\n  },\n\n  /**\n   * Escapes Markdown syntax\n   * @public\n   * @param {String} string The string to escape\n   * @returns A string with Markdown syntax escaped\n   * @type String\n   */\n\n  escape: function (string) {\n    return escapes.reduce(function (accumulator, escape) {\n      return accumulator.replace(escape[0], escape[1])\n    }, string)\n  }\n};\n\n/**\n * Reduces a DOM node down to its Markdown string equivalent\n * @private\n * @param {HTMLElement} parentNode The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction process (parentNode) {\n  var self = this;\n  return reduce.call(parentNode.childNodes, function (output, node) {\n    node = new Node(node, self.options);\n\n    var replacement = '';\n    if (node.nodeType === 3) {\n      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);\n    } else if (node.nodeType === 1) {\n      replacement = replacementForNode.call(self, node);\n    }\n\n    return join(output, replacement)\n  }, '')\n}\n\n/**\n * Appends strings as each rule requires and trims the output\n * @private\n * @param {String} output The conversion output\n * @returns A trimmed version of the ouput\n * @type String\n */\n\nfunction postProcess (output) {\n  var self = this;\n  this.rules.forEach(function (rule) {\n    if (typeof rule.append === 'function') {\n      output = join(output, rule.append(self.options));\n    }\n  });\n\n  return output.replace(/^[\\t\\r\\n]+/, '').replace(/[\\t\\r\\n\\s]+$/, '')\n}\n\n/**\n * Converts an element node to its Markdown equivalent\n * @private\n * @param {HTMLElement} node The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction replacementForNode (node) {\n  var rule = this.rules.forNode(node);\n  var content = process.call(this, node);\n  var whitespace = node.flankingWhitespace;\n  if (whitespace.leading || whitespace.trailing) content = content.trim();\n  return (\n    whitespace.leading +\n    rule.replacement(content, node, this.options) +\n    whitespace.trailing\n  )\n}\n\n/**\n * Joins replacement to the current output with appropriate number of new lines\n * @private\n * @param {String} output The current conversion output\n * @param {String} replacement The string to append to the output\n * @returns Joined output\n * @type String\n */\n\nfunction join (output, replacement) {\n  var s1 = trimTrailingNewlines(output);\n  var s2 = trimLeadingNewlines(replacement);\n  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);\n  var separator = '\\n\\n'.substring(0, nls);\n\n  return s1 + separator + s2\n}\n\n/**\n * Determines whether an input can be converted\n * @private\n * @param {String|HTMLElement} input Describe this parameter\n * @returns Describe what it returns\n * @type String|Object|Array|Boolean|Number\n */\n\nfunction canConvert (input) {\n  return (\n    input != null && (\n      typeof input === 'string' ||\n      (input.nodeType && (\n        input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11\n      ))\n    )\n  )\n}\n\nexport default TurndownService;\n","/*!\n * jQuery UI Resizable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Resizable\n//>>group: Interactions\n//>>description: Enables resize functionality for any element.\n//>>docs: http://api.jqueryui.com/resizable/\n//>>demos: http://jqueryui.com/resizable/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/resizable.css\n//>>css.theme: ../../themes/base/theme.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../disable-selection\",\n\t\t\t\"../plugin\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.resizable\", $.ui.mouse, {\n\tversion: \"1.12.1\",\n\twidgetEventPrefix: \"resize\",\n\toptions: {\n\t\talsoResize: false,\n\t\tanimate: false,\n\t\tanimateDuration: \"slow\",\n\t\tanimateEasing: \"swing\",\n\t\taspectRatio: false,\n\t\tautoHide: false,\n\t\tclasses: {\n\t\t\t\"ui-resizable-se\": \"ui-icon ui-icon-gripsmall-diagonal-se\"\n\t\t},\n\t\tcontainment: false,\n\t\tghost: false,\n\t\tgrid: false,\n\t\thandles: \"e,s,se\",\n\t\thelper: false,\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 10,\n\t\tminWidth: 10,\n\n\t\t// See #7960\n\t\tzIndex: 90,\n\n\t\t// Callbacks\n\t\tresize: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_num: function( value ) {\n\t\treturn parseFloat( value ) || 0;\n\t},\n\n\t_isNumber: function( value ) {\n\t\treturn !isNaN( parseFloat( value ) );\n\t},\n\n\t_hasScroll: function( el, a ) {\n\n\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\n\t\t\thas = false;\n\n\t\tif ( el[ scroll ] > 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: determine which cases actually cause this to happen\n\t\t// if the element doesn't have the scroll set, see if it's possible to\n\t\t// set the scroll\n\t\tel[ scroll ] = 1;\n\t\thas = ( el[ scroll ] > 0 );\n\t\tel[ scroll ] = 0;\n\t\treturn has;\n\t},\n\n\t_create: function() {\n\n\t\tvar margins,\n\t\t\to = this.options,\n\t\t\tthat = this;\n\t\tthis._addClass( \"ui-resizable\" );\n\n\t\t$.extend( this, {\n\t\t\t_aspectRatio: !!( o.aspectRatio ),\n\t\t\taspectRatio: o.aspectRatio,\n\t\t\toriginalElement: this.element,\n\t\t\t_proportionallyResizeElements: [],\n\t\t\t_helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\n\t\t} );\n\n\t\t// Wrap the element if it cannot hold child nodes\n\t\tif ( this.element[ 0 ].nodeName.match( /^(canvas|textarea|input|select|button|img)$/i ) ) {\n\n\t\t\tthis.element.wrap(\n\t\t\t\t$( \"<div class='ui-wrapper' style='overflow: hidden;'></div>\" ).css( {\n\t\t\t\t\tposition: this.element.css( \"position\" ),\n\t\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\t\ttop: this.element.css( \"top\" ),\n\t\t\t\t\tleft: this.element.css( \"left\" )\n\t\t\t\t} )\n\t\t\t);\n\n\t\t\tthis.element = this.element.parent().data(\n\t\t\t\t\"ui-resizable\", this.element.resizable( \"instance\" )\n\t\t\t);\n\n\t\t\tthis.elementIsWrapper = true;\n\n\t\t\tmargins = {\n\t\t\t\tmarginTop: this.originalElement.css( \"marginTop\" ),\n\t\t\t\tmarginRight: this.originalElement.css( \"marginRight\" ),\n\t\t\t\tmarginBottom: this.originalElement.css( \"marginBottom\" ),\n\t\t\t\tmarginLeft: this.originalElement.css( \"marginLeft\" )\n\t\t\t};\n\n\t\t\tthis.element.css( margins );\n\t\t\tthis.originalElement.css( \"margin\", 0 );\n\n\t\t\t// support: Safari\n\t\t\t// Prevent Safari textarea resize\n\t\t\tthis.originalResizeStyle = this.originalElement.css( \"resize\" );\n\t\t\tthis.originalElement.css( \"resize\", \"none\" );\n\n\t\t\tthis._proportionallyResizeElements.push( this.originalElement.css( {\n\t\t\t\tposition: \"static\",\n\t\t\t\tzoom: 1,\n\t\t\t\tdisplay: \"block\"\n\t\t\t} ) );\n\n\t\t\t// Support: IE9\n\t\t\t// avoid IE jump (hard set the margin)\n\t\t\tthis.originalElement.css( margins );\n\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tthis._setupHandles();\n\n\t\tif ( o.autoHide ) {\n\t\t\t$( this.element )\n\t\t\t\t.on( \"mouseenter\", function() {\n\t\t\t\t\tif ( o.disabled ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthat._removeClass( \"ui-resizable-autohide\" );\n\t\t\t\t\tthat._handles.show();\n\t\t\t\t} )\n\t\t\t\t.on( \"mouseleave\", function() {\n\t\t\t\t\tif ( o.disabled ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ( !that.resizing ) {\n\t\t\t\t\t\tthat._addClass( \"ui-resizable-autohide\" );\n\t\t\t\t\t\tthat._handles.hide();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\n\t\tthis._mouseInit();\n\t},\n\n\t_destroy: function() {\n\n\t\tthis._mouseDestroy();\n\n\t\tvar wrapper,\n\t\t\t_destroy = function( exp ) {\n\t\t\t\t$( exp )\n\t\t\t\t\t.removeData( \"resizable\" )\n\t\t\t\t\t.removeData( \"ui-resizable\" )\n\t\t\t\t\t.off( \".resizable\" )\n\t\t\t\t\t.find( \".ui-resizable-handle\" )\n\t\t\t\t\t\t.remove();\n\t\t\t};\n\n\t\t// TODO: Unwrap at same DOM position\n\t\tif ( this.elementIsWrapper ) {\n\t\t\t_destroy( this.element );\n\t\t\twrapper = this.element;\n\t\t\tthis.originalElement.css( {\n\t\t\t\tposition: wrapper.css( \"position\" ),\n\t\t\t\twidth: wrapper.outerWidth(),\n\t\t\t\theight: wrapper.outerHeight(),\n\t\t\t\ttop: wrapper.css( \"top\" ),\n\t\t\t\tleft: wrapper.css( \"left\" )\n\t\t\t} ).insertAfter( wrapper );\n\t\t\twrapper.remove();\n\t\t}\n\n\t\tthis.originalElement.css( \"resize\", this.originalResizeStyle );\n\t\t_destroy( this.originalElement );\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\n\t\tswitch ( key ) {\n\t\tcase \"handles\":\n\t\t\tthis._removeHandles();\n\t\t\tthis._setupHandles();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t},\n\n\t_setupHandles: function() {\n\t\tvar o = this.options, handle, i, n, hname, axis, that = this;\n\t\tthis.handles = o.handles ||\n\t\t\t( !$( \".ui-resizable-handle\", this.element ).length ?\n\t\t\t\t\"e,s,se\" : {\n\t\t\t\t\tn: \".ui-resizable-n\",\n\t\t\t\t\te: \".ui-resizable-e\",\n\t\t\t\t\ts: \".ui-resizable-s\",\n\t\t\t\t\tw: \".ui-resizable-w\",\n\t\t\t\t\tse: \".ui-resizable-se\",\n\t\t\t\t\tsw: \".ui-resizable-sw\",\n\t\t\t\t\tne: \".ui-resizable-ne\",\n\t\t\t\t\tnw: \".ui-resizable-nw\"\n\t\t\t\t} );\n\n\t\tthis._handles = $();\n\t\tif ( this.handles.constructor === String ) {\n\n\t\t\tif ( this.handles === \"all\" ) {\n\t\t\t\tthis.handles = \"n,e,s,w,se,sw,ne,nw\";\n\t\t\t}\n\n\t\t\tn = this.handles.split( \",\" );\n\t\t\tthis.handles = {};\n\n\t\t\tfor ( i = 0; i < n.length; i++ ) {\n\n\t\t\t\thandle = $.trim( n[ i ] );\n\t\t\t\thname = \"ui-resizable-\" + handle;\n\t\t\t\taxis = $( \"<div>\" );\n\t\t\t\tthis._addClass( axis, \"ui-resizable-handle \" + hname );\n\n\t\t\t\taxis.css( { zIndex: o.zIndex } );\n\n\t\t\t\tthis.handles[ handle ] = \".ui-resizable-\" + handle;\n\t\t\t\tthis.element.append( axis );\n\t\t\t}\n\n\t\t}\n\n\t\tthis._renderAxis = function( target ) {\n\n\t\t\tvar i, axis, padPos, padWrapper;\n\n\t\t\ttarget = target || this.element;\n\n\t\t\tfor ( i in this.handles ) {\n\n\t\t\t\tif ( this.handles[ i ].constructor === String ) {\n\t\t\t\t\tthis.handles[ i ] = this.element.children( this.handles[ i ] ).first().show();\n\t\t\t\t} else if ( this.handles[ i ].jquery || this.handles[ i ].nodeType ) {\n\t\t\t\t\tthis.handles[ i ] = $( this.handles[ i ] );\n\t\t\t\t\tthis._on( this.handles[ i ], { \"mousedown\": that._mouseDown } );\n\t\t\t\t}\n\n\t\t\t\tif ( this.elementIsWrapper &&\n\t\t\t\t\t\tthis.originalElement[ 0 ]\n\t\t\t\t\t\t\t.nodeName\n\t\t\t\t\t\t\t.match( /^(textarea|input|select|button)$/i ) ) {\n\t\t\t\t\taxis = $( this.handles[ i ], this.element );\n\n\t\t\t\t\tpadWrapper = /sw|ne|nw|se|n|s/.test( i ) ?\n\t\t\t\t\t\taxis.outerHeight() :\n\t\t\t\t\t\taxis.outerWidth();\n\n\t\t\t\t\tpadPos = [ \"padding\",\n\t\t\t\t\t\t/ne|nw|n/.test( i ) ? \"Top\" :\n\t\t\t\t\t\t/se|sw|s/.test( i ) ? \"Bottom\" :\n\t\t\t\t\t\t/^e$/.test( i ) ? \"Right\" : \"Left\" ].join( \"\" );\n\n\t\t\t\t\ttarget.css( padPos, padWrapper );\n\n\t\t\t\t\tthis._proportionallyResize();\n\t\t\t\t}\n\n\t\t\t\tthis._handles = this._handles.add( this.handles[ i ] );\n\t\t\t}\n\t\t};\n\n\t\t// TODO: make renderAxis a prototype function\n\t\tthis._renderAxis( this.element );\n\n\t\tthis._handles = this._handles.add( this.element.find( \".ui-resizable-handle\" ) );\n\t\tthis._handles.disableSelection();\n\n\t\tthis._handles.on( \"mouseover\", function() {\n\t\t\tif ( !that.resizing ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\taxis = this.className.match( /ui-resizable-(se|sw|ne|nw|n|e|s|w)/i );\n\t\t\t\t}\n\t\t\t\tthat.axis = axis && axis[ 1 ] ? axis[ 1 ] : \"se\";\n\t\t\t}\n\t\t} );\n\n\t\tif ( o.autoHide ) {\n\t\t\tthis._handles.hide();\n\t\t\tthis._addClass( \"ui-resizable-autohide\" );\n\t\t}\n\t},\n\n\t_removeHandles: function() {\n\t\tthis._handles.remove();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar i, handle,\n\t\t\tcapture = false;\n\n\t\tfor ( i in this.handles ) {\n\t\t\thandle = $( this.handles[ i ] )[ 0 ];\n\t\t\tif ( handle === event.target || $.contains( handle, event.target ) ) {\n\t\t\t\tcapture = true;\n\t\t\t}\n\t\t}\n\n\t\treturn !this.options.disabled && capture;\n\t},\n\n\t_mouseStart: function( event ) {\n\n\t\tvar curleft, curtop, cursor,\n\t\t\to = this.options,\n\t\t\tel = this.element;\n\n\t\tthis.resizing = true;\n\n\t\tthis._renderProxy();\n\n\t\tcurleft = this._num( this.helper.css( \"left\" ) );\n\t\tcurtop = this._num( this.helper.css( \"top\" ) );\n\n\t\tif ( o.containment ) {\n\t\t\tcurleft += $( o.containment ).scrollLeft() || 0;\n\t\t\tcurtop += $( o.containment ).scrollTop() || 0;\n\t\t}\n\n\t\tthis.offset = this.helper.offset();\n\t\tthis.position = { left: curleft, top: curtop };\n\n\t\tthis.size = this._helper ? {\n\t\t\t\twidth: this.helper.width(),\n\t\t\t\theight: this.helper.height()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.originalSize = this._helper ? {\n\t\t\t\twidth: el.outerWidth(),\n\t\t\t\theight: el.outerHeight()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.sizeDiff = {\n\t\t\twidth: el.outerWidth() - el.width(),\n\t\t\theight: el.outerHeight() - el.height()\n\t\t};\n\n\t\tthis.originalPosition = { left: curleft, top: curtop };\n\t\tthis.originalMousePosition = { left: event.pageX, top: event.pageY };\n\n\t\tthis.aspectRatio = ( typeof o.aspectRatio === \"number\" ) ?\n\t\t\to.aspectRatio :\n\t\t\t( ( this.originalSize.width / this.originalSize.height ) || 1 );\n\n\t\tcursor = $( \".ui-resizable-\" + this.axis ).css( \"cursor\" );\n\t\t$( \"body\" ).css( \"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor );\n\n\t\tthis._addClass( \"ui-resizable-resizing\" );\n\t\tthis._propagate( \"start\", event );\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function( event ) {\n\n\t\tvar data, props,\n\t\t\tsmp = this.originalMousePosition,\n\t\t\ta = this.axis,\n\t\t\tdx = ( event.pageX - smp.left ) || 0,\n\t\t\tdy = ( event.pageY - smp.top ) || 0,\n\t\t\ttrigger = this._change[ a ];\n\n\t\tthis._updatePrevProperties();\n\n\t\tif ( !trigger ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tdata = trigger.apply( this, [ event, dx, dy ] );\n\n\t\tthis._updateVirtualBoundaries( event.shiftKey );\n\t\tif ( this._aspectRatio || event.shiftKey ) {\n\t\t\tdata = this._updateRatio( data, event );\n\t\t}\n\n\t\tdata = this._respectSize( data, event );\n\n\t\tthis._updateCache( data );\n\n\t\tthis._propagate( \"resize\", event );\n\n\t\tprops = this._applyChanges();\n\n\t\tif ( !this._helper && this._proportionallyResizeElements.length ) {\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tif ( !$.isEmptyObject( props ) ) {\n\t\t\tthis._updatePrevProperties();\n\t\t\tthis._trigger( \"resize\", event, this.ui() );\n\t\t\tthis._applyChanges();\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\n\t\tthis.resizing = false;\n\t\tvar pr, ista, soffseth, soffsetw, s, left, top,\n\t\t\to = this.options, that = this;\n\n\t\tif ( this._helper ) {\n\n\t\t\tpr = this._proportionallyResizeElements;\n\t\t\tista = pr.length && ( /textarea/i ).test( pr[ 0 ].nodeName );\n\t\t\tsoffseth = ista && this._hasScroll( pr[ 0 ], \"left\" ) ? 0 : that.sizeDiff.height;\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width;\n\n\t\t\ts = {\n\t\t\t\twidth: ( that.helper.width()  - soffsetw ),\n\t\t\t\theight: ( that.helper.height() - soffseth )\n\t\t\t};\n\t\t\tleft = ( parseFloat( that.element.css( \"left\" ) ) +\n\t\t\t\t( that.position.left - that.originalPosition.left ) ) || null;\n\t\t\ttop = ( parseFloat( that.element.css( \"top\" ) ) +\n\t\t\t\t( that.position.top - that.originalPosition.top ) ) || null;\n\n\t\t\tif ( !o.animate ) {\n\t\t\t\tthis.element.css( $.extend( s, { top: top, left: left } ) );\n\t\t\t}\n\n\t\t\tthat.helper.height( that.size.height );\n\t\t\tthat.helper.width( that.size.width );\n\n\t\t\tif ( this._helper && !o.animate ) {\n\t\t\t\tthis._proportionallyResize();\n\t\t\t}\n\t\t}\n\n\t\t$( \"body\" ).css( \"cursor\", \"auto\" );\n\n\t\tthis._removeClass( \"ui-resizable-resizing\" );\n\n\t\tthis._propagate( \"stop\", event );\n\n\t\tif ( this._helper ) {\n\t\t\tthis.helper.remove();\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\t_updatePrevProperties: function() {\n\t\tthis.prevPosition = {\n\t\t\ttop: this.position.top,\n\t\t\tleft: this.position.left\n\t\t};\n\t\tthis.prevSize = {\n\t\t\twidth: this.size.width,\n\t\t\theight: this.size.height\n\t\t};\n\t},\n\n\t_applyChanges: function() {\n\t\tvar props = {};\n\n\t\tif ( this.position.top !== this.prevPosition.top ) {\n\t\t\tprops.top = this.position.top + \"px\";\n\t\t}\n\t\tif ( this.position.left !== this.prevPosition.left ) {\n\t\t\tprops.left = this.position.left + \"px\";\n\t\t}\n\t\tif ( this.size.width !== this.prevSize.width ) {\n\t\t\tprops.width = this.size.width + \"px\";\n\t\t}\n\t\tif ( this.size.height !== this.prevSize.height ) {\n\t\t\tprops.height = this.size.height + \"px\";\n\t\t}\n\n\t\tthis.helper.css( props );\n\n\t\treturn props;\n\t},\n\n\t_updateVirtualBoundaries: function( forceAspectRatio ) {\n\t\tvar pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\n\t\t\to = this.options;\n\n\t\tb = {\n\t\t\tminWidth: this._isNumber( o.minWidth ) ? o.minWidth : 0,\n\t\t\tmaxWidth: this._isNumber( o.maxWidth ) ? o.maxWidth : Infinity,\n\t\t\tminHeight: this._isNumber( o.minHeight ) ? o.minHeight : 0,\n\t\t\tmaxHeight: this._isNumber( o.maxHeight ) ? o.maxHeight : Infinity\n\t\t};\n\n\t\tif ( this._aspectRatio || forceAspectRatio ) {\n\t\t\tpMinWidth = b.minHeight * this.aspectRatio;\n\t\t\tpMinHeight = b.minWidth / this.aspectRatio;\n\t\t\tpMaxWidth = b.maxHeight * this.aspectRatio;\n\t\t\tpMaxHeight = b.maxWidth / this.aspectRatio;\n\n\t\t\tif ( pMinWidth > b.minWidth ) {\n\t\t\t\tb.minWidth = pMinWidth;\n\t\t\t}\n\t\t\tif ( pMinHeight > b.minHeight ) {\n\t\t\t\tb.minHeight = pMinHeight;\n\t\t\t}\n\t\t\tif ( pMaxWidth < b.maxWidth ) {\n\t\t\t\tb.maxWidth = pMaxWidth;\n\t\t\t}\n\t\t\tif ( pMaxHeight < b.maxHeight ) {\n\t\t\t\tb.maxHeight = pMaxHeight;\n\t\t\t}\n\t\t}\n\t\tthis._vBoundaries = b;\n\t},\n\n\t_updateCache: function( data ) {\n\t\tthis.offset = this.helper.offset();\n\t\tif ( this._isNumber( data.left ) ) {\n\t\t\tthis.position.left = data.left;\n\t\t}\n\t\tif ( this._isNumber( data.top ) ) {\n\t\t\tthis.position.top = data.top;\n\t\t}\n\t\tif ( this._isNumber( data.height ) ) {\n\t\t\tthis.size.height = data.height;\n\t\t}\n\t\tif ( this._isNumber( data.width ) ) {\n\t\t\tthis.size.width = data.width;\n\t\t}\n\t},\n\n\t_updateRatio: function( data ) {\n\n\t\tvar cpos = this.position,\n\t\t\tcsize = this.size,\n\t\t\ta = this.axis;\n\n\t\tif ( this._isNumber( data.height ) ) {\n\t\t\tdata.width = ( data.height * this.aspectRatio );\n\t\t} else if ( this._isNumber( data.width ) ) {\n\t\t\tdata.height = ( data.width / this.aspectRatio );\n\t\t}\n\n\t\tif ( a === \"sw\" ) {\n\t\t\tdata.left = cpos.left + ( csize.width - data.width );\n\t\t\tdata.top = null;\n\t\t}\n\t\tif ( a === \"nw\" ) {\n\t\t\tdata.top = cpos.top + ( csize.height - data.height );\n\t\t\tdata.left = cpos.left + ( csize.width - data.width );\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_respectSize: function( data ) {\n\n\t\tvar o = this._vBoundaries,\n\t\t\ta = this.axis,\n\t\t\tismaxw = this._isNumber( data.width ) && o.maxWidth && ( o.maxWidth < data.width ),\n\t\t\tismaxh = this._isNumber( data.height ) && o.maxHeight && ( o.maxHeight < data.height ),\n\t\t\tisminw = this._isNumber( data.width ) && o.minWidth && ( o.minWidth > data.width ),\n\t\t\tisminh = this._isNumber( data.height ) && o.minHeight && ( o.minHeight > data.height ),\n\t\t\tdw = this.originalPosition.left + this.originalSize.width,\n\t\t\tdh = this.originalPosition.top + this.originalSize.height,\n\t\t\tcw = /sw|nw|w/.test( a ), ch = /nw|ne|n/.test( a );\n\t\tif ( isminw ) {\n\t\t\tdata.width = o.minWidth;\n\t\t}\n\t\tif ( isminh ) {\n\t\t\tdata.height = o.minHeight;\n\t\t}\n\t\tif ( ismaxw ) {\n\t\t\tdata.width = o.maxWidth;\n\t\t}\n\t\tif ( ismaxh ) {\n\t\t\tdata.height = o.maxHeight;\n\t\t}\n\n\t\tif ( isminw && cw ) {\n\t\t\tdata.left = dw - o.minWidth;\n\t\t}\n\t\tif ( ismaxw && cw ) {\n\t\t\tdata.left = dw - o.maxWidth;\n\t\t}\n\t\tif ( isminh && ch ) {\n\t\t\tdata.top = dh - o.minHeight;\n\t\t}\n\t\tif ( ismaxh && ch ) {\n\t\t\tdata.top = dh - o.maxHeight;\n\t\t}\n\n\t\t// Fixing jump error on top/left - bug #2330\n\t\tif ( !data.width && !data.height && !data.left && data.top ) {\n\t\t\tdata.top = null;\n\t\t} else if ( !data.width && !data.height && !data.top && data.left ) {\n\t\t\tdata.left = null;\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_getPaddingPlusBorderDimensions: function( element ) {\n\t\tvar i = 0,\n\t\t\twidths = [],\n\t\t\tborders = [\n\t\t\t\telement.css( \"borderTopWidth\" ),\n\t\t\t\telement.css( \"borderRightWidth\" ),\n\t\t\t\telement.css( \"borderBottomWidth\" ),\n\t\t\t\telement.css( \"borderLeftWidth\" )\n\t\t\t],\n\t\t\tpaddings = [\n\t\t\t\telement.css( \"paddingTop\" ),\n\t\t\t\telement.css( \"paddingRight\" ),\n\t\t\t\telement.css( \"paddingBottom\" ),\n\t\t\t\telement.css( \"paddingLeft\" )\n\t\t\t];\n\n\t\tfor ( ; i < 4; i++ ) {\n\t\t\twidths[ i ] = ( parseFloat( borders[ i ] ) || 0 );\n\t\t\twidths[ i ] += ( parseFloat( paddings[ i ] ) || 0 );\n\t\t}\n\n\t\treturn {\n\t\t\theight: widths[ 0 ] + widths[ 2 ],\n\t\t\twidth: widths[ 1 ] + widths[ 3 ]\n\t\t};\n\t},\n\n\t_proportionallyResize: function() {\n\n\t\tif ( !this._proportionallyResizeElements.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar prel,\n\t\t\ti = 0,\n\t\t\telement = this.helper || this.element;\n\n\t\tfor ( ; i < this._proportionallyResizeElements.length; i++ ) {\n\n\t\t\tprel = this._proportionallyResizeElements[ i ];\n\n\t\t\t// TODO: Seems like a bug to cache this.outerDimensions\n\t\t\t// considering that we are in a loop.\n\t\t\tif ( !this.outerDimensions ) {\n\t\t\t\tthis.outerDimensions = this._getPaddingPlusBorderDimensions( prel );\n\t\t\t}\n\n\t\t\tprel.css( {\n\t\t\t\theight: ( element.height() - this.outerDimensions.height ) || 0,\n\t\t\t\twidth: ( element.width() - this.outerDimensions.width ) || 0\n\t\t\t} );\n\n\t\t}\n\n\t},\n\n\t_renderProxy: function() {\n\n\t\tvar el = this.element, o = this.options;\n\t\tthis.elementOffset = el.offset();\n\n\t\tif ( this._helper ) {\n\n\t\t\tthis.helper = this.helper || $( \"<div style='overflow:hidden;'></div>\" );\n\n\t\t\tthis._addClass( this.helper, this._helper );\n\t\t\tthis.helper.css( {\n\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tleft: this.elementOffset.left + \"px\",\n\t\t\t\ttop: this.elementOffset.top + \"px\",\n\t\t\t\tzIndex: ++o.zIndex //TODO: Don't modify option\n\t\t\t} );\n\n\t\t\tthis.helper\n\t\t\t\t.appendTo( \"body\" )\n\t\t\t\t.disableSelection();\n\n\t\t} else {\n\t\t\tthis.helper = this.element;\n\t\t}\n\n\t},\n\n\t_change: {\n\t\te: function( event, dx ) {\n\t\t\treturn { width: this.originalSize.width + dx };\n\t\t},\n\t\tw: function( event, dx ) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { left: sp.left + dx, width: cs.width - dx };\n\t\t},\n\t\tn: function( event, dx, dy ) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { top: sp.top + dy, height: cs.height - dy };\n\t\t},\n\t\ts: function( event, dx, dy ) {\n\t\t\treturn { height: this.originalSize.height + dy };\n\t\t},\n\t\tse: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.s.apply( this, arguments ),\n\t\t\t\tthis._change.e.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tsw: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.s.apply( this, arguments ),\n\t\t\t\tthis._change.w.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tne: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.n.apply( this, arguments ),\n\t\t\t\tthis._change.e.apply( this, [ event, dx, dy ] ) );\n\t\t},\n\t\tnw: function( event, dx, dy ) {\n\t\t\treturn $.extend( this._change.n.apply( this, arguments ),\n\t\t\t\tthis._change.w.apply( this, [ event, dx, dy ] ) );\n\t\t}\n\t},\n\n\t_propagate: function( n, event ) {\n\t\t$.ui.plugin.call( this, n, [ event, this.ui() ] );\n\t\t( n !== \"resize\" && this._trigger( n, event, this.ui() ) );\n\t},\n\n\tplugins: {},\n\n\tui: function() {\n\t\treturn {\n\t\t\toriginalElement: this.originalElement,\n\t\t\telement: this.element,\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\tsize: this.size,\n\t\t\toriginalSize: this.originalSize,\n\t\t\toriginalPosition: this.originalPosition\n\t\t};\n\t}\n\n} );\n\n/*\n * Resizable Extensions\n */\n\n$.ui.plugin.add( \"resizable\", \"animate\", {\n\n\tstop: function( event ) {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tpr = that._proportionallyResizeElements,\n\t\t\tista = pr.length && ( /textarea/i ).test( pr[ 0 ].nodeName ),\n\t\t\tsoffseth = ista && that._hasScroll( pr[ 0 ], \"left\" ) ? 0 : that.sizeDiff.height,\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width,\n\t\t\tstyle = {\n\t\t\t\twidth: ( that.size.width - soffsetw ),\n\t\t\t\theight: ( that.size.height - soffseth )\n\t\t\t},\n\t\t\tleft = ( parseFloat( that.element.css( \"left\" ) ) +\n\t\t\t\t( that.position.left - that.originalPosition.left ) ) || null,\n\t\t\ttop = ( parseFloat( that.element.css( \"top\" ) ) +\n\t\t\t\t( that.position.top - that.originalPosition.top ) ) || null;\n\n\t\tthat.element.animate(\n\t\t\t$.extend( style, top && left ? { top: top, left: left } : {} ), {\n\t\t\t\tduration: o.animateDuration,\n\t\t\t\teasing: o.animateEasing,\n\t\t\t\tstep: function() {\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\twidth: parseFloat( that.element.css( \"width\" ) ),\n\t\t\t\t\t\theight: parseFloat( that.element.css( \"height\" ) ),\n\t\t\t\t\t\ttop: parseFloat( that.element.css( \"top\" ) ),\n\t\t\t\t\t\tleft: parseFloat( that.element.css( \"left\" ) )\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( pr && pr.length ) {\n\t\t\t\t\t\t$( pr[ 0 ] ).css( { width: data.width, height: data.height } );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Propagating resize, and updating values for each animation step\n\t\t\t\t\tthat._updateCache( data );\n\t\t\t\t\tthat._propagate( \"resize\", event );\n\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n} );\n\n$.ui.plugin.add( \"resizable\", \"containment\", {\n\n\tstart: function() {\n\t\tvar element, p, co, ch, cw, width, height,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tel = that.element,\n\t\t\toc = o.containment,\n\t\t\tce = ( oc instanceof $ ) ?\n\t\t\t\toc.get( 0 ) :\n\t\t\t\t( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthat.containerElement = $( ce );\n\n\t\tif ( /document/.test( oc ) || oc === document ) {\n\t\t\tthat.containerOffset = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\t\t\tthat.containerPosition = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: $( document ),\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: $( document ).width(),\n\t\t\t\theight: $( document ).height() || document.body.parentNode.scrollHeight\n\t\t\t};\n\t\t} else {\n\t\t\telement = $( ce );\n\t\t\tp = [];\n\t\t\t$( [ \"Top\", \"Right\", \"Left\", \"Bottom\" ] ).each( function( i, name ) {\n\t\t\t\tp[ i ] = that._num( element.css( \"padding\" + name ) );\n\t\t\t} );\n\n\t\t\tthat.containerOffset = element.offset();\n\t\t\tthat.containerPosition = element.position();\n\t\t\tthat.containerSize = {\n\t\t\t\theight: ( element.innerHeight() - p[ 3 ] ),\n\t\t\t\twidth: ( element.innerWidth() - p[ 1 ] )\n\t\t\t};\n\n\t\t\tco = that.containerOffset;\n\t\t\tch = that.containerSize.height;\n\t\t\tcw = that.containerSize.width;\n\t\t\twidth = ( that._hasScroll ( ce, \"left\" ) ? ce.scrollWidth : cw );\n\t\t\theight = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: ce,\n\t\t\t\tleft: co.left,\n\t\t\t\ttop: co.top,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\t\t}\n\t},\n\n\tresize: function( event ) {\n\t\tvar woset, hoset, isParent, isOffsetRelative,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcp = that.position,\n\t\t\tpRatio = that._aspectRatio || event.shiftKey,\n\t\t\tcop = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t},\n\t\t\tce = that.containerElement,\n\t\t\tcontinueResize = true;\n\n\t\tif ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\tcop = co;\n\t\t}\n\n\t\tif ( cp.left < ( that._helper ? co.left : 0 ) ) {\n\t\t\tthat.size.width = that.size.width +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.left - co.left ) :\n\t\t\t\t\t( that.position.left - cop.left ) );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.left = o.helper ? co.left : 0;\n\t\t}\n\n\t\tif ( cp.top < ( that._helper ? co.top : 0 ) ) {\n\t\t\tthat.size.height = that.size.height +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.top - co.top ) :\n\t\t\t\t\tthat.position.top );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.top = that._helper ? co.top : 0;\n\t\t}\n\n\t\tisParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );\n\t\tisOffsetRelative = /relative|absolute/.test( that.containerElement.css( \"position\" ) );\n\n\t\tif ( isParent && isOffsetRelative ) {\n\t\t\tthat.offset.left = that.parentData.left + that.position.left;\n\t\t\tthat.offset.top = that.parentData.top + that.position.top;\n\t\t} else {\n\t\t\tthat.offset.left = that.element.offset().left;\n\t\t\tthat.offset.top = that.element.offset().top;\n\t\t}\n\n\t\twoset = Math.abs( that.sizeDiff.width +\n\t\t\t( that._helper ?\n\t\t\t\tthat.offset.left - cop.left :\n\t\t\t\t( that.offset.left - co.left ) ) );\n\n\t\thoset = Math.abs( that.sizeDiff.height +\n\t\t\t( that._helper ?\n\t\t\t\tthat.offset.top - cop.top :\n\t\t\t\t( that.offset.top - co.top ) ) );\n\n\t\tif ( woset + that.size.width >= that.parentData.width ) {\n\t\t\tthat.size.width = that.parentData.width - woset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( hoset + that.size.height >= that.parentData.height ) {\n\t\t\tthat.size.height = that.parentData.height - hoset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( !continueResize ) {\n\t\t\tthat.position.left = that.prevPosition.left;\n\t\t\tthat.position.top = that.prevPosition.top;\n\t\t\tthat.size.width = that.prevSize.width;\n\t\t\tthat.size.height = that.prevSize.height;\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcop = that.containerPosition,\n\t\t\tce = that.containerElement,\n\t\t\thelper = $( that.helper ),\n\t\t\tho = helper.offset(),\n\t\t\tw = helper.outerWidth() - that.sizeDiff.width,\n\t\t\th = helper.outerHeight() - that.sizeDiff.height;\n\n\t\tif ( that._helper && !o.animate && ( /relative/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css( {\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t} );\n\t\t}\n\n\t\tif ( that._helper && !o.animate && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css( {\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t} );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"resizable\", \"alsoResize\", {\n\n\tstart: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options;\n\n\t\t$( o.alsoResize ).each( function() {\n\t\t\tvar el = $( this );\n\t\t\tel.data( \"ui-resizable-alsoresize\", {\n\t\t\t\twidth: parseFloat( el.width() ), height: parseFloat( el.height() ),\n\t\t\t\tleft: parseFloat( el.css( \"left\" ) ), top: parseFloat( el.css( \"top\" ) )\n\t\t\t} );\n\t\t} );\n\t},\n\n\tresize: function( event, ui ) {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\tdelta = {\n\t\t\t\theight: ( that.size.height - os.height ) || 0,\n\t\t\t\twidth: ( that.size.width - os.width ) || 0,\n\t\t\t\ttop: ( that.position.top - op.top ) || 0,\n\t\t\t\tleft: ( that.position.left - op.left ) || 0\n\t\t\t};\n\n\t\t\t$( o.alsoResize ).each( function() {\n\t\t\t\tvar el = $( this ), start = $( this ).data( \"ui-resizable-alsoresize\" ), style = {},\n\t\t\t\t\tcss = el.parents( ui.originalElement[ 0 ] ).length ?\n\t\t\t\t\t\t\t[ \"width\", \"height\" ] :\n\t\t\t\t\t\t\t[ \"width\", \"height\", \"top\", \"left\" ];\n\n\t\t\t\t$.each( css, function( i, prop ) {\n\t\t\t\t\tvar sum = ( start[ prop ] || 0 ) + ( delta[ prop ] || 0 );\n\t\t\t\t\tif ( sum && sum >= 0 ) {\n\t\t\t\t\t\tstyle[ prop ] = sum || null;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tel.css( style );\n\t\t\t} );\n\t},\n\n\tstop: function() {\n\t\t$( this ).removeData( \"ui-resizable-alsoresize\" );\n\t}\n} );\n\n$.ui.plugin.add( \"resizable\", \"ghost\", {\n\n\tstart: function() {\n\n\t\tvar that = $( this ).resizable( \"instance\" ), cs = that.size;\n\n\t\tthat.ghost = that.originalElement.clone();\n\t\tthat.ghost.css( {\n\t\t\topacity: 0.25,\n\t\t\tdisplay: \"block\",\n\t\t\tposition: \"relative\",\n\t\t\theight: cs.height,\n\t\t\twidth: cs.width,\n\t\t\tmargin: 0,\n\t\t\tleft: 0,\n\t\t\ttop: 0\n\t\t} );\n\n\t\tthat._addClass( that.ghost, \"ui-resizable-ghost\" );\n\n\t\t// DEPRECATED\n\t\t// TODO: remove after 1.12\n\t\tif ( $.uiBackCompat !== false && typeof that.options.ghost === \"string\" ) {\n\n\t\t\t// Ghost option\n\t\t\tthat.ghost.addClass( this.options.ghost );\n\t\t}\n\n\t\tthat.ghost.appendTo( that.helper );\n\n\t},\n\n\tresize: function() {\n\t\tvar that = $( this ).resizable( \"instance\" );\n\t\tif ( that.ghost ) {\n\t\t\tthat.ghost.css( {\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: that.size.height,\n\t\t\t\twidth: that.size.width\n\t\t\t} );\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" );\n\t\tif ( that.ghost && that.helper ) {\n\t\t\tthat.helper.get( 0 ).removeChild( that.ghost.get( 0 ) );\n\t\t}\n\t}\n\n} );\n\n$.ui.plugin.add( \"resizable\", \"grid\", {\n\n\tresize: function() {\n\t\tvar outerDimensions,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tcs = that.size,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\ta = that.axis,\n\t\t\tgrid = typeof o.grid === \"number\" ? [ o.grid, o.grid ] : o.grid,\n\t\t\tgridX = ( grid[ 0 ] || 1 ),\n\t\t\tgridY = ( grid[ 1 ] || 1 ),\n\t\t\tox = Math.round( ( cs.width - os.width ) / gridX ) * gridX,\n\t\t\toy = Math.round( ( cs.height - os.height ) / gridY ) * gridY,\n\t\t\tnewWidth = os.width + ox,\n\t\t\tnewHeight = os.height + oy,\n\t\t\tisMaxWidth = o.maxWidth && ( o.maxWidth < newWidth ),\n\t\t\tisMaxHeight = o.maxHeight && ( o.maxHeight < newHeight ),\n\t\t\tisMinWidth = o.minWidth && ( o.minWidth > newWidth ),\n\t\t\tisMinHeight = o.minHeight && ( o.minHeight > newHeight );\n\n\t\to.grid = grid;\n\n\t\tif ( isMinWidth ) {\n\t\t\tnewWidth += gridX;\n\t\t}\n\t\tif ( isMinHeight ) {\n\t\t\tnewHeight += gridY;\n\t\t}\n\t\tif ( isMaxWidth ) {\n\t\t\tnewWidth -= gridX;\n\t\t}\n\t\tif ( isMaxHeight ) {\n\t\t\tnewHeight -= gridY;\n\t\t}\n\n\t\tif ( /^(se|s|e)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t} else if ( /^(ne)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.top = op.top - oy;\n\t\t} else if ( /^(sw)$/.test( a ) ) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.left = op.left - ox;\n\t\t} else {\n\t\t\tif ( newHeight - gridY <= 0 || newWidth - gridX <= 0 ) {\n\t\t\t\touterDimensions = that._getPaddingPlusBorderDimensions( this );\n\t\t\t}\n\n\t\t\tif ( newHeight - gridY > 0 ) {\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top - oy;\n\t\t\t} else {\n\t\t\t\tnewHeight = gridY - outerDimensions.height;\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top + os.height - newHeight;\n\t\t\t}\n\t\t\tif ( newWidth - gridX > 0 ) {\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left - ox;\n\t\t\t} else {\n\t\t\t\tnewWidth = gridX - outerDimensions.width;\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left + os.width - newWidth;\n\t\t\t}\n\t\t}\n\t}\n\n} );\n\nreturn $.ui.resizable;\n\n} ) );\n","/*!\n * jQuery UI Mouse 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Mouse\n//>>group: Widgets\n//>>description: Abstracts mouse-based interactions to assist in creating certain widgets.\n//>>docs: http://api.jqueryui.com/mouse/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"../ie\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nvar mouseHandled = false;\n$( document ).on( \"mouseup\", function() {\n\tmouseHandled = false;\n} );\n\nreturn $.widget( \"ui.mouse\", {\n\tversion: \"1.12.1\",\n\toptions: {\n\t\tcancel: \"input, textarea, button, select, option\",\n\t\tdistance: 1,\n\t\tdelay: 0\n\t},\n\t_mouseInit: function() {\n\t\tvar that = this;\n\n\t\tthis.element\n\t\t\t.on( \"mousedown.\" + this.widgetName, function( event ) {\n\t\t\t\treturn that._mouseDown( event );\n\t\t\t} )\n\t\t\t.on( \"click.\" + this.widgetName, function( event ) {\n\t\t\t\tif ( true === $.data( event.target, that.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t\t\t$.removeData( event.target, that.widgetName + \".preventClickEvent\" );\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\tthis.started = false;\n\t},\n\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t// other instances of mouse\n\t_mouseDestroy: function() {\n\t\tthis.element.off( \".\" + this.widgetName );\n\t\tif ( this._mouseMoveDelegate ) {\n\t\t\tthis.document\n\t\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\t\t}\n\t},\n\n\t_mouseDown: function( event ) {\n\n\t\t// don't let more than one widget handle mouseStart\n\t\tif ( mouseHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mouseMoved = false;\n\n\t\t// We may have missed mouseup (out of window)\n\t\t( this._mouseStarted && this._mouseUp( event ) );\n\n\t\tthis._mouseDownEvent = event;\n\n\t\tvar that = this,\n\t\t\tbtnIsLeft = ( event.which === 1 ),\n\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\telIsCancel = ( typeof this.options.cancel === \"string\" && event.target.nodeName ?\n\t\t\t\t$( event.target ).closest( this.options.cancel ).length : false );\n\t\tif ( !btnIsLeft || elIsCancel || !this._mouseCapture( event ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.mouseDelayMet = !this.options.delay;\n\t\tif ( !this.mouseDelayMet ) {\n\t\t\tthis._mouseDelayTimer = setTimeout( function() {\n\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t}, this.options.delay );\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted = ( this._mouseStart( event ) !== false );\n\t\t\tif ( !this._mouseStarted ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Click event may never have fired (Gecko & Opera)\n\t\tif ( true === $.data( event.target, this.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t$.removeData( event.target, this.widgetName + \".preventClickEvent\" );\n\t\t}\n\n\t\t// These delegates are required to keep context\n\t\tthis._mouseMoveDelegate = function( event ) {\n\t\t\treturn that._mouseMove( event );\n\t\t};\n\t\tthis._mouseUpDelegate = function( event ) {\n\t\t\treturn that._mouseUp( event );\n\t\t};\n\n\t\tthis.document\n\t\t\t.on( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.on( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tevent.preventDefault();\n\n\t\tmouseHandled = true;\n\t\treturn true;\n\t},\n\n\t_mouseMove: function( event ) {\n\n\t\t// Only check for mouseups outside the document if you've moved inside the document\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\n\t\t// Support: IE <9\n\t\tif ( this._mouseMoved ) {\n\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ( $.ui.ie && ( !document.documentMode || document.documentMode < 9 ) &&\n\t\t\t\t\t!event.button ) {\n\t\t\t\treturn this._mouseUp( event );\n\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\n\t\t\t} else if ( !event.which ) {\n\n\t\t\t\t// Support: Safari <=8 - 9\n\t\t\t\t// Safari sets which to 0 if you press any of the following keys\n\t\t\t\t// during a drag (#14461)\n\t\t\t\tif ( event.originalEvent.altKey || event.originalEvent.ctrlKey ||\n\t\t\t\t\t\tevent.originalEvent.metaKey || event.originalEvent.shiftKey ) {\n\t\t\t\t\tthis.ignoreMissingWhich = true;\n\t\t\t\t} else if ( !this.ignoreMissingWhich ) {\n\t\t\t\t\treturn this._mouseUp( event );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( event.which || event.button ) {\n\t\t\tthis._mouseMoved = true;\n\t\t}\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseDrag( event );\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted =\n\t\t\t\t( this._mouseStart( this._mouseDownEvent, event ) !== false );\n\t\t\t( this._mouseStarted ? this._mouseDrag( event ) : this._mouseUp( event ) );\n\t\t}\n\n\t\treturn !this._mouseStarted;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis.document\n\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseStarted = false;\n\n\t\t\tif ( event.target === this._mouseDownEvent.target ) {\n\t\t\t\t$.data( event.target, this.widgetName + \".preventClickEvent\", true );\n\t\t\t}\n\n\t\t\tthis._mouseStop( event );\n\t\t}\n\n\t\tif ( this._mouseDelayTimer ) {\n\t\t\tclearTimeout( this._mouseDelayTimer );\n\t\t\tdelete this._mouseDelayTimer;\n\t\t}\n\n\t\tthis.ignoreMissingWhich = false;\n\t\tmouseHandled = false;\n\t\tevent.preventDefault();\n\t},\n\n\t_mouseDistanceMet: function( event ) {\n\t\treturn ( Math.max(\n\t\t\t\tMath.abs( this._mouseDownEvent.pageX - event.pageX ),\n\t\t\t\tMath.abs( this._mouseDownEvent.pageY - event.pageY )\n\t\t\t) >= this.options.distance\n\t\t);\n\t},\n\n\t_mouseDelayMet: function( /* event */ ) {\n\t\treturn this.mouseDelayMet;\n\t},\n\n\t// These are placeholder methods, to be overriden by extending plugin\n\t_mouseStart: function( /* event */ ) {},\n\t_mouseDrag: function( /* event */ ) {},\n\t_mouseStop: function( /* event */ ) {},\n\t_mouseCapture: function( /* event */ ) { return true; }\n} );\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// This file is deprecated\nreturn $.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n} ) );\n","/*!\n * jQuery UI Disable Selection 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: disableSelection\n//>>group: Core\n//>>description: Disable selection of text content within the set of matched elements.\n//>>docs: http://api.jqueryui.com/disableSelection/\n\n// This file is deprecated\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\nreturn $.fn.extend( {\n\tdisableSelection: ( function() {\n\t\tvar eventType = \"onselectstart\" in document.createElement( \"div\" ) ?\n\t\t\t\"selectstart\" :\n\t\t\t\"mousedown\";\n\n\t\treturn function() {\n\t\t\treturn this.on( eventType + \".ui-disableSelection\", function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} );\n\t\t};\n\t} )(),\n\n\tenableSelection: function() {\n\t\treturn this.off( \".ui-disableSelection\" );\n\t}\n} );\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\nreturn $.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode ||\n\t\t\t\tinstance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n} ) );\n","// extracted by mini-css-extract-plugin\nexport {};","(function() {\n  var Idle;\n\n  if (!document.addEventListener) {\n    if (document.attachEvent) {\n      document.addEventListener = function(event, callback, useCapture) {\n        return document.attachEvent(\"on\" + event, callback, useCapture);\n      };\n    } else {\n      document.addEventListener = function() {\n        return {};\n      };\n    }\n  }\n\n  if (!document.removeEventListener) {\n    if (document.detachEvent) {\n      document.removeEventListener = function(event, callback) {\n        return document.detachEvent(\"on\" + event, callback);\n      };\n    } else {\n      document.removeEventListener = function() {\n        return {};\n      };\n    }\n  }\n\n  \"use strict\";\n\n  Idle = {};\n\n  Idle = (function() {\n    Idle.isAway = false;\n\n    Idle.awayTimeout = 3000;\n\n    Idle.awayTimestamp = 0;\n\n    Idle.awayTimer = null;\n\n    Idle.onAway = null;\n\n    Idle.onAwayBack = null;\n\n    Idle.onVisible = null;\n\n    Idle.onHidden = null;\n\n    function Idle(options) {\n      var activeMethod, activity;\n      if (options) {\n        this.awayTimeout = parseInt(options.awayTimeout, 10);\n        this.onAway = options.onAway;\n        this.onAwayBack = options.onAwayBack;\n        this.onVisible = options.onVisible;\n        this.onHidden = options.onHidden;\n      }\n      activity = this;\n      activeMethod = function() {\n        return activity.onActive();\n      };\n      window.addEventListener('click', activeMethod);\n      window.addEventListener('mousemove', activeMethod);\n      window.addEventListener('mouseenter', activeMethod);\n      window.addEventListener('keydown', activeMethod);\n      window.addEventListener('scroll', activeMethod);\n      window.addEventListener('mousewheel', activeMethod);\n      window.addEventListener('touchmove', activeMethod);\n      window.addEventListener('touchstart', activeMethod);\n    }\n\n    Idle.prototype.onActive = function() {\n      this.awayTimestamp = new Date().getTime() + this.awayTimeout;\n      if (this.isAway) {\n        if (this.onAwayBack) {\n          this.onAwayBack();\n        }\n        this.start();\n      }\n      this.isAway = false;\n      return true;\n    };\n\n    Idle.prototype.start = function() {\n      var activity;\n      if (!this.listener) {\n        this.listener = (function() {\n          return activity.handleVisibilityChange();\n        });\n        document.addEventListener(\"visibilitychange\", this.listener, false);\n        document.addEventListener(\"webkitvisibilitychange\", this.listener, false);\n        document.addEventListener(\"msvisibilitychange\", this.listener, false);\n      }\n      this.awayTimestamp = new Date().getTime() + this.awayTimeout;\n      if (this.awayTimer !== null) {\n        clearTimeout(this.awayTimer);\n      }\n      activity = this;\n      this.awayTimer = setTimeout((function() {\n        return activity.checkAway();\n      }), this.awayTimeout + 100);\n      return this;\n    };\n\n    Idle.prototype.stop = function() {\n      if (this.awayTimer !== null) {\n        clearTimeout(this.awayTimer);\n      }\n      if (this.listener !== null) {\n        document.removeEventListener(\"visibilitychange\", this.listener);\n        document.removeEventListener(\"webkitvisibilitychange\", this.listener);\n        document.removeEventListener(\"msvisibilitychange\", this.listener);\n        this.listener = null;\n      }\n      return this;\n    };\n\n    Idle.prototype.setAwayTimeout = function(ms) {\n      this.awayTimeout = parseInt(ms, 10);\n      return this;\n    };\n\n    Idle.prototype.checkAway = function() {\n      var activity, t;\n      t = new Date().getTime();\n      if (t < this.awayTimestamp) {\n        this.isAway = false;\n        activity = this;\n        this.awayTimer = setTimeout((function() {\n          return activity.checkAway();\n        }), this.awayTimestamp - t + 100);\n        return;\n      }\n      if (this.awayTimer !== null) {\n        clearTimeout(this.awayTimer);\n      }\n      this.isAway = true;\n      if (this.onAway) {\n        return this.onAway();\n      }\n    };\n\n    Idle.prototype.handleVisibilityChange = function() {\n      if (document.hidden || document.msHidden || document.webkitHidden) {\n        if (this.onHidden) {\n          return this.onHidden();\n        }\n      } else {\n        if (this.onVisible) {\n          return this.onVisible();\n        }\n      }\n    };\n\n    return Idle;\n\n  })();\n\n  if (typeof define === 'function' && define.amd) {\n    define([], Idle);\n  } else if (typeof exports === 'object') {\n    module.exports = Idle;\n  } else {\n    window.Idle = Idle;\n  }\n\n}).call(this);\n","/*!\n * jQuery.textcomplete\n *\n * Repository: https://github.com/yuku-t/jquery-textcomplete\n * License:    MIT (https://github.com/yuku-t/jquery-textcomplete/blob/master/LICENSE)\n * Author:     Yuku Takahashi\n */\n\nif (typeof jQuery === 'undefined') {\n  throw new Error('jQuery.textcomplete requires jQuery');\n}\n\n+function ($) {\n  'use strict';\n\n  var warn = function (message) {\n    if (console.warn) { console.warn(message); }\n  };\n\n  $.fn.textcomplete = function (strategies, option) {\n    var args = Array.prototype.slice.call(arguments);\n    return this.each(function () {\n      var $this = $(this);\n      var completer = $this.data('textComplete');\n      if (!completer) {\n        completer = new $.fn.textcomplete.Completer(this, option || {});\n        $this.data('textComplete', completer);\n      }\n      if (typeof strategies === 'string') {\n        if (!completer) return;\n        args.shift()\n        completer[strategies].apply(completer, args);\n        if (strategies === 'destroy') {\n          $this.removeData('textComplete');\n        }\n      } else {\n        // For backward compatibility.\n        // TODO: Remove at v0.4\n        $.each(strategies, function (obj) {\n          $.each(['header', 'footer', 'placement', 'maxCount'], function (name) {\n            if (obj[name]) {\n              completer.option[name] = obj[name];\n              warn(name + 'as a strategy param is deprecated. Use option.');\n              delete obj[name];\n            }\n          });\n        });\n        completer.register($.fn.textcomplete.Strategy.parse(strategies));\n      }\n    });\n  };\n\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  // Exclusive execution control utility.\n  //\n  // func - The function to be locked. It is executed with a function named\n  //        `free` as the first argument. Once it is called, additional\n  //        execution are ignored until the free is invoked. Then the last\n  //        ignored execution will be replayed immediately.\n  //\n  // Examples\n  //\n  //   var lockedFunc = lock(function (free) {\n  //     setTimeout(function { free(); }, 1000); // It will be free in 1 sec.\n  //     console.log('Hello, world');\n  //   });\n  //   lockedFunc();  // => 'Hello, world'\n  //   lockedFunc();  // none\n  //   lockedFunc();  // none\n  //   // 1 sec past then\n  //   // => 'Hello, world'\n  //   lockedFunc();  // => 'Hello, world'\n  //   lockedFunc();  // none\n  //\n  // Returns a wrapped function.\n  var lock = function (func) {\n    var locked, queuedArgsToReplay;\n\n    return function () {\n      // Convert arguments into a real array.\n      var args = Array.prototype.slice.call(arguments);\n      if (locked) {\n        // Keep a copy of this argument list to replay later.\n        // OK to overwrite a previous value because we only replay\n        // the last one.\n        queuedArgsToReplay = args;\n        return;\n      }\n      locked = true;\n      var self = this;\n      args.unshift(function replayOrFree() {\n        if (queuedArgsToReplay) {\n          // Other request(s) arrived while we were locked.\n          // Now that the lock is becoming available, replay\n          // the latest such request, then call back here to\n          // unlock (or replay another request that arrived\n          // while this one was in flight).\n          var replayArgs = queuedArgsToReplay;\n          queuedArgsToReplay = undefined;\n          replayArgs.unshift(replayOrFree);\n          func.apply(self, replayArgs);\n        } else {\n          locked = false;\n        }\n      });\n      func.apply(this, args);\n    };\n  };\n\n  var isString = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n  };\n\n  var uniqueId = 0;\n\n  function Completer(element, option) {\n    this.$el        = $(element);\n    this.id         = 'textcomplete' + uniqueId++;\n    this.strategies = [];\n    this.views      = [];\n    this.option     = $.extend({}, Completer._getDefaults(), option);\n\n    if (!this.$el.is('input[type=text]') && !this.$el.is('textarea') && !element.isContentEditable && element.contentEditable != 'true') {\n      throw new Error('textcomplete must be called on a Textarea or a ContentEditable.');\n    }\n\n    if (element === document.activeElement) {\n      // element has already been focused. Initialize view objects immediately.\n      this.initialize()\n    } else {\n      // Initialize view objects lazily.\n      var self = this;\n      this.$el.one('focus.' + this.id, function () { self.initialize(); });\n    }\n  }\n\n  Completer._getDefaults = function () {\n    if (!Completer.DEFAULTS) {\n      Completer.DEFAULTS = {\n        appendTo: $('body'),\n        zIndex: '100'\n      };\n    }\n\n    return Completer.DEFAULTS;\n  }\n\n  $.extend(Completer.prototype, {\n    // Public properties\n    // -----------------\n\n    id:         null,\n    option:     null,\n    strategies: null,\n    adapter:    null,\n    dropdown:   null,\n    $el:        null,\n\n    // Public methods\n    // --------------\n\n    initialize: function () {\n      var element = this.$el.get(0);\n      // Initialize view objects.\n      this.dropdown = new $.fn.textcomplete.Dropdown(element, this, this.option);\n      this.dropdown.upSideDown = false;\n      var Adapter, viewName;\n      if (this.option.adapter) {\n        Adapter = this.option.adapter;\n      } else {\n        if (this.$el.is('textarea') || this.$el.is('input[type=text]')) {\n          viewName = typeof element.selectionEnd === 'number' ? 'Textarea' : 'IETextarea';\n        } else {\n          viewName = 'ContentEditable';\n        }\n        Adapter = $.fn.textcomplete[viewName];\n      }\n      this.adapter = new Adapter(element, this, this.option);\n    },\n\n    destroy: function () {\n      this.$el.off('.' + this.id);\n      if (this.adapter) {\n        this.adapter.destroy();\n      }\n      if (this.dropdown) {\n        this.dropdown.destroy();\n      }\n      this.$el = this.adapter = this.dropdown = null;\n    },\n\n    // Invoke textcomplete.\n    trigger: function (text, skipUnchangedTerm) {\n      if (!this.dropdown) { this.initialize(); }\n      text != null || (text = this.adapter.getTextFromHeadToCaret());\n      var searchQuery = this._extractSearchQuery(text);\n      if (searchQuery.length) {\n        var term = searchQuery[1];\n        // Ignore shift-key, ctrl-key and so on.\n        if (skipUnchangedTerm && this._term === term) { return; }\n        this._term = term;\n        this.fire('textComplete:beforeSearch');\n        this._search.apply(this, searchQuery);\n        this.fire('textComplete:afterSearch');\n      } else {\n        this._term = null;\n        this.dropdown.deactivate();\n      }\n    },\n\n    fire: function (eventName) {\n      var args = Array.prototype.slice.call(arguments, 1);\n      this.$el.trigger(eventName, args);\n      return this;\n    },\n\n    register: function (strategies) {\n      Array.prototype.push.apply(this.strategies, strategies);\n    },\n\n    // Insert the value into adapter view. It is called when the dropdown is clicked\n    // or selected.\n    //\n    // value    - The selected element of the array callbacked from search func.\n    // strategy - The Strategy object.\n    select: function (value, strategy) {\n      this.adapter.select(value, strategy);\n      this.fire('change').fire('textComplete:select', value, strategy);\n      this.adapter.focus();\n    },\n\n    // Private properties\n    // ------------------\n\n    _clearAtNext: true,\n    _term:        null,\n\n    // Private methods\n    // ---------------\n\n    // Parse the given text and extract the first matching strategy.\n    //\n    // Returns an array including the strategy, the query term and the match\n    // object if the text matches an strategy; otherwise returns an empty array.\n    _extractSearchQuery: function (text) {\n      for (var i = 0; i < this.strategies.length; i++) {\n        var strategy = this.strategies[i];\n        var context = strategy.context(text);\n        if (context || context === '') {\n          if (isString(context)) { text = context; }\n            var cursor = editor.getCursor();\n            var line = editor.getLine(cursor.line);\n            var linematch = line.match(strategy.match);\n            if(linematch) {\n                text = line.slice(0, cursor.ch);\n                var textmatch = text.match(strategy.match);\n                if (textmatch) { return [strategy, textmatch[strategy.index], textmatch]; }\n            }\n        }\n      }\n      return []\n    },\n\n    // Call the search method of selected strategy..\n    _search: lock(function (free, strategy, term, match) {\n      var self = this;\n      strategy.search(term, function (data, stillSearching) {\n        if (!self.dropdown.shown) {\n          self.dropdown.activate();\n          self.dropdown.setPosition(self.adapter.getCaretPosition());\n        }\n        if (self._clearAtNext) {\n          // The first callback in the current lock.\n          self.dropdown.clear();\n          self._clearAtNext = false;\n        }\n        self.dropdown.render(self._zip(data, strategy));\n        if (!stillSearching) {\n          // The last callback in the current lock.\n          free();\n          self._clearAtNext = true; // Call dropdown.clear at the next time.\n        }\n      }, match);\n    }),\n\n    // Build a parameter for Dropdown#render.\n    //\n    // Examples\n    //\n    //  this._zip(['a', 'b'], 's');\n    //  //=> [{ value: 'a', strategy: 's' }, { value: 'b', strategy: 's' }]\n    _zip: function (data, strategy) {\n      return $.map(data, function (value) {\n        return { value: value, strategy: strategy };\n      });\n    }\n  });\n\n  $.fn.textcomplete.Completer = Completer;\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  var include = function (zippedData, datum) {\n    var i, elem;\n    var idProperty = datum.strategy.idProperty\n    for (i = 0; i < zippedData.length; i++) {\n      elem = zippedData[i];\n      if (elem.strategy !== datum.strategy) continue;\n      if (idProperty) {\n        if (elem.value[idProperty] === datum.value[idProperty]) return true;\n      } else {\n        if (elem.value === datum.value) return true;\n      }\n    }\n    return false;\n  };\n\n  var dropdownViews = {};\n    /*\n  $(document).on('mousedown', function (e) {\n    var id = e.originalEvent && e.originalEvent.keepTextCompleteDropdown;\n    $.each(dropdownViews, function (key, view) {\n      if (key !== id) { view.deactivate(); }\n    });\n  });\n  */\n\n  // Dropdown view\n  // =============\n\n  // Construct Dropdown object.\n  //\n  // element - Textarea or contenteditable element.\n  function Dropdown(element, completer, option) {\n    this.$el       = Dropdown.findOrCreateElement(option);\n    this.completer = completer;\n    this.id        = completer.id + 'dropdown';\n    this._data     = []; // zipped data.\n    this.$inputEl  = $(element);\n    this.option    = option;\n    this.tap       = false;\n\n    // Override setPosition method.\n    if (option.listPosition) { this.setPosition = option.listPosition; }\n    if (option.height) { this.$el.height(option.height); }\n    var self = this;\n    $.each(['maxCount', 'placement', 'footer', 'header', 'className'], function (_i, name) {\n      if (option[name] != null) { self[name] = option[name]; }\n    });\n    this._bindEvents(element);\n    dropdownViews[this.id] = this;\n  }\n\n  $.extend(Dropdown, {\n    // Class methods\n    // -------------\n\n    findOrCreateElement: function (option) {\n      var $parent = option.appendTo;\n      if (!($parent instanceof $)) { $parent = $($parent); }\n      var $el = $parent.children('.dropdown-menu')\n      if (!$el.length) {\n        $el = $('<ul class=\"dropdown-menu\"></ul>').css({\n          display: 'none',\n          left: 0,\n          position: 'absolute',\n          zIndex: option.zIndex\n        }).appendTo($parent);\n      }\n      return $el;\n    }\n  });\n\n  $.extend(Dropdown.prototype, {\n    // Public properties\n    // -----------------\n\n    $el:       null,  // jQuery object of ul.dropdown-menu element.\n    $inputEl:  null,  // jQuery object of target textarea.\n    completer: null,\n    footer:    null,\n    header:    null,\n    id:        null,\n    maxCount:  10,\n    placement: '',\n    shown:     false,\n    data:      [],     // Shown zipped data.\n    className: '',\n\n    // Public methods\n    // --------------\n\n    destroy: function () {\n      // Don't remove $el because it may be shared by several textcompletes.\n      this.deactivate();\n\n      this.$el.off('.' + this.id);\n      this.$inputEl.off('.' + this.id);\n      this.clear();\n      this.$el = this.$inputEl = this.completer = null;\n      delete dropdownViews[this.id]\n    },\n\n    render: function (zippedData) {\n      var contentsHtml = this._buildContents(zippedData);\n      var unzippedData = $.map(this.data, function (d) { return d.value; });\n      if (this.data.length) {\n        this._renderHeader(unzippedData);\n        this._renderFooter(unzippedData);\n        if (contentsHtml) {\n          this._renderContents(contentsHtml);\n          this._activateIndexedItem();\n        }\n        this._setScroll();\n      } else if (this.shown) {\n        this.deactivate();\n      }\n    },\n\n    setPosition: function (position) {\n      this.$el.css(this._applyPlacement(position));\n\n      // Make the dropdown fixed if the input is also fixed\n      // This can't be done during init, as textcomplete may be used on multiple elements on the same page\n      // Because the same dropdown is reused behind the scenes, we need to recheck every time the dropdown is showed\n      var position = 'absolute';\n      // Check if input or one of its parents has positioning we need to care about\n      this.$inputEl.add(this.$inputEl.parents()).each(function() {\n        if($(this).css('position') === 'absolute') // The element has absolute positioning, so it's all OK\n          return false;\n        if($(this).css('position') === 'fixed') {\n          position = 'fixed';\n          return false;\n        }\n      });\n      this.$el.css({ position: position }); // Update positioning\n\n      return this;\n    },\n\n    clear: function () {\n      this.$el.html('');\n      this.data = [];\n      this._index = 0;\n      this._$header = this._$footer = null;\n    },\n\n    activate: function () {\n      if (!this.shown) {\n        this.clear();\n        this.$el.show();\n        if (this.className) { this.$el.addClass(this.className); }\n        this.completer.fire('textComplete:show');\n        this.shown = true;\n      }\n      return this;\n    },\n\n    deactivate: function () {\n      if (this.shown) {\n        this.$el.hide();\n        if (this.className) { this.$el.removeClass(this.className); }\n        this.completer.fire('textComplete:hide');\n        this.shown = false;\n      }\n      return this;\n    },\n\n    isUp: function (e) {\n      return e.keyCode === 38 || (e.ctrlKey && e.keyCode === 80);  // UP, Ctrl-P\n    },\n\n    isDown: function (e) {\n      return e.keyCode === 40 || (e.ctrlKey && e.keyCode === 78);  // DOWN, Ctrl-N\n    },\n\n    isEnter: function (e) {\n      var modifiers = e.ctrlKey || e.altKey || e.metaKey || e.shiftKey;\n      return !modifiers && (e.keyCode === 13 || e.keyCode === 9 || (this.option.completeOnSpace === true && e.keyCode === 32))  // ENTER, TAB\n    },\n\n    isPageup: function (e) {\n      return e.keyCode === 33;  // PAGEUP\n    },\n\n    isPagedown: function (e) {\n      return e.keyCode === 34;  // PAGEDOWN\n    },\n\n    isEscape: function (e) {\n      return e.keyCode === 27;  // ESCAPE\n    },\n\n    // Private properties\n    // ------------------\n\n    _data:    null,  // Currently shown zipped data.\n    _index:   null,\n    _$header: null,\n    _$footer: null,\n\n    // Private methods\n    // ---------------\n\n    _bindEvents: function () {\n      this.$inputEl.on('blur', $.proxy(this.deactivate, this));\n      this.$el.on('touchstart.' + this.id, '.textcomplete-item', $.proxy(function(e) {\n          this.tap = true;\n      }, this));\n      this.$el.on('touchmove.' + this.id, '.textcomplete-item', $.proxy(function(e) {\n          this.tap = false;\n      }, this));\n      this.$el.on('touchend.' + this.id, '.textcomplete-item', $.proxy(function(e) {\n          if(e.cancelable && this.tap) {\n              this._onClick(e);\n          }\n      }, this));\n      this.$el.on('mousedown.' + this.id, '.textcomplete-item', $.proxy(this._onClick, this));\n      this.$el.on('mouseover.' + this.id, '.textcomplete-item', $.proxy(this._onMouseover, this));\n      this.$inputEl.on('keydown.' + this.id, $.proxy(this._onKeydown, this));\n    },\n\n    _onClick: function (e) {\n      var $el = $(e.target);\n      e.stopPropagation();\n      e.preventDefault();\n      e.originalEvent.keepTextCompleteDropdown = this.id;\n      if (!$el.hasClass('textcomplete-item')) {\n        $el = $el.closest('.textcomplete-item');\n      }\n      var datum = this.data[parseInt($el.data('index'), 10)];\n      this.completer.select(datum.value, datum.strategy);\n      var self = this;\n      // Deactive at next tick to allow other event handlers to know whether\n      // the dropdown has been shown or not.\n      setTimeout(function () { self.deactivate(); }, 0);\n    },\n\n    // Activate hovered item.\n    _onMouseover: function (e) {\n      var $el = $(e.target);\n      e.preventDefault();\n      if (!$el.hasClass('textcomplete-item')) {\n        $el = $el.closest('.textcomplete-item');\n      }\n      this._index = parseInt($el.data('index'), 10);\n      this._activateIndexedItem();\n    },\n\n    _onKeydown: function (e) {\n      if (!this.shown) { return; }\n      if (this.isUp(e)) {\n        e.preventDefault();\n        if(this.upSideDown)\n          this._down();\n        else\n          this._up();\n      } else if (this.isDown(e)) {\n        e.preventDefault();\n        if(this.upSideDown)\n          this._up();\n        else\n          this._down();\n      } else if (this.isEnter(e)) {\n        e.preventDefault();\n        this._enter();\n      } else if (this.isPageup(e)) {\n        e.preventDefault();\n        this._pageup();\n      } else if (this.isPagedown(e)) {\n        e.preventDefault();\n        this._pagedown();\n      } else if (this.isEscape(e)) {\n        e.preventDefault();\n        this.deactivate();\n      }\n    },\n\n    _up: function () {\n      if (this._index === 0) {\n        this._index = this.data.length - 1;\n      } else {\n        this._index -= 1;\n      }\n      this._activateIndexedItem();\n      this._setScroll();\n    },\n\n    _down: function () {\n      if (this._index === this.data.length - 1) {\n        this._index = 0;\n      } else {\n        this._index += 1;\n      }\n      this._activateIndexedItem();\n      this._setScroll();\n    },\n\n    _enter: function () {\n      var datum = this.data[parseInt(this._getActiveElement().data('index'), 10)];\n      this.completer.select(datum.value, datum.strategy);\n      this.deactivate();\n    },\n\n    _pageup: function () {\n      var target = 0;\n      var threshold = this._getActiveElement().position().top - this.$el.innerHeight();\n      this.$el.children().each(function (i) {\n        if ($(this).position().top + $(this).outerHeight() > threshold) {\n          target = i;\n          return false;\n        }\n      });\n      this._index = target;\n      this._activateIndexedItem();\n      this._setScroll();\n    },\n\n    _pagedown: function () {\n      var target = this.data.length - 1;\n      var threshold = this._getActiveElement().position().top + this.$el.innerHeight();\n      this.$el.children().each(function (i) {\n        if ($(this).position().top > threshold) {\n          target = i;\n          return false\n        }\n      });\n      this._index = target;\n      this._activateIndexedItem();\n      this._setScroll();\n    },\n\n    _activateIndexedItem: function () {\n      this.$el.find('.textcomplete-item.active').removeClass('active');\n      this._getActiveElement().addClass('active');\n    },\n\n    _getActiveElement: function () {\n      return this.$el.children('.textcomplete-item[data-index=' + this._index + ']');\n    },\n\n    _setScroll: function () {\n      var $activeEl = this._getActiveElement();\n      var itemTop = $activeEl.position().top;\n      var itemHeight = $activeEl.outerHeight();\n      var visibleHeight = this.$el.innerHeight();\n      var visibleTop = this.$el.scrollTop();\n      if (this._index === 0 || this._index == this.data.length - 1 || itemTop < 0) {\n        this.$el.scrollTop(itemTop + visibleTop);\n      } else if (itemTop + itemHeight > visibleHeight) {\n        this.$el.scrollTop(itemTop + itemHeight + visibleTop - visibleHeight);\n      }\n    },\n\n    _buildContents: function (zippedData) {\n      var datum, i, index;\n      var item = [];\n      var html = '';\n          for (i = 0; i < zippedData.length; i++) {\n            if (this.data.length === this.maxCount) break;\n            datum = zippedData[i];\n            if (include(this.data, datum)) { continue; }\n            index = this.data.length;\n            this.data.push(datum);\n            item.push(datum.strategy.template(datum.value));\n          }\n          for (i = 0; i < item.length; i++) {\n                html += '<li class=\"textcomplete-item\" data-index=\"' + i + '\"><a>';\n            html += item[i];\n            html += '</a></li>';\n          }\n      return html;\n    },\n\n    _renderHeader: function (unzippedData) {\n      if (this.header) {\n        if (!this._$header) {\n          this._$header = $('<li class=\"textcomplete-header\"></li>').prependTo(this.$el);\n        }\n        var html = $.isFunction(this.header) ? this.header(unzippedData) : this.header;\n        this._$header.html(html);\n      }\n    },\n\n    _renderFooter: function (unzippedData) {\n      if (this.footer) {\n        if (!this._$footer) {\n          this._$footer = $('<li class=\"textcomplete-footer\"></li>').appendTo(this.$el);\n        }\n        var html = $.isFunction(this.footer) ? this.footer(unzippedData) : this.footer;\n        this._$footer.html(html);\n      }\n    },\n\n    _renderContents: function (html) {\n      if (this._$footer) {\n        this._$footer.before(html);\n      } else {\n        this.$el.append(html);\n      }\n    },\n\n    _applyPlacement: function (position) {\n      // If the 'placement' option set to 'top', move the position above the element.\n      if (this.placement.indexOf('top') !== -1) {\n        // Overwrite the position object to set the 'bottom' property instead of the top.\n        position = {\n          top: 'auto',\n          bottom: this.$el.parent().height() - position.top + position.lineHeight,\n          left: position.left\n        };\n      } else {\n        position.bottom = 'auto';\n        delete position.lineHeight;\n      }\n      if (this.placement.indexOf('absleft') !== -1) {\n        position.left = 0;\n      } else if (this.placement.indexOf('absright') !== -1) {\n        position.right = 0;\n        position.left = 'auto';\n      }\n      return position;\n    }\n  });\n\n  $.fn.textcomplete.Dropdown = Dropdown;\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  // Memoize a search function.\n  var memoize = function (func) {\n    var memo = {};\n    return function (term, callback) {\n      if (memo[term]) {\n        callback(memo[term]);\n      } else {\n        func.call(this, term, function (data) {\n          memo[term] = (memo[term] || []).concat(data);\n          callback.apply(null, arguments);\n        });\n      }\n    };\n  };\n\n  function Strategy(options) {\n    $.extend(this, options);\n    if (this.cache) { this.search = memoize(this.search); }\n  }\n\n  Strategy.parse = function (optionsArray) {\n    return $.map(optionsArray, function (options) {\n      return new Strategy(options);\n    });\n  };\n\n  $.extend(Strategy.prototype, {\n    // Public properties\n    // -----------------\n\n    // Required\n    match:      null,\n    replace:    null,\n    search:     null,\n\n    // Optional\n    cache:      false,\n    context:    function () { return true; },\n    index:      2,\n    template:   function (obj) { return obj; },\n    idProperty: null\n  });\n\n  $.fn.textcomplete.Strategy = Strategy;\n\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  var now = Date.now || function () { return new Date().getTime(); };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // `wait` msec.\n  //\n  // This utility function was originally implemented at Underscore.js.\n  var debounce = function (func, wait) {\n    var timeout, args, context, timestamp, result;\n    var later = function () {\n      var last = now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    };\n\n    return function () {\n      context = this;\n      args = arguments;\n      timestamp = now();\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      return result;\n    };\n  };\n\n  function Adapter () {}\n\n  $.extend(Adapter.prototype, {\n    // Public properties\n    // -----------------\n\n    id:        null, // Identity.\n    completer: null, // Completer object which creates it.\n    el:        null, // Textarea element.\n    $el:       null, // jQuery object of the textarea.\n    option:    null,\n\n    // Public methods\n    // --------------\n\n    initialize: function (element, completer, option) {\n      this.el        = element;\n      this.$el       = $(element);\n      this.id        = completer.id + this.constructor.name;\n      this.completer = completer;\n      this.option    = option;\n      this.lastCurosr = null;\n\n      if (this.option.debounce) {\n        this._onKeyup = debounce(this._onKeyup, this.option.debounce);\n      }\n\n      this._bindEvents();\n    },\n\n    destroy: function () {\n      this.$el.off('.' + this.id); // Remove all event handlers.\n      this.$el = this.el = this.completer = null;\n    },\n\n    // Update the element with the given value and strategy.\n    //\n    // value    - The selected object. It is one of the item of the array\n    //            which was callbacked from the search function.\n    // strategy - The Strategy associated with the selected value.\n    select: function (/* value, strategy */) {\n      throw new Error('Not implemented');\n    },\n\n    // Returns the caret's relative coordinates from body's left top corner.\n    //\n    // FIXME: Calculate the left top corner of `this.option.appendTo` element.\n    getCaretPosition: function () {\n      if ($('.CodeMirror-cursor').length > 0) {\n        var position = $('.CodeMirror-cursor').position();\n        var menu = $('.cursor-menu .dropdown-menu');\n        var offsetLeft = parseFloat(menu.attr('data-offset-left'));\n        var offsetTop = parseFloat(menu.attr('data-offset-top'));\n        position.left += offsetLeft;\n        position.top += offsetTop;\n        return position;\n      } else {\n        var position = this._getCaretRelativePosition();\n        var offset = this.$el.offset();\n\n        // Calculate the left top corner of `this.option.appendTo` element.\n        var $parent = this.option.appendTo;\n        if ($parent) {\n          if (!($parent instanceof $)) { $parent = $($parent); }\n          var parentOffset = $parent.offsetParent().offset();\n          offset.top -= parentOffset.top;\n          offset.left -= parentOffset.left;\n        }\n\n        position.top += offset.top;\n        position.left += offset.left;\n        return position;\n      }\n    },\n\n    // Focus on the element.\n    focus: function () {\n      this.$el.focus();\n    },\n\n    // Private methods\n    // ---------------\n\n    _bindEvents: function () {\n      editor.on('cursorActivity', $.proxy(this._onKeyup, this));\n      $('.CodeMirror').on('touchend.' + this.id, $.proxy(this._onKeyup, this));\n      $('.CodeMirror').on('mouseup.' + this.id, $.proxy(this._onKeyup, this));\n      $(editor.getInputField()).on('focus', $.proxy(this._onKeyup, this));\n      this.$el.on('keyup.' + this.id, $.proxy(this._onKeyup, this));\n    },\n\n    _onKeyup: function (e) {\n      var focus = (e.type == 'focus');\n      var cursor = editor.getCursor();\n      var samePos = (cursor == this.lastCursor);\n      if (this._skipSearch(e)) { return; }\n      this.completer.trigger(this.getTextFromHeadToCaret(), focus ? false : samePos);\n      this.lastCursor = cursor;\n    },\n\n    // Suppress searching if it returns true.\n    _skipSearch: function (clickEvent) {\n      switch (clickEvent.keyCode) {\n        case 13: // ENTER\n        case 40: // DOWN\n        case 38: // UP\n          return true;\n      }\n      if (clickEvent.ctrlKey) switch (clickEvent.keyCode) {\n        case 78: // Ctrl-N\n        case 80: // Ctrl-P\n          return true;\n      }\n    }\n  });\n\n  $.fn.textcomplete.Adapter = Adapter;\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  // Textarea adapter\n  // ================\n  //\n  // Managing a textarea. It doesn't know a Dropdown.\n  function Textarea(element, completer, option) {\n    this.initialize(element, completer, option);\n  }\n\n  Textarea.DIV_PROPERTIES = {\n    left: -9999,\n    position: 'absolute',\n    top: 0,\n    whiteSpace: 'pre-wrap'\n  }\n\n  Textarea.COPY_PROPERTIES = [\n    'border-width', 'font-family', 'font-size', 'font-style', 'font-variant',\n    'font-weight', 'height', 'letter-spacing', 'word-spacing', 'line-height',\n    'text-decoration', 'text-align', 'width', 'padding-top', 'padding-right',\n    'padding-bottom', 'padding-left', 'margin-top', 'margin-right',\n    'margin-bottom', 'margin-left', 'border-style', 'box-sizing', 'tab-size'\n  ];\n\n  $.extend(Textarea.prototype, $.fn.textcomplete.Adapter.prototype, {\n    // Public methods\n    // --------------\n\n    // Update the textarea with the given value and strategy.\n    select: function (value, strategy) {\n        /*\n      var pre = this.getTextFromHeadToCaret();\n      var post = this.el.value.substring(this.el.selectionEnd);\n      var newSubstr = strategy.replace(value);\n      if ($.isArray(newSubstr)) {\n        post = newSubstr[1] + post;\n        newSubstr = newSubstr[0];\n      }\n      pre = pre.replace(strategy.match, newSubstr);\n      this.$el.val(pre + post);\n      this.el.selectionStart = this.el.selectionEnd = pre.length;\n      */\n        var cursor = editor.getCursor();\n        var pre = editor.getLine(cursor.line).slice(0, cursor.ch);\n        var match = pre.match(strategy.match);\n        if (!match) return;\n        pre = match[0];\n        var newSubstr = strategy.replace(value);\n        newSubstr = pre.replace(strategy.match, newSubstr);\n        \n        editor.operation(function() {\n          var selections = editor.listSelections();\n          var bias = match.index - cursor.ch;\n          for (var i = 0, l = selections.length; i < l; i++) {\n            var sel = selections[i];\n            var start = {\n              line: sel.head.line,\n              ch: sel.head.ch + bias\n            };\n            var end = {\n              line: sel.head.line,\n              ch: sel.head.ch + bias + match[0].length\n            };\n            editor.replaceRange(newSubstr, start, end, \"+input\");\n          }\n        });\n        \n        if(strategy.done)\n            strategy.done();\n    },\n\n    // Private methods\n    // ---------------\n\n    // Returns the caret's relative coordinates from textarea's left top corner.\n    //\n    // Browser native API does not provide the way to know the position of\n    // caret in pixels, so that here we use a kind of hack to accomplish\n    // the aim. First of all it puts a dummy div element and completely copies\n    // the textarea's style to the element, then it inserts the text and a\n    // span element into the textarea.\n    // Consequently, the span element's position is the thing what we want.\n    _getCaretRelativePosition: function () {\n      var dummyDiv = $('<div></div>').css(this._copyCss())\n        .text(this.getTextFromHeadToCaret());\n      var span = $('<span></span>').text('.').appendTo(dummyDiv);\n      this.$el.before(dummyDiv);\n      var position = span.position();\n      position.top += span.height() - this.$el.scrollTop();\n      position.lineHeight = span.height();\n      dummyDiv.remove();\n      return position;\n    },\n\n    _copyCss: function () {\n      return $.extend({\n        // Set 'scroll' if a scrollbar is being shown; otherwise 'auto'.\n        overflow: this.el.scrollHeight > this.el.offsetHeight ? 'scroll' : 'auto'\n      }, Textarea.DIV_PROPERTIES, this._getStyles());\n    },\n\n    _getStyles: (function ($) {\n      var color = $('<div></div>').css(['color']).color;\n      if (typeof color !== 'undefined') {\n        return function () {\n          return this.$el.css(Textarea.COPY_PROPERTIES);\n        };\n      } else { // jQuery < 1.8\n        return function () {\n          var $el = this.$el;\n          var styles = {};\n          $.each(Textarea.COPY_PROPERTIES, function (i, property) {\n            styles[property] = $el.css(property);\n          });\n          return styles;\n        };\n      }\n    })($),\n\n    getTextFromHeadToCaret: function () {\n      return this.el.value.substring(0, this.el.selectionEnd);\n    }\n  });\n\n  $.fn.textcomplete.Textarea = Textarea;\n}(jQuery);\n\n+function ($) {\n  'use strict';\n\n  var sentinelChar = '';\n\n  function IETextarea(element, completer, option) {\n    this.initialize(element, completer, option);\n    $('<span>' + sentinelChar + '</span>').css({\n      position: 'absolute',\n      top: -9999,\n      left: -9999\n    }).insertBefore(element);\n  }\n\n  $.extend(IETextarea.prototype, $.fn.textcomplete.Textarea.prototype, {\n    // Public methods\n    // --------------\n\n    select: function (value, strategy) {\n      var pre = this.getTextFromHeadToCaret();\n      var post = this.el.value.substring(pre.length);\n      var newSubstr = strategy.replace(value);\n      if ($.isArray(newSubstr)) {\n        post = newSubstr[1] + post;\n        newSubstr = newSubstr[0];\n      }\n      pre = pre.replace(strategy.match, newSubstr);\n      this.$el.val(pre + post);\n      this.el.focus();\n      var range = this.el.createTextRange();\n      range.collapse(true);\n      range.moveEnd('character', pre.length);\n      range.moveStart('character', pre.length);\n      range.select();\n    },\n\n    getTextFromHeadToCaret: function () {\n      this.el.focus();\n      var range = document.selection.createRange();\n      range.moveStart('character', -this.el.value.length);\n      var arr = range.text.split(sentinelChar)\n      return arr.length === 1 ? arr[0] : arr[1];\n    }\n  });\n\n  $.fn.textcomplete.IETextarea = IETextarea;\n}(jQuery);\n\n// NOTE: TextComplete plugin has contenteditable support but it does not work\n//       fine especially on old IEs.\n//       Any pull requests are REALLY welcome.\n\n+function ($) {\n  'use strict';\n\n  // ContentEditable adapter\n  // =======================\n  //\n  // Adapter for contenteditable elements.\n  function ContentEditable (element, completer, option) {\n    this.initialize(element, completer, option);\n  }\n\n  $.extend(ContentEditable.prototype, $.fn.textcomplete.Adapter.prototype, {\n    // Public methods\n    // --------------\n\n    // Update the content with the given value and strategy.\n    // When an dropdown item is selected, it is executed.\n    select: function (value, strategy) {\n      var pre = this.getTextFromHeadToCaret();\n      var sel = window.getSelection()\n      var range = sel.getRangeAt(0);\n      var selection = range.cloneRange();\n      selection.selectNodeContents(range.startContainer);\n      var content = selection.toString();\n      var post = content.substring(range.startOffset);\n      var newSubstr = strategy.replace(value);\n      if ($.isArray(newSubstr)) {\n        post = newSubstr[1] + post;\n        newSubstr = newSubstr[0];\n      }\n      pre = pre.replace(strategy.match, newSubstr);\n      range.selectNodeContents(range.startContainer);\n      range.deleteContents();\n      var node = document.createTextNode(pre + post);\n      range.insertNode(node);\n      range.setStart(node, pre.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    },\n\n    // Private methods\n    // ---------------\n\n    // Returns the caret's relative position from the contenteditable's\n    // left top corner.\n    //\n    // Examples\n    //\n    //   this._getCaretRelativePosition()\n    //   //=> { top: 18, left: 200, lineHeight: 16 }\n    //\n    // Dropdown's position will be decided using the result.\n    _getCaretRelativePosition: function () {\n      var range = window.getSelection().getRangeAt(0).cloneRange();\n      var node = document.createElement('span');\n      range.insertNode(node);\n      range.selectNodeContents(node);\n      range.deleteContents();\n      var $node = $(node);\n      var position = $node.offset();\n      position.left -= this.$el.offset().left;\n      position.top += $node.height() - this.$el.offset().top;\n      position.lineHeight = $node.height();\n      $node.remove();\n      var dir = this.$el.attr('dir') || this.$el.css('direction');\n      if (dir === 'rtl') { position.left -= this.listView.$el.width(); }\n      return position;\n    },\n\n    // Returns the string between the first character and the caret.\n    // Completer will be triggered with the result for start autocompleting.\n    //\n    // Example\n    //\n    //   // Suppose the html is '<b>hello</b> wor|ld' and | is the caret.\n    //   this.getTextFromHeadToCaret()\n    //   // => ' wor'  // not '<b>hello</b> wor'\n    getTextFromHeadToCaret: function () {\n      var range = window.getSelection().getRangeAt(0);\n      var selection = range.cloneRange();\n      selection.selectNodeContents(range.startContainer);\n      return selection.toString().substring(0, range.startOffset);\n    }\n  });\n\n  $.fn.textcomplete.ContentEditable = ContentEditable;\n}(jQuery);\n","function hex2rgb(t){if(\"#\"==t[0]&&(t=t.substr(1)),3==t.length){var e=t;t=\"\",e=/^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(e).slice(1);for(var n=0;n<3;n++)t+=e[n]+e[n]}var o=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(t).slice(1);return{red:parseInt(o[0],16),green:parseInt(o[1],16),blue:parseInt(o[2],16)}}if(\"undefined\"==typeof ot)var ot={};if(ot.TextOperation=function(){\"use strict\";function t(){return this&&this.constructor===t?(this.ops=[],this.baseLength=0,void(this.targetLength=0)):new t}function e(e,n){var o=e.ops,r=t.isRetain;switch(o.length){case 1:return o[0];case 2:return r(o[0])?o[1]:r(o[1])?o[0]:null;case 3:if(r(o[0])&&r(o[2]))return o[1]}return null}function n(t){return o(t.ops[0])?t.ops[0]:0}t.prototype.equals=function(t){if(this.baseLength!==t.baseLength)return!1;if(this.targetLength!==t.targetLength)return!1;if(this.ops.length!==t.ops.length)return!1;for(var e=0;e<this.ops.length;e++)if(this.ops[e]!==t.ops[e])return!1;return!0};var o=t.isRetain=function(t){return\"number\"==typeof t&&t>0},r=t.isInsert=function(t){return\"string\"==typeof t},i=t.isDelete=function(t){return\"number\"==typeof t&&t<0};return t.prototype.retain=function(t){if(\"number\"!=typeof t)throw new Error(\"retain expects an integer\");return 0===t?this:(this.baseLength+=t,this.targetLength+=t,o(this.ops[this.ops.length-1])?this.ops[this.ops.length-1]+=t:this.ops.push(t),this)},t.prototype.insert=function(t){if(\"string\"!=typeof t)throw new Error(\"insert expects a string\");if(\"\"===t)return this;this.targetLength+=t.length;var e=this.ops;return r(e[e.length-1])?e[e.length-1]+=t:i(e[e.length-1])?r(e[e.length-2])?e[e.length-2]+=t:(e[e.length]=e[e.length-1],e[e.length-2]=t):e.push(t),this},t.prototype[\"delete\"]=function(t){if(\"string\"==typeof t&&(t=t.length),\"number\"!=typeof t)throw new Error(\"delete expects an integer or a string\");return 0===t?this:(t>0&&(t=-t),this.baseLength-=t,i(this.ops[this.ops.length-1])?this.ops[this.ops.length-1]+=t:this.ops.push(t),this)},t.prototype.isNoop=function(){return 0===this.ops.length||1===this.ops.length&&o(this.ops[0])},t.prototype.toString=function(){var t=Array.prototype.map||function(t){for(var e=this,n=[],o=0,r=e.length;o<r;o++)n[o]=t(e[o]);return n};return t.call(this.ops,function(t){return o(t)?\"retain \"+t:r(t)?\"insert '\"+t+\"'\":\"delete \"+-t}).join(\", \")},t.prototype.toJSON=function(){return this.ops},t.fromJSON=function(e){for(var n=new t,s=0,a=e.length;s<a;s++){var h=e[s];if(o(h))n.retain(h);else if(r(h))n.insert(h);else{if(!i(h))throw new Error(\"unknown operation: \"+JSON.stringify(h));n[\"delete\"](h)}}return n},t.prototype.apply=function(t){var e=this;if(t.length!==e.baseLength)throw new Error(\"The operation's base length must be equal to the string's length.\");for(var n=[],i=0,s=0,a=this.ops,h=0,p=a.length;h<p;h++){var c=a[h];if(o(c)){if(s+c>t.length)throw new Error(\"Operation can't retain more characters than are left in the string.\");n[i++]=t.slice(s,s+c),s+=c}else r(c)?n[i++]=c:s-=c}if(s!==t.length)throw new Error(\"The operation didn't operate on the whole string.\");return n.join(\"\")},t.prototype.invert=function(e){for(var n=0,i=new t,s=this.ops,a=0,h=s.length;a<h;a++){var p=s[a];o(p)?(i.retain(p),n+=p):r(p)?i[\"delete\"](p.length):(i.insert(e.slice(n,n-p)),n-=p)}return i},t.prototype.compose=function(e){var n=this;if(n.targetLength!==e.baseLength)throw new Error(\"The base length of the second operation has to be the target length of the first operation\");for(var s=new t,a=n.ops,h=e.ops,p=0,c=0,l=a[p++],u=h[c++];;){if(\"undefined\"==typeof l&&\"undefined\"==typeof u)break;if(i(l))s[\"delete\"](l),l=a[p++];else if(r(u))s.insert(u),u=h[c++];else{if(\"undefined\"==typeof l)throw new Error(\"Cannot compose operations: first operation is too short.\");if(\"undefined\"==typeof u)throw new Error(\"Cannot compose operations: first operation is too long.\");if(o(l)&&o(u))l>u?(s.retain(u),l-=u,u=h[c++]):l===u?(s.retain(l),l=a[p++],u=h[c++]):(s.retain(l),u-=l,l=a[p++]);else if(r(l)&&i(u))l.length>-u?(l=l.slice(-u),u=h[c++]):l.length===-u?(l=a[p++],u=h[c++]):(u+=l.length,l=a[p++]);else if(r(l)&&o(u))l.length>u?(s.insert(l.slice(0,u)),l=l.slice(u),u=h[c++]):l.length===u?(s.insert(l),l=a[p++],u=h[c++]):(s.insert(l),u-=l.length,l=a[p++]);else{if(!o(l)||!i(u))throw new Error(\"This shouldn't happen: op1: \"+JSON.stringify(l)+\", op2: \"+JSON.stringify(u));l>-u?(s[\"delete\"](u),l+=u,u=h[c++]):l===-u?(s[\"delete\"](u),l=a[p++],u=h[c++]):(s[\"delete\"](l),u+=l,l=a[p++])}}}return s},t.prototype.shouldBeComposedWith=function(t){if(this.isNoop()||t.isNoop())return!0;var o=n(this),s=n(t),a=e(this),h=e(t);return!(!a||!h)&&(r(a)&&r(h)?o+a.length===s:!(!i(a)||!i(h))&&(s-h===o||o===s))},t.prototype.shouldBeComposedWithInverted=function(t){if(this.isNoop()||t.isNoop())return!0;var o=n(this),s=n(t),a=e(this),h=e(t);return!(!a||!h)&&(r(a)&&r(h)?o+a.length===s||o===s:!(!i(a)||!i(h))&&s-h===o)},t.transform=function(e,n){if(e.baseLength!==n.baseLength)throw new Error(\"Both operations have to have the same base length\");for(var s=new t,a=new t,h=e.ops,p=n.ops,c=0,l=0,u=h[c++],f=p[l++];;){if(\"undefined\"==typeof u&&\"undefined\"==typeof f)break;if(r(u))s.insert(u),a.retain(u.length),u=h[c++];else if(r(f))s.retain(f.length),a.insert(f),f=p[l++];else{if(\"undefined\"==typeof u)throw new Error(\"Cannot compose operations: first operation is too short.\");if(\"undefined\"==typeof f)throw new Error(\"Cannot compose operations: first operation is too long.\");var d;if(o(u)&&o(f))u>f?(d=f,u-=f,f=p[l++]):u===f?(d=f,u=h[c++],f=p[l++]):(d=u,f-=u,u=h[c++]),s.retain(d),a.retain(d);else if(i(u)&&i(f))-u>-f?(u-=f,f=p[l++]):u===f?(u=h[c++],f=p[l++]):(f-=u,u=h[c++]);else if(i(u)&&o(f))-u>f?(d=f,u+=f,f=p[l++]):-u===f?(d=f,u=h[c++],f=p[l++]):(d=-u,f+=u,u=h[c++]),s[\"delete\"](d);else{if(!o(u)||!i(f))throw new Error(\"The two operations aren't compatible\");u>-f?(d=-f,u+=f,f=p[l++]):u===-f?(d=u,u=h[c++],f=p[l++]):(d=u,f+=u,u=h[c++]),a[\"delete\"](d)}}}return[s,a]},t}(),\"object\"==typeof module&&(module.exports=ot.TextOperation),\"undefined\"==typeof ot)var ot={};if(ot.Selection=function(t){\"use strict\";function e(t,e){this.anchor=t,this.head=e}function n(t){this.ranges=t||[]}var o=t.ot?t.ot.TextOperation:require(\"./text-operation\");return e.fromJSON=function(t){return new e(t.anchor,t.head)},e.prototype.equals=function(t){return this.anchor===t.anchor&&this.head===t.head},e.prototype.isEmpty=function(){return this.anchor===this.head},e.prototype.transform=function(t){function n(e){for(var n=e,r=t.ops,i=0,s=t.ops.length;i<s&&(o.isRetain(r[i])?e-=r[i]:o.isInsert(r[i])?n+=r[i].length:(n-=Math.min(e,-r[i]),e+=r[i]),!(e<0));i++);return n}var r=n(this.anchor);return this.anchor===this.head?new e(r,r):new e(r,n(this.head))},n.Range=e,n.createCursor=function(t){return new n([new e(t,t)])},n.fromJSON=function(t){for(var o=t.ranges||t,r=0,i=[];r<o.length;r++)i[r]=e.fromJSON(o[r]);return new n(i)},n.prototype.equals=function(t){if(this.position!==t.position)return!1;if(this.ranges.length!==t.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].equals(t.ranges[e]))return!1;return!0},n.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].isEmpty())return!0;return!1},n.prototype.compose=function(t){return t},n.prototype.transform=function(t){for(var e=0,o=[];e<this.ranges.length;e++)o[e]=this.ranges[e].transform(t);return new n(o)},n}(this),\"object\"==typeof module&&(module.exports=ot.Selection),\"undefined\"==typeof ot)var ot={};if(ot.WrappedOperation=function(t){\"use strict\";function e(t,e){this.wrapped=t,this.meta=e}function n(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function o(t,e){if(t&&\"object\"==typeof t){if(\"function\"==typeof t.compose)return t.compose(e);var o={};return n(t,o),n(e,o),o}return e}function r(t,e){return t&&\"object\"==typeof t&&\"function\"==typeof t.transform?t.transform(e):t}return e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var t=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),t&&\"object\"==typeof t&&\"function\"==typeof t.invert?t.invert.apply(t,arguments):t)},e.prototype.compose=function(t){return new e(this.wrapped.compose(t.wrapped),o(this.meta,t.meta))},e.transform=function(t,n){var o=t.wrapped.constructor.transform,i=o(t.wrapped,n.wrapped);return[new e(i[0],r(t.meta,n.wrapped)),new e(i[1],r(n.meta,t.wrapped))]},e}(this),\"object\"==typeof module&&(module.exports=ot.WrappedOperation),\"undefined\"==typeof ot)var ot={};if(ot.UndoManager=function(){\"use strict\";function t(t){this.maxItems=t||50,this.state=n,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function e(t,e){for(var n=[],o=e.constructor,r=t.length-1;r>=0;r--){var i=o.transform(t[r],e);\"function\"==typeof i[0].isNoop&&i[0].isNoop()||n.push(i[0]),e=i[1]}return n.reverse()}var n=\"normal\",o=\"undoing\",r=\"redoing\";return t.prototype.add=function(t,e){if(this.state===o)this.redoStack.push(t),this.dontCompose=!0;else if(this.state===r)this.undoStack.push(t),this.dontCompose=!0;else{var n=this.undoStack;!this.dontCompose&&e&&n.length>0?n.push(t.compose(n.pop())):(n.push(t),n.length>this.maxItems&&n.shift()),this.dontCompose=!1,this.redoStack=[]}},t.prototype.transform=function(t){this.undoStack=e(this.undoStack,t),this.redoStack=e(this.redoStack,t)},t.prototype.performUndo=function(t){if(this.state=o,0===this.undoStack.length)throw new Error(\"undo not possible\");t(this.undoStack.pop()),this.state=n},t.prototype.performRedo=function(t){if(this.state=r,0===this.redoStack.length)throw new Error(\"redo not possible\");t(this.redoStack.pop()),this.state=n},t.prototype.canUndo=function(){return 0!==this.undoStack.length},t.prototype.canRedo=function(){return 0!==this.redoStack.length},t.prototype.isUndoing=function(){return this.state===o},t.prototype.isRedoing=function(){return this.state===r},t}(),\"object\"==typeof module&&(module.exports=ot.UndoManager),\"undefined\"==typeof ot)var ot={};ot.Client=function(t){\"use strict\";function e(t){this.revision=t,this.setState(a)}function n(){}function o(t){this.outstanding=t}function r(t,e){this.outstanding=t,this.buffer=e}function i(t,e,n){this.acknowlaged=t,this.client=e,this.revision=n}function s(t,e,n,o){this.acknowlaged=t,this.buffer=e,this.client=n,this.revision=o}e.prototype.setState=function(t){this.state=t},e.prototype.applyClient=function(t){this.setState(this.state.applyClient(this,t))},e.prototype.applyServer=function(t,e){this.setState(this.state.applyServer(this,t,e))},e.prototype.applyOperations=function(t,e){this.setState(this.state.applyOperations(this,t,e))},e.prototype.serverAck=function(t){this.setState(this.state.serverAck(this,t))},e.prototype.serverReconnect=function(){\"function\"==typeof this.state.resend&&this.state.resend(this)},e.prototype.transformSelection=function(t){return this.state.transformSelection(t)},e.prototype.sendOperation=function(t,e){throw new Error(\"sendOperation must be defined in child class\")},e.prototype.applyOperation=function(t){throw new Error(\"applyOperation must be defined in child class\")},e.Synchronized=n,n.prototype.applyClient=function(t,e){return t.sendOperation(t.revision,e),new o(e)},n.prototype.applyServer=function(t,e,n){if(e-t.revision>1)throw new Error(\"Invalid revision.\");return t.revision=e,t.applyOperation(n),this},n.prototype.serverAck=function(t,e){throw new Error(\"There is no pending operation.\")},n.prototype.transformSelection=function(t){return t};var a=new n;return e.AwaitingConfirm=o,o.prototype.applyClient=function(t,e){return new r(this.outstanding,e)},o.prototype.applyServer=function(t,e,n){if(e-t.revision>1)throw new Error(\"Invalid revision.\");t.revision=e;var r=n.constructor.transform(this.outstanding,n);return t.applyOperation(r[1]),new o(r[0])},o.prototype.serverAck=function(t,e){return e-t.revision>1?new i(this.outstanding,t,e).getOperations():(t.revision=e,a)},o.prototype.transformSelection=function(t){return t.transform(this.outstanding)},o.prototype.resend=function(t){t.sendOperation(t.revision,this.outstanding)},e.AwaitingWithBuffer=r,r.prototype.applyClient=function(t,e){var n=this.buffer.compose(e);return new r(this.outstanding,n)},r.prototype.applyServer=function(t,e,n){if(e-t.revision>1)throw new Error(\"Invalid revision.\");t.revision=e;var o=n.constructor.transform,i=o(this.outstanding,n),s=o(this.buffer,i[1]);return t.applyOperation(s[1]),new r(i[0],s[0])},r.prototype.serverAck=function(t,e){return e-t.revision>1?new s(this.outstanding,this.buffer,t,e).getOperations():(t.revision=e,t.sendOperation(t.revision,this.buffer),new o(this.buffer))},r.prototype.transformSelection=function(t){return t.transform(this.outstanding).transform(this.buffer)},r.prototype.resend=function(t){t.sendOperation(t.revision,this.outstanding)},e.Stale=i,i.prototype.applyClient=function(t,e){return new s(this.acknowlaged,e,t,this.revision)},i.prototype.applyServer=function(t,e,n){throw new Error(\"Ignored server-side change.\")},i.prototype.applyOperations=function(t,e,n){for(var o=this.acknowlaged.constructor.transform,r=0;r<n.length;r++){var i=ot.TextOperation.fromJSON(n[r]),s=o(this.acknowlaged,i);t.applyOperation(s[1]),this.acknowlaged=s[0]}return t.revision=this.revision,a},i.prototype.serverAck=function(t,e){throw new Error(\"There is no pending operation.\")},i.prototype.transformSelection=function(t){return t},i.prototype.getOperations=function(){return this.client.getOperations(this.client.revision,this.revision-1),this},e.StaleWithBuffer=s,s.prototype.applyClient=function(t,e){var n=this.buffer.compose(e);return new s(this.acknowlaged,n,t,this.revision)},s.prototype.applyServer=function(t,e,n){throw new Error(\"Ignored server-side change.\")},s.prototype.applyOperations=function(t,e,n){for(var r=this.acknowlaged.constructor.transform,i=0;i<n.length;i++){var s=ot.TextOperation.fromJSON(n[i]),a=r(this.acknowlaged,s),h=r(this.buffer,a[1]);t.applyOperation(h[1]),this.acknowlaged=a[0],this.buffer=h[0]}return t.revision=this.revision,t.sendOperation(t.revision,this.buffer),new o(this.buffer)},s.prototype.serverAck=function(t,e){throw new Error(\"There is no pending operation.\")},s.prototype.transformSelection=function(t){return t},s.prototype.getOperations=function(){return this.client.getOperations(this.client.revision,this.revision-1),this},e}(this),\"object\"==typeof module&&(module.exports=ot.Client),ot.CodeMirrorAdapter=function(t){\"use strict\";function e(t){this.cm=t,this.ignoreNextChange=!1,this.changeInProgress=!1,this.selectionChanged=!1,a(this,\"onChanges\"),a(this,\"onChange\"),a(this,\"onCursorActivity\"),a(this,\"onFocus\"),a(this,\"onBlur\"),t.on(\"changes\",this.onChanges),t.on(\"change\",this.onChange),t.on(\"cursorActivity\",this.onCursorActivity),t.on(\"focus\",this.onFocus),t.on(\"blur\",this.onBlur)}function n(t,e){return t.line<e.line?-1:t.line>e.line?1:t.ch<e.ch?-1:t.ch>e.ch?1:0}function o(t,e){return n(t,e)<=0}function r(t,e){return o(t,e)?t:e}function i(t,e){return o(t,e)?e:t}function s(t){return t.indexFromPos({line:t.lastLine(),ch:0})+t.getLine(t.lastLine()).length}function a(t,e){var n=t[e];t[e]=function(){n.apply(t,arguments)}}var h=ot.TextOperation,p=ot.Selection;e.prototype.detach=function(){this.cm.off(\"changes\",this.onChanges),this.cm.off(\"change\",this.onChange),this.cm.off(\"cursorActivity\",this.onCursorActivity),this.cm.off(\"focus\",this.onFocus),this.cm.off(\"blur\",this.onBlur)},e.operationFromCodeMirrorChanges=function(t,e){function n(t){return t[t.length-1]}function r(t){if(0===t.length)return 0;for(var e=0,n=0;n<t.length;n++)e+=t[n].length;return e+t.length-1}function i(t,e){return function(i){return o(i,e.from)?t(i):o(e.to,i)?t({line:i.line+e.text.length-1-(e.to.line-e.from.line),ch:e.to.line<i.line?i.ch:e.text.length<=1?i.ch-(e.to.ch-e.from.ch)+r(e.text):i.ch-e.to.ch+n(e.text).length})+r(e.removed)-r(e.text):e.from.line===i.line?t(e.from)+i.ch-e.from.ch:t(e.from)+r(e.removed.slice(0,i.line-e.from.line))+1+i.ch}}for(var a=s(e),p=(new h).retain(a),c=(new h).retain(a),l=function(t){return e.indexFromPos(t)},u=t.length-1;u>=0;u--){var f=t[u];l=i(l,f);var d=l(f.from),g=a-d-r(f.text);p=(new h).retain(d)[\"delete\"](r(f.removed)).insert(f.text.join(\"\\n\")).retain(g).compose(p),c=c.compose((new h).retain(d)[\"delete\"](r(f.text)).insert(f.removed.join(\"\\n\")).retain(g)),a+=r(f.removed)-r(f.text)}return[p,c]},e.operationFromCodeMirrorChange=e.operationFromCodeMirrorChanges,e.applyOperationToCodeMirror=function(t,e){e.operation(function(){for(var n=t.ops,o=0,r=0,i=n.length;r<i;r++){var s=n[r];if(h.isRetain(s))o+=s;else if(h.isInsert(s))e.replaceRange(s,e.posFromIndex(o),null,\"ignoreHistory\"),o+=s.length;else if(h.isDelete(s)){var a=e.posFromIndex(o),p=e.posFromIndex(o-s);e.replaceRange(\"\",a,p,\"ignoreHistory\")}}})},e.prototype.registerCallbacks=function(t){this.callbacks=t},e.prototype.onChange=function(){this.changeInProgress=!0},e.prototype.onChanges=function(t,n){if(!this.ignoreNextChange){var o=e.operationFromCodeMirrorChanges(n,this.cm);this.trigger(\"change\",o[0],o[1])}this.selectionChanged&&this.trigger(\"selectionChange\"),this.changeInProgress=!1,this.ignoreNextChange=!1},e.prototype.onCursorActivity=e.prototype.onFocus=function(){this.changeInProgress?this.selectionChanged=!0:this.trigger(\"selectionChange\")},e.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger(\"blur\")},e.prototype.getValue=function(){return this.cm.getValue()},e.prototype.getSelection=function(){for(var t=this.cm,e=t.listSelections(),n=[],o=0;o<e.length;o++)n[o]=new p.Range(t.indexFromPos(e[o].anchor),t.indexFromPos(e[o].head));return new p(n)},e.prototype.setSelection=function(t){for(var e=[],n=0;t&&n<t.ranges.length;n++){var o=t.ranges[n];e[n]={anchor:this.cm.posFromIndex(o.anchor),head:this.cm.posFromIndex(o.head)}}this.cm.setSelections(e)};var c=function(){var t={},e=document.createElement(\"style\");document.documentElement.getElementsByTagName(\"head\")[0].appendChild(e);var n=e.sheet;return function(e){t[e]||(t[e]=!0,n.insertRule(e,(n.cssRules||n.rules).length))}}();return e.prototype.setOtherCursor=function(t,e,n){var o=this.cm.posFromIndex(t),r=(this.cm.cursorCoords(o),document.createElement(\"span\"));return r.className=\"other-client\",r.style.display=\"none\",r.setAttribute(\"data-clientid\",n),this.cm.setBookmark(o,{widget:r,insertLeft:!0})},e.prototype.setOtherSelectionRange=function(t,e,n){var o=/^#([0-9a-fA-F]{6})$/.exec(e);if(!o)throw new Error(\"only six-digit hex colors are allowed.\");var s=\"selection-\"+o[1],a=hex2rgb(e),h=\".\"+s+\" { background: rgba(\"+a.red+\",\"+a.green+\",\"+a.blue+\",0.2); }\";c(h);var p=this.cm.posFromIndex(t.anchor),l=this.cm.posFromIndex(t.head);return this.cm.markText(r(p,l),i(p,l),{className:s})},e.prototype.setOtherSelection=function(t,e,n){for(var o=[],r=0;r<t.ranges.length;r++){var i=t.ranges[r];i.isEmpty()||(o[r]=this.setOtherSelectionRange(i,e,n))}return{clear:function(){for(var t=0;t<o.length;t++)o[t]&&o[t].clear()}}},e.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),n=this.callbacks&&this.callbacks[t];n&&n.apply(this,e)},e.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreNextChange=!0),e.applyOperationToCodeMirror(t,this.cm)},e.prototype.registerUndo=function(t){this.cm.undo=t},e.prototype.registerRedo=function(t){this.cm.redo=t},e}(this),ot.SocketIOAdapter=function(){\"use strict\";function t(t){this.socket=t;var e=this;t.on(\"client_left\",function(t){e.trigger(\"client_left\",t)}),t.on(\"set_name\",function(t,n){e.trigger(\"set_name\",t,n)}),t.on(\"set_color\",function(t,n){e.trigger(\"set_color\",t,n)}),t.on(\"ack\",function(t){e.trigger(\"ack\",t)}),t.on(\"operation\",function(t,n,o,r){e.trigger(\"operation\",n,o),e.trigger(\"selection\",t,r)}),t.on(\"operations\",function(t,n){e.trigger(\"operations\",t,n)}),t.on(\"selection\",function(t,n){e.trigger(\"selection\",t,n)}),t.on(\"reconnect\",function(){e.trigger(\"reconnect\")})}return t.prototype.sendOperation=function(t,e,n){this.socket.emit(\"operation\",t,e,n)},t.prototype.sendSelection=function(t){this.socket.emit(\"selection\",t)},t.prototype.getOperations=function(t,e){this.socket.emit(\"get_operations\",t,e)},t.prototype.registerCallbacks=function(t){this.callbacks=t},t.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),n=this.callbacks&&this.callbacks[t];n&&n.apply(this,e)},t}(),ot.AjaxAdapter=function(){\"use strict\";function t(t,e,n){\"/\"!==t[t.length-1]&&(t+=\"/\"),this.path=t,this.ownUserName=e,this.majorRevision=n.major||0,this.minorRevision=n.minor||0,this.poll()}return t.prototype.renderRevisionPath=function(){return\"revision/\"+this.majorRevision+\"-\"+this.minorRevision},t.prototype.handleResponse=function(t){var e,n=t.operations;for(e=0;e<n.length;e++)n[e].user===this.ownUserName?this.trigger(\"ack\"):this.trigger(\"operation\",n[e].operation);n.length>0&&(this.majorRevision+=n.length,this.minorRevision=0);var o=t.events;if(o){for(e=0;e<o.length;e++){var r=o[e].user;if(r!==this.ownUserName)switch(o[e].event){case\"joined\":this.trigger(\"set_name\",r,r);break;case\"left\":this.trigger(\"client_left\",r);break;case\"selection\":this.trigger(\"selection\",r,o[e].selection)}}this.minorRevision+=o.length}var i=t.users;i&&(delete i[this.ownUserName],this.trigger(\"clients\",i)),t.revision&&(this.majorRevision=t.revision.major,this.minorRevision=t.revision.minor)},t.prototype.poll=function(){var t=this;$.ajax({url:this.path+this.renderRevisionPath(),type:\"GET\",dataType:\"json\",timeout:5e3,success:function(e){t.handleResponse(e),t.poll()},error:function(){setTimeout(function(){t.poll()},500)}})},t.prototype.sendOperation=function(t,e,n){if(t!==this.majorRevision)throw new Error(\"Revision numbers out of sync\");var o=this;$.ajax({url:this.path+this.renderRevisionPath(),type:\"POST\",data:JSON.stringify({operation:e,selection:n}),contentType:\"application/json\",processData:!1,success:function(t){},error:function(){setTimeout(function(){o.sendOperation(t,e,n)},500)}})},t.prototype.sendSelection=function(t){$.ajax({url:this.path+this.renderRevisionPath()+\"/selection\",type:\"POST\",data:JSON.stringify(t),contentType:\"application/json\",processData:!1,timeout:1e3})},t.prototype.registerCallbacks=function(t){this.callbacks=t},t.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),n=this.callbacks&&this.callbacks[t];n&&n.apply(this,e)},t}(),ot.EditorClient=function(){\"use strict\";function t(t,e){this.selectionBefore=t,this.selectionAfter=e}function e(t,e){this.clientId=t,this.selection=e}function n(t,e,n,o,r,i){this.id=t,this.listEl=e,this.editorAdapter=n,this.name=o,this.color=r,this.li=document.createElement(\"li\"),o&&(this.li.textContent=o,this.listEl.appendChild(this.li)),r?this.setForceColor(r):this.setColor(o?s(o):Math.random()),i&&this.updateSelection(i)}function o(t,e,n,o){c.call(this,t),this.serverAdapter=n,this.editorAdapter=o,this.undoManager=new u,this.initializeClientList(),this.initializeClients(e);var r=this;this.editorAdapter.registerCallbacks({change:function(t,e){r.onChange(t,e)},selectionChange:function(){r.onSelectionChange()},blur:function(){r.onBlur()}}),this.editorAdapter.registerUndo(function(){r.undo()}),this.editorAdapter.registerRedo(function(){r.redo()}),this.serverAdapter.registerCallbacks({client_left:function(t){r.onClientLeft(t)},set_name:function(t,e){r.getClientObject(t).setName(e)},set_color:function(t,e){r.getClientObject(t).setForceColor(e)},ack:function(t){r.serverAck(t)},operation:function(t,e){r.applyServer(t,f.fromJSON(e))},operations:function(t,e){r.applyOperations(t,e)},selection:function(t,e){e?r.getClientObject(t).updateSelection(r.transformSelection(l.fromJSON(e))):r.getClientObject(t).removeSelection()},clients:function(t){var e;for(e in r.clients)r.clients.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&r.onClientLeft(e);for(e in t)if(t.hasOwnProperty(e)){var n=r.getClientObject(e);t[e].name&&n.setName(t[e].name);var o=t[e].selection;o?r.clients[e].updateSelection(r.transformSelection(l.fromJSON(o))):r.clients[e].removeSelection()}},reconnect:function(){r.serverReconnect()}})}function r(t,e,n){function o(t){var e=Math.round(255*t).toString(16);return 1===e.length?\"0\"+e:e}return\"#\"+o(t)+o(e)+o(n)}function i(t,e,n){if(0===e)return r(n,n,n);var o=n<.5?n*(1+e):n+e-e*n,i=2*n-o,s=function(t){return t<0&&(t+=1),t>1&&(t-=1),6*t<1?i+6*(o-i)*t:2*t<1?o:3*t<2?i+6*(o-i)*(2/3-t):i};return r(s(t+1/3),s(t),s(t-1/3))}function s(t){for(var e=1,n=0;n<t.length;n++)e=17*(e+t.charCodeAt(n))%360;return e/360}function a(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function h(t){return t[t.length-1]}function p(t){t.parentNode&&t.parentNode.removeChild(t)}var c=ot.Client,l=ot.Selection,u=ot.UndoManager,f=ot.TextOperation,d=ot.WrappedOperation;return t.prototype.invert=function(){return new t(this.selectionAfter,this.selectionBefore)},t.prototype.compose=function(e){return new t(this.selectionBefore,e.selectionAfter)},t.prototype.transform=function(e){return new t(this.selectionBefore?this.selectionBefore.transform(e):null,this.selectionAfter?this.selectionAfter.transform(e):null)},e.fromJSON=function(t){return new e(t.clientId,t.selection&&l.fromJSON(t.selection))},e.prototype.transform=function(t){return new e(this.clientId,this.selection&&this.selection.transform(t))},n.prototype.setColor=function(t){this.hue=t,this.color=i(t,.75,.5),this.lightColor=i(t,.5,.9),this.li&&(this.li.style.color=this.color)},n.prototype.setForceColor=function(t){this.hue=null,this.color=t,this.lightColor=t,this.li&&(this.li.style.color=this.color)},n.prototype.setName=function(t){this.name!==t&&(this.name=t,this.li.textContent=t,this.li.parentNode||this.listEl.appendChild(this.li),this.setColor(s(t)))},n.prototype.updateSelection=function(t){this.removeSelection(),this.selection=t,this.mark=this.editorAdapter.setOtherSelection(t,t.position===t.selectionEnd?this.color:this.lightColor,this.id)},n.prototype.remove=function(){this.li&&p(this.li),this.removeSelection()},n.prototype.removeSelection=function(){this.mark&&(this.mark.clear(),this.mark=null)},a(o,c),o.prototype.addClient=function(t,e){this.clients[t]=new n(t,this.clientListEl,this.editorAdapter,e.name||t,e.color||null,e.selection?l.fromJSON(e.selection):null)},o.prototype.initializeClients=function(t){this.clients={};for(var e in t)t.hasOwnProperty(e)&&this.addClient(e,t[e])},o.prototype.getClientObject=function(t){var e=this.clients[t];return e?e:this.clients[t]=new n(t,this.clientListEl,this.editorAdapter)},o.prototype.onClientLeft=function(t){var e=this.clients[t];e&&(e.remove(),delete this.clients[t])},o.prototype.initializeClientList=function(){this.clientListEl=document.createElement(\"ul\")},o.prototype.applyUnredo=function(t){this.undoManager.add(t.invert(this.editorAdapter.getValue())),this.editorAdapter.applyOperation(t.wrapped),this.selection=t.meta.selectionAfter,this.editorAdapter.setSelection(this.selection),this.applyClient(t.wrapped)},o.prototype.undo=function(){var t=this;this.undoManager.canUndo()&&this.undoManager.performUndo(function(e){t.applyUnredo(e)})},o.prototype.redo=function(){var t=this;this.undoManager.canRedo()&&this.undoManager.performRedo(function(e){t.applyUnredo(e)})},o.prototype.onChange=function(e,n){var o=this.selection;this.updateSelection();var r=new t(o,this.selection),i=(new d(e,r),this.undoManager.undoStack.length>0&&n.shouldBeComposedWithInverted(h(this.undoManager.undoStack).wrapped)),s=new t(this.selection,o);this.undoManager.add(new d(n,s),i),this.applyClient(e)},o.prototype.updateSelection=function(){this.selection=this.editorAdapter.getSelection()},o.prototype.onSelectionChange=function(){var t=this.selection;this.updateSelection(),t&&this.selection.equals(t)||this.sendSelection(this.selection)},o.prototype.onBlur=function(){this.selection=null,this.sendSelection(null)},o.prototype.sendSelection=function(t){this.state instanceof c.AwaitingWithBuffer||this.serverAdapter.sendSelection(t)},o.prototype.sendOperation=function(t,e){this.serverAdapter.sendOperation(t,e.toJSON(),this.selection)},o.prototype.getOperations=function(t,e){this.serverAdapter.getOperations(t,e)},o.prototype.applyOperation=function(t){this.editorAdapter.applyOperation(t),this.updateSelection(),this.undoManager.transform(new d(t,null))},o}();\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = {\n  ot\n};\n","if (typeof ot === 'undefined') {\n  // Export for browsers\n  var ot = {};\n}\n\not.TextOperation = (function () {\n  'use strict';\n\n  // Constructor for new operations.\n  function TextOperation () {\n    if (!this || this.constructor !== TextOperation) {\n      // => function was called without 'new'\n      return new TextOperation();\n    }\n\n    // When an operation is applied to an input string, you can think of this as\n    // if an imaginary cursor runs over the entire string and skips over some\n    // parts, deletes some parts and inserts characters at some positions. These\n    // actions (skip/delete/insert) are stored as an array in the \"ops\" property.\n    this.ops = [];\n    // An operation's baseLength is the length of every string the operation\n    // can be applied to.\n    this.baseLength = 0;\n    // The targetLength is the length of every string that results from applying\n    // the operation on a valid input string.\n    this.targetLength = 0;\n  }\n\n  TextOperation.prototype.equals = function (other) {\n    if (this.baseLength !== other.baseLength) { return false; }\n    if (this.targetLength !== other.targetLength) { return false; }\n    if (this.ops.length !== other.ops.length) { return false; }\n    for (var i = 0; i < this.ops.length; i++) {\n      if (this.ops[i] !== other.ops[i]) {return false; }\n    }\n    return true;\n  };\n\n  // Operation are essentially lists of ops. There are three types of ops:\n  //\n  // * Retain ops: Advance the cursor position by a given number of characters.\n  //   Represented by positive ints.\n  // * Insert ops: Insert a given string at the current cursor position.\n  //   Represented by strings.\n  // * Delete ops: Delete the next n characters. Represented by negative ints.\n\n  var isRetain = TextOperation.isRetain = function (op) {\n    return typeof op === 'number' && op > 0;\n  };\n\n  var isInsert = TextOperation.isInsert = function (op) {\n    return typeof op === 'string';\n  };\n\n  var isDelete = TextOperation.isDelete = function (op) {\n    return typeof op === 'number' && op < 0;\n  };\n\n\n  // After an operation is constructed, the user of the library can specify the\n  // actions of an operation (skip/insert/delete) with these three builder\n  // methods. They all return the operation for convenient chaining.\n\n  // Skip over a given number of characters.\n  TextOperation.prototype.retain = function (n) {\n    if (typeof n !== 'number') {\n      throw new Error(\"retain expects an integer\");\n    }\n    if (n === 0) { return this; }\n    this.baseLength += n;\n    this.targetLength += n;\n    if (isRetain(this.ops[this.ops.length-1])) {\n      // The last op is a retain op => we can merge them into one op.\n      this.ops[this.ops.length-1] += n;\n    } else {\n      // Create a new op.\n      this.ops.push(n);\n    }\n    return this;\n  };\n\n  // Insert a string at the current position.\n  TextOperation.prototype.insert = function (str) {\n    if (typeof str !== 'string') {\n      throw new Error(\"insert expects a string\");\n    }\n    if (str === '') { return this; }\n    this.targetLength += str.length;\n    var ops = this.ops;\n    if (isInsert(ops[ops.length-1])) {\n      // Merge insert op.\n      ops[ops.length-1] += str;\n    } else if (isDelete(ops[ops.length-1])) {\n      // It doesn't matter when an operation is applied whether the operation\n      // is delete(3), insert(\"something\") or insert(\"something\"), delete(3).\n      // Here we enforce that in this case, the insert op always comes first.\n      // This makes all operations that have the same effect when applied to\n      // a document of the right length equal in respect to the `equals` method.\n      if (isInsert(ops[ops.length-2])) {\n        ops[ops.length-2] += str;\n      } else {\n        ops[ops.length] = ops[ops.length-1];\n        ops[ops.length-2] = str;\n      }\n    } else {\n      ops.push(str);\n    }\n    return this;\n  };\n\n  // Delete a string at the current position.\n  TextOperation.prototype['delete'] = function (n) {\n    if (typeof n === 'string') { n = n.length; }\n    if (typeof n !== 'number') {\n      throw new Error(\"delete expects an integer or a string\");\n    }\n    if (n === 0) { return this; }\n    if (n > 0) { n = -n; }\n    this.baseLength -= n;\n    if (isDelete(this.ops[this.ops.length-1])) {\n      this.ops[this.ops.length-1] += n;\n    } else {\n      this.ops.push(n);\n    }\n    return this;\n  };\n\n  // Tests whether this operation has no effect.\n  TextOperation.prototype.isNoop = function () {\n    return this.ops.length === 0 || (this.ops.length === 1 && isRetain(this.ops[0]));\n  };\n\n  // Pretty printing.\n  TextOperation.prototype.toString = function () {\n    // map: build a new array by applying a function to every element in an old\n    // array.\n    var map = Array.prototype.map || function (fn) {\n      var arr = this;\n      var newArr = [];\n      for (var i = 0, l = arr.length; i < l; i++) {\n        newArr[i] = fn(arr[i]);\n      }\n      return newArr;\n    };\n    return map.call(this.ops, function (op) {\n      if (isRetain(op)) {\n        return \"retain \" + op;\n      } else if (isInsert(op)) {\n        return \"insert '\" + op + \"'\";\n      } else {\n        return \"delete \" + (-op);\n      }\n    }).join(', ');\n  };\n\n  // Converts operation into a JSON value.\n  TextOperation.prototype.toJSON = function () {\n    return this.ops;\n  };\n\n  // Converts a plain JS object into an operation and validates it.\n  TextOperation.fromJSON = function (ops) {\n    var o = new TextOperation();\n    for (var i = 0, l = ops.length; i < l; i++) {\n      var op = ops[i];\n      if (isRetain(op)) {\n        o.retain(op);\n      } else if (isInsert(op)) {\n        o.insert(op);\n      } else if (isDelete(op)) {\n        o['delete'](op);\n      } else {\n        throw new Error(\"unknown operation: \" + JSON.stringify(op));\n      }\n    }\n    return o;\n  };\n\n  // Apply an operation to a string, returning a new string. Throws an error if\n  // there's a mismatch between the input string and the operation.\n  TextOperation.prototype.apply = function (str) {\n    var operation = this;\n    if (str.length !== operation.baseLength) {\n      throw new Error(\"The operation's base length must be equal to the string's length.\");\n    }\n    var newStr = [], j = 0;\n    var strIndex = 0;\n    var ops = this.ops;\n    for (var i = 0, l = ops.length; i < l; i++) {\n      var op = ops[i];\n      if (isRetain(op)) {\n        if (strIndex + op > str.length) {\n          throw new Error(\"Operation can't retain more characters than are left in the string.\");\n        }\n        // Copy skipped part of the old string.\n        newStr[j++] = str.slice(strIndex, strIndex + op);\n        strIndex += op;\n      } else if (isInsert(op)) {\n        // Insert string.\n        newStr[j++] = op;\n      } else { // delete op\n        strIndex -= op;\n      }\n    }\n    if (strIndex !== str.length) {\n      throw new Error(\"The operation didn't operate on the whole string.\");\n    }\n    return newStr.join('');\n  };\n\n  // Computes the inverse of an operation. The inverse of an operation is the\n  // operation that reverts the effects of the operation, e.g. when you have an\n  // operation 'insert(\"hello \"); skip(6);' then the inverse is 'delete(\"hello \");\n  // skip(6);'. The inverse should be used for implementing undo.\n  TextOperation.prototype.invert = function (str) {\n    var strIndex = 0;\n    var inverse = new TextOperation();\n    var ops = this.ops;\n    for (var i = 0, l = ops.length; i < l; i++) {\n      var op = ops[i];\n      if (isRetain(op)) {\n        inverse.retain(op);\n        strIndex += op;\n      } else if (isInsert(op)) {\n        inverse['delete'](op.length);\n      } else { // delete op\n        inverse.insert(str.slice(strIndex, strIndex - op));\n        strIndex -= op;\n      }\n    }\n    return inverse;\n  };\n\n  // Compose merges two consecutive operations into one operation, that\n  // preserves the changes of both. Or, in other words, for each input string S\n  // and a pair of consecutive operations A and B,\n  // apply(apply(S, A), B) = apply(S, compose(A, B)) must hold.\n  TextOperation.prototype.compose = function (operation2) {\n    var operation1 = this;\n    if (operation1.targetLength !== operation2.baseLength) {\n      throw new Error(\"The base length of the second operation has to be the target length of the first operation\");\n    }\n\n    var operation = new TextOperation(); // the combined operation\n    var ops1 = operation1.ops, ops2 = operation2.ops; // for fast access\n    var i1 = 0, i2 = 0; // current index into ops1 respectively ops2\n    var op1 = ops1[i1++], op2 = ops2[i2++]; // current ops\n    while (true) {\n      // Dispatch on the type of op1 and op2\n      if (typeof op1 === 'undefined' && typeof op2 === 'undefined') {\n        // end condition: both ops1 and ops2 have been processed\n        break;\n      }\n\n      if (isDelete(op1)) {\n        operation['delete'](op1);\n        op1 = ops1[i1++];\n        continue;\n      }\n      if (isInsert(op2)) {\n        operation.insert(op2);\n        op2 = ops2[i2++];\n        continue;\n      }\n\n      if (typeof op1 === 'undefined') {\n        throw new Error(\"Cannot compose operations: first operation is too short.\");\n      }\n      if (typeof op2 === 'undefined') {\n        throw new Error(\"Cannot compose operations: first operation is too long.\");\n      }\n\n      if (isRetain(op1) && isRetain(op2)) {\n        if (op1 > op2) {\n          operation.retain(op2);\n          op1 = op1 - op2;\n          op2 = ops2[i2++];\n        } else if (op1 === op2) {\n          operation.retain(op1);\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          operation.retain(op1);\n          op2 = op2 - op1;\n          op1 = ops1[i1++];\n        }\n      } else if (isInsert(op1) && isDelete(op2)) {\n        if (op1.length > -op2) {\n          op1 = op1.slice(-op2);\n          op2 = ops2[i2++];\n        } else if (op1.length === -op2) {\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          op2 = op2 + op1.length;\n          op1 = ops1[i1++];\n        }\n      } else if (isInsert(op1) && isRetain(op2)) {\n        if (op1.length > op2) {\n          operation.insert(op1.slice(0, op2));\n          op1 = op1.slice(op2);\n          op2 = ops2[i2++];\n        } else if (op1.length === op2) {\n          operation.insert(op1);\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          operation.insert(op1);\n          op2 = op2 - op1.length;\n          op1 = ops1[i1++];\n        }\n      } else if (isRetain(op1) && isDelete(op2)) {\n        if (op1 > -op2) {\n          operation['delete'](op2);\n          op1 = op1 + op2;\n          op2 = ops2[i2++];\n        } else if (op1 === -op2) {\n          operation['delete'](op2);\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          operation['delete'](op1);\n          op2 = op2 + op1;\n          op1 = ops1[i1++];\n        }\n      } else {\n        throw new Error(\n          \"This shouldn't happen: op1: \" +\n          JSON.stringify(op1) + \", op2: \" +\n          JSON.stringify(op2)\n        );\n      }\n    }\n    return operation;\n  };\n\n  function getSimpleOp (operation, fn) {\n    var ops = operation.ops;\n    var isRetain = TextOperation.isRetain;\n    switch (ops.length) {\n    case 1:\n      return ops[0];\n    case 2:\n      return isRetain(ops[0]) ? ops[1] : (isRetain(ops[1]) ? ops[0] : null);\n    case 3:\n      if (isRetain(ops[0]) && isRetain(ops[2])) { return ops[1]; }\n    }\n    return null;\n  }\n\n  function getStartIndex (operation) {\n    if (isRetain(operation.ops[0])) { return operation.ops[0]; }\n    return 0;\n  }\n\n  // When you use ctrl-z to undo your latest changes, you expect the program not\n  // to undo every single keystroke but to undo your last sentence you wrote at\n  // a stretch or the deletion you did by holding the backspace key down. This\n  // This can be implemented by composing operations on the undo stack. This\n  // method can help decide whether two operations should be composed. It\n  // returns true if the operations are consecutive insert operations or both\n  // operations delete text at the same position. You may want to include other\n  // factors like the time since the last change in your decision.\n  TextOperation.prototype.shouldBeComposedWith = function (other) {\n    if (this.isNoop() || other.isNoop()) { return true; }\n\n    var startA = getStartIndex(this), startB = getStartIndex(other);\n    var simpleA = getSimpleOp(this), simpleB = getSimpleOp(other);\n    if (!simpleA || !simpleB) { return false; }\n\n    if (isInsert(simpleA) && isInsert(simpleB)) {\n      return startA + simpleA.length === startB;\n    }\n\n    if (isDelete(simpleA) && isDelete(simpleB)) {\n      // there are two possibilities to delete: with backspace and with the\n      // delete key.\n      return (startB - simpleB === startA) || startA === startB;\n    }\n\n    return false;\n  };\n\n  // Decides whether two operations should be composed with each other\n  // if they were inverted, that is\n  // `shouldBeComposedWith(a, b) = shouldBeComposedWithInverted(b^{-1}, a^{-1})`.\n  TextOperation.prototype.shouldBeComposedWithInverted = function (other) {\n    if (this.isNoop() || other.isNoop()) { return true; }\n\n    var startA = getStartIndex(this), startB = getStartIndex(other);\n    var simpleA = getSimpleOp(this), simpleB = getSimpleOp(other);\n    if (!simpleA || !simpleB) { return false; }\n\n    if (isInsert(simpleA) && isInsert(simpleB)) {\n      return startA + simpleA.length === startB || startA === startB;\n    }\n\n    if (isDelete(simpleA) && isDelete(simpleB)) {\n      return startB - simpleB === startA;\n    }\n\n    return false;\n  };\n\n  // Transform takes two operations A and B that happened concurrently and\n  // produces two operations A' and B' (in an array) such that\n  // `apply(apply(S, A), B') = apply(apply(S, B), A')`. This function is the\n  // heart of OT.\n  TextOperation.transform = function (operation1, operation2) {\n    if (operation1.baseLength !== operation2.baseLength) {\n      throw new Error(\"Both operations have to have the same base length\");\n    }\n\n    var operation1prime = new TextOperation();\n    var operation2prime = new TextOperation();\n    var ops1 = operation1.ops, ops2 = operation2.ops;\n    var i1 = 0, i2 = 0;\n    var op1 = ops1[i1++], op2 = ops2[i2++];\n    while (true) {\n      // At every iteration of the loop, the imaginary cursor that both\n      // operation1 and operation2 have that operates on the input string must\n      // have the same position in the input string.\n\n      if (typeof op1 === 'undefined' && typeof op2 === 'undefined') {\n        // end condition: both ops1 and ops2 have been processed\n        break;\n      }\n\n      // next two cases: one or both ops are insert ops\n      // => insert the string in the corresponding prime operation, skip it in\n      // the other one. If both op1 and op2 are insert ops, prefer op1.\n      if (isInsert(op1)) {\n        operation1prime.insert(op1);\n        operation2prime.retain(op1.length);\n        op1 = ops1[i1++];\n        continue;\n      }\n      if (isInsert(op2)) {\n        operation1prime.retain(op2.length);\n        operation2prime.insert(op2);\n        op2 = ops2[i2++];\n        continue;\n      }\n\n      if (typeof op1 === 'undefined') {\n        throw new Error(\"Cannot compose operations: first operation is too short.\");\n      }\n      if (typeof op2 === 'undefined') {\n        throw new Error(\"Cannot compose operations: first operation is too long.\");\n      }\n\n      var minl;\n      if (isRetain(op1) && isRetain(op2)) {\n        // Simple case: retain/retain\n        if (op1 > op2) {\n          minl = op2;\n          op1 = op1 - op2;\n          op2 = ops2[i2++];\n        } else if (op1 === op2) {\n          minl = op2;\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          minl = op1;\n          op2 = op2 - op1;\n          op1 = ops1[i1++];\n        }\n        operation1prime.retain(minl);\n        operation2prime.retain(minl);\n      } else if (isDelete(op1) && isDelete(op2)) {\n        // Both operations delete the same string at the same position. We don't\n        // need to produce any operations, we just skip over the delete ops and\n        // handle the case that one operation deletes more than the other.\n        if (-op1 > -op2) {\n          op1 = op1 - op2;\n          op2 = ops2[i2++];\n        } else if (op1 === op2) {\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          op2 = op2 - op1;\n          op1 = ops1[i1++];\n        }\n      // next two cases: delete/retain and retain/delete\n      } else if (isDelete(op1) && isRetain(op2)) {\n        if (-op1 > op2) {\n          minl = op2;\n          op1 = op1 + op2;\n          op2 = ops2[i2++];\n        } else if (-op1 === op2) {\n          minl = op2;\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          minl = -op1;\n          op2 = op2 + op1;\n          op1 = ops1[i1++];\n        }\n        operation1prime['delete'](minl);\n      } else if (isRetain(op1) && isDelete(op2)) {\n        if (op1 > -op2) {\n          minl = -op2;\n          op1 = op1 + op2;\n          op2 = ops2[i2++];\n        } else if (op1 === -op2) {\n          minl = op1;\n          op1 = ops1[i1++];\n          op2 = ops2[i2++];\n        } else {\n          minl = op1;\n          op2 = op2 + op1;\n          op1 = ops1[i1++];\n        }\n        operation2prime['delete'](minl);\n      } else {\n        throw new Error(\"The two operations aren't compatible\");\n      }\n    }\n\n    return [operation1prime, operation2prime];\n  };\n\n  return TextOperation;\n\n}());\n\n// Export for CommonJS\nif (typeof module === 'object') {\n  module.exports = ot.TextOperation;\n}","// randomColor by David Merfield under the CC0 license\n// https://github.com/davidmerfield/randomColor/\n\n;(function(root, factory) {\n\n  // Support CommonJS\n  if (typeof exports === 'object') {\n    var randomColor = factory();\n\n    // Support NodeJS & Component, which allow module.exports to be a function\n    if (typeof module === 'object' && module && module.exports) {\n      exports = module.exports = randomColor;\n    }\n\n    // Support CommonJS 1.1.1 spec\n    exports.randomColor = randomColor;\n\n  // Support AMD\n  } else if (typeof define === 'function' && define.amd) {\n    define([], factory);\n\n  // Support vanilla script loading\n  } else {\n    root.randomColor = factory();\n  }\n\n}(this, function() {\n\n  // Seed to get repeatable colors\n  var seed = null;\n\n  // Shared color dictionary\n  var colorDictionary = {};\n\n  // Populate the color dictionary\n  loadColorBounds();\n\n  // check if a range is taken\n  var colorRanges = [];\n\n  var randomColor = function (options) {\n\n    options = options || {};\n\n    // Check if there is a seed and ensure it's an\n    // integer. Otherwise, reset the seed value.\n    if (options.seed !== undefined && options.seed !== null && options.seed === parseInt(options.seed, 10)) {\n      seed = options.seed;\n\n    // A string was passed as a seed\n    } else if (typeof options.seed === 'string') {\n      seed = stringToInteger(options.seed);\n\n    // Something was passed as a seed but it wasn't an integer or string\n    } else if (options.seed !== undefined && options.seed !== null) {\n      throw new TypeError('The seed value must be an integer or string');\n\n    // No seed, reset the value outside.\n    } else {\n      seed = null;\n    }\n\n    var H,S,B;\n\n    // Check if we need to generate multiple colors\n    if (options.count !== null && options.count !== undefined) {\n\n      var totalColors = options.count,\n          colors = [];\n      // Value false at index i means the range i is not taken yet.\n      for (var i = 0; i < options.count; i++) {\n        colorRanges.push(false)\n        }\n      options.count = null;\n\n      while (totalColors > colors.length) {\n\n        var color = randomColor(options);\n\n        if (seed !== null) {\n          options.seed = seed;\n        }\n\n        colors.push(color);\n      }\n\n      options.count = totalColors;\n\n      return colors;\n    }\n\n    // First we pick a hue (H)\n    H = pickHue(options);\n\n    // Then use H to determine saturation (S)\n    S = pickSaturation(H, options);\n\n    // Then use S and H to determine brightness (B).\n    B = pickBrightness(H, S, options);\n\n    // Then we return the HSB color in the desired format\n    return setFormat([H,S,B], options);\n  };\n\n  function pickHue(options) {\n    if (colorRanges.length > 0) {\n      var hueRange = getRealHueRange(options.hue)\n\n      var hue = randomWithin(hueRange)\n\n      //Each of colorRanges.length ranges has a length equal approximatelly one step\n      var step = (hueRange[1] - hueRange[0]) / colorRanges.length\n\n      var j = parseInt((hue - hueRange[0]) / step)\n\n      //Check if the range j is taken\n      if (colorRanges[j] === true) {\n        j = (j + 2) % colorRanges.length\n      }\n      else {\n        colorRanges[j] = true\n           }\n\n      var min = (hueRange[0] + j * step) % 359,\n          max = (hueRange[0] + (j + 1) * step) % 359;\n\n      hueRange = [min, max]\n\n      hue = randomWithin(hueRange)\n\n      if (hue < 0) {hue = 360 + hue;}\n      return hue\n    }\n    else {\n      var hueRange = getHueRange(options.hue)\n\n      hue = randomWithin(hueRange);\n      // Instead of storing red as two seperate ranges,\n      // we group them, using negative numbers\n      if (hue < 0) {\n        hue = 360 + hue;\n      }\n\n      return hue;\n    }\n  }\n\n  function pickSaturation (hue, options) {\n\n    if (options.hue === 'monochrome') {\n      return 0;\n    }\n\n    if (options.luminosity === 'random') {\n      return randomWithin([0,100]);\n    }\n\n    var saturationRange = getSaturationRange(hue);\n\n    var sMin = saturationRange[0],\n        sMax = saturationRange[1];\n\n    switch (options.luminosity) {\n\n      case 'bright':\n        sMin = 55;\n        break;\n\n      case 'dark':\n        sMin = sMax - 10;\n        break;\n\n      case 'light':\n        sMax = 55;\n        break;\n   }\n\n    return randomWithin([sMin, sMax]);\n\n  }\n\n  function pickBrightness (H, S, options) {\n\n    var bMin = getMinimumBrightness(H, S),\n        bMax = 100;\n\n    switch (options.luminosity) {\n\n      case 'dark':\n        bMax = bMin + 20;\n        break;\n\n      case 'light':\n        bMin = (bMax + bMin)/2;\n        break;\n\n      case 'random':\n        bMin = 0;\n        bMax = 100;\n        break;\n    }\n\n    return randomWithin([bMin, bMax]);\n  }\n\n  function setFormat (hsv, options) {\n\n    switch (options.format) {\n\n      case 'hsvArray':\n        return hsv;\n\n      case 'hslArray':\n        return HSVtoHSL(hsv);\n\n      case 'hsl':\n        var hsl = HSVtoHSL(hsv);\n        return 'hsl('+hsl[0]+', '+hsl[1]+'%, '+hsl[2]+'%)';\n\n      case 'hsla':\n        var hslColor = HSVtoHSL(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'hsla('+hslColor[0]+', '+hslColor[1]+'%, '+hslColor[2]+'%, ' + alpha + ')';\n\n      case 'rgbArray':\n        return HSVtoRGB(hsv);\n\n      case 'rgb':\n        var rgb = HSVtoRGB(hsv);\n        return 'rgb(' + rgb.join(', ') + ')';\n\n      case 'rgba':\n        var rgbColor = HSVtoRGB(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'rgba(' + rgbColor.join(', ') + ', ' + alpha + ')';\n\n      default:\n        return HSVtoHex(hsv);\n    }\n\n  }\n\n  function getMinimumBrightness(H, S) {\n\n    var lowerBounds = getColorInfo(H).lowerBounds;\n\n    for (var i = 0; i < lowerBounds.length - 1; i++) {\n\n      var s1 = lowerBounds[i][0],\n          v1 = lowerBounds[i][1];\n\n      var s2 = lowerBounds[i+1][0],\n          v2 = lowerBounds[i+1][1];\n\n      if (S >= s1 && S <= s2) {\n\n         var m = (v2 - v1)/(s2 - s1),\n             b = v1 - m*s1;\n\n         return m*S + b;\n      }\n\n    }\n\n    return 0;\n  }\n\n  function getHueRange (colorInput) {\n\n    if (typeof parseInt(colorInput) === 'number') {\n\n      var number = parseInt(colorInput);\n\n      if (number < 360 && number > 0) {\n        return [number, number];\n      }\n\n    }\n\n    if (typeof colorInput === 'string') {\n\n      if (colorDictionary[colorInput]) {\n        var color = colorDictionary[colorInput];\n        if (color.hueRange) {return color.hueRange;}\n      } else if (colorInput.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorInput)[0];\n        return [ hue, hue ];\n      }\n    }\n\n    return [0,360];\n\n  }\n\n  function getSaturationRange (hue) {\n    return getColorInfo(hue).saturationRange;\n  }\n\n  function getColorInfo (hue) {\n\n    // Maps red colors to make picking hue easier\n    if (hue >= 334 && hue <= 360) {\n      hue-= 360;\n    }\n\n    for (var colorName in colorDictionary) {\n       var color = colorDictionary[colorName];\n       if (color.hueRange &&\n           hue >= color.hueRange[0] &&\n           hue <= color.hueRange[1]) {\n          return colorDictionary[colorName];\n       }\n    } return 'Color not found';\n  }\n\n  function randomWithin (range) {\n    if (seed === null) {\n      //generate random evenly destinct number from : https://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/\n      var golden_ratio = 0.618033988749895\n      var r=Math.random()\n      r += golden_ratio\n      r %= 1\n      return Math.floor(range[0] + r*(range[1] + 1 - range[0]));\n    } else {\n      //Seeded random algorithm from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n      var max = range[1] || 1;\n      var min = range[0] || 0;\n      seed = (seed * 9301 + 49297) % 233280;\n      var rnd = seed / 233280.0;\n      return Math.floor(min + rnd * (max - min));\n}\n  }\n\n  function HSVtoHex (hsv){\n\n    var rgb = HSVtoRGB(hsv);\n\n    function componentToHex(c) {\n        var hex = c.toString(16);\n        return hex.length == 1 ? '0' + hex : hex;\n    }\n\n    var hex = '#' + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);\n\n    return hex;\n\n  }\n\n  function defineColor (name, hueRange, lowerBounds) {\n\n    var sMin = lowerBounds[0][0],\n        sMax = lowerBounds[lowerBounds.length - 1][0],\n\n        bMin = lowerBounds[lowerBounds.length - 1][1],\n        bMax = lowerBounds[0][1];\n\n    colorDictionary[name] = {\n      hueRange: hueRange,\n      lowerBounds: lowerBounds,\n      saturationRange: [sMin, sMax],\n      brightnessRange: [bMin, bMax]\n    };\n\n  }\n\n  function loadColorBounds () {\n\n    defineColor(\n      'monochrome',\n      null,\n      [[0,0],[100,0]]\n    );\n\n    defineColor(\n      'red',\n      [-26,18],\n      [[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]\n    );\n\n    defineColor(\n      'orange',\n      [18,46],\n      [[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]\n    );\n\n    defineColor(\n      'yellow',\n      [46,62],\n      [[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]\n    );\n\n    defineColor(\n      'green',\n      [62,178],\n      [[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]\n    );\n\n    defineColor(\n      'blue',\n      [178, 257],\n      [[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]\n    );\n\n    defineColor(\n      'purple',\n      [257, 282],\n      [[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]\n    );\n\n    defineColor(\n      'pink',\n      [282, 334],\n      [[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]\n    );\n\n  }\n\n  function HSVtoRGB (hsv) {\n\n    // this doesn't work for the values of 0 and 360\n    // here's the hacky fix\n    var h = hsv[0];\n    if (h === 0) {h = 1;}\n    if (h === 360) {h = 359;}\n\n    // Rebase the h,s,v values\n    h = h/360;\n    var s = hsv[1]/100,\n        v = hsv[2]/100;\n\n    var h_i = Math.floor(h*6),\n      f = h * 6 - h_i,\n      p = v * (1 - s),\n      q = v * (1 - f*s),\n      t = v * (1 - (1 - f)*s),\n      r = 256,\n      g = 256,\n      b = 256;\n\n    switch(h_i) {\n      case 0: r = v; g = t; b = p;  break;\n      case 1: r = q; g = v; b = p;  break;\n      case 2: r = p; g = v; b = t;  break;\n      case 3: r = p; g = q; b = v;  break;\n      case 4: r = t; g = p; b = v;  break;\n      case 5: r = v; g = p; b = q;  break;\n    }\n\n    var result = [Math.floor(r*255), Math.floor(g*255), Math.floor(b*255)];\n    return result;\n  }\n\n  function HexToHSB (hex) {\n    hex = hex.replace(/^#/, '');\n    hex = hex.length === 3 ? hex.replace(/(.)/g, '$1$1') : hex;\n\n    var red = parseInt(hex.substr(0, 2), 16) / 255,\n          green = parseInt(hex.substr(2, 2), 16) / 255,\n          blue = parseInt(hex.substr(4, 2), 16) / 255;\n\n    var cMax = Math.max(red, green, blue),\n          delta = cMax - Math.min(red, green, blue),\n          saturation = cMax ? (delta / cMax) : 0;\n\n    switch (cMax) {\n      case red: return [ 60 * (((green - blue) / delta) % 6) || 0, saturation, cMax ];\n      case green: return [ 60 * (((blue - red) / delta) + 2) || 0, saturation, cMax ];\n      case blue: return [ 60 * (((red - green) / delta) + 4) || 0, saturation, cMax ];\n    }\n  }\n\n  function HSVtoHSL (hsv) {\n    var h = hsv[0],\n      s = hsv[1]/100,\n      v = hsv[2]/100,\n      k = (2-s)*v;\n\n    return [\n      h,\n      Math.round(s*v / (k<1 ? k : 2-k) * 10000) / 100,\n      k/2 * 100\n    ];\n  }\n\n  function stringToInteger (string) {\n    var total = 0\n    for (var i = 0; i !== string.length; i++) {\n      if (total >= Number.MAX_SAFE_INTEGER) break;\n      total += string.charCodeAt(i)\n    }\n    return total\n  }\n\n  // get The range of given hue when options.count!=0\n  function getRealHueRange(colorHue)\n  { if (!isNaN(colorHue)) {\n    var number = parseInt(colorHue);\n\n    if (number < 360 && number > 0) {\n      return getColorInfo(colorHue).hueRange\n    }\n  }\n    else if (typeof colorHue === 'string') {\n\n      if (colorDictionary[colorHue]) {\n        var color = colorDictionary[colorHue];\n\n        if (color.hueRange) {\n          return color.hueRange\n       }\n    } else if (colorHue.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorHue)[0]\n        return getColorInfo(hue).hueRange\n    }\n  }\n\n    return [0,360]\n}\n  return randomColor;\n}));\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n","/* eslint-env browser, jquery */\n/* global _ */\n// Inject line numbers for sync scroll.\n\nimport markdownitContainer from 'markdown-it-container'\n\nimport { md } from '../extra'\nimport modeType from './modeType'\nimport appState from './appState'\n\nfunction addPart (tokens, idx) {\n  if (tokens[idx].map && tokens[idx].level === 0) {\n    const startline = tokens[idx].map[0] + 1\n    const endline = tokens[idx].map[1]\n    tokens[idx].attrJoin('class', 'part')\n    tokens[idx].attrJoin('data-startline', startline)\n    tokens[idx].attrJoin('data-endline', endline)\n  }\n}\n\nmd.renderer.rules.blockquote_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.table_open = function (tokens, idx, options, env, self) {\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.bullet_list_open = function (tokens, idx, options, env, self) {\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.list_item_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  if (tokens[idx].map) {\n    const startline = tokens[idx].map[0] + 1\n    const endline = tokens[idx].map[1]\n    tokens[idx].attrJoin('data-startline', startline)\n    tokens[idx].attrJoin('data-endline', endline)\n  }\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.ordered_list_open = function (tokens, idx, options, env, self) {\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.paragraph_open = function (tokens, idx, options, env, self) {\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.heading_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.fence = (tokens, idx, options, env, self) => {\n  const token = tokens[idx]\n  const info = token.info ? md.utils.unescapeAll(token.info).trim() : ''\n  let langName = ''\n  let highlighted\n\n  if (info) {\n    langName = info.split(/\\s+/g)[0]\n    if (/!$/.test(info)) token.attrJoin('class', 'wrap')\n    token.attrJoin('class', options.langPrefix + langName.replace(/=$|=\\d+$|=\\+$|!$|=!/, ''))\n    token.attrJoin('class', 'hljs')\n    token.attrJoin('class', 'raw')\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName) || md.utils.escapeHtml(token.content)\n  } else {\n    highlighted = md.utils.escapeHtml(token.content)\n  }\n\n  if (highlighted.indexOf('<pre') === 0) {\n    return `${highlighted}\\n`\n  }\n\n  if (tokens[idx].map && tokens[idx].level === 0) {\n    const startline = tokens[idx].map[0] + 1\n    const endline = tokens[idx].map[1]\n    return `<pre class=\"part\" data-startline=\"${startline}\" data-endline=\"${endline}\"><code${self.renderAttrs(token)}>${highlighted}</code></pre>\\n`\n  }\n\n  return `<pre><code${self.renderAttrs(token)}>${highlighted}</code></pre>\\n`\n}\nmd.renderer.rules.code_block = (tokens, idx, options, env, self) => {\n  if (tokens[idx].map && tokens[idx].level === 0) {\n    const startline = tokens[idx].map[0] + 1\n    const endline = tokens[idx].map[1]\n    return `<pre class=\"part\" data-startline=\"${startline}\" data-endline=\"${endline}\"><code>${md.utils.escapeHtml(tokens[idx].content)}</code></pre>\\n`\n  }\n  return `<pre><code>${md.utils.escapeHtml(tokens[idx].content)}</code></pre>\\n`\n}\nfunction renderContainer (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('role', 'alert')\n  tokens[idx].attrJoin('class', 'alert')\n  tokens[idx].attrJoin('class', `alert-${tokens[idx].info.trim()}`)\n  addPart(tokens, idx)\n  return self.renderToken(...arguments)\n}\n\nmd.use(markdownitContainer, 'success', { render: renderContainer })\nmd.use(markdownitContainer, 'info', { render: renderContainer })\nmd.use(markdownitContainer, 'warning', { render: renderContainer })\nmd.use(markdownitContainer, 'danger', { render: renderContainer })\n\nwindow.preventSyncScrollToEdit = false\nwindow.preventSyncScrollToView = false\n\nconst editScrollThrottle = 5\nconst viewScrollThrottle = 5\nconst buildMapThrottle = 100\n\nlet viewScrolling = false\nlet editScrolling = false\n\nlet editArea = null\nlet viewArea = null\nlet markdownArea = null\n\nlet editor\n\nexport function setupSyncAreas (edit, view, markdown, _editor) {\n  editArea = edit\n  viewArea = view\n  markdownArea = markdown\n\n  editor = _editor\n\n  editArea.on('scroll', _.throttle(syncScrollToView, editScrollThrottle))\n  viewArea.on('scroll', _.throttle(syncScrollToEdit, viewScrollThrottle))\n}\n\nlet scrollMap, lineHeightMap, viewTop, viewBottom\n\nexport function clearMap () {\n  scrollMap = null\n  lineHeightMap = null\n  viewTop = null\n  viewBottom = null\n}\nwindow.viewAjaxCallback = clearMap\n\nconst buildMap = _.throttle(buildMapInner, buildMapThrottle)\n\n// Build offsets for each line (lines can be wrapped)\n// That's a bit dirty to process each line everytime, but ok for demo.\n// Optimizations are required only for big texts.\nfunction buildMapInner (callback) {\n  if (!viewArea || !markdownArea) return\n  let i, pos, a, b, acc\n\n  const offset = viewArea.scrollTop() - viewArea.offset().top\n  const _scrollMap = []\n  const nonEmptyList = []\n  const _lineHeightMap = []\n  viewTop = 0\n  viewBottom = viewArea[0].scrollHeight - viewArea.height()\n\n  acc = 0\n  const lines = editor.getValue().split('\\n')\n  const lineHeight = editor.defaultTextHeight()\n  for (i = 0; i < lines.length; i++) {\n    const str = lines[i]\n\n    _lineHeightMap.push(acc)\n\n    if (str.length === 0) {\n      acc++\n      continue\n    }\n\n    const h = editor.heightAtLine(i + 1) - editor.heightAtLine(i)\n    acc += Math.round(h / lineHeight)\n  }\n  _lineHeightMap.push(acc)\n  const linesCount = acc\n\n  for (i = 0; i < linesCount; i++) {\n    _scrollMap.push(-1)\n  }\n\n  nonEmptyList.push(0)\n  // make the first line go top\n  _scrollMap[0] = viewTop\n\n  const parts = markdownArea.find('.part').toArray()\n  for (i = 0; i < parts.length; i++) {\n    const $el = $(parts[i])\n    let t = $el.attr('data-startline') - 1\n    if (t === '') {\n      return\n    }\n    t = _lineHeightMap[t]\n    if (t !== 0 && t !== nonEmptyList[nonEmptyList.length - 1]) {\n      nonEmptyList.push(t)\n    }\n    _scrollMap[t] = Math.round($el.offset().top + offset - 10)\n  }\n\n  nonEmptyList.push(linesCount)\n  _scrollMap[linesCount] = viewArea[0].scrollHeight\n\n  pos = 0\n  for (i = 1; i < linesCount; i++) {\n    if (_scrollMap[i] !== -1) {\n      pos++\n      continue\n    }\n\n    a = nonEmptyList[pos]\n    b = nonEmptyList[pos + 1]\n    _scrollMap[i] = Math.round((_scrollMap[b] * (i - a) + _scrollMap[a] * (b - i)) / (b - a))\n  }\n\n  _scrollMap[0] = 0\n\n  scrollMap = _scrollMap\n  lineHeightMap = _lineHeightMap\n\n  if (window.loaded && callback) callback()\n}\n\n// sync view scroll progress to edit\nlet viewScrollingTimer = null\n\nexport function syncScrollToEdit (event, preventAnimate) {\n  if (appState.currentMode !== modeType.both || !appState.syncscroll || !editArea) return\n  if (window.preventSyncScrollToEdit) {\n    if (typeof window.preventSyncScrollToEdit === 'number') {\n      window.preventSyncScrollToEdit--\n    } else {\n      window.preventSyncScrollToEdit = false\n    }\n    return\n  }\n  if (!scrollMap || !lineHeightMap) {\n    buildMap(() => {\n      syncScrollToEdit(event, preventAnimate)\n    })\n    return\n  }\n  if (editScrolling) return\n\n  const scrollTop = viewArea[0].scrollTop\n  let lineIndex = 0\n  for (let i = 0, l = scrollMap.length; i < l; i++) {\n    if (scrollMap[i] > scrollTop) {\n      break\n    } else {\n      lineIndex = i\n    }\n  }\n  let lineNo = 0\n  let lineDiff = 0\n  for (let i = 0, l = lineHeightMap.length; i < l; i++) {\n    if (lineHeightMap[i] > lineIndex) {\n      break\n    } else {\n      lineNo = lineHeightMap[i]\n      lineDiff = lineHeightMap[i + 1] - lineNo\n    }\n  }\n\n  let posTo = 0\n  let topDiffPercent = 0\n  let posToNextDiff = 0\n  const scrollInfo = editor.getScrollInfo()\n  const textHeight = editor.defaultTextHeight()\n  const preLastLineHeight = scrollInfo.height - scrollInfo.clientHeight - textHeight\n  const preLastLineNo = Math.round(preLastLineHeight / textHeight)\n  const preLastLinePos = scrollMap[preLastLineNo]\n\n  if (scrollInfo.height > scrollInfo.clientHeight && scrollTop >= preLastLinePos) {\n    posTo = preLastLineHeight\n    topDiffPercent = (scrollTop - preLastLinePos) / (viewBottom - preLastLinePos)\n    posToNextDiff = textHeight * topDiffPercent\n    posTo += Math.ceil(posToNextDiff)\n  } else {\n    posTo = lineNo * textHeight\n    topDiffPercent = (scrollTop - scrollMap[lineNo]) / (scrollMap[lineNo + lineDiff] - scrollMap[lineNo])\n    posToNextDiff = textHeight * lineDiff * topDiffPercent\n    posTo += Math.ceil(posToNextDiff)\n  }\n\n  let duration = 0\n  if (preventAnimate) {\n    editArea.scrollTop(posTo)\n  } else {\n    const posDiff = Math.abs(scrollInfo.top - posTo)\n    duration = posDiff / 50\n    duration = duration >= 100 ? duration : 100\n    editArea.stop(true, true).animate({\n      scrollTop: posTo\n    }, duration, 'linear')\n  }\n\n  viewScrolling = true\n  clearTimeout(viewScrollingTimer)\n  viewScrollingTimer = setTimeout(viewScrollingTimeoutInner, duration * 1.5)\n}\n\nfunction viewScrollingTimeoutInner () {\n  viewScrolling = false\n}\n\n// sync edit scroll progress to view\nlet editScrollingTimer = null\n\nexport function syncScrollToView (event, preventAnimate) {\n  if (appState.currentMode !== modeType.both || !appState.syncscroll || !viewArea) return\n  if (window.preventSyncScrollToView) {\n    if (typeof preventSyncScrollToView === 'number') {\n      window.preventSyncScrollToView--\n    } else {\n      window.preventSyncScrollToView = false\n    }\n    return\n  }\n  if (!scrollMap || !lineHeightMap) {\n    buildMap(() => {\n      syncScrollToView(event, preventAnimate)\n    })\n    return\n  }\n  if (viewScrolling) return\n\n  let posTo\n  let topDiffPercent, posToNextDiff\n  const scrollInfo = editor.getScrollInfo()\n  const textHeight = editor.defaultTextHeight()\n  const lineNo = Math.floor(scrollInfo.top / textHeight)\n  // if reach the last line, will start lerp to the bottom\n  const diffToBottom = (scrollInfo.top + scrollInfo.clientHeight) - (scrollInfo.height - textHeight)\n  if (scrollInfo.height > scrollInfo.clientHeight && diffToBottom > 0) {\n    topDiffPercent = diffToBottom / textHeight\n    posTo = scrollMap[lineNo + 1]\n    posToNextDiff = (viewBottom - posTo) * topDiffPercent\n    posTo += Math.floor(posToNextDiff)\n  } else {\n    topDiffPercent = (scrollInfo.top % textHeight) / textHeight\n    posTo = scrollMap[lineNo]\n    posToNextDiff = (scrollMap[lineNo + 1] - posTo) * topDiffPercent\n    posTo += Math.floor(posToNextDiff)\n  }\n\n  let duration = 0\n  if (preventAnimate) {\n    viewArea.scrollTop(posTo)\n  } else {\n    const posDiff = Math.abs(viewArea.scrollTop() - posTo)\n    duration = posDiff / 50\n    duration = duration >= 100 ? duration : 100\n    viewArea.stop(true, true).animate({\n      scrollTop: posTo\n    }, duration, 'linear')\n  }\n\n  editScrolling = true\n  clearTimeout(editScrollingTimer)\n  editScrollingTimer = setTimeout(editScrollingTimeoutInner, duration * 1.5)\n}\n\nfunction editScrollingTimeoutInner () {\n  editScrolling = false\n}\n","import 'codemirror/keymap/sublime'\nimport 'codemirror/keymap/emacs'\nimport 'codemirror/keymap/vim'\nimport 'codemirror/mode/gfm/gfm'\nimport 'codemirror/addon/mode/overlay.js'\nimport 'codemirror/addon/mode/simple.js'\nimport 'codemirror/addon/mode/multiplex.js'\nimport 'codemirror/addon/selection/active-line.js'\nimport 'codemirror/addon/search/searchcursor.js'\nimport 'codemirror/addon/search/search.js'\nimport 'codemirror/addon/search/jump-to-line.js'\nimport 'codemirror/addon/search/matchesonscrollbar.js'\nimport 'codemirror/addon/search/match-highlighter.js'\nimport 'codemirror/addon/scroll/simplescrollbars.js'\nimport 'codemirror/addon/scroll/annotatescrollbar.js'\nimport 'codemirror/addon/display/panel.js'\nimport 'codemirror/addon/display/placeholder.js'\nimport 'codemirror/addon/display/fullscreen.js'\nimport 'codemirror/addon/display/autorefresh.js'\nimport 'codemirror/addon/dialog/dialog.js'\nimport 'codemirror/addon/edit/matchbrackets.js'\nimport 'codemirror/addon/edit/closebrackets.js'\nimport 'codemirror/addon/edit/matchtags.js'\nimport 'codemirror/addon/edit/closetag.js'\nimport 'codemirror/addon/edit/continuelist.js'\nimport 'codemirror/addon/comment/comment.js'\nimport 'codemirror/addon/comment/continuecomment.js'\nimport 'codemirror/addon/wrap/hardwrap.js'\nimport 'codemirror/addon/fold/foldcode.js'\nimport 'codemirror/addon/fold/brace-fold.js'\nimport 'codemirror/addon/fold/foldgutter.js'\nimport 'codemirror/addon/fold/markdown-fold.js'\nimport 'codemirror/addon/fold/xml-fold.js'\nimport 'codemirror/addon/merge/merge.js'\nimport '../../../vendor/codemirror-spell-checker/spell-checker.min.js'\n\nimport '../../../vendor/inlineAttachment/inline-attachment'\nimport '../../../vendor/inlineAttachment/codemirror.inline-attachment'\n\nimport * as utils from './utils'\nimport config from './config'\nimport statusBarTemplate from './statusbar.html'\nimport toolBarTemplate from './toolbar.html'\n\nimport '../../../css/ui/toolbar.css'\n\n/* config section */\nconst isMac = CodeMirror.keyMap.default === CodeMirror.keyMap.macDefault\nconst defaultEditorMode = 'gfm'\nconst viewportMargin = 20\n\nconst jumpToAddressBarKeymapName = isMac ? 'Cmd-L' : 'Ctrl-L'\n\nexport default class Editor {\n  constructor () {\n    this.editor = null\n    this.jumpToAddressBarKeymapValue = null\n    this.defaultExtraKeys = {\n      F10: function (cm) {\n        cm.setOption('fullScreen', !cm.getOption('fullScreen'))\n      },\n      Esc: function (cm) {\n        if (cm.getOption('fullScreen') && !(cm.getOption('keyMap').substr(0, 3) === 'vim')) {\n          cm.setOption('fullScreen', false)\n        } else {\n          return CodeMirror.Pass\n        }\n      },\n      'Cmd-S': function () {\n        return false\n      },\n      'Ctrl-S': function () {\n        return false\n      },\n      Enter: 'newlineAndIndentContinueMarkdownList',\n      Tab: function (cm) {\n        const tab = '\\t'\n\n        // contruct x length spaces\n        const spaces = Array(parseInt(cm.getOption('indentUnit')) + 1).join(' ')\n\n        // auto indent whole line when in list or blockquote\n        const cursor = cm.getCursor()\n        const line = cm.getLine(cursor.line)\n\n        // this regex match the following patterns\n        // 1. blockquote starts with \"> \" or \">>\"\n        // 2. unorder list starts with *+-\n        // 3. order list starts with \"1.\" or \"1)\"\n        const regex = /^(\\s*)(>[> ]*|[*+-]\\s|(\\d+)([.)]))/\n\n        let match\n        const multiple = cm.getSelection().split('\\n').length > 1 ||\n          cm.getSelections().length > 1\n\n        if (multiple) {\n          cm.execCommand('defaultTab')\n        } else if ((match = regex.exec(line)) !== null) {\n          const ch = match[1].length\n          const pos = {\n            line: cursor.line,\n            ch: ch\n          }\n          if (cm.getOption('indentWithTabs')) {\n            cm.replaceRange(tab, pos, pos, '+input')\n          } else {\n            cm.replaceRange(spaces, pos, pos, '+input')\n          }\n        } else {\n          if (cm.getOption('indentWithTabs')) {\n            cm.execCommand('defaultTab')\n          } else {\n            cm.replaceSelection(spaces)\n          }\n        }\n      },\n      'Cmd-Left': 'goLineLeftSmart',\n      'Cmd-Right': 'goLineRight',\n      Home: 'goLineLeftSmart',\n      End: 'goLineRight',\n      'Ctrl-C': function (cm) {\n        if (!isMac && cm.getOption('keyMap').substr(0, 3) === 'vim') {\n          document.execCommand('copy')\n        } else {\n          return CodeMirror.Pass\n        }\n      },\n      'Ctrl-*': cm => {\n        utils.wrapTextWith(this.editor, cm, '*')\n      },\n      'Shift-Ctrl-8': cm => {\n        utils.wrapTextWith(this.editor, cm, '*')\n      },\n      'Ctrl-_': cm => {\n        utils.wrapTextWith(this.editor, cm, '_')\n      },\n      'Shift-Ctrl--': cm => {\n        utils.wrapTextWith(this.editor, cm, '_')\n      },\n      'Ctrl-~': cm => {\n        utils.wrapTextWith(this.editor, cm, '~')\n      },\n      'Shift-Ctrl-`': cm => {\n        utils.wrapTextWith(this.editor, cm, '~')\n      },\n      'Ctrl-^': cm => {\n        utils.wrapTextWith(this.editor, cm, '^')\n      },\n      'Shift-Ctrl-6': cm => {\n        utils.wrapTextWith(this.editor, cm, '^')\n      },\n      'Ctrl-+': cm => {\n        utils.wrapTextWith(this.editor, cm, '+')\n      },\n      'Shift-Ctrl-=': cm => {\n        utils.wrapTextWith(this.editor, cm, '+')\n      },\n      'Ctrl-=': cm => {\n        utils.wrapTextWith(this.editor, cm, '=')\n      },\n      'Shift-Ctrl-Backspace': cm => {\n        utils.wrapTextWith(this.editor, cm, 'Backspace')\n      }\n    }\n    this.eventListeners = {}\n    this.config = config\n  }\n\n  on (event, cb) {\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [cb]\n    } else {\n      this.eventListeners[event].push(cb)\n    }\n\n    this.editor.on(event, (...args) => {\n      this.eventListeners[event].forEach(cb => cb.bind(this)(...args))\n    })\n  }\n\n  addToolBar () {\n    const inlineAttach = inlineAttachment.editors.codemirror4.attach(this.editor)\n    this.toolBar = $(toolBarTemplate)\n    this.toolbarPanel = this.editor.addPanel(this.toolBar[0], {\n      position: 'top'\n    })\n\n    const makeBold = $('#makeBold')\n    const makeItalic = $('#makeItalic')\n    const makeStrike = $('#makeStrike')\n    const makeHeader = $('#makeHeader')\n    const makeCode = $('#makeCode')\n    const makeQuote = $('#makeQuote')\n    const makeGenericList = $('#makeGenericList')\n    const makeOrderedList = $('#makeOrderedList')\n    const makeCheckList = $('#makeCheckList')\n    const makeLink = $('#makeLink')\n    const makeImage = $('#makeImage')\n    const makeTable = $('#makeTable')\n    const makeLine = $('#makeLine')\n    const makeComment = $('#makeComment')\n    const uploadImage = $('#uploadImage')\n\n    makeBold.click(() => {\n      utils.wrapTextWith(this.editor, this.editor, '**')\n      this.editor.focus()\n    })\n\n    makeItalic.click(() => {\n      utils.wrapTextWith(this.editor, this.editor, '*')\n      this.editor.focus()\n    })\n\n    makeStrike.click(() => {\n      utils.wrapTextWith(this.editor, this.editor, '~~')\n      this.editor.focus()\n    })\n\n    makeHeader.click(() => {\n      utils.insertHeader(this.editor)\n    })\n\n    makeCode.click(() => {\n      utils.wrapTextWith(this.editor, this.editor, '```')\n      this.editor.focus()\n    })\n\n    makeQuote.click(() => {\n      utils.insertOnStartOfLines(this.editor, '> ')\n    })\n\n    makeGenericList.click(() => {\n      utils.insertOnStartOfLines(this.editor, '* ')\n    })\n\n    makeOrderedList.click(() => {\n      utils.insertOnStartOfLines(this.editor, '1. ')\n    })\n\n    makeCheckList.click(() => {\n      utils.insertOnStartOfLines(this.editor, '- [ ] ')\n    })\n\n    makeLink.click(() => {\n      utils.insertLink(this.editor, false)\n    })\n\n    makeImage.click(() => {\n      utils.insertLink(this.editor, true)\n    })\n\n    makeTable.click(() => {\n      utils.insertText(this.editor, '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n')\n    })\n\n    makeLine.click(() => {\n      utils.insertText(this.editor, '\\n----\\n')\n    })\n\n    makeComment.click(() => {\n      utils.insertText(this.editor, '> []')\n    })\n\n    uploadImage.bind('change', function (e) {\n      const files = e.target.files || e.dataTransfer.files\n      e.dataTransfer = {}\n      e.dataTransfer.files = files\n      inlineAttach.onDrop(e)\n    })\n  }\n\n  addStatusBar () {\n    this.statusBar = $(statusBarTemplate)\n    this.statusCursor = this.statusBar.find('.status-cursor > .status-line-column')\n    this.statusSelection = this.statusBar.find('.status-cursor > .status-selection')\n    this.statusFile = this.statusBar.find('.status-file')\n    this.statusIndicators = this.statusBar.find('.status-indicators')\n    this.statusIndent = this.statusBar.find('.status-indent')\n    this.statusKeymap = this.statusBar.find('.status-keymap')\n    this.statusLength = this.statusBar.find('.status-length')\n    this.statusTheme = this.statusBar.find('.status-theme')\n    this.statusSpellcheck = this.statusBar.find('.status-spellcheck')\n    this.statusPreferences = this.statusBar.find('.status-preferences')\n    this.statusPanel = this.editor.addPanel(this.statusBar[0], {\n      position: 'bottom'\n    })\n\n    this.setIndent()\n    this.setKeymap()\n    this.setTheme()\n    this.setSpellcheck()\n    this.setPreferences()\n  }\n\n  updateStatusBar () {\n    if (!this.statusBar) return\n\n    const cursor = this.editor.getCursor()\n    const cursorText = 'Line ' + (cursor.line + 1) + ', Columns ' + (cursor.ch + 1)\n    this.statusCursor.text(cursorText)\n    const fileText = '  ' + editor.lineCount() + ' Lines'\n    this.statusFile.text(fileText)\n    const docLength = editor.getValue().length\n    this.statusLength.text('Length ' + docLength)\n    if (docLength > (config.docmaxlength * 0.95)) {\n      this.statusLength.css('color', 'red')\n      this.statusLength.attr('title', 'You have almost reached the limit for this document.')\n    } else if (docLength > (config.docmaxlength * 0.8)) {\n      this.statusLength.css('color', 'orange')\n      this.statusLength.attr('title', 'This document is nearly full, consider splitting it or creating a new one.')\n    } else {\n      this.statusLength.css('color', 'white')\n      this.statusLength.attr('title', 'You can write up to ' + config.docmaxlength + ' characters in this document.')\n    }\n  }\n\n  setIndent () {\n    const cookieIndentType = Cookies.get('indent_type')\n    let cookieTabSize = parseInt(Cookies.get('tab_size'))\n    let cookieSpaceUnits = parseInt(Cookies.get('space_units'))\n    if (cookieIndentType) {\n      if (cookieIndentType === 'tab') {\n        this.editor.setOption('indentWithTabs', true)\n        if (cookieTabSize) {\n          this.editor.setOption('indentUnit', cookieTabSize)\n        }\n      } else if (cookieIndentType === 'space') {\n        this.editor.setOption('indentWithTabs', false)\n        if (cookieSpaceUnits) {\n          this.editor.setOption('indentUnit', cookieSpaceUnits)\n        }\n      }\n    }\n    if (cookieTabSize) {\n      this.editor.setOption('tabSize', cookieTabSize)\n    }\n\n    const type = this.statusIndicators.find('.indent-type')\n    const widthLabel = this.statusIndicators.find('.indent-width-label')\n    const widthInput = this.statusIndicators.find('.indent-width-input')\n\n    const setType = () => {\n      if (this.editor.getOption('indentWithTabs')) {\n        Cookies.set('indent_type', 'tab', {\n          expires: 365,\n          sameSite: window.cookiePolicy,\n          secure: window.location.protocol === 'https:'\n        })\n        type.text('Tab Size:')\n      } else {\n        Cookies.set('indent_type', 'space', {\n          expires: 365,\n          sameSite: window.cookiePolicy,\n          secure: window.location.protocol === 'https:'\n        })\n        type.text('Spaces:')\n      }\n    }\n    setType()\n\n    const setUnit = () => {\n      const unit = this.editor.getOption('indentUnit')\n      if (this.editor.getOption('indentWithTabs')) {\n        Cookies.set('tab_size', unit, {\n          expires: 365,\n          sameSite: window.cookiePolicy,\n          secure: window.location.protocol === 'https:'\n        })\n      } else {\n        Cookies.set('space_units', unit, {\n          expires: 365,\n          sameSite: window.cookiePolicy,\n          secure: window.location.protocol === 'https:'\n        })\n      }\n      widthLabel.text(unit)\n    }\n    setUnit()\n\n    type.click(() => {\n      if (this.editor.getOption('indentWithTabs')) {\n        this.editor.setOption('indentWithTabs', false)\n        cookieSpaceUnits = parseInt(Cookies.get('space_units'))\n        if (cookieSpaceUnits) {\n          this.editor.setOption('indentUnit', cookieSpaceUnits)\n        }\n      } else {\n        this.editor.setOption('indentWithTabs', true)\n        cookieTabSize = parseInt(Cookies.get('tab_size'))\n        if (cookieTabSize) {\n          this.editor.setOption('indentUnit', cookieTabSize)\n          this.editor.setOption('tabSize', cookieTabSize)\n        }\n      }\n      setType()\n      setUnit()\n    })\n    widthLabel.click(() => {\n      if (widthLabel.is(':visible')) {\n        widthLabel.addClass('hidden')\n        widthInput.removeClass('hidden')\n        widthInput.val(this.editor.getOption('indentUnit'))\n        widthInput.select()\n      } else {\n        widthLabel.removeClass('hidden')\n        widthInput.addClass('hidden')\n      }\n    })\n    widthInput.on('change', () => {\n      let val = parseInt(widthInput.val())\n      if (!val) val = this.editor.getOption('indentUnit')\n      if (val < 1) val = 1\n      else if (val > 10) val = 10\n\n      if (this.editor.getOption('indentWithTabs')) {\n        this.editor.setOption('tabSize', val)\n      }\n      this.editor.setOption('indentUnit', val)\n      setUnit()\n    })\n    widthInput.on('blur', function () {\n      widthLabel.removeClass('hidden')\n      widthInput.addClass('hidden')\n    })\n  }\n\n  setKeymap () {\n    const cookieKeymap = Cookies.get('keymap')\n    if (cookieKeymap) {\n      this.editor.setOption('keyMap', cookieKeymap)\n    }\n\n    const label = this.statusIndicators.find('.ui-keymap-label')\n    const sublime = this.statusIndicators.find('.ui-keymap-sublime')\n    const emacs = this.statusIndicators.find('.ui-keymap-emacs')\n    const vim = this.statusIndicators.find('.ui-keymap-vim')\n\n    const setKeymapLabel = () => {\n      const keymap = this.editor.getOption('keyMap')\n      Cookies.set('keymap', keymap, {\n        expires: 365,\n        sameSite: window.cookiePolicy,\n        secure: window.location.protocol === 'https:'\n      })\n      label.text(keymap)\n      this.restoreOverrideEditorKeymap()\n      this.setOverrideBrowserKeymap()\n    }\n    setKeymapLabel()\n\n    sublime.click(() => {\n      this.editor.setOption('keyMap', 'sublime')\n      setKeymapLabel()\n    })\n    emacs.click(() => {\n      this.editor.setOption('keyMap', 'emacs')\n      setKeymapLabel()\n    })\n    vim.click(() => {\n      this.editor.setOption('keyMap', 'vim')\n      setKeymapLabel()\n    })\n  }\n\n  setTheme () {\n    const cookieTheme = Cookies.get('theme')\n    if (cookieTheme) {\n      this.editor.setOption('theme', cookieTheme)\n    }\n\n    const themeToggle = this.statusTheme.find('.ui-theme-toggle')\n\n    const checkTheme = () => {\n      const theme = this.editor.getOption('theme')\n      if (theme === 'one-dark') {\n        themeToggle.removeClass('active')\n      } else {\n        themeToggle.addClass('active')\n      }\n    }\n\n    themeToggle.click(() => {\n      let theme = this.editor.getOption('theme')\n      if (theme === 'one-dark') {\n        theme = 'default'\n      } else {\n        theme = 'one-dark'\n      }\n      this.editor.setOption('theme', theme)\n      Cookies.set('theme', theme, {\n        expires: 365,\n        sameSite: window.cookiePolicy,\n        secure: window.location.protocol === 'https:'\n      })\n\n      checkTheme()\n    })\n\n    checkTheme()\n  }\n\n  setSpellcheck () {\n    const cookieSpellcheck = Cookies.get('spellcheck')\n    if (cookieSpellcheck) {\n      let mode = null\n      if (cookieSpellcheck === 'true' || cookieSpellcheck === true) {\n        mode = 'spell-checker'\n      } else {\n        mode = defaultEditorMode\n      }\n      if (mode && mode !== this.editor.getOption('mode')) {\n        this.editor.setOption('mode', mode)\n      }\n    }\n\n    const spellcheckToggle = this.statusSpellcheck.find('.ui-spellcheck-toggle')\n\n    const checkSpellcheck = () => {\n      const mode = this.editor.getOption('mode')\n      if (mode === defaultEditorMode) {\n        spellcheckToggle.removeClass('active')\n      } else {\n        spellcheckToggle.addClass('active')\n      }\n    }\n\n    spellcheckToggle.click(() => {\n      let mode = this.editor.getOption('mode')\n      if (mode === defaultEditorMode) {\n        mode = 'spell-checker'\n      } else {\n        mode = defaultEditorMode\n      }\n      if (mode && mode !== this.editor.getOption('mode')) {\n        this.editor.setOption('mode', mode)\n      }\n      Cookies.set('spellcheck', mode === 'spell-checker', {\n        expires: 365,\n        sameSite: window.cookiePolicy,\n        secure: window.location.protocol === 'https:'\n      })\n\n      checkSpellcheck()\n    })\n\n    checkSpellcheck()\n\n    // workaround spellcheck might not activate beacuse the ajax loading\n    if (window.num_loaded < 2) {\n      const spellcheckTimer = setInterval(\n        () => {\n          if (window.num_loaded >= 2) {\n            if (this.editor.getOption('mode') === 'spell-checker') {\n              this.editor.setOption('mode', 'spell-checker')\n            }\n            clearInterval(spellcheckTimer)\n          }\n        },\n        100\n      )\n    }\n  }\n\n  resetEditorKeymapToBrowserKeymap () {\n    const keymap = this.editor.getOption('keyMap')\n    if (!this.jumpToAddressBarKeymapValue) {\n      this.jumpToAddressBarKeymapValue = CodeMirror.keyMap[keymap][jumpToAddressBarKeymapName]\n      delete CodeMirror.keyMap[keymap][jumpToAddressBarKeymapName]\n    }\n  }\n\n  restoreOverrideEditorKeymap () {\n    const keymap = this.editor.getOption('keyMap')\n    if (this.jumpToAddressBarKeymapValue) {\n      CodeMirror.keyMap[keymap][jumpToAddressBarKeymapName] = this.jumpToAddressBarKeymapValue\n      this.jumpToAddressBarKeymapValue = null\n    }\n  }\n\n  setOverrideBrowserKeymap () {\n    const overrideBrowserKeymap = $(\n      '.ui-preferences-override-browser-keymap label > input[type=\"checkbox\"]'\n    )\n    if (overrideBrowserKeymap.is(':checked')) {\n      Cookies.set('preferences-override-browser-keymap', true, {\n        expires: 365,\n        sameSite: window.cookiePolicy,\n        secure: window.location.protocol === 'https:'\n      })\n      this.restoreOverrideEditorKeymap()\n    } else {\n      Cookies.remove('preferences-override-browser-keymap')\n      this.resetEditorKeymapToBrowserKeymap()\n    }\n  }\n\n  setPreferences () {\n    const overrideBrowserKeymap = $(\n      '.ui-preferences-override-browser-keymap label > input[type=\"checkbox\"]'\n    )\n    const cookieOverrideBrowserKeymap = Cookies.get(\n      'preferences-override-browser-keymap'\n    )\n    if (cookieOverrideBrowserKeymap && cookieOverrideBrowserKeymap === 'true') {\n      overrideBrowserKeymap.prop('checked', true)\n    } else {\n      overrideBrowserKeymap.prop('checked', false)\n    }\n    this.setOverrideBrowserKeymap()\n\n    overrideBrowserKeymap.change(() => {\n      this.setOverrideBrowserKeymap()\n    })\n  }\n\n  init (textit) {\n    this.editor = CodeMirror.fromTextArea(textit, {\n      mode: defaultEditorMode,\n      backdrop: defaultEditorMode,\n      keyMap: 'sublime',\n      viewportMargin: viewportMargin,\n      styleActiveLine: true,\n      lineNumbers: true,\n      lineWrapping: true,\n      showCursorWhenSelecting: true,\n      highlightSelectionMatches: true,\n      indentUnit: 4,\n      continueComments: 'Enter',\n      theme: 'one-dark',\n      inputStyle: 'textarea',\n      matchBrackets: true,\n      autoCloseBrackets: true,\n      matchTags: {\n        bothTags: true\n      },\n      autoCloseTags: true,\n      foldGutter: true,\n      gutters: [\n        'CodeMirror-linenumbers',\n        'authorship-gutters',\n        'CodeMirror-foldgutter'\n      ],\n      extraKeys: this.defaultExtraKeys,\n      flattenSpans: true,\n      addModeClass: true,\n      readOnly: true,\n      autoRefresh: true,\n      otherCursors: true,\n      placeholder: \" Start by entering a title here\\n===\\nVisit /features if you don't know what to do.\\nHappy hacking :)\"\n    })\n\n    return this.editor\n  }\n\n  getEditor () {\n    return this.editor\n  }\n}\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// A rough approximation of Sublime Text's keybindings\n// Depends on addon/search/searchcursor.js and optionally addon/dialog/dialogs.js\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/edit/matchbrackets\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var cmds = CodeMirror.commands;\n  var Pos = CodeMirror.Pos;\n\n  // This is not exactly Sublime's algorithm. I couldn't make heads or tails of that.\n  function findPosSubword(doc, start, dir) {\n    if (dir < 0 && start.ch == 0) return doc.clipPos(Pos(start.line - 1));\n    var line = doc.getLine(start.line);\n    if (dir > 0 && start.ch >= line.length) return doc.clipPos(Pos(start.line + 1, 0));\n    var state = \"start\", type, startPos = start.ch;\n    for (var pos = startPos, e = dir < 0 ? 0 : line.length, i = 0; pos != e; pos += dir, i++) {\n      var next = line.charAt(dir < 0 ? pos - 1 : pos);\n      var cat = next != \"_\" && CodeMirror.isWordChar(next) ? \"w\" : \"o\";\n      if (cat == \"w\" && next.toUpperCase() == next) cat = \"W\";\n      if (state == \"start\") {\n        if (cat != \"o\") { state = \"in\"; type = cat; }\n        else startPos = pos + dir\n      } else if (state == \"in\") {\n        if (type != cat) {\n          if (type == \"w\" && cat == \"W\" && dir < 0) pos--;\n          if (type == \"W\" && cat == \"w\" && dir > 0) { // From uppercase to lowercase\n            if (pos == startPos + 1) { type = \"w\"; continue; }\n            else pos--;\n          }\n          break;\n        }\n      }\n    }\n    return Pos(start.line, pos);\n  }\n\n  function moveSubword(cm, dir) {\n    cm.extendSelectionsBy(function(range) {\n      if (cm.display.shift || cm.doc.extend || range.empty())\n        return findPosSubword(cm.doc, range.head, dir);\n      else\n        return dir < 0 ? range.from() : range.to();\n    });\n  }\n\n  cmds.goSubwordLeft = function(cm) { moveSubword(cm, -1); };\n  cmds.goSubwordRight = function(cm) { moveSubword(cm, 1); };\n\n  cmds.scrollLineUp = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleBottomLine = cm.lineAtHeight(info.top + info.clientHeight, \"local\");\n      if (cm.getCursor().line >= visibleBottomLine)\n        cm.execCommand(\"goLineUp\");\n    }\n    cm.scrollTo(null, info.top - cm.defaultTextHeight());\n  };\n  cmds.scrollLineDown = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleTopLine = cm.lineAtHeight(info.top, \"local\")+1;\n      if (cm.getCursor().line <= visibleTopLine)\n        cm.execCommand(\"goLineDown\");\n    }\n    cm.scrollTo(null, info.top + cm.defaultTextHeight());\n  };\n\n  cmds.splitSelectionByLine = function(cm) {\n    var ranges = cm.listSelections(), lineRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      for (var line = from.line; line <= to.line; ++line)\n        if (!(to.line > from.line && line == to.line && to.ch == 0))\n          lineRanges.push({anchor: line == from.line ? from : Pos(line, 0),\n                           head: line == to.line ? to : Pos(line)});\n    }\n    cm.setSelections(lineRanges, 0);\n  };\n\n  cmds.singleSelectionTop = function(cm) {\n    var range = cm.listSelections()[0];\n    cm.setSelection(range.anchor, range.head, {scroll: false});\n  };\n\n  cmds.selectLine = function(cm) {\n    var ranges = cm.listSelections(), extended = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      extended.push({anchor: Pos(range.from().line, 0),\n                     head: Pos(range.to().line + 1, 0)});\n    }\n    cm.setSelections(extended);\n  };\n\n  function insertLine(cm, above) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    cm.operation(function() {\n      var len = cm.listSelections().length, newSelection = [], last = -1;\n      for (var i = 0; i < len; i++) {\n        var head = cm.listSelections()[i].head;\n        if (head.line <= last) continue;\n        var at = Pos(head.line + (above ? 0 : 1), 0);\n        cm.replaceRange(\"\\n\", at, null, \"+insertLine\");\n        cm.indentLine(at.line, null, true);\n        newSelection.push({head: at, anchor: at});\n        last = head.line + 1;\n      }\n      cm.setSelections(newSelection);\n    });\n    cm.execCommand(\"indentAuto\");\n  }\n\n  cmds.insertLineAfter = function(cm) { return insertLine(cm, false); };\n\n  cmds.insertLineBefore = function(cm) { return insertLine(cm, true); };\n\n  function wordAt(cm, pos) {\n    var start = pos.ch, end = start, line = cm.getLine(pos.line);\n    while (start && CodeMirror.isWordChar(line.charAt(start - 1))) --start;\n    while (end < line.length && CodeMirror.isWordChar(line.charAt(end))) ++end;\n    return {from: Pos(pos.line, start), to: Pos(pos.line, end), word: line.slice(start, end)};\n  }\n\n  cmds.selectNextOccurrence = function(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    var fullWord = cm.state.sublimeFindFullWord == cm.doc.sel;\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      cm.setSelection(word.from, word.to);\n      fullWord = true;\n    } else {\n      var text = cm.getRange(from, to);\n      var query = fullWord ? new RegExp(\"\\\\b\" + text + \"\\\\b\") : text;\n      var cur = cm.getSearchCursor(query, to);\n      var found = cur.findNext();\n      if (!found) {\n        cur = cm.getSearchCursor(query, Pos(cm.firstLine(), 0));\n        found = cur.findNext();\n      }\n      if (!found || isSelectedRange(cm.listSelections(), cur.from(), cur.to())) return\n      cm.addSelection(cur.from(), cur.to());\n    }\n    if (fullWord)\n      cm.state.sublimeFindFullWord = cm.doc.sel;\n  };\n\n  cmds.skipAndSelectNextOccurrence = function(cm) {\n    var prevAnchor = cm.getCursor(\"anchor\"), prevHead = cm.getCursor(\"head\");\n    cmds.selectNextOccurrence(cm);\n    if (CodeMirror.cmpPos(prevAnchor, prevHead) != 0) {\n      cm.doc.setSelections(cm.doc.listSelections()\n          .filter(function (sel) {\n            return sel.anchor != prevAnchor || sel.head != prevHead;\n          }));\n    }\n  }\n\n  function addCursorToSelection(cm, dir) {\n    var ranges = cm.listSelections(), newRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      var newAnchor = cm.findPosV(\n          range.anchor, dir, \"line\", range.anchor.goalColumn);\n      var newHead = cm.findPosV(\n          range.head, dir, \"line\", range.head.goalColumn);\n      newAnchor.goalColumn = range.anchor.goalColumn != null ?\n          range.anchor.goalColumn : cm.cursorCoords(range.anchor, \"div\").left;\n      newHead.goalColumn = range.head.goalColumn != null ?\n          range.head.goalColumn : cm.cursorCoords(range.head, \"div\").left;\n      var newRange = {anchor: newAnchor, head: newHead};\n      newRanges.push(range);\n      newRanges.push(newRange);\n    }\n    cm.setSelections(newRanges);\n  }\n  cmds.addCursorToPrevLine = function(cm) { addCursorToSelection(cm, -1); };\n  cmds.addCursorToNextLine = function(cm) { addCursorToSelection(cm, 1); };\n\n  function isSelectedRange(ranges, from, to) {\n    for (var i = 0; i < ranges.length; i++)\n      if (CodeMirror.cmpPos(ranges[i].from(), from) == 0 &&\n          CodeMirror.cmpPos(ranges[i].to(), to) == 0) return true\n    return false\n  }\n\n  var mirror = \"(){}[]\";\n  function selectBetweenBrackets(cm) {\n    var ranges = cm.listSelections(), newRanges = []\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], pos = range.head, opening = cm.scanForBracket(pos, -1);\n      if (!opening) return false;\n      for (;;) {\n        var closing = cm.scanForBracket(pos, 1);\n        if (!closing) return false;\n        if (closing.ch == mirror.charAt(mirror.indexOf(opening.ch) + 1)) {\n          var startPos = Pos(opening.pos.line, opening.pos.ch + 1);\n          if (CodeMirror.cmpPos(startPos, range.from()) == 0 &&\n              CodeMirror.cmpPos(closing.pos, range.to()) == 0) {\n            opening = cm.scanForBracket(opening.pos, -1);\n            if (!opening) return false;\n          } else {\n            newRanges.push({anchor: startPos, head: closing.pos});\n            break;\n          }\n        }\n        pos = Pos(closing.pos.line, closing.pos.ch + 1);\n      }\n    }\n    cm.setSelections(newRanges);\n    return true;\n  }\n\n  cmds.selectScope = function(cm) {\n    selectBetweenBrackets(cm) || cm.execCommand(\"selectAll\");\n  };\n  cmds.selectBetweenBrackets = function(cm) {\n    if (!selectBetweenBrackets(cm)) return CodeMirror.Pass;\n  };\n\n  function puncType(type) {\n    return !type ? null : /\\bpunctuation\\b/.test(type) ? type : undefined\n  }\n\n  cmds.goToBracket = function(cm) {\n    cm.extendSelectionsBy(function(range) {\n      var next = cm.scanForBracket(range.head, 1, puncType(cm.getTokenTypeAt(range.head)));\n      if (next && CodeMirror.cmpPos(next.pos, range.head) != 0) return next.pos;\n      var prev = cm.scanForBracket(range.head, -1, puncType(cm.getTokenTypeAt(Pos(range.head.line, range.head.ch + 1))));\n      return prev && Pos(prev.pos.line, prev.pos.ch + 1) || range.head;\n    });\n  };\n\n  cmds.swapLineUp = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.firstLine() - 1, newSels = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from().line - 1, to = range.to().line;\n      newSels.push({anchor: Pos(range.anchor.line - 1, range.anchor.ch),\n                    head: Pos(range.head.line - 1, range.head.ch)});\n      if (range.to().ch == 0 && !range.empty()) --to;\n      if (from > at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = 0; i < linesToMove.length; i += 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        if (to > cm.lastLine())\n          cm.replaceRange(\"\\n\" + line, Pos(cm.lastLine()), null, \"+swapLine\");\n        else\n          cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.setSelections(newSels);\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.swapLineDown = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.lastLine() + 1;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var range = ranges[i], from = range.to().line + 1, to = range.from().line;\n      if (range.to().ch == 0 && !range.empty()) from--;\n      if (from < at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = linesToMove.length - 2; i >= 0; i -= 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        if (from == cm.lastLine())\n          cm.replaceRange(\"\", Pos(from - 1), Pos(from), \"+swapLine\");\n        else\n          cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.toggleCommentIndented = function(cm) {\n    cm.toggleComment({ indent: true });\n  }\n\n  cmds.joinLines = function(cm) {\n    var ranges = cm.listSelections(), joined = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from();\n      var start = from.line, end = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == end)\n        end = ranges[++i].to().line;\n      joined.push({start: start, end: end, anchor: !range.empty() && from});\n    }\n    cm.operation(function() {\n      var offset = 0, ranges = [];\n      for (var i = 0; i < joined.length; i++) {\n        var obj = joined[i];\n        var anchor = obj.anchor && Pos(obj.anchor.line - offset, obj.anchor.ch), head;\n        for (var line = obj.start; line <= obj.end; line++) {\n          var actual = line - offset;\n          if (line == obj.end) head = Pos(actual, cm.getLine(actual).length + 1);\n          if (actual < cm.lastLine()) {\n            cm.replaceRange(\" \", Pos(actual), Pos(actual + 1, /^\\s*/.exec(cm.getLine(actual + 1))[0].length));\n            ++offset;\n          }\n        }\n        ranges.push({anchor: anchor || head, head: head});\n      }\n      cm.setSelections(ranges, 0);\n    });\n  };\n\n  cmds.duplicateLine = function(cm) {\n    cm.operation(function() {\n      var rangeCount = cm.listSelections().length;\n      for (var i = 0; i < rangeCount; i++) {\n        var range = cm.listSelections()[i];\n        if (range.empty())\n          cm.replaceRange(cm.getLine(range.head.line) + \"\\n\", Pos(range.head.line, 0));\n        else\n          cm.replaceRange(cm.getRange(range.from(), range.to()), range.from());\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n\n  function sortLines(cm, caseSensitive) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), toSort = [], selected;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      if (range.empty()) continue;\n      var from = range.from().line, to = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == to)\n        to = ranges[++i].to().line;\n      if (!ranges[i].to().ch) to--;\n      toSort.push(from, to);\n    }\n    if (toSort.length) selected = true;\n    else toSort.push(cm.firstLine(), cm.lastLine());\n\n    cm.operation(function() {\n      var ranges = [];\n      for (var i = 0; i < toSort.length; i += 2) {\n        var from = toSort[i], to = toSort[i + 1];\n        var start = Pos(from, 0), end = Pos(to);\n        var lines = cm.getRange(start, end, false);\n        if (caseSensitive)\n          lines.sort();\n        else\n          lines.sort(function(a, b) {\n            var au = a.toUpperCase(), bu = b.toUpperCase();\n            if (au != bu) { a = au; b = bu; }\n            return a < b ? -1 : a == b ? 0 : 1;\n          });\n        cm.replaceRange(lines, start, end);\n        if (selected) ranges.push({anchor: start, head: Pos(to + 1, 0)});\n      }\n      if (selected) cm.setSelections(ranges, 0);\n    });\n  }\n\n  cmds.sortLines = function(cm) { sortLines(cm, true); };\n  cmds.sortLinesInsensitive = function(cm) { sortLines(cm, false); };\n\n  cmds.nextBookmark = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      var current = marks.shift();\n      var found = current.find();\n      if (found) {\n        marks.push(current);\n        return cm.setSelection(found.from, found.to);\n      }\n    }\n  };\n\n  cmds.prevBookmark = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      marks.unshift(marks.pop());\n      var found = marks[marks.length - 1].find();\n      if (!found)\n        marks.pop();\n      else\n        return cm.setSelection(found.from, found.to);\n    }\n  };\n\n  cmds.toggleBookmark = function(cm) {\n    var ranges = cm.listSelections();\n    var marks = cm.state.sublimeBookmarks || (cm.state.sublimeBookmarks = []);\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      var found = ranges[i].empty() ? cm.findMarksAt(from) : cm.findMarks(from, to);\n      for (var j = 0; j < found.length; j++) {\n        if (found[j].sublimeBookmark) {\n          found[j].clear();\n          for (var k = 0; k < marks.length; k++)\n            if (marks[k] == found[j])\n              marks.splice(k--, 1);\n          break;\n        }\n      }\n      if (j == found.length)\n        marks.push(cm.markText(from, to, {sublimeBookmark: true, clearWhenEmpty: false}));\n    }\n  };\n\n  cmds.clearBookmarks = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    marks.length = 0;\n  };\n\n  cmds.selectBookmarks = function(cm) {\n    var marks = cm.state.sublimeBookmarks, ranges = [];\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      var found = marks[i].find();\n      if (!found)\n        marks.splice(i--, 0);\n      else\n        ranges.push({anchor: found.from, head: found.to});\n    }\n    if (ranges.length)\n      cm.setSelections(ranges, 0);\n  };\n\n  function modifyWordOrSelection(cm, mod) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), indices = [], replacements = [];\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) { indices.push(i); replacements.push(\"\"); }\n        else replacements.push(mod(cm.getRange(range.from(), range.to())));\n      }\n      cm.replaceSelections(replacements, \"around\", \"case\");\n      for (var i = indices.length - 1, at; i >= 0; i--) {\n        var range = ranges[indices[i]];\n        if (at && CodeMirror.cmpPos(range.head, at) > 0) continue;\n        var word = wordAt(cm, range.head);\n        at = word.from;\n        cm.replaceRange(mod(word.word), word.from, word.to);\n      }\n    });\n  }\n\n  cmds.smartBackspace = function(cm) {\n    if (cm.somethingSelected()) return CodeMirror.Pass;\n\n    cm.operation(function() {\n      var cursors = cm.listSelections();\n      var indentUnit = cm.getOption(\"indentUnit\");\n\n      for (var i = cursors.length - 1; i >= 0; i--) {\n        var cursor = cursors[i].head;\n        var toStartOfLine = cm.getRange({line: cursor.line, ch: 0}, cursor);\n        var column = CodeMirror.countColumn(toStartOfLine, null, cm.getOption(\"tabSize\"));\n\n        // Delete by one character by default\n        var deletePos = cm.findPosH(cursor, -1, \"char\", false);\n\n        if (toStartOfLine && !/\\S/.test(toStartOfLine) && column % indentUnit == 0) {\n          var prevIndent = new Pos(cursor.line,\n            CodeMirror.findColumn(toStartOfLine, column - indentUnit, indentUnit));\n\n          // Smart delete only if we found a valid prevIndent location\n          if (prevIndent.ch != cursor.ch) deletePos = prevIndent;\n        }\n\n        cm.replaceRange(\"\", deletePos, cursor, \"+delete\");\n      }\n    });\n  };\n\n  cmds.delLineRight = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = ranges.length - 1; i >= 0; i--)\n        cm.replaceRange(\"\", ranges[i].anchor, Pos(ranges[i].to().line), \"+delete\");\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.upcaseAtCursor = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toUpperCase(); });\n  };\n  cmds.downcaseAtCursor = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toLowerCase(); });\n  };\n\n  cmds.setSublimeMark = function(cm) {\n    if (cm.state.sublimeMark) cm.state.sublimeMark.clear();\n    cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n  };\n  cmds.selectToSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) cm.setSelection(cm.getCursor(), found);\n  };\n  cmds.deleteToSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      var from = cm.getCursor(), to = found;\n      if (CodeMirror.cmpPos(from, to) > 0) { var tmp = to; to = from; from = tmp; }\n      cm.state.sublimeKilled = cm.getRange(from, to);\n      cm.replaceRange(\"\", from, to);\n    }\n  };\n  cmds.swapWithSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      cm.state.sublimeMark.clear();\n      cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n      cm.setCursor(found);\n    }\n  };\n  cmds.sublimeYank = function(cm) {\n    if (cm.state.sublimeKilled != null)\n      cm.replaceSelection(cm.state.sublimeKilled, null, \"paste\");\n  };\n\n  cmds.showInCenter = function(cm) {\n    var pos = cm.cursorCoords(null, \"local\");\n    cm.scrollTo(null, (pos.top + pos.bottom) / 2 - cm.getScrollInfo().clientHeight / 2);\n  };\n\n  function getTarget(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      from = word.from;\n      to = word.to;\n    }\n    return {from: from, to: to, query: cm.getRange(from, to), word: word};\n  }\n\n  function findAndGoTo(cm, forward) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var query = target.query;\n    var cur = cm.getSearchCursor(query, forward ? target.to : target.from);\n\n    if (forward ? cur.findNext() : cur.findPrevious()) {\n      cm.setSelection(cur.from(), cur.to());\n    } else {\n      cur = cm.getSearchCursor(query, forward ? Pos(cm.firstLine(), 0)\n                                              : cm.clipPos(Pos(cm.lastLine())));\n      if (forward ? cur.findNext() : cur.findPrevious())\n        cm.setSelection(cur.from(), cur.to());\n      else if (target.word)\n        cm.setSelection(target.from, target.to);\n    }\n  };\n  cmds.findUnder = function(cm) { findAndGoTo(cm, true); };\n  cmds.findUnderPrevious = function(cm) { findAndGoTo(cm,false); };\n  cmds.findAllUnder = function(cm) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var cur = cm.getSearchCursor(target.query);\n    var matches = [];\n    var primaryIndex = -1;\n    while (cur.findNext()) {\n      matches.push({anchor: cur.from(), head: cur.to()});\n      if (cur.from().line <= target.from.line && cur.from().ch <= target.from.ch)\n        primaryIndex++;\n    }\n    cm.setSelections(matches, primaryIndex);\n  };\n\n\n  var keyMap = CodeMirror.keyMap;\n  keyMap.macSublime = {\n    \"Cmd-Left\": \"goLineStartSmart\",\n    \"Shift-Tab\": \"indentLess\",\n    \"Shift-Ctrl-K\": \"deleteLine\",\n    \"Alt-Q\": \"wrapLines\",\n    \"Ctrl-Left\": \"goSubwordLeft\",\n    \"Ctrl-Right\": \"goSubwordRight\",\n    \"Ctrl-Alt-Up\": \"scrollLineUp\",\n    \"Ctrl-Alt-Down\": \"scrollLineDown\",\n    \"Cmd-L\": \"selectLine\",\n    \"Shift-Cmd-L\": \"splitSelectionByLine\",\n    \"Esc\": \"singleSelectionTop\",\n    \"Cmd-Enter\": \"insertLineAfter\",\n    \"Shift-Cmd-Enter\": \"insertLineBefore\",\n    \"Cmd-D\": \"selectNextOccurrence\",\n    \"Shift-Cmd-Space\": \"selectScope\",\n    \"Shift-Cmd-M\": \"selectBetweenBrackets\",\n    \"Cmd-M\": \"goToBracket\",\n    \"Cmd-Ctrl-Up\": \"swapLineUp\",\n    \"Cmd-Ctrl-Down\": \"swapLineDown\",\n    \"Cmd-/\": \"toggleCommentIndented\",\n    \"Cmd-J\": \"joinLines\",\n    \"Shift-Cmd-D\": \"duplicateLine\",\n    \"F5\": \"sortLines\",\n    \"Cmd-F5\": \"sortLinesInsensitive\",\n    \"F2\": \"nextBookmark\",\n    \"Shift-F2\": \"prevBookmark\",\n    \"Cmd-F2\": \"toggleBookmark\",\n    \"Shift-Cmd-F2\": \"clearBookmarks\",\n    \"Alt-F2\": \"selectBookmarks\",\n    \"Backspace\": \"smartBackspace\",\n    \"Cmd-K Cmd-D\": \"skipAndSelectNextOccurrence\",\n    \"Cmd-K Cmd-K\": \"delLineRight\",\n    \"Cmd-K Cmd-U\": \"upcaseAtCursor\",\n    \"Cmd-K Cmd-L\": \"downcaseAtCursor\",\n    \"Cmd-K Cmd-Space\": \"setSublimeMark\",\n    \"Cmd-K Cmd-A\": \"selectToSublimeMark\",\n    \"Cmd-K Cmd-W\": \"deleteToSublimeMark\",\n    \"Cmd-K Cmd-X\": \"swapWithSublimeMark\",\n    \"Cmd-K Cmd-Y\": \"sublimeYank\",\n    \"Cmd-K Cmd-C\": \"showInCenter\",\n    \"Cmd-K Cmd-G\": \"clearBookmarks\",\n    \"Cmd-K Cmd-Backspace\": \"delLineLeft\",\n    \"Cmd-K Cmd-1\": \"foldAll\",\n    \"Cmd-K Cmd-0\": \"unfoldAll\",\n    \"Cmd-K Cmd-J\": \"unfoldAll\",\n    \"Ctrl-Shift-Up\": \"addCursorToPrevLine\",\n    \"Ctrl-Shift-Down\": \"addCursorToNextLine\",\n    \"Cmd-F3\": \"findUnder\",\n    \"Shift-Cmd-F3\": \"findUnderPrevious\",\n    \"Alt-F3\": \"findAllUnder\",\n    \"Shift-Cmd-[\": \"fold\",\n    \"Shift-Cmd-]\": \"unfold\",\n    \"Cmd-I\": \"findIncremental\",\n    \"Shift-Cmd-I\": \"findIncrementalReverse\",\n    \"Cmd-H\": \"replace\",\n    \"F3\": \"findNext\",\n    \"Shift-F3\": \"findPrev\",\n    \"fallthrough\": \"macDefault\"\n  };\n  CodeMirror.normalizeKeyMap(keyMap.macSublime);\n\n  keyMap.pcSublime = {\n    \"Shift-Tab\": \"indentLess\",\n    \"Shift-Ctrl-K\": \"deleteLine\",\n    \"Alt-Q\": \"wrapLines\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Alt-Left\": \"goSubwordLeft\",\n    \"Alt-Right\": \"goSubwordRight\",\n    \"Ctrl-Up\": \"scrollLineUp\",\n    \"Ctrl-Down\": \"scrollLineDown\",\n    \"Ctrl-L\": \"selectLine\",\n    \"Shift-Ctrl-L\": \"splitSelectionByLine\",\n    \"Esc\": \"singleSelectionTop\",\n    \"Ctrl-Enter\": \"insertLineAfter\",\n    \"Shift-Ctrl-Enter\": \"insertLineBefore\",\n    \"Ctrl-D\": \"selectNextOccurrence\",\n    \"Shift-Ctrl-Space\": \"selectScope\",\n    \"Shift-Ctrl-M\": \"selectBetweenBrackets\",\n    \"Ctrl-M\": \"goToBracket\",\n    \"Shift-Ctrl-Up\": \"swapLineUp\",\n    \"Shift-Ctrl-Down\": \"swapLineDown\",\n    \"Ctrl-/\": \"toggleCommentIndented\",\n    \"Ctrl-J\": \"joinLines\",\n    \"Shift-Ctrl-D\": \"duplicateLine\",\n    \"F9\": \"sortLines\",\n    \"Ctrl-F9\": \"sortLinesInsensitive\",\n    \"F2\": \"nextBookmark\",\n    \"Shift-F2\": \"prevBookmark\",\n    \"Ctrl-F2\": \"toggleBookmark\",\n    \"Shift-Ctrl-F2\": \"clearBookmarks\",\n    \"Alt-F2\": \"selectBookmarks\",\n    \"Backspace\": \"smartBackspace\",\n    \"Ctrl-K Ctrl-D\": \"skipAndSelectNextOccurrence\",\n    \"Ctrl-K Ctrl-K\": \"delLineRight\",\n    \"Ctrl-K Ctrl-U\": \"upcaseAtCursor\",\n    \"Ctrl-K Ctrl-L\": \"downcaseAtCursor\",\n    \"Ctrl-K Ctrl-Space\": \"setSublimeMark\",\n    \"Ctrl-K Ctrl-A\": \"selectToSublimeMark\",\n    \"Ctrl-K Ctrl-W\": \"deleteToSublimeMark\",\n    \"Ctrl-K Ctrl-X\": \"swapWithSublimeMark\",\n    \"Ctrl-K Ctrl-Y\": \"sublimeYank\",\n    \"Ctrl-K Ctrl-C\": \"showInCenter\",\n    \"Ctrl-K Ctrl-G\": \"clearBookmarks\",\n    \"Ctrl-K Ctrl-Backspace\": \"delLineLeft\",\n    \"Ctrl-K Ctrl-1\": \"foldAll\",\n    \"Ctrl-K Ctrl-0\": \"unfoldAll\",\n    \"Ctrl-K Ctrl-J\": \"unfoldAll\",\n    \"Ctrl-Alt-Up\": \"addCursorToPrevLine\",\n    \"Ctrl-Alt-Down\": \"addCursorToNextLine\",\n    \"Ctrl-F3\": \"findUnder\",\n    \"Shift-Ctrl-F3\": \"findUnderPrevious\",\n    \"Alt-F3\": \"findAllUnder\",\n    \"Shift-Ctrl-[\": \"fold\",\n    \"Shift-Ctrl-]\": \"unfold\",\n    \"Ctrl-I\": \"findIncremental\",\n    \"Shift-Ctrl-I\": \"findIncrementalReverse\",\n    \"Ctrl-H\": \"replace\",\n    \"F3\": \"findNext\",\n    \"Shift-F3\": \"findPrev\",\n    \"fallthrough\": \"pcDefault\"\n  };\n  CodeMirror.normalizeKeyMap(keyMap.pcSublime);\n\n  var mac = keyMap.default == keyMap.macDefault;\n  keyMap.sublime = mac ? keyMap.macSublime : keyMap.pcSublime;\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n  function posEq(a, b) { return a.line == b.line && a.ch == b.ch; }\n\n  // Kill 'ring'\n\n  var killRing = [];\n  function addToRing(str) {\n    killRing.push(str);\n    if (killRing.length > 50) killRing.shift();\n  }\n  function growRingTop(str) {\n    if (!killRing.length) return addToRing(str);\n    killRing[killRing.length - 1] += str;\n  }\n  function getFromRing(n) { return killRing[killRing.length - (n ? Math.min(n, 1) : 1)] || \"\"; }\n  function popFromRing() { if (killRing.length > 1) killRing.pop(); return getFromRing(); }\n\n  var lastKill = null;\n\n  function kill(cm, from, to, ring, text) {\n    if (text == null) text = cm.getRange(from, to);\n\n    if (ring == \"grow\" && lastKill && lastKill.cm == cm && posEq(from, lastKill.pos) && cm.isClean(lastKill.gen))\n      growRingTop(text);\n    else if (ring !== false)\n      addToRing(text);\n    cm.replaceRange(\"\", from, to, \"+delete\");\n\n    if (ring == \"grow\") lastKill = {cm: cm, pos: from, gen: cm.changeGeneration()};\n    else lastKill = null;\n  }\n\n  // Boundaries of various units\n\n  function byChar(cm, pos, dir) {\n    return cm.findPosH(pos, dir, \"char\", true);\n  }\n\n  function byWord(cm, pos, dir) {\n    return cm.findPosH(pos, dir, \"word\", true);\n  }\n\n  function byLine(cm, pos, dir) {\n    return cm.findPosV(pos, dir, \"line\", cm.doc.sel.goalColumn);\n  }\n\n  function byPage(cm, pos, dir) {\n    return cm.findPosV(pos, dir, \"page\", cm.doc.sel.goalColumn);\n  }\n\n  function byParagraph(cm, pos, dir) {\n    var no = pos.line, line = cm.getLine(no);\n    var sawText = /\\S/.test(dir < 0 ? line.slice(0, pos.ch) : line.slice(pos.ch));\n    var fst = cm.firstLine(), lst = cm.lastLine();\n    for (;;) {\n      no += dir;\n      if (no < fst || no > lst)\n        return cm.clipPos(Pos(no - dir, dir < 0 ? 0 : null));\n      line = cm.getLine(no);\n      var hasText = /\\S/.test(line);\n      if (hasText) sawText = true;\n      else if (sawText) return Pos(no, 0);\n    }\n  }\n\n  function bySentence(cm, pos, dir) {\n    var line = pos.line, ch = pos.ch;\n    var text = cm.getLine(pos.line), sawWord = false;\n    for (;;) {\n      var next = text.charAt(ch + (dir < 0 ? -1 : 0));\n      if (!next) { // End/beginning of line reached\n        if (line == (dir < 0 ? cm.firstLine() : cm.lastLine())) return Pos(line, ch);\n        text = cm.getLine(line + dir);\n        if (!/\\S/.test(text)) return Pos(line, ch);\n        line += dir;\n        ch = dir < 0 ? text.length : 0;\n        continue;\n      }\n      if (sawWord && /[!?.]/.test(next)) return Pos(line, ch + (dir > 0 ? 1 : 0));\n      if (!sawWord) sawWord = /\\w/.test(next);\n      ch += dir;\n    }\n  }\n\n  function byExpr(cm, pos, dir) {\n    var wrap;\n    if (cm.findMatchingBracket && (wrap = cm.findMatchingBracket(pos, {strict: true}))\n        && wrap.match && (wrap.forward ? 1 : -1) == dir)\n      return dir > 0 ? Pos(wrap.to.line, wrap.to.ch + 1) : wrap.to;\n\n    for (var first = true;; first = false) {\n      var token = cm.getTokenAt(pos);\n      var after = Pos(pos.line, dir < 0 ? token.start : token.end);\n      if (first && dir > 0 && token.end == pos.ch || !/\\w/.test(token.string)) {\n        var newPos = cm.findPosH(after, dir, \"char\");\n        if (posEq(after, newPos)) return pos;\n        else pos = newPos;\n      } else {\n        return after;\n      }\n    }\n  }\n\n  // Prefixes (only crudely supported)\n\n  function getPrefix(cm, precise) {\n    var digits = cm.state.emacsPrefix;\n    if (!digits) return precise ? null : 1;\n    clearPrefix(cm);\n    return digits == \"-\" ? -1 : Number(digits);\n  }\n\n  function repeated(cmd) {\n    var f = typeof cmd == \"string\" ? function(cm) { cm.execCommand(cmd); } : cmd;\n    return function(cm) {\n      var prefix = getPrefix(cm);\n      f(cm);\n      for (var i = 1; i < prefix; ++i) f(cm);\n    };\n  }\n\n  function findEnd(cm, pos, by, dir) {\n    var prefix = getPrefix(cm);\n    if (prefix < 0) { dir = -dir; prefix = -prefix; }\n    for (var i = 0; i < prefix; ++i) {\n      var newPos = by(cm, pos, dir);\n      if (posEq(newPos, pos)) break;\n      pos = newPos;\n    }\n    return pos;\n  }\n\n  function move(by, dir) {\n    var f = function(cm) {\n      cm.extendSelection(findEnd(cm, cm.getCursor(), by, dir));\n    };\n    f.motion = true;\n    return f;\n  }\n\n  function killTo(cm, by, dir, ring) {\n    var selections = cm.listSelections(), cursor;\n    var i = selections.length;\n    while (i--) {\n      cursor = selections[i].head;\n      kill(cm, cursor, findEnd(cm, cursor, by, dir), ring);\n    }\n  }\n\n  function killRegion(cm, ring) {\n    if (cm.somethingSelected()) {\n      var selections = cm.listSelections(), selection;\n      var i = selections.length;\n      while (i--) {\n        selection = selections[i];\n        kill(cm, selection.anchor, selection.head, ring);\n      }\n      return true;\n    }\n  }\n\n  function addPrefix(cm, digit) {\n    if (cm.state.emacsPrefix) {\n      if (digit != \"-\") cm.state.emacsPrefix += digit;\n      return;\n    }\n    // Not active yet\n    cm.state.emacsPrefix = digit;\n    cm.on(\"keyHandled\", maybeClearPrefix);\n    cm.on(\"inputRead\", maybeDuplicateInput);\n  }\n\n  var prefixPreservingKeys = {\"Alt-G\": true, \"Ctrl-X\": true, \"Ctrl-Q\": true, \"Ctrl-U\": true};\n\n  function maybeClearPrefix(cm, arg) {\n    if (!cm.state.emacsPrefixMap && !prefixPreservingKeys.hasOwnProperty(arg))\n      clearPrefix(cm);\n  }\n\n  function clearPrefix(cm) {\n    cm.state.emacsPrefix = null;\n    cm.off(\"keyHandled\", maybeClearPrefix);\n    cm.off(\"inputRead\", maybeDuplicateInput);\n  }\n\n  function maybeDuplicateInput(cm, event) {\n    var dup = getPrefix(cm);\n    if (dup > 1 && event.origin == \"+input\") {\n      var one = event.text.join(\"\\n\"), txt = \"\";\n      for (var i = 1; i < dup; ++i) txt += one;\n      cm.replaceSelection(txt);\n    }\n  }\n\n  function addPrefixMap(cm) {\n    cm.state.emacsPrefixMap = true;\n    cm.addKeyMap(prefixMap);\n    cm.on(\"keyHandled\", maybeRemovePrefixMap);\n    cm.on(\"inputRead\", maybeRemovePrefixMap);\n  }\n\n  function maybeRemovePrefixMap(cm, arg) {\n    if (typeof arg == \"string\" && (/^\\d$/.test(arg) || arg == \"Ctrl-U\")) return;\n    cm.removeKeyMap(prefixMap);\n    cm.state.emacsPrefixMap = false;\n    cm.off(\"keyHandled\", maybeRemovePrefixMap);\n    cm.off(\"inputRead\", maybeRemovePrefixMap);\n  }\n\n  // Utilities\n\n  function setMark(cm) {\n    cm.setCursor(cm.getCursor());\n    cm.setExtending(!cm.getExtending());\n    cm.on(\"change\", function() { cm.setExtending(false); });\n  }\n\n  function clearMark(cm) {\n    cm.setExtending(false);\n    cm.setCursor(cm.getCursor());\n  }\n\n  function getInput(cm, msg, f) {\n    if (cm.openDialog)\n      cm.openDialog(msg + \": <input type=\\\"text\\\" style=\\\"width: 10em\\\"/>\", f, {bottom: true});\n    else\n      f(prompt(msg, \"\"));\n  }\n\n  function operateOnWord(cm, op) {\n    var start = cm.getCursor(), end = cm.findPosH(start, 1, \"word\");\n    cm.replaceRange(op(cm.getRange(start, end)), start, end);\n    cm.setCursor(end);\n  }\n\n  function toEnclosingExpr(cm) {\n    var pos = cm.getCursor(), line = pos.line, ch = pos.ch;\n    var stack = [];\n    while (line >= cm.firstLine()) {\n      var text = cm.getLine(line);\n      for (var i = ch == null ? text.length : ch; i > 0;) {\n        var ch = text.charAt(--i);\n        if (ch == \")\")\n          stack.push(\"(\");\n        else if (ch == \"]\")\n          stack.push(\"[\");\n        else if (ch == \"}\")\n          stack.push(\"{\");\n        else if (/[\\(\\{\\[]/.test(ch) && (!stack.length || stack.pop() != ch))\n          return cm.extendSelection(Pos(line, i));\n      }\n      --line; ch = null;\n    }\n  }\n\n  function quit(cm) {\n    cm.execCommand(\"clearSearch\");\n    clearMark(cm);\n  }\n\n  CodeMirror.emacs = {kill: kill, killRegion: killRegion, repeated: repeated};\n\n  // Actual keymap\n\n  var keyMap = CodeMirror.keyMap.emacs = CodeMirror.normalizeKeyMap({\n    \"Ctrl-W\": function(cm) {kill(cm, cm.getCursor(\"start\"), cm.getCursor(\"end\"), true);},\n    \"Ctrl-K\": repeated(function(cm) {\n      var start = cm.getCursor(), end = cm.clipPos(Pos(start.line));\n      var text = cm.getRange(start, end);\n      if (!/\\S/.test(text)) {\n        text += \"\\n\";\n        end = Pos(start.line + 1, 0);\n      }\n      kill(cm, start, end, \"grow\", text);\n    }),\n    \"Alt-W\": function(cm) {\n      addToRing(cm.getSelection());\n      clearMark(cm);\n    },\n    \"Ctrl-Y\": function(cm) {\n      var start = cm.getCursor();\n      cm.replaceRange(getFromRing(getPrefix(cm)), start, start, \"paste\");\n      cm.setSelection(start, cm.getCursor());\n    },\n    \"Alt-Y\": function(cm) {cm.replaceSelection(popFromRing(), \"around\", \"paste\");},\n\n    \"Ctrl-Space\": setMark, \"Ctrl-Shift-2\": setMark,\n\n    \"Ctrl-F\": move(byChar, 1), \"Ctrl-B\": move(byChar, -1),\n    \"Right\": move(byChar, 1), \"Left\": move(byChar, -1),\n    \"Ctrl-D\": function(cm) { killTo(cm, byChar, 1, false); },\n    \"Delete\": function(cm) { killRegion(cm, false) || killTo(cm, byChar, 1, false); },\n    \"Ctrl-H\": function(cm) { killTo(cm, byChar, -1, false); },\n    \"Backspace\": function(cm) { killRegion(cm, false) || killTo(cm, byChar, -1, false); },\n\n    \"Alt-F\": move(byWord, 1), \"Alt-B\": move(byWord, -1),\n    \"Alt-Right\": move(byWord, 1), \"Alt-Left\": move(byWord, -1),\n    \"Alt-D\": function(cm) { killTo(cm, byWord, 1, \"grow\"); },\n    \"Alt-Backspace\": function(cm) { killTo(cm, byWord, -1, \"grow\"); },\n\n    \"Ctrl-N\": move(byLine, 1), \"Ctrl-P\": move(byLine, -1),\n    \"Down\": move(byLine, 1), \"Up\": move(byLine, -1),\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStart\",\n\n    \"Alt-V\": move(byPage, -1), \"Ctrl-V\": move(byPage, 1),\n    \"PageUp\": move(byPage, -1), \"PageDown\": move(byPage, 1),\n\n    \"Ctrl-Up\": move(byParagraph, -1), \"Ctrl-Down\": move(byParagraph, 1),\n\n    \"Alt-A\": move(bySentence, -1), \"Alt-E\": move(bySentence, 1),\n    \"Alt-K\": function(cm) { killTo(cm, bySentence, 1, \"grow\"); },\n\n    \"Ctrl-Alt-K\": function(cm) { killTo(cm, byExpr, 1, \"grow\"); },\n    \"Ctrl-Alt-Backspace\": function(cm) { killTo(cm, byExpr, -1, \"grow\"); },\n    \"Ctrl-Alt-F\": move(byExpr, 1), \"Ctrl-Alt-B\": move(byExpr, -1, \"grow\"),\n\n    \"Shift-Ctrl-Alt-2\": function(cm) {\n      var cursor = cm.getCursor();\n      cm.setSelection(findEnd(cm, cursor, byExpr, 1), cursor);\n    },\n    \"Ctrl-Alt-T\": function(cm) {\n      var leftStart = byExpr(cm, cm.getCursor(), -1), leftEnd = byExpr(cm, leftStart, 1);\n      var rightEnd = byExpr(cm, leftEnd, 1), rightStart = byExpr(cm, rightEnd, -1);\n      cm.replaceRange(cm.getRange(rightStart, rightEnd) + cm.getRange(leftEnd, rightStart) +\n                      cm.getRange(leftStart, leftEnd), leftStart, rightEnd);\n    },\n    \"Ctrl-Alt-U\": repeated(toEnclosingExpr),\n\n    \"Alt-Space\": function(cm) {\n      var pos = cm.getCursor(), from = pos.ch, to = pos.ch, text = cm.getLine(pos.line);\n      while (from && /\\s/.test(text.charAt(from - 1))) --from;\n      while (to < text.length && /\\s/.test(text.charAt(to))) ++to;\n      cm.replaceRange(\" \", Pos(pos.line, from), Pos(pos.line, to));\n    },\n    \"Ctrl-O\": repeated(function(cm) { cm.replaceSelection(\"\\n\", \"start\"); }),\n    \"Ctrl-T\": repeated(function(cm) {\n      cm.execCommand(\"transposeChars\");\n    }),\n\n    \"Alt-C\": repeated(function(cm) {\n      operateOnWord(cm, function(w) {\n        var letter = w.search(/\\w/);\n        if (letter == -1) return w;\n        return w.slice(0, letter) + w.charAt(letter).toUpperCase() + w.slice(letter + 1).toLowerCase();\n      });\n    }),\n    \"Alt-U\": repeated(function(cm) {\n      operateOnWord(cm, function(w) { return w.toUpperCase(); });\n    }),\n    \"Alt-L\": repeated(function(cm) {\n      operateOnWord(cm, function(w) { return w.toLowerCase(); });\n    }),\n\n    \"Alt-;\": \"toggleComment\",\n\n    \"Ctrl-/\": repeated(\"undo\"), \"Shift-Ctrl--\": repeated(\"undo\"),\n    \"Ctrl-Z\": repeated(\"undo\"), \"Cmd-Z\": repeated(\"undo\"),\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Shift-Alt-,\": \"goDocStart\", \"Shift-Alt-.\": \"goDocEnd\",\n    \"Ctrl-S\": \"findPersistentNext\", \"Ctrl-R\": \"findPersistentPrev\", \"Ctrl-G\": quit, \"Shift-Alt-5\": \"replace\",\n    \"Alt-/\": \"autocomplete\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Ctrl-J\": repeated(function(cm) { cm.replaceSelection(\"\\n\", \"end\"); }),\n    \"Tab\": \"indentAuto\",\n\n    \"Alt-G G\": function(cm) {\n      var prefix = getPrefix(cm, true);\n      if (prefix != null && prefix > 0) return cm.setCursor(prefix - 1);\n\n      getInput(cm, \"Goto line\", function(str) {\n        var num;\n        if (str && !isNaN(num = Number(str)) && num == (num|0) && num > 0)\n          cm.setCursor(num - 1);\n      });\n    },\n\n    \"Ctrl-X Tab\": function(cm) {\n      cm.indentSelection(getPrefix(cm, true) || cm.getOption(\"indentUnit\"));\n    },\n    \"Ctrl-X Ctrl-X\": function(cm) {\n      cm.setSelection(cm.getCursor(\"head\"), cm.getCursor(\"anchor\"));\n    },\n    \"Ctrl-X Ctrl-S\": \"save\",\n    \"Ctrl-X Ctrl-W\": \"save\",\n    \"Ctrl-X S\": \"saveAll\",\n    \"Ctrl-X F\": \"open\",\n    \"Ctrl-X U\": repeated(\"undo\"),\n    \"Ctrl-X K\": \"close\",\n    \"Ctrl-X Delete\": function(cm) { kill(cm, cm.getCursor(), bySentence(cm, cm.getCursor(), 1), \"grow\"); },\n    \"Ctrl-X H\": \"selectAll\",\n\n    \"Ctrl-Q Tab\": repeated(\"insertTab\"),\n    \"Ctrl-U\": addPrefixMap,\n    \"fallthrough\": \"default\"\n  });\n\n  var prefixMap = {\"Ctrl-G\": clearPrefix};\n  function regPrefix(d) {\n    prefixMap[d] = function(cm) { addPrefix(cm, d); };\n    keyMap[\"Ctrl-\" + d] = function(cm) { addPrefix(cm, d); };\n    prefixPreservingKeys[\"Ctrl-\" + d] = true;\n  }\n  for (var i = 0; i < 10; ++i) regPrefix(String(i));\n  regPrefix(\"-\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n/**\n * Supported keybindings:\n *   Too many to list. Refer to defaultKeymap below.\n *\n * Supported Ex commands:\n *   Refer to defaultExCommandMap below.\n *\n * Registers: unnamed, -, ., :, /, _, a-z, A-Z, 0-9\n *   (Does not respect the special case for number registers when delete\n *    operator is made with these commands: %, (, ),  , /, ?, n, N, {, } )\n *   TODO: Implement the remaining registers.\n *\n * Marks: a-z, A-Z, and 0-9\n *   TODO: Implement the remaining special marks. They have more complex\n *       behavior.\n *\n * Events:\n *  'vim-mode-change' - raised on the editor anytime the current mode changes,\n *                      Event object: {mode: \"visual\", subMode: \"linewise\"}\n *\n * Code structure:\n *  1. Default keymap\n *  2. Variable declarations and short basic helpers\n *  3. Instance (External API) implementation\n *  4. Internal state tracking objects (input state, counter) implementation\n *     and instantiation\n *  5. Key handler (the main command dispatcher) implementation\n *  6. Motion, operator, and action implementations\n *  7. Helper functions for the key handler, motions, operators, and actions\n *  8. Set up Vim to work as a keymap for CodeMirror.\n *  9. Ex command implementations.\n */\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/dialog/dialog\"), require(\"../addon/edit/matchbrackets.js\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/dialog/dialog\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  'use strict';\n\n  // from https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\n  function copyToClipboard (str) {\n    var el = document.createElement('textarea');  // Create a <textarea> element\n    el.value = str;                                 // Set its value to the string that you want copied\n    el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\n    el.style.position = 'absolute';                 \n    el.style.left = '-9999px';                      // Move outside the screen to make it invisible\n    document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\n    const selected =            \n      document.getSelection().rangeCount > 0        // Check if there is any content selected previously\n        ? document.getSelection().getRangeAt(0)     // Store selection if found\n        : false;                                    // Mark as false to know no selection existed before\n    el.select();                                    // Select the <textarea> content\n    document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\n    document.body.removeChild(el);                  // Remove the <textarea> element\n    if (selected) {                                 // If a selection existed before copying\n      document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\n      document.getSelection().addRange(selected);   // Restore the original selection\n    }\n  };\n\n  var defaultKeymap = [\n    // Key to key mapping. This goes first to make it possible to override\n    // existing mappings.\n    { keys: '<Left>', type: 'keyToKey', toKeys: 'h' },\n    { keys: '<Right>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<Up>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<Down>', type: 'keyToKey', toKeys: 'j' },\n    { keys: '<Space>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<BS>', type: 'keyToKey', toKeys: 'h', context: 'normal'},\n    { keys: '<Del>', type: 'keyToKey', toKeys: 'x', context: 'normal'},\n    { keys: '<C-Space>', type: 'keyToKey', toKeys: 'W' },\n    { keys: '<C-BS>', type: 'keyToKey', toKeys: 'B', context: 'normal' },\n    { keys: '<S-Space>', type: 'keyToKey', toKeys: 'w' },\n    { keys: '<S-BS>', type: 'keyToKey', toKeys: 'b', context: 'normal' },\n    { keys: '<C-n>', type: 'keyToKey', toKeys: 'j' },\n    { keys: '<C-p>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: 's', type: 'keyToKey', toKeys: 'cl', context: 'normal' },\n    { keys: 's', type: 'keyToKey', toKeys: 'c', context: 'visual'},\n    { keys: 'S', type: 'keyToKey', toKeys: 'cc', context: 'normal' },\n    { keys: 'S', type: 'keyToKey', toKeys: 'VdO', context: 'visual' },\n    { keys: '<Home>', type: 'keyToKey', toKeys: '0' },\n    { keys: '<End>', type: 'keyToKey', toKeys: '$' },\n    { keys: '<PageUp>', type: 'keyToKey', toKeys: '<C-b>' },\n    { keys: '<PageDown>', type: 'keyToKey', toKeys: '<C-f>' },\n    { keys: '<CR>', type: 'keyToKey', toKeys: 'j^', context: 'normal' },\n    { keys: '<Ins>', type: 'action', action: 'toggleOverwrite', context: 'insert' },\n    // Motions\n    { keys: 'H', type: 'motion', motion: 'moveToTopLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'M', type: 'motion', motion: 'moveToMiddleLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'L', type: 'motion', motion: 'moveToBottomLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'h', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: false }},\n    { keys: 'l', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: true }},\n    { keys: 'j', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, linewise: true }},\n    { keys: 'k', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, linewise: true }},\n    { keys: 'gj', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: true }},\n    { keys: 'gk', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: false }},\n    { keys: 'w', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false }},\n    { keys: 'W', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false, bigWord: true }},\n    { keys: 'e', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, inclusive: true }},\n    { keys: 'E', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: 'b', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }},\n    { keys: 'B', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false, bigWord: true }},\n    { keys: 'ge', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, inclusive: true }},\n    { keys: 'gE', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: '{', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: false, toJumplist: true }},\n    { keys: '}', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: true, toJumplist: true }},\n    { keys: '(', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: false }},\n    { keys: ')', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: true }},\n    { keys: '<C-f>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: true }},\n    { keys: '<C-b>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: false }},\n    { keys: '<C-d>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: true, explicitRepeat: true }},\n    { keys: '<C-u>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: false, explicitRepeat: true }},\n    { keys: 'gg', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: false, explicitRepeat: true, linewise: true, toJumplist: true }},\n    { keys: 'G', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: true, explicitRepeat: true, linewise: true, toJumplist: true }},\n    { keys: '0', type: 'motion', motion: 'moveToStartOfLine' },\n    { keys: '^', type: 'motion', motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '+', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true }},\n    { keys: '-', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, toFirstChar:true }},\n    { keys: '_', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true, repeatOffset:-1 }},\n    { keys: '$', type: 'motion', motion: 'moveToEol', motionArgs: { inclusive: true }},\n    { keys: '%', type: 'motion', motion: 'moveToMatchedSymbol', motionArgs: { inclusive: true, toJumplist: true }},\n    { keys: 'f<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: true , inclusive: true }},\n    { keys: 'F<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: false }},\n    { keys: 't<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: true, inclusive: true }},\n    { keys: 'T<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: false }},\n    { keys: ';', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: true }},\n    { keys: ',', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: false }},\n    { keys: '\\'<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true, linewise: true}},\n    { keys: '`<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true}},\n    { keys: ']`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true } },\n    { keys: '[`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false } },\n    { keys: ']\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true, linewise: true } },\n    { keys: '[\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false, linewise: true } },\n    // the next two aren't motions but must come before more general motion declarations\n    { keys: ']p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true, matchIndent: true}},\n    { keys: '[p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true, matchIndent: true}},\n    { keys: ']<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: true, toJumplist: true}},\n    { keys: '[<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: false, toJumplist: true}},\n    { keys: '|', type: 'motion', motion: 'moveToColumn'},\n    { keys: 'o', type: 'motion', motion: 'moveToOtherHighlightedEnd', context:'visual'},\n    { keys: 'O', type: 'motion', motion: 'moveToOtherHighlightedEnd', motionArgs: {sameLine: true}, context:'visual'},\n    // Operators\n    { keys: 'd', type: 'operator', operator: 'delete' },\n    { keys: 'y', type: 'operator', operator: 'yank' },\n    { keys: 'c', type: 'operator', operator: 'change' },\n    { keys: '=', type: 'operator', operator: 'indentAuto' },\n    { keys: '>', type: 'operator', operator: 'indent', operatorArgs: { indentRight: true }},\n    { keys: '<', type: 'operator', operator: 'indent', operatorArgs: { indentRight: false }},\n    { keys: 'g~', type: 'operator', operator: 'changeCase' },\n    { keys: 'gu', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, isEdit: true },\n    { keys: 'gU', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, isEdit: true },\n    { keys: 'n', type: 'motion', motion: 'findNext', motionArgs: { forward: true, toJumplist: true }},\n    { keys: 'N', type: 'motion', motion: 'findNext', motionArgs: { forward: false, toJumplist: true }},\n    { keys: 'gn', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: true }},\n    { keys: 'gN', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: false }},\n    // Operator-Motion dual commands\n    { keys: 'x', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorMotionArgs: { visualLine: false }},\n    { keys: 'X', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: false }, operatorMotionArgs: { visualLine: true }},\n    { keys: 'D', type: 'operatorMotion', operator: 'delete', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'D', type: 'operator', operator: 'delete', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'Y', type: 'operatorMotion', operator: 'yank', motion: 'expandToLine', motionArgs: { linewise: true }, context: 'normal'},\n    { keys: 'Y', type: 'operator', operator: 'yank', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'C', type: 'operatorMotion', operator: 'change', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'C', type: 'operator', operator: 'change', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: '~', type: 'operatorMotion', operator: 'changeCase', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorArgs: { shouldMoveCursor: true }, context: 'normal'},\n    { keys: '~', type: 'operator', operator: 'changeCase', context: 'visual'},\n    { keys: '<C-w>', type: 'operatorMotion', operator: 'delete', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }, context: 'insert' },\n    //ignore C-w in normal mode\n    { keys: '<C-w>', type: 'idle', context: 'normal' },\n    // Actions\n    { keys: '<C-i>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: true }},\n    { keys: '<C-o>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: false }},\n    { keys: '<C-e>', type: 'action', action: 'scroll', actionArgs: { forward: true, linewise: true }},\n    { keys: '<C-y>', type: 'action', action: 'scroll', actionArgs: { forward: false, linewise: true }},\n    { keys: 'a', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'charAfter' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'eol' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'endOfSelectedArea' }, context: 'visual' },\n    { keys: 'i', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'inplace' }, context: 'normal' },\n    { keys: 'gi', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'lastEdit' }, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'firstNonBlank'}, context: 'normal' },\n    { keys: 'gI', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'bol'}, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'startOfSelectedArea' }, context: 'visual' },\n    { keys: 'o', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: true }, context: 'normal' },\n    { keys: 'O', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: false }, context: 'normal' },\n    { keys: 'v', type: 'action', action: 'toggleVisualMode' },\n    { keys: 'V', type: 'action', action: 'toggleVisualMode', actionArgs: { linewise: true }},\n    { keys: '<C-v>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: '<C-q>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: 'gv', type: 'action', action: 'reselectLastSelection' },\n    { keys: 'J', type: 'action', action: 'joinLines', isEdit: true },\n    { keys: 'gJ', type: 'action', action: 'joinLines', actionArgs: { keepSpaces: true }, isEdit: true },\n    { keys: 'p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true }},\n    { keys: 'P', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true }},\n    { keys: 'r<character>', type: 'action', action: 'replace', isEdit: true },\n    { keys: '@<character>', type: 'action', action: 'replayMacro' },\n    { keys: 'q<character>', type: 'action', action: 'enterMacroRecordMode' },\n    // Handle Replace-mode as a special case of insert mode.\n    { keys: 'R', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { replace: true }, context: 'normal'},\n    { keys: 'R', type: 'operator', operator: 'change', operatorArgs: { linewise: true, fullLine: true }, context: 'visual', exitVisualBlock: true},\n    { keys: 'u', type: 'action', action: 'undo', context: 'normal' },\n    { keys: 'u', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, context: 'visual', isEdit: true },\n    { keys: 'U', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, context: 'visual', isEdit: true },\n    { keys: '<C-r>', type: 'action', action: 'redo' },\n    { keys: 'm<character>', type: 'action', action: 'setMark' },\n    { keys: '\"<character>', type: 'action', action: 'setRegister' },\n    { keys: 'zz', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }},\n    { keys: 'z.', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'zt', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }},\n    { keys: 'z<CR>', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'z-', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }},\n    { keys: 'zb', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '.', type: 'action', action: 'repeatLastEdit' },\n    { keys: '<C-a>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: true, backtrack: false}},\n    { keys: '<C-x>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: false, backtrack: false}},\n    { keys: '<C-t>', type: 'action', action: 'indent', actionArgs: { indentRight: true }, context: 'insert' },\n    { keys: '<C-d>', type: 'action', action: 'indent', actionArgs: { indentRight: false }, context: 'insert' },\n    // Text object motions\n    { keys: 'a<character>', type: 'motion', motion: 'textObjectManipulation' },\n    { keys: 'i<character>', type: 'motion', motion: 'textObjectManipulation', motionArgs: { textObjectInner: true }},\n    // Search\n    { keys: '/', type: 'search', searchArgs: { forward: true, querySrc: 'prompt', toJumplist: true }},\n    { keys: '?', type: 'search', searchArgs: { forward: false, querySrc: 'prompt', toJumplist: true }},\n    { keys: '*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: '#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: 'g*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', toJumplist: true }},\n    { keys: 'g#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', toJumplist: true }},\n    // Ex command\n    { keys: ':', type: 'ex' }\n  ];\n  var defaultKeymapLength = defaultKeymap.length;\n\n  /**\n   * Ex commands\n   * Care must be taken when adding to the default Ex command map. For any\n   * pair of commands that have a shared prefix, at least one of their\n   * shortNames must not match the prefix of the other command.\n   */\n  var defaultExCommandMap = [\n    { name: 'colorscheme', shortName: 'colo' },\n    { name: 'map' },\n    { name: 'imap', shortName: 'im' },\n    { name: 'nmap', shortName: 'nm' },\n    { name: 'vmap', shortName: 'vm' },\n    { name: 'unmap' },\n    { name: 'write', shortName: 'w' },\n    { name: 'undo', shortName: 'u' },\n    { name: 'redo', shortName: 'red' },\n    { name: 'set', shortName: 'se' },\n    { name: 'setlocal', shortName: 'setl' },\n    { name: 'setglobal', shortName: 'setg' },\n    { name: 'sort', shortName: 'sor' },\n    { name: 'substitute', shortName: 's', possiblyAsync: true },\n    { name: 'nohlsearch', shortName: 'noh' },\n    { name: 'yank', shortName: 'y' },\n    { name: 'delmarks', shortName: 'delm' },\n    { name: 'registers', shortName: 'reg', excludeFromCommandHistory: true },\n    { name: 'global', shortName: 'g' }\n  ];\n\n  var Pos = CodeMirror.Pos;\n\n  var Vim = function() {\n    function enterVimMode(cm) {\n      cm.setOption('disableInput', true);\n      cm.setOption('showCursorWhenSelecting', false);\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      cm.on('cursorActivity', onCursorActivity);\n      maybeInitVimState(cm);\n      CodeMirror.on(cm.getInputField(), 'paste', getOnPasteFn(cm));\n    }\n\n    function leaveVimMode(cm) {\n      cm.setOption('disableInput', false);\n      cm.off('cursorActivity', onCursorActivity);\n      CodeMirror.off(cm.getInputField(), 'paste', getOnPasteFn(cm));\n      cm.state.vim = null;\n    }\n\n    function detachVimMap(cm, next) {\n      if (this == CodeMirror.keyMap.vim) {\n        CodeMirror.rmClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n        if (cm.getOption(\"inputStyle\") == \"contenteditable\" && document.body.style.caretColor != null) {\n          disableFatCursorMark(cm);\n          cm.getInputField().style.caretColor = \"\";\n        }\n      }\n\n      if (!next || next.attach != attachVimMap)\n        leaveVimMode(cm);\n    }\n    function attachVimMap(cm, prev) {\n      if (this == CodeMirror.keyMap.vim) {\n        CodeMirror.addClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n        if (cm.getOption(\"inputStyle\") == \"contenteditable\" && document.body.style.caretColor != null) {\n          enableFatCursorMark(cm);\n          cm.getInputField().style.caretColor = \"transparent\";\n        }\n      }\n\n      if (!prev || prev.attach != attachVimMap)\n        enterVimMode(cm);\n    }\n\n    function updateFatCursorMark(cm) {\n      if (!cm.state.fatCursorMarks) return;\n      clearFatCursorMark(cm);\n      var ranges = cm.listSelections(), result = []\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) {\n          var lineLength = cm.getLine(range.anchor.line).length;\n          if (range.anchor.ch < lineLength) {\n            result.push(cm.markText(range.anchor, Pos(range.anchor.line, range.anchor.ch + 1),\n                                    {className: \"cm-fat-cursor-mark\"}));\n          } else {\n            result.push(cm.markText(Pos(range.anchor.line, lineLength - 1),\n                                    Pos(range.anchor.line, lineLength),\n                                    {className: \"cm-fat-cursor-mark\"}));\n          }\n        }\n      }\n      cm.state.fatCursorMarks = result;\n    }\n\n    function clearFatCursorMark(cm) {\n      var marks = cm.state.fatCursorMarks;\n      if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    }\n\n    function enableFatCursorMark(cm) {\n      cm.state.fatCursorMarks = [];\n      updateFatCursorMark(cm)\n      cm.on(\"cursorActivity\", updateFatCursorMark)\n    }\n\n    function disableFatCursorMark(cm) {\n      clearFatCursorMark(cm);\n      cm.off(\"cursorActivity\", updateFatCursorMark);\n      // explicitly set fatCursorMarks to null because event listener above\n      // can be invoke after removing it, if off is called from operation\n      cm.state.fatCursorMarks = null;\n    }\n\n    // Deprecated, simply setting the keymap works again.\n    CodeMirror.defineOption('vimMode', false, function(cm, val, prev) {\n      if (val && cm.getOption(\"keyMap\") != \"vim\")\n        cm.setOption(\"keyMap\", \"vim\");\n      else if (!val && prev != CodeMirror.Init && /^vim/.test(cm.getOption(\"keyMap\")))\n        cm.setOption(\"keyMap\", \"default\");\n    });\n\n    function cmKey(key, cm) {\n      if (!cm) { return undefined; }\n      if (this[key]) { return this[key]; }\n      var vimKey = cmKeyToVimKey(key);\n      if (!vimKey) {\n        return false;\n      }\n      var cmd = CodeMirror.Vim.findKey(cm, vimKey);\n      if (typeof cmd == 'function') {\n        CodeMirror.signal(cm, 'vim-keypress', vimKey);\n      }\n      return cmd;\n    }\n\n    var modifiers = {'Shift': 'S', 'Ctrl': 'C', 'Alt': 'A', 'Cmd': 'D', 'Mod': 'A'};\n    var specialKeys = {Enter:'CR',Backspace:'BS',Delete:'Del',Insert:'Ins'};\n    function cmKeyToVimKey(key) {\n      if (key.charAt(0) == '\\'') {\n        // Keypress character binding of format \"'a'\"\n        return key.charAt(1);\n      }\n      var pieces = key.split(/-(?!$)/);\n      var lastPiece = pieces[pieces.length - 1];\n      if (pieces.length == 1 && pieces[0].length == 1) {\n        // No-modifier bindings use literal character bindings above. Skip.\n        return false;\n      } else if (pieces.length == 2 && pieces[0] == 'Shift' && lastPiece.length == 1) {\n        // Ignore Shift+char bindings as they should be handled by literal character.\n        return false;\n      }\n      var hasCharacter = false;\n      for (var i = 0; i < pieces.length; i++) {\n        var piece = pieces[i];\n        if (piece in modifiers) { pieces[i] = modifiers[piece]; }\n        else { hasCharacter = true; }\n        if (piece in specialKeys) { pieces[i] = specialKeys[piece]; }\n      }\n      if (!hasCharacter) {\n        // Vim does not support modifier only keys.\n        return false;\n      }\n      // TODO: Current bindings expect the character to be lower case, but\n      // it looks like vim key notation uses upper case.\n      if (isUpperCase(lastPiece)) {\n        pieces[pieces.length - 1] = lastPiece.toLowerCase();\n      }\n      return '<' + pieces.join('-') + '>';\n    }\n\n    function getOnPasteFn(cm) {\n      var vim = cm.state.vim;\n      if (!vim.onPasteFn) {\n        vim.onPasteFn = function() {\n          if (!vim.insertMode) {\n            cm.setCursor(offsetCursor(cm.getCursor(), 0, 1));\n            actions.enterInsertMode(cm, {}, vim);\n          }\n        };\n      }\n      return vim.onPasteFn;\n    }\n\n    var numberRegex = /[\\d]/;\n    var wordCharTest = [CodeMirror.isWordChar, function(ch) {\n      return ch && !CodeMirror.isWordChar(ch) && !/\\s/.test(ch);\n    }], bigWordCharTest = [function(ch) {\n      return /\\S/.test(ch);\n    }];\n    function makeKeyRange(start, size) {\n      var keys = [];\n      for (var i = start; i < start + size; i++) {\n        keys.push(String.fromCharCode(i));\n      }\n      return keys;\n    }\n    var upperCaseAlphabet = makeKeyRange(65, 26);\n    var lowerCaseAlphabet = makeKeyRange(97, 26);\n    var numbers = makeKeyRange(48, 10);\n    var validMarks = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['<', '>']);\n    var validRegisters = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['-', '\"', '.', ':', '_', '/']);\n\n    function isLine(cm, line) {\n      return line >= cm.firstLine() && line <= cm.lastLine();\n    }\n    function isLowerCase(k) {\n      return (/^[a-z]$/).test(k);\n    }\n    function isMatchableSymbol(k) {\n      return '()[]{}'.indexOf(k) != -1;\n    }\n    function isNumber(k) {\n      return numberRegex.test(k);\n    }\n    function isUpperCase(k) {\n      return (/^[A-Z]$/).test(k);\n    }\n    function isWhiteSpaceString(k) {\n      return (/^\\s*$/).test(k);\n    }\n    function isEndOfSentenceSymbol(k) {\n      return '.?!'.indexOf(k) != -1;\n    }\n    function inArray(val, arr) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] == val) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    var options = {};\n    function defineOption(name, defaultValue, type, aliases, callback) {\n      if (defaultValue === undefined && !callback) {\n        throw Error('defaultValue is required unless callback is provided');\n      }\n      if (!type) { type = 'string'; }\n      options[name] = {\n        type: type,\n        defaultValue: defaultValue,\n        callback: callback\n      };\n      if (aliases) {\n        for (var i = 0; i < aliases.length; i++) {\n          options[aliases[i]] = options[name];\n        }\n      }\n      if (defaultValue) {\n        setOption(name, defaultValue);\n      }\n    }\n\n    function setOption(name, value, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.type == 'boolean') {\n        if (value && value !== true) {\n          return new Error('Invalid argument: ' + name + '=' + value);\n        } else if (value !== false) {\n          // Boolean options are set to true if value is not defined.\n          value = true;\n        }\n      }\n      if (option.callback) {\n        if (scope !== 'local') {\n          option.callback(value, undefined);\n        }\n        if (scope !== 'global' && cm) {\n          option.callback(value, cm);\n        }\n      } else {\n        if (scope !== 'local') {\n          option.value = option.type == 'boolean' ? !!value : value;\n        }\n        if (scope !== 'global' && cm) {\n          cm.state.vim.options[name] = {value: value};\n        }\n      }\n    }\n\n    function getOption(name, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.callback) {\n        var local = cm && option.callback(undefined, cm);\n        if (scope !== 'global' && local !== undefined) {\n          return local;\n        }\n        if (scope !== 'local') {\n          return option.callback();\n        }\n        return;\n      } else {\n        var local = (scope !== 'global') && (cm && cm.state.vim.options[name]);\n        return (local || (scope !== 'local') && option || {}).value;\n      }\n    }\n\n    defineOption('filetype', undefined, 'string', ['ft'], function(name, cm) {\n      // Option is local. Do nothing for global.\n      if (cm === undefined) {\n        return;\n      }\n      // The 'filetype' option proxies to the CodeMirror 'mode' option.\n      if (name === undefined) {\n        var mode = cm.getOption('mode');\n        return mode == 'null' ? '' : mode;\n      } else {\n        var mode = name == '' ? 'null' : name;\n        cm.setOption('mode', mode);\n      }\n    });\n\n    var createCircularJumpList = function() {\n      var size = 100;\n      var pointer = -1;\n      var head = 0;\n      var tail = 0;\n      var buffer = new Array(size);\n      function add(cm, oldCur, newCur) {\n        var current = pointer % size;\n        var curMark = buffer[current];\n        function useNextSlot(cursor) {\n          var next = ++pointer % size;\n          var trashMark = buffer[next];\n          if (trashMark) {\n            trashMark.clear();\n          }\n          buffer[next] = cm.setBookmark(cursor);\n        }\n        if (curMark) {\n          var markPos = curMark.find();\n          // avoid recording redundant cursor position\n          if (markPos && !cursorEqual(markPos, oldCur)) {\n            useNextSlot(oldCur);\n          }\n        } else {\n          useNextSlot(oldCur);\n        }\n        useNextSlot(newCur);\n        head = pointer;\n        tail = pointer - size + 1;\n        if (tail < 0) {\n          tail = 0;\n        }\n      }\n      function move(cm, offset) {\n        pointer += offset;\n        if (pointer > head) {\n          pointer = head;\n        } else if (pointer < tail) {\n          pointer = tail;\n        }\n        var mark = buffer[(size + pointer) % size];\n        // skip marks that are temporarily removed from text buffer\n        if (mark && !mark.find()) {\n          var inc = offset > 0 ? 1 : -1;\n          var newCur;\n          var oldCur = cm.getCursor();\n          do {\n            pointer += inc;\n            mark = buffer[(size + pointer) % size];\n            // skip marks that are the same as current position\n            if (mark &&\n                (newCur = mark.find()) &&\n                !cursorEqual(oldCur, newCur)) {\n              break;\n            }\n          } while (pointer < head && pointer > tail);\n        }\n        return mark;\n      }\n      function find(cm, offset) {\n        var oldPointer = pointer;\n        var mark = move(cm, offset);\n        pointer = oldPointer;\n        return mark && mark.find();\n      }\n      return {\n        cachedCursor: undefined, //used for # and * jumps\n        add: add,\n        find: find,\n        move: move\n      };\n    };\n\n    // Returns an object to track the changes associated insert mode.  It\n    // clones the object that is passed in, or creates an empty object one if\n    // none is provided.\n    var createInsertModeChanges = function(c) {\n      if (c) {\n        // Copy construction\n        return {\n          changes: c.changes,\n          expectCursorActivityForChange: c.expectCursorActivityForChange\n        };\n      }\n      return {\n        // Change list\n        changes: [],\n        // Set to true on change, false on cursorActivity.\n        expectCursorActivityForChange: false\n      };\n    };\n\n    function MacroModeState() {\n      this.latestRegister = undefined;\n      this.isPlaying = false;\n      this.isRecording = false;\n      this.replaySearchQueries = [];\n      this.onRecordingDone = undefined;\n      this.lastInsertModeChanges = createInsertModeChanges();\n    }\n    MacroModeState.prototype = {\n      exitMacroRecordMode: function() {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.onRecordingDone) {\n          macroModeState.onRecordingDone(); // close dialog\n        }\n        macroModeState.onRecordingDone = undefined;\n        macroModeState.isRecording = false;\n      },\n      enterMacroRecordMode: function(cm, registerName) {\n        var register =\n            vimGlobalState.registerController.getRegister(registerName);\n        if (register) {\n          register.clear();\n          this.latestRegister = registerName;\n          if (cm.openDialog) {\n            this.onRecordingDone = cm.openDialog(\n                '(recording)['+registerName+']', null, {bottom:true});\n          }\n          this.isRecording = true;\n        }\n      }\n    };\n\n    function maybeInitVimState(cm) {\n      if (!cm.state.vim) {\n        // Store instance state in the CodeMirror object.\n        cm.state.vim = {\n          inputState: new InputState(),\n          // Vim's input state that triggered the last edit, used to repeat\n          // motions and operators with '.'.\n          lastEditInputState: undefined,\n          // Vim's action command before the last edit, used to repeat actions\n          // with '.' and insert mode repeat.\n          lastEditActionCommand: undefined,\n          // When using jk for navigation, if you move from a longer line to a\n          // shorter line, the cursor may clip to the end of the shorter line.\n          // If j is pressed again and cursor goes to the next line, the\n          // cursor should go back to its horizontal position on the longer\n          // line if it can. This is to keep track of the horizontal position.\n          lastHPos: -1,\n          // Doing the same with screen-position for gj/gk\n          lastHSPos: -1,\n          // The last motion command run. Cleared if a non-motion command gets\n          // executed in between.\n          lastMotion: null,\n          marks: {},\n          // Mark for rendering fake cursor for visual mode.\n          fakeCursor: null,\n          insertMode: false,\n          // Repeat count for changes made in insert mode, triggered by key\n          // sequences like 3,i. Only exists when insertMode is true.\n          insertModeRepeat: undefined,\n          visualMode: false,\n          // If we are in visual line mode. No effect if visualMode is false.\n          visualLine: false,\n          visualBlock: false,\n          lastSelection: null,\n          lastPastedText: null,\n          sel: {},\n          // Buffer-local/window-local values of vim options.\n          options: {}\n        };\n      }\n      return cm.state.vim;\n    }\n    var vimGlobalState;\n    function resetVimGlobalState() {\n      vimGlobalState = {\n        // The current search query.\n        searchQuery: null,\n        // Whether we are searching backwards.\n        searchIsReversed: false,\n        // Replace part of the last substituted pattern\n        lastSubstituteReplacePart: undefined,\n        jumpList: createCircularJumpList(),\n        macroModeState: new MacroModeState,\n        // Recording latest f, t, F or T motion command.\n        lastCharacterSearch: {increment:0, forward:true, selectedCharacter:''},\n        registerController: new RegisterController({}),\n        // search history buffer\n        searchHistoryController: new HistoryController(),\n        // ex Command history buffer\n        exCommandHistoryController : new HistoryController()\n      };\n      for (var optionName in options) {\n        var option = options[optionName];\n        option.value = option.defaultValue;\n      }\n    }\n\n    var lastInsertModeKeyTimer;\n    var vimApi= {\n      buildKeyMap: function() {\n        // TODO: Convert keymap into dictionary format for fast lookup.\n      },\n      // Testing hook, though it might be useful to expose the register\n      // controller anyways.\n      getRegisterController: function() {\n        return vimGlobalState.registerController;\n      },\n      // Testing hook.\n      resetVimGlobalState_: resetVimGlobalState,\n\n      // Testing hook.\n      getVimGlobalState_: function() {\n        return vimGlobalState;\n      },\n\n      // Testing hook.\n      maybeInitVimState_: maybeInitVimState,\n\n      suppressErrorLogging: false,\n\n      InsertModeKey: InsertModeKey,\n      map: function(lhs, rhs, ctx) {\n        // Add user defined key bindings.\n        exCommandDispatcher.map(lhs, rhs, ctx);\n      },\n      unmap: function(lhs, ctx) {\n        exCommandDispatcher.unmap(lhs, ctx);\n      },\n      // Non-recursive map function.\n      // NOTE: This will not create mappings to key maps that aren't present\n      // in the default key map. See TODO at bottom of function.\n      noremap: function(lhs, rhs, ctx) {\n        function toCtxArray(ctx) {\n          return ctx ? [ctx] : ['normal', 'insert', 'visual'];\n        }\n        var ctxsToMap = toCtxArray(ctx);\n        // Look through all actual defaults to find a map candidate.\n        var actualLength = defaultKeymap.length, origLength = defaultKeymapLength;\n        for (var i = actualLength - origLength;\n             i < actualLength && ctxsToMap.length;\n             i++) {\n          var mapping = defaultKeymap[i];\n          // Omit mappings that operate in the wrong context(s) and those of invalid type.\n          if (mapping.keys == rhs &&\n              (!ctx || !mapping.context || mapping.context === ctx) &&\n              mapping.type.substr(0, 2) !== 'ex' &&\n              mapping.type.substr(0, 3) !== 'key') {\n            // Make a shallow copy of the original keymap entry.\n            var newMapping = {};\n            for (var key in mapping) {\n              newMapping[key] = mapping[key];\n            }\n            // Modify it point to the new mapping with the proper context.\n            newMapping.keys = lhs;\n            if (ctx && !newMapping.context) {\n              newMapping.context = ctx;\n            }\n            // Add it to the keymap with a higher priority than the original.\n            this._mapCommand(newMapping);\n            // Record the mapped contexts as complete.\n            var mappedCtxs = toCtxArray(mapping.context);\n            ctxsToMap = ctxsToMap.filter(function(el) { return mappedCtxs.indexOf(el) === -1; });\n          }\n        }\n        // TODO: Create non-recursive keyToKey mappings for the unmapped contexts once those exist.\n      },\n      // Remove all user-defined mappings for the provided context.\n      mapclear: function(ctx) {\n        // Partition the existing keymap into user-defined and true defaults.\n        var actualLength = defaultKeymap.length,\n            origLength = defaultKeymapLength;\n        var userKeymap = defaultKeymap.slice(0, actualLength - origLength);\n        defaultKeymap = defaultKeymap.slice(actualLength - origLength);\n        if (ctx) {\n          // If a specific context is being cleared, we need to keep mappings\n          // from all other contexts.\n          for (var i = userKeymap.length - 1; i >= 0; i--) {\n            var mapping = userKeymap[i];\n            if (ctx !== mapping.context) {\n              if (mapping.context) {\n                this._mapCommand(mapping);\n              } else {\n                // `mapping` applies to all contexts so create keymap copies\n                // for each context except the one being cleared.\n                var contexts = ['normal', 'insert', 'visual'];\n                for (var j in contexts) {\n                  if (contexts[j] !== ctx) {\n                    var newMapping = {};\n                    for (var key in mapping) {\n                      newMapping[key] = mapping[key];\n                    }\n                    newMapping.context = contexts[j];\n                    this._mapCommand(newMapping);\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      // TODO: Expose setOption and getOption as instance methods. Need to decide how to namespace\n      // them, or somehow make them work with the existing CodeMirror setOption/getOption API.\n      setOption: setOption,\n      getOption: getOption,\n      defineOption: defineOption,\n      defineEx: function(name, prefix, func){\n        if (!prefix) {\n          prefix = name;\n        } else if (name.indexOf(prefix) !== 0) {\n          throw new Error('(Vim.defineEx) \"'+prefix+'\" is not a prefix of \"'+name+'\", command not registered');\n        }\n        exCommands[name]=func;\n        exCommandDispatcher.commandMap_[prefix]={name:name, shortName:prefix, type:'api'};\n      },\n      handleKey: function (cm, key, origin) {\n        var command = this.findKey(cm, key, origin);\n        if (typeof command === 'function') {\n          return command();\n        }\n      },\n      /**\n       * This is the outermost function called by CodeMirror, after keys have\n       * been mapped to their Vim equivalents.\n       *\n       * Finds a command based on the key (and cached keys if there is a\n       * multi-key sequence). Returns `undefined` if no key is matched, a noop\n       * function if a partial match is found (multi-key), and a function to\n       * execute the bound command if a a key is matched. The function always\n       * returns true.\n       */\n      findKey: function(cm, key, origin) {\n        var vim = maybeInitVimState(cm);\n        function handleMacroRecording() {\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            if (key == 'q') {\n              macroModeState.exitMacroRecordMode();\n              clearInputState(cm);\n              return true;\n            }\n            if (origin != 'mapping') {\n              logKey(macroModeState, key);\n            }\n          }\n        }\n        function handleEsc() {\n          if (key == '<Esc>') {\n            // Clear input state and get back to normal mode.\n            clearInputState(cm);\n            if (vim.visualMode) {\n              exitVisualMode(cm);\n            } else if (vim.insertMode) {\n              exitInsertMode(cm);\n            }\n            return true;\n          }\n        }\n        function doKeyToKey(keys) {\n          // TODO: prevent infinite recursion.\n          var match;\n          while (keys) {\n            // Pull off one command key, which is either a single character\n            // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n            match = (/<\\w+-.+?>|<\\w+>|./).exec(keys);\n            key = match[0];\n            keys = keys.substring(match.index + key.length);\n            CodeMirror.Vim.handleKey(cm, key, 'mapping');\n          }\n        }\n\n        function handleKeyInsertMode() {\n          if (handleEsc()) { return true; }\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          var keysAreChars = key.length == 1;\n          var match = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n          // Need to check all key substrings in insert mode.\n          while (keys.length > 1 && match.type != 'full') {\n            var keys = vim.inputState.keyBuffer = keys.slice(1);\n            var thisMatch = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n            if (thisMatch.type != 'none') { match = thisMatch; }\n          }\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') {\n            if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n            lastInsertModeKeyTimer = window.setTimeout(\n              function() { if (vim.insertMode && vim.inputState.keyBuffer) { clearInputState(cm); } },\n              getOption('insertModeEscKeysTimeout'));\n            return !keysAreChars;\n          }\n\n          if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n          if (keysAreChars) {\n            var selections = cm.listSelections();\n            for (var i = 0; i < selections.length; i++) {\n              var here = selections[i].head;\n              cm.replaceRange('', offsetCursor(here, 0, -(keys.length - 1)), here, '+input');\n            }\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes.pop();\n          }\n          clearInputState(cm);\n          return match.command;\n        }\n\n        function handleKeyNonInsertMode() {\n          if (handleMacroRecording() || handleEsc()) { return true; }\n\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          if (/^[1-9]\\d*$/.test(keys)) { return true; }\n\n          var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (!keysMatcher) { clearInputState(cm); return false; }\n          var context = vim.visualMode ? 'visual' :\n                                         'normal';\n          var match = commandDispatcher.matchCommand(keysMatcher[2] || keysMatcher[1], defaultKeymap, vim.inputState, context);\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') { return true; }\n\n          vim.inputState.keyBuffer = '';\n          var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (keysMatcher[1] && keysMatcher[1] != '0') {\n            vim.inputState.pushRepeatDigit(keysMatcher[1]);\n          }\n          return match.command;\n        }\n\n        var command;\n        if (vim.insertMode) { command = handleKeyInsertMode(); }\n        else { command = handleKeyNonInsertMode(); }\n        if (command === false) {\n          return !vim.insertMode && key.length === 1 ? function() { return true; } : undefined;\n        } else if (command === true) {\n          // TODO: Look into using CodeMirror's multi-key handling.\n          // Return no-op since we are caching the key. Counts as handled, but\n          // don't want act on it just yet.\n          return function() { return true; };\n        } else {\n          return function() {\n            return cm.operation(function() {\n              cm.curOp.isVimOp = true;\n              try {\n                if (command.type == 'keyToKey') {\n                  doKeyToKey(command.toKeys);\n                } else {\n                  commandDispatcher.processCommand(cm, vim, command);\n                }\n              } catch (e) {\n                // clear VIM state in case it's in a bad state.\n                cm.state.vim = undefined;\n                maybeInitVimState(cm);\n                if (!CodeMirror.Vim.suppressErrorLogging) {\n                  console['log'](e);\n                }\n                throw e;\n              }\n              return true;\n            });\n          };\n        }\n      },\n      handleEx: function(cm, input) {\n        exCommandDispatcher.processCommand(cm, input);\n      },\n\n      defineMotion: defineMotion,\n      defineAction: defineAction,\n      defineOperator: defineOperator,\n      mapCommand: mapCommand,\n      _mapCommand: _mapCommand,\n\n      defineRegister: defineRegister,\n\n      exitVisualMode: exitVisualMode,\n      exitInsertMode: exitInsertMode\n    };\n\n    // Represents the current input state.\n    function InputState() {\n      this.prefixRepeat = [];\n      this.motionRepeat = [];\n\n      this.operator = null;\n      this.operatorArgs = null;\n      this.motion = null;\n      this.motionArgs = null;\n      this.keyBuffer = []; // For matching multi-key commands.\n      this.registerName = null; // Defaults to the unnamed register.\n    }\n    InputState.prototype.pushRepeatDigit = function(n) {\n      if (!this.operator) {\n        this.prefixRepeat = this.prefixRepeat.concat(n);\n      } else {\n        this.motionRepeat = this.motionRepeat.concat(n);\n      }\n    };\n    InputState.prototype.getRepeat = function() {\n      var repeat = 0;\n      if (this.prefixRepeat.length > 0 || this.motionRepeat.length > 0) {\n        repeat = 1;\n        if (this.prefixRepeat.length > 0) {\n          repeat *= parseInt(this.prefixRepeat.join(''), 10);\n        }\n        if (this.motionRepeat.length > 0) {\n          repeat *= parseInt(this.motionRepeat.join(''), 10);\n        }\n      }\n      return repeat;\n    };\n\n    function clearInputState(cm, reason) {\n      cm.state.vim.inputState = new InputState();\n      CodeMirror.signal(cm, 'vim-command-done', reason);\n    }\n\n    /*\n     * Register stores information about copy and paste registers.  Besides\n     * text, a register must store whether it is linewise (i.e., when it is\n     * pasted, should it insert itself into a new line, or should the text be\n     * inserted at the cursor position.)\n     */\n    function Register(text, linewise, blockwise) {\n      this.clear();\n      this.keyBuffer = [text || ''];\n      this.insertModeChanges = [];\n      this.searchQueries = [];\n      this.linewise = !!linewise;\n      this.blockwise = !!blockwise;\n    }\n    Register.prototype = {\n      setText: function(text, linewise, blockwise) {\n        this.keyBuffer = [text || ''];\n        this.linewise = !!linewise;\n        this.blockwise = !!blockwise;\n      },\n      pushText: function(text, linewise) {\n        // if this register has ever been set to linewise, use linewise.\n        if (linewise) {\n          if (!this.linewise) {\n            this.keyBuffer.push('\\n');\n          }\n          this.linewise = true;\n        }\n        this.keyBuffer.push(text);\n      },\n      pushInsertModeChanges: function(changes) {\n        this.insertModeChanges.push(createInsertModeChanges(changes));\n      },\n      pushSearchQuery: function(query) {\n        this.searchQueries.push(query);\n      },\n      clear: function() {\n        this.keyBuffer = [];\n        this.insertModeChanges = [];\n        this.searchQueries = [];\n        this.linewise = false;\n      },\n      toString: function() {\n        return this.keyBuffer.join('');\n      }\n    };\n\n    /**\n     * Defines an external register.\n     *\n     * The name should be a single character that will be used to reference the register.\n     * The register should support setText, pushText, clear, and toString(). See Register\n     * for a reference implementation.\n     */\n    function defineRegister(name, register) {\n      var registers = vimGlobalState.registerController.registers;\n      if (!name || name.length != 1) {\n        throw Error('Register name must be 1 character');\n      }\n      if (registers[name]) {\n        throw Error('Register already defined ' + name);\n      }\n      registers[name] = register;\n      validRegisters.push(name);\n    }\n\n    /*\n     * vim registers allow you to keep many independent copy and paste buffers.\n     * See http://usevim.com/2012/04/13/registers/ for an introduction.\n     *\n     * RegisterController keeps the state of all the registers.  An initial\n     * state may be passed in.  The unnamed register '\"' will always be\n     * overridden.\n     */\n    function RegisterController(registers) {\n      this.registers = registers;\n      this.unnamedRegister = registers['\"'] = new Register();\n      registers['.'] = new Register();\n      registers[':'] = new Register();\n      registers['/'] = new Register();\n    }\n    RegisterController.prototype = {\n      pushText: function(registerName, operator, text, linewise, blockwise) {\n        // The black hole register, \"_, means delete/yank to nowhere.\n        if (registerName === '_') return;\n        if (linewise && text.charAt(text.length - 1) !== '\\n'){\n          text += '\\n';\n        }\n        // Lowercase and uppercase registers refer to the same register.\n        // Uppercase just means append.\n        var register = this.isValidRegister(registerName) ?\n            this.getRegister(registerName) : null;\n        // if no register/an invalid register was specified, things go to the\n        // default registers\n        if (!register) {\n          switch (operator) {\n            case 'yank':\n              // The 0 register contains the text from the most recent yank.\n              this.registers['0'] = new Register(text, linewise, blockwise);\n              break;\n            case 'delete':\n            case 'change':\n              if (text.indexOf('\\n') == -1) {\n                // Delete less than 1 line. Update the small delete register.\n                this.registers['-'] = new Register(text, linewise);\n              } else {\n                // Shift down the contents of the numbered registers and put the\n                // deleted text into register 1.\n                this.shiftNumericRegisters_();\n                this.registers['1'] = new Register(text, linewise);\n              }\n              break;\n          }\n          // Make sure the unnamed register is set to what just happened\n          this.unnamedRegister.setText(text, linewise, blockwise);\n          return;\n        }\n\n        // If we've gotten to this point, we've actually specified a register\n        var append = isUpperCase(registerName);\n        if (append) {\n          register.pushText(text, linewise);\n        } else {\n          register.setText(text, linewise, blockwise);\n        }\n        // The unnamed register always has the same value as the last used\n        // register.\n        this.unnamedRegister.setText(register.toString(), linewise);\n      },\n      // Gets the register named @name.  If one of @name doesn't already exist,\n      // create it.  If @name is invalid, return the unnamedRegister.\n      getRegister: function(name) {\n        if (!this.isValidRegister(name)) {\n          return this.unnamedRegister;\n        }\n        name = name.toLowerCase();\n        if (!this.registers[name]) {\n          this.registers[name] = new Register();\n        }\n        return this.registers[name];\n      },\n      isValidRegister: function(name) {\n        return name && inArray(name, validRegisters);\n      },\n      shiftNumericRegisters_: function() {\n        for (var i = 9; i >= 2; i--) {\n          this.registers[i] = this.getRegister('' + (i - 1));\n        }\n      }\n    };\n    function HistoryController() {\n        this.historyBuffer = [];\n        this.iterator = 0;\n        this.initialPrefix = null;\n    }\n    HistoryController.prototype = {\n      // the input argument here acts a user entered prefix for a small time\n      // until we start autocompletion in which case it is the autocompleted.\n      nextMatch: function (input, up) {\n        var historyBuffer = this.historyBuffer;\n        var dir = up ? -1 : 1;\n        if (this.initialPrefix === null) this.initialPrefix = input;\n        for (var i = this.iterator + dir; up ? i >= 0 : i < historyBuffer.length; i+= dir) {\n          var element = historyBuffer[i];\n          for (var j = 0; j <= element.length; j++) {\n            if (this.initialPrefix == element.substring(0, j)) {\n              this.iterator = i;\n              return element;\n            }\n          }\n        }\n        // should return the user input in case we reach the end of buffer.\n        if (i >= historyBuffer.length) {\n          this.iterator = historyBuffer.length;\n          return this.initialPrefix;\n        }\n        // return the last autocompleted query or exCommand as it is.\n        if (i < 0 ) return input;\n      },\n      pushInput: function(input) {\n        var index = this.historyBuffer.indexOf(input);\n        if (index > -1) this.historyBuffer.splice(index, 1);\n        if (input.length) this.historyBuffer.push(input);\n      },\n      reset: function() {\n        this.initialPrefix = null;\n        this.iterator = this.historyBuffer.length;\n      }\n    };\n    var commandDispatcher = {\n      matchCommand: function(keys, keyMap, inputState, context) {\n        var matches = commandMatches(keys, keyMap, context, inputState);\n        if (!matches.full && !matches.partial) {\n          return {type: 'none'};\n        } else if (!matches.full && matches.partial) {\n          return {type: 'partial'};\n        }\n\n        var bestMatch;\n        for (var i = 0; i < matches.full.length; i++) {\n          var match = matches.full[i];\n          if (!bestMatch) {\n            bestMatch = match;\n          }\n        }\n        if (bestMatch.keys.slice(-11) == '<character>') {\n          var character = lastChar(keys);\n          if (!character) return {type: 'none'};\n          inputState.selectedCharacter = character;\n        }\n        return {type: 'full', command: bestMatch};\n      },\n      processCommand: function(cm, vim, command) {\n        vim.inputState.repeatOverride = command.repeatOverride;\n        switch (command.type) {\n          case 'motion':\n            this.processMotion(cm, vim, command);\n            break;\n          case 'operator':\n            this.processOperator(cm, vim, command);\n            break;\n          case 'operatorMotion':\n            this.processOperatorMotion(cm, vim, command);\n            break;\n          case 'action':\n            this.processAction(cm, vim, command);\n            break;\n          case 'search':\n            this.processSearch(cm, vim, command);\n            break;\n          case 'ex':\n          case 'keyToEx':\n            this.processEx(cm, vim, command);\n            break;\n          default:\n            break;\n        }\n      },\n      processMotion: function(cm, vim, command) {\n        vim.inputState.motion = command.motion;\n        vim.inputState.motionArgs = copyArgs(command.motionArgs);\n        this.evalInput(cm, vim);\n      },\n      processOperator: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        if (inputState.operator) {\n          if (inputState.operator == command.operator) {\n            // Typing an operator twice like 'dd' makes the operator operate\n            // linewise\n            inputState.motion = 'expandToLine';\n            inputState.motionArgs = { linewise: true };\n            this.evalInput(cm, vim);\n            return;\n          } else {\n            // 2 different operators in a row doesn't make sense.\n            clearInputState(cm);\n          }\n        }\n        inputState.operator = command.operator;\n        inputState.operatorArgs = copyArgs(command.operatorArgs);\n        if (command.exitVisualBlock) {\n            vim.visualBlock = false;\n            updateCmSelection(cm);\n        }\n        if (vim.visualMode) {\n          // Operating on a selection in visual mode. We don't need a motion.\n          this.evalInput(cm, vim);\n        }\n      },\n      processOperatorMotion: function(cm, vim, command) {\n        var visualMode = vim.visualMode;\n        var operatorMotionArgs = copyArgs(command.operatorMotionArgs);\n        if (operatorMotionArgs) {\n          // Operator motions may have special behavior in visual mode.\n          if (visualMode && operatorMotionArgs.visualLine) {\n            vim.visualLine = true;\n          }\n        }\n        this.processOperator(cm, vim, command);\n        if (!visualMode) {\n          this.processMotion(cm, vim, command);\n        }\n      },\n      processAction: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        var repeat = inputState.getRepeat();\n        var repeatIsExplicit = !!repeat;\n        var actionArgs = copyArgs(command.actionArgs) || {};\n        if (inputState.selectedCharacter) {\n          actionArgs.selectedCharacter = inputState.selectedCharacter;\n        }\n        // Actions may or may not have motions and operators. Do these first.\n        if (command.operator) {\n          this.processOperator(cm, vim, command);\n        }\n        if (command.motion) {\n          this.processMotion(cm, vim, command);\n        }\n        if (command.motion || command.operator) {\n          this.evalInput(cm, vim);\n        }\n        actionArgs.repeat = repeat || 1;\n        actionArgs.repeatIsExplicit = repeatIsExplicit;\n        actionArgs.registerName = inputState.registerName;\n        clearInputState(cm);\n        vim.lastMotion = null;\n        if (command.isEdit) {\n          this.recordLastEdit(vim, inputState, command);\n        }\n        actions[command.action](cm, actionArgs, vim);\n      },\n      processSearch: function(cm, vim, command) {\n        if (!cm.getSearchCursor) {\n          // Search depends on SearchCursor.\n          return;\n        }\n        var forward = command.searchArgs.forward;\n        var wholeWordOnly = command.searchArgs.wholeWordOnly;\n        getSearchState(cm).setReversed(!forward);\n        var promptPrefix = (forward) ? '/' : '?';\n        var originalQuery = getSearchState(cm).getQuery();\n        var originalScrollPos = cm.getScrollInfo();\n        function handleQuery(query, ignoreCase, smartCase) {\n          vimGlobalState.searchHistoryController.pushInput(query);\n          vimGlobalState.searchHistoryController.reset();\n          try {\n            updateSearchQuery(cm, query, ignoreCase, smartCase);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + query);\n            clearInputState(cm);\n            return;\n          }\n          commandDispatcher.processMotion(cm, vim, {\n            type: 'motion',\n            motion: 'findNext',\n            motionArgs: { forward: true, toJumplist: command.searchArgs.toJumplist }\n          });\n        }\n        function onPromptClose(query) {\n          cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          handleQuery(query, true /** ignoreCase */, true /** smartCase */);\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            logSearchQuery(macroModeState, query);\n          }\n        }\n        function onPromptKeyUp(e, query, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Up' || keyName == 'Down') {\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            query = vimGlobalState.searchHistoryController.nextMatch(query, up) || '';\n            close(query);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.searchHistoryController.reset();\n          }\n          var parsedQuery;\n          try {\n            parsedQuery = updateSearchQuery(cm, query,\n                true /** ignoreCase */, true /** smartCase */);\n          } catch (e) {\n            // Swallow bad regexes for incremental search.\n          }\n          if (parsedQuery) {\n            cm.scrollIntoView(findNext(cm, !forward, parsedQuery), 30);\n          } else {\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          }\n        }\n        function onPromptKeyDown(e, query, close) {\n          var keyName = CodeMirror.keyName(e);\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && query == '')) {\n            vimGlobalState.searchHistoryController.pushInput(query);\n            vimGlobalState.searchHistoryController.reset();\n            updateSearchQuery(cm, originalQuery);\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          } else if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          }\n        }\n        switch (command.searchArgs.querySrc) {\n          case 'prompt':\n            var macroModeState = vimGlobalState.macroModeState;\n            if (macroModeState.isPlaying) {\n              var query = macroModeState.replaySearchQueries.shift();\n              handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            } else {\n              showPrompt(cm, {\n                  onClose: onPromptClose,\n                  prefix: promptPrefix,\n                  desc: searchPromptDesc,\n                  onKeyUp: onPromptKeyUp,\n                  onKeyDown: onPromptKeyDown\n              });\n            }\n            break;\n          case 'wordUnderCursor':\n            var word = expandWordUnderCursor(cm, false /** inclusive */,\n                true /** forward */, false /** bigWord */,\n                true /** noSymbol */);\n            var isKeyword = true;\n            if (!word) {\n              word = expandWordUnderCursor(cm, false /** inclusive */,\n                  true /** forward */, false /** bigWord */,\n                  false /** noSymbol */);\n              isKeyword = false;\n            }\n            if (!word) {\n              return;\n            }\n            var query = cm.getLine(word.start.line).substring(word.start.ch,\n                word.end.ch);\n            if (isKeyword && wholeWordOnly) {\n                query = '\\\\b' + query + '\\\\b';\n            } else {\n              query = escapeRegex(query);\n            }\n\n            // cachedCursor is used to save the old position of the cursor\n            // when * or # causes vim to seek for the nearest word and shift\n            // the cursor before entering the motion.\n            vimGlobalState.jumpList.cachedCursor = cm.getCursor();\n            cm.setCursor(word.start);\n\n            handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            break;\n        }\n      },\n      processEx: function(cm, vim, command) {\n        function onPromptClose(input) {\n          // Give the prompt some time to close so that if processCommand shows\n          // an error, the elements don't overlap.\n          vimGlobalState.exCommandHistoryController.pushInput(input);\n          vimGlobalState.exCommandHistoryController.reset();\n          exCommandDispatcher.processCommand(cm, input);\n        }\n        function onPromptKeyDown(e, input, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && input == '')) {\n            vimGlobalState.exCommandHistoryController.pushInput(input);\n            vimGlobalState.exCommandHistoryController.reset();\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          }\n          if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            input = vimGlobalState.exCommandHistoryController.nextMatch(input, up) || '';\n            close(input);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.exCommandHistoryController.reset();\n          }\n        }\n        if (command.type == 'keyToEx') {\n          // Handle user defined Ex to Ex mappings\n          exCommandDispatcher.processCommand(cm, command.exArgs.input);\n        } else {\n          if (vim.visualMode) {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':', value: '\\'<,\\'>',\n                onKeyDown: onPromptKeyDown, selectValueOnOpen: false});\n          } else {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':',\n                onKeyDown: onPromptKeyDown});\n          }\n        }\n      },\n      evalInput: function(cm, vim) {\n        // If the motion command is set, execute both the operator and motion.\n        // Otherwise return.\n        var inputState = vim.inputState;\n        var motion = inputState.motion;\n        var motionArgs = inputState.motionArgs || {};\n        var operator = inputState.operator;\n        var operatorArgs = inputState.operatorArgs || {};\n        var registerName = inputState.registerName;\n        var sel = vim.sel;\n        // TODO: Make sure cm and vim selections are identical outside visual mode.\n        var origHead = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.head): cm.getCursor('head'));\n        var origAnchor = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.anchor) : cm.getCursor('anchor'));\n        var oldHead = copyCursor(origHead);\n        var oldAnchor = copyCursor(origAnchor);\n        var newHead, newAnchor;\n        var repeat;\n        if (operator) {\n          this.recordLastEdit(vim, inputState);\n        }\n        if (inputState.repeatOverride !== undefined) {\n          // If repeatOverride is specified, that takes precedence over the\n          // input state's repeat. Used by Ex mode and can be user defined.\n          repeat = inputState.repeatOverride;\n        } else {\n          repeat = inputState.getRepeat();\n        }\n        if (repeat > 0 && motionArgs.explicitRepeat) {\n          motionArgs.repeatIsExplicit = true;\n        } else if (motionArgs.noRepeat ||\n            (!motionArgs.explicitRepeat && repeat === 0)) {\n          repeat = 1;\n          motionArgs.repeatIsExplicit = false;\n        }\n        if (inputState.selectedCharacter) {\n          // If there is a character input, stick it in all of the arg arrays.\n          motionArgs.selectedCharacter = operatorArgs.selectedCharacter =\n              inputState.selectedCharacter;\n        }\n        motionArgs.repeat = repeat;\n        clearInputState(cm);\n        if (motion) {\n          var motionResult = motions[motion](cm, origHead, motionArgs, vim, inputState);\n          vim.lastMotion = motions[motion];\n          if (!motionResult) {\n            return;\n          }\n          if (motionArgs.toJumplist) {\n            var jumpList = vimGlobalState.jumpList;\n            // if the current motion is # or *, use cachedCursor\n            var cachedCursor = jumpList.cachedCursor;\n            if (cachedCursor) {\n              recordJumpPosition(cm, cachedCursor, motionResult);\n              delete jumpList.cachedCursor;\n            } else {\n              recordJumpPosition(cm, origHead, motionResult);\n            }\n          }\n          if (motionResult instanceof Array) {\n            newAnchor = motionResult[0];\n            newHead = motionResult[1];\n          } else {\n            newHead = motionResult;\n          }\n          // TODO: Handle null returns from motion commands better.\n          if (!newHead) {\n            newHead = copyCursor(origHead);\n          }\n          if (vim.visualMode) {\n            if (!(vim.visualBlock && newHead.ch === Infinity)) {\n              newHead = clipCursorToContent(cm, newHead);\n            }\n            if (newAnchor) {\n              newAnchor = clipCursorToContent(cm, newAnchor);\n            }\n            newAnchor = newAnchor || oldAnchor;\n            sel.anchor = newAnchor;\n            sel.head = newHead;\n            updateCmSelection(cm);\n            updateMark(cm, vim, '<',\n                cursorIsBefore(newAnchor, newHead) ? newAnchor\n                    : newHead);\n            updateMark(cm, vim, '>',\n                cursorIsBefore(newAnchor, newHead) ? newHead\n                    : newAnchor);\n          } else if (!operator) {\n            newHead = clipCursorToContent(cm, newHead);\n            cm.setCursor(newHead.line, newHead.ch);\n          }\n        }\n        if (operator) {\n          if (operatorArgs.lastSel) {\n            // Replaying a visual mode operation\n            newAnchor = oldAnchor;\n            var lastSel = operatorArgs.lastSel;\n            var lineOffset = Math.abs(lastSel.head.line - lastSel.anchor.line);\n            var chOffset = Math.abs(lastSel.head.ch - lastSel.anchor.ch);\n            if (lastSel.visualLine) {\n              // Linewise Visual mode: The same number of lines.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            } else if (lastSel.visualBlock) {\n              // Blockwise Visual mode: The same number of lines and columns.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch + chOffset);\n            } else if (lastSel.head.line == lastSel.anchor.line) {\n              // Normal Visual mode within one line: The same number of characters.\n              newHead = Pos(oldAnchor.line, oldAnchor.ch + chOffset);\n            } else {\n              // Normal Visual mode with several lines: The same number of lines, in the\n              // last line the same number of characters as in the last line the last time.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            }\n            vim.visualMode = true;\n            vim.visualLine = lastSel.visualLine;\n            vim.visualBlock = lastSel.visualBlock;\n            sel = vim.sel = {\n              anchor: newAnchor,\n              head: newHead\n            };\n            updateCmSelection(cm);\n          } else if (vim.visualMode) {\n            operatorArgs.lastSel = {\n              anchor: copyCursor(sel.anchor),\n              head: copyCursor(sel.head),\n              visualBlock: vim.visualBlock,\n              visualLine: vim.visualLine\n            };\n          }\n          var curStart, curEnd, linewise, mode;\n          var cmSel;\n          if (vim.visualMode) {\n            // Init visual op\n            curStart = cursorMin(sel.head, sel.anchor);\n            curEnd = cursorMax(sel.head, sel.anchor);\n            linewise = vim.visualLine || operatorArgs.linewise;\n            mode = vim.visualBlock ? 'block' :\n                   linewise ? 'line' :\n                   'char';\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode);\n            if (linewise) {\n              var ranges = cmSel.ranges;\n              if (mode == 'block') {\n                // Linewise operators in visual block mode extend to end of line\n                for (var i = 0; i < ranges.length; i++) {\n                  ranges[i].head.ch = lineLength(cm, ranges[i].head.line);\n                }\n              } else if (mode == 'line') {\n                ranges[0].head = Pos(ranges[0].head.line + 1, 0);\n              }\n            }\n          } else {\n            // Init motion op\n            curStart = copyCursor(newAnchor || oldAnchor);\n            curEnd = copyCursor(newHead || oldHead);\n            if (cursorIsBefore(curEnd, curStart)) {\n              var tmp = curStart;\n              curStart = curEnd;\n              curEnd = tmp;\n            }\n            linewise = motionArgs.linewise || operatorArgs.linewise;\n            if (linewise) {\n              // Expand selection to entire line.\n              expandSelectionToLine(cm, curStart, curEnd);\n            } else if (motionArgs.forward) {\n              // Clip to trailing newlines only if the motion goes forward.\n              clipToLine(cm, curStart, curEnd);\n            }\n            mode = 'char';\n            var exclusive = !motionArgs.inclusive || linewise;\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode, exclusive);\n          }\n          cm.setSelections(cmSel.ranges, cmSel.primary);\n          vim.lastMotion = null;\n          operatorArgs.repeat = repeat; // For indent in visual mode.\n          operatorArgs.registerName = registerName;\n          // Keep track of linewise as it affects how paste and change behave.\n          operatorArgs.linewise = linewise;\n          var operatorMoveTo = operators[operator](\n            cm, operatorArgs, cmSel.ranges, oldAnchor, newHead);\n          if (vim.visualMode) {\n            exitVisualMode(cm, operatorMoveTo != null);\n          }\n          if (operatorMoveTo) {\n            cm.setCursor(operatorMoveTo);\n          }\n        }\n      },\n      recordLastEdit: function(vim, inputState, actionCommand) {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        vim.lastEditInputState = inputState;\n        vim.lastEditActionCommand = actionCommand;\n        macroModeState.lastInsertModeChanges.changes = [];\n        macroModeState.lastInsertModeChanges.expectCursorActivityForChange = false;\n        macroModeState.lastInsertModeChanges.visualBlock = vim.visualBlock ? vim.sel.head.line - vim.sel.anchor.line : 0;\n      }\n    };\n\n    /**\n     * typedef {Object{line:number,ch:number}} Cursor An object containing the\n     *     position of the cursor.\n     */\n    // All of the functions below return Cursor objects.\n    var motions = {\n      moveToTopLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).top + motionArgs.repeat -1;\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToMiddleLine: function(cm) {\n        var range = getUserVisibleLines(cm);\n        var line = Math.floor((range.top + range.bottom) * 0.5);\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToBottomLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).bottom - motionArgs.repeat +1;\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      expandToLine: function(_cm, head, motionArgs) {\n        // Expands forward to end of line, and then to next line if repeat is\n        // >1. Does not handle backward motion!\n        var cur = head;\n        return Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      },\n      findNext: function(cm, _head, motionArgs) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        if (!query) {\n          return;\n        }\n        var prev = !motionArgs.forward;\n        // If search is initiated with ? instead of /, negate direction.\n        prev = (state.isReversed()) ? !prev : prev;\n        highlightSearchMatches(cm, query);\n        return findNext(cm, prev/** prev */, query, motionArgs.repeat);\n      },\n      /**\n       * Find and select the next occurrence of the search query. If the cursor is currently\n       * within a match, then find and select the current match. Otherwise, find the next occurrence in the\n       * appropriate direction.\n       *\n       * This differs from `findNext` in the following ways:\n       *\n       * 1. Instead of only returning the \"from\", this returns a \"from\", \"to\" range.\n       * 2. If the cursor is currently inside a search match, this selects the current match\n       *    instead of the next match.\n       * 3. If there is no associated operator, this will turn on visual mode.\n       */\n      findAndSelectNextInclusive: function(cm, _head, motionArgs, vim, prevInputState) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n\n        if (!query) {\n          return;\n        }\n\n        var prev = !motionArgs.forward;\n        prev = (state.isReversed()) ? !prev : prev;\n\n        // next: [from, to] | null\n        var next = findNextFromAndToInclusive(cm, prev, query, motionArgs.repeat, vim);\n\n        // No matches.\n        if (!next) {\n          return;\n        }\n\n        // If there's an operator that will be executed, return the selection.\n        if (prevInputState.operator) {\n          return next;\n        }\n\n        // At this point, we know that there is no accompanying operator -- let's\n        // deal with visual mode in order to select an appropriate match.\n\n        var from = next[0];\n        // For whatever reason, when we use the \"to\" as returned by searchcursor.js directly,\n        // the resulting selection is extended by 1 char. Let's shrink it so that only the\n        // match is selected.\n        var to = Pos(next[1].line, next[1].ch - 1);\n\n        if (vim.visualMode) {\n          // If we were in visualLine or visualBlock mode, get out of it.\n          if (vim.visualLine || vim.visualBlock) {\n            vim.visualLine = false;\n            vim.visualBlock = false;\n            CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n          }\n\n          // If we're currently in visual mode, we should extend the selection to include\n          // the search result.\n          var anchor = vim.sel.anchor;\n          if (anchor) {\n            if (state.isReversed()) {\n              if (motionArgs.forward) {\n                return [anchor, from];\n              }\n\n              return [anchor, to];\n            } else {\n              if (motionArgs.forward) {\n                return [anchor, to];\n              }\n\n              return [anchor, from];\n            }\n          }\n        } else {\n          // Let's turn visual mode on.\n          vim.visualMode = true;\n          vim.visualLine = false;\n          vim.visualBlock = false;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n        }\n\n        return prev ? [to, from] : [from, to];\n      },\n      goToMark: function(cm, _head, motionArgs, vim) {\n        var pos = getMarkPos(cm, vim, motionArgs.selectedCharacter);\n        if (pos) {\n          return motionArgs.linewise ? { line: pos.line, ch: findFirstNonWhiteSpaceCharacter(cm.getLine(pos.line)) } : pos;\n        }\n        return null;\n      },\n      moveToOtherHighlightedEnd: function(cm, _head, motionArgs, vim) {\n        if (vim.visualBlock && motionArgs.sameLine) {\n          var sel = vim.sel;\n          return [\n            clipCursorToContent(cm, Pos(sel.anchor.line, sel.head.ch)),\n            clipCursorToContent(cm, Pos(sel.head.line, sel.anchor.ch))\n          ];\n        } else {\n          return ([vim.sel.head, vim.sel.anchor]);\n        }\n      },\n      jumpToMark: function(cm, head, motionArgs, vim) {\n        var best = head;\n        for (var i = 0; i < motionArgs.repeat; i++) {\n          var cursor = best;\n          for (var key in vim.marks) {\n            if (!isLowerCase(key)) {\n              continue;\n            }\n            var mark = vim.marks[key].find();\n            var isWrongDirection = (motionArgs.forward) ?\n              cursorIsBefore(mark, cursor) : cursorIsBefore(cursor, mark);\n\n            if (isWrongDirection) {\n              continue;\n            }\n            if (motionArgs.linewise && (mark.line == cursor.line)) {\n              continue;\n            }\n\n            var equal = cursorEqual(cursor, best);\n            var between = (motionArgs.forward) ?\n              cursorIsBetween(cursor, mark, best) :\n              cursorIsBetween(best, mark, cursor);\n\n            if (equal || between) {\n              best = mark;\n            }\n          }\n        }\n\n        if (motionArgs.linewise) {\n          // Vim places the cursor on the first non-whitespace character of\n          // the line if there is one, else it places the cursor at the end\n          // of the line, regardless of whether a mark was found.\n          best = Pos(best.line, findFirstNonWhiteSpaceCharacter(cm.getLine(best.line)));\n        }\n        return best;\n      },\n      moveByCharacters: function(_cm, head, motionArgs) {\n        var cur = head;\n        var repeat = motionArgs.repeat;\n        var ch = motionArgs.forward ? cur.ch + repeat : cur.ch - repeat;\n        return Pos(cur.line, ch);\n      },\n      moveByLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        var endCh = cur.ch;\n        // Depending what our last motion was, we may want to do different\n        // things. If our last motion was moving vertically, we want to\n        // preserve the HPos from our last horizontal move.  If our last motion\n        // was going to the end of a line, moving vertically we should go to\n        // the end of the line, etc.\n        switch (vim.lastMotion) {\n          case this.moveByLines:\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveToColumn:\n          case this.moveToEol:\n            endCh = vim.lastHPos;\n            break;\n          default:\n            vim.lastHPos = endCh;\n        }\n        var repeat = motionArgs.repeat+(motionArgs.repeatOffset||0);\n        var line = motionArgs.forward ? cur.line + repeat : cur.line - repeat;\n        var first = cm.firstLine();\n        var last = cm.lastLine();\n        var posV = cm.findPosV(cur, (motionArgs.forward ? repeat : -repeat), 'line', vim.lastHSPos);\n        var hasMarkedText = motionArgs.forward ? posV.line > line : posV.line < line;\n        if (hasMarkedText) {\n          line = posV.line;\n          endCh = posV.ch;\n        }\n        // Vim go to line begin or line end when cursor at first/last line and\n        // move to previous/next line is triggered.\n        if (line < first && cur.line == first){\n          return this.moveToStartOfLine(cm, head, motionArgs, vim);\n        } else if (line > last && cur.line == last){\n            return moveToEol(cm, head, motionArgs, vim, true);\n        }\n        if (motionArgs.toFirstChar){\n          endCh=findFirstNonWhiteSpaceCharacter(cm.getLine(line));\n          vim.lastHPos = endCh;\n        }\n        vim.lastHSPos = cm.charCoords(Pos(line, endCh),'div').left;\n        return Pos(line, endCh);\n      },\n      moveByDisplayLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        switch (vim.lastMotion) {\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveByLines:\n          case this.moveToColumn:\n          case this.moveToEol:\n            break;\n          default:\n            vim.lastHSPos = cm.charCoords(cur,'div').left;\n        }\n        var repeat = motionArgs.repeat;\n        var res=cm.findPosV(cur,(motionArgs.forward ? repeat : -repeat),'line',vim.lastHSPos);\n        if (res.hitSide) {\n          if (motionArgs.forward) {\n            var lastCharCoords = cm.charCoords(res, 'div');\n            var goalCoords = { top: lastCharCoords.top + 8, left: vim.lastHSPos };\n            var res = cm.coordsChar(goalCoords, 'div');\n          } else {\n            var resCoords = cm.charCoords(Pos(cm.firstLine(), 0), 'div');\n            resCoords.left = vim.lastHSPos;\n            res = cm.coordsChar(resCoords, 'div');\n          }\n        }\n        vim.lastHPos = res.ch;\n        return res;\n      },\n      moveByPage: function(cm, head, motionArgs) {\n        // CodeMirror only exposes functions that move the cursor page down, so\n        // doing this bad hack to move the cursor and move it back. evalInput\n        // will move the cursor to where it should be in the end.\n        var curStart = head;\n        var repeat = motionArgs.repeat;\n        return cm.findPosV(curStart, (motionArgs.forward ? repeat : -repeat), 'page');\n      },\n      moveByParagraph: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findParagraph(cm, head, motionArgs.repeat, dir);\n      },\n      moveBySentence: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findSentence(cm, head, motionArgs.repeat, dir);\n      },\n      moveByScroll: function(cm, head, motionArgs, vim) {\n        var scrollbox = cm.getScrollInfo();\n        var curEnd = null;\n        var repeat = motionArgs.repeat;\n        if (!repeat) {\n          repeat = scrollbox.clientHeight / (2 * cm.defaultTextHeight());\n        }\n        var orig = cm.charCoords(head, 'local');\n        motionArgs.repeat = repeat;\n        var curEnd = motions.moveByDisplayLines(cm, head, motionArgs, vim);\n        if (!curEnd) {\n          return null;\n        }\n        var dest = cm.charCoords(curEnd, 'local');\n        cm.scrollTo(null, scrollbox.top + dest.top - orig.top);\n        return curEnd;\n      },\n      moveByWords: function(cm, head, motionArgs) {\n        return moveToWord(cm, head, motionArgs.repeat, !!motionArgs.forward,\n            !!motionArgs.wordEnd, !!motionArgs.bigWord);\n      },\n      moveTillCharacter: function(cm, _head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        var curEnd = moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter);\n        var increment = motionArgs.forward ? -1 : 1;\n        recordLastCharacterSearch(increment, motionArgs);\n        if (!curEnd) return null;\n        curEnd.ch += increment;\n        return curEnd;\n      },\n      moveToCharacter: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        recordLastCharacterSearch(0, motionArgs);\n        return moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToSymbol: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        return findSymbol(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToColumn: function(cm, head, motionArgs, vim) {\n        var repeat = motionArgs.repeat;\n        // repeat is equivalent to which column we want to move to!\n        vim.lastHPos = repeat - 1;\n        vim.lastHSPos = cm.charCoords(head,'div').left;\n        return moveToColumn(cm, repeat);\n      },\n      moveToEol: function(cm, head, motionArgs, vim) {\n        return moveToEol(cm, head, motionArgs, vim, false);\n      },\n      moveToFirstNonWhiteSpaceCharacter: function(cm, head) {\n        // Go to the start of the line where the text begins, or the end for\n        // whitespace-only lines\n        var cursor = head;\n        return Pos(cursor.line,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(cursor.line)));\n      },\n      moveToMatchedSymbol: function(cm, head) {\n        var cursor = head;\n        var line = cursor.line;\n        var ch = cursor.ch;\n        var lineText = cm.getLine(line);\n        var symbol;\n        for (; ch < lineText.length; ch++) {\n          symbol = lineText.charAt(ch);\n          if (symbol && isMatchableSymbol(symbol)) {\n            var style = cm.getTokenTypeAt(Pos(line, ch + 1));\n            if (style !== \"string\" && style !== \"comment\") {\n              break;\n            }\n          }\n        }\n        if (ch < lineText.length) {\n          // Only include angle brackets in analysis if they are being matched.\n          var re = (ch === '<' || ch === '>') ? /[(){}[\\]<>]/ : /[(){}[\\]]/;\n          var matched = cm.findMatchingBracket(Pos(line, ch), {bracketRegex: re});\n          return matched.to;\n        } else {\n          return cursor;\n        }\n      },\n      moveToStartOfLine: function(_cm, head) {\n        return Pos(head.line, 0);\n      },\n      moveToLineOrEdgeOfDocument: function(cm, _head, motionArgs) {\n        var lineNum = motionArgs.forward ? cm.lastLine() : cm.firstLine();\n        if (motionArgs.repeatIsExplicit) {\n          lineNum = motionArgs.repeat - cm.getOption('firstLineNumber');\n        }\n        return Pos(lineNum,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(lineNum)));\n      },\n      textObjectManipulation: function(cm, head, motionArgs, vim) {\n        // TODO: lots of possible exceptions that can be thrown here. Try da(\n        //     outside of a () block.\n        var mirroredPairs = {'(': ')', ')': '(',\n                             '{': '}', '}': '{',\n                             '[': ']', ']': '[',\n                             '<': '>', '>': '<'};\n        var selfPaired = {'\\'': true, '\"': true, '`': true};\n\n        var character = motionArgs.selectedCharacter;\n        // 'b' refers to  '()' block.\n        // 'B' refers to  '{}' block.\n        if (character == 'b') {\n          character = '(';\n        } else if (character == 'B') {\n          character = '{';\n        }\n\n        // Inclusive is the difference between a and i\n        // TODO: Instead of using the additional text object map to perform text\n        //     object operations, merge the map into the defaultKeyMap and use\n        //     motionArgs to define behavior. Define separate entries for 'aw',\n        //     'iw', 'a[', 'i[', etc.\n        var inclusive = !motionArgs.textObjectInner;\n\n        var tmp;\n        if (mirroredPairs[character]) {\n          tmp = selectCompanionObject(cm, head, character, inclusive);\n        } else if (selfPaired[character]) {\n          tmp = findBeginningAndEnd(cm, head, character, inclusive);\n        } else if (character === 'W') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     true /** bigWord */);\n        } else if (character === 'w') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     false /** bigWord */);\n        } else if (character === 'p') {\n          tmp = findParagraph(cm, head, motionArgs.repeat, 0, inclusive);\n          motionArgs.linewise = true;\n          if (vim.visualMode) {\n            if (!vim.visualLine) { vim.visualLine = true; }\n          } else {\n            var operatorArgs = vim.inputState.operatorArgs;\n            if (operatorArgs) { operatorArgs.linewise = true; }\n            tmp.end.line--;\n          }\n        } else if (character === 't') {\n          tmp = expandTagUnderCursor(cm, head, inclusive);\n        } else {\n          // No text object defined for this, don't move.\n          return null;\n        }\n\n        if (!cm.state.vim.visualMode) {\n          return [tmp.start, tmp.end];\n        } else {\n          return expandSelection(cm, tmp.start, tmp.end);\n        }\n      },\n\n      repeatLastCharacterSearch: function(cm, head, motionArgs) {\n        var lastSearch = vimGlobalState.lastCharacterSearch;\n        var repeat = motionArgs.repeat;\n        var forward = motionArgs.forward === lastSearch.forward;\n        var increment = (lastSearch.increment ? 1 : 0) * (forward ? -1 : 1);\n        cm.moveH(-increment, 'char');\n        motionArgs.inclusive = forward ? true : false;\n        var curEnd = moveToCharacter(cm, repeat, forward, lastSearch.selectedCharacter);\n        if (!curEnd) {\n          cm.moveH(increment, 'char');\n          return head;\n        }\n        curEnd.ch += increment;\n        return curEnd;\n      }\n    };\n\n    function defineMotion(name, fn) {\n      motions[name] = fn;\n    }\n\n    function fillArray(val, times) {\n      var arr = [];\n      for (var i = 0; i < times; i++) {\n        arr.push(val);\n      }\n      return arr;\n    }\n    /**\n     * An operator acts on a text selection. It receives the list of selections\n     * as input. The corresponding CodeMirror selection is guaranteed to\n    * match the input selection.\n     */\n    var operators = {\n      change: function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        var anchor = ranges[0].anchor,\n            head = ranges[0].head;\n        if (!vim.visualMode) {\n          text = cm.getRange(anchor, head);\n          var lastState = vim.lastEditInputState || {};\n          if (lastState.motion == \"moveByWords\" && !isWhiteSpaceString(text)) {\n            // Exclude trailing whitespace if the range is not all whitespace.\n            var match = (/\\s+$/).exec(text);\n            if (match && lastState.motionArgs && lastState.motionArgs.forward) {\n              head = offsetCursor(head, 0, - match[0].length);\n              text = text.slice(0, - match[0].length);\n            }\n          }\n          var prevLineEnd = new Pos(anchor.line - 1, Number.MAX_VALUE);\n          var wasLastLine = cm.firstLine() == cm.lastLine();\n          if (head.line > cm.lastLine() && args.linewise && !wasLastLine) {\n            cm.replaceRange('', prevLineEnd, head);\n          } else {\n            cm.replaceRange('', anchor, head);\n          }\n          if (args.linewise) {\n            // Push the next line back down, if there is a next line.\n            if (!wasLastLine) {\n              cm.setCursor(prevLineEnd);\n              CodeMirror.commands.newlineAndIndent(cm);\n            }\n            // make sure cursor ends up at the end of the line.\n            anchor.ch = Number.MAX_VALUE;\n          }\n          finalHead = anchor;\n        } else if (args.fullLine) {\n            head.ch = Number.MAX_VALUE;\n            head.line--;\n            cm.setSelection(anchor, head)\n            text = cm.getSelection();\n            cm.replaceSelection(\"\");\n            finalHead = anchor;\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = cursorMin(ranges[0].head, ranges[0].anchor);\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'change', text,\n            args.linewise, ranges.length > 1);\n        actions.enterInsertMode(cm, {head: finalHead}, cm.state.vim);\n      },\n      // delete is a javascript keyword.\n      'delete': function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        if (!vim.visualBlock) {\n          var anchor = ranges[0].anchor,\n              head = ranges[0].head;\n          if (args.linewise &&\n              head.line != cm.firstLine() &&\n              anchor.line == cm.lastLine() &&\n              anchor.line == head.line - 1) {\n            // Special case for dd on last line (and first line).\n            if (anchor.line == cm.firstLine()) {\n              anchor.ch = 0;\n            } else {\n              anchor = Pos(anchor.line - 1, lineLength(cm, anchor.line - 1));\n            }\n          }\n          text = cm.getRange(anchor, head);\n          cm.replaceRange('', anchor, head);\n          finalHead = anchor;\n          if (args.linewise) {\n            finalHead = motions.moveToFirstNonWhiteSpaceCharacter(cm, anchor);\n          }\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = ranges[0].anchor;\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'delete', text,\n            args.linewise, vim.visualBlock);\n        return clipCursorToContent(cm, finalHead);\n      },\n      indent: function(cm, args, ranges) {\n        var vim = cm.state.vim;\n        var startLine = ranges[0].anchor.line;\n        var endLine = vim.visualBlock ?\n          ranges[ranges.length - 1].anchor.line :\n          ranges[0].head.line;\n        // In visual mode, n> shifts the selection right n times, instead of\n        // shifting n lines right once.\n        var repeat = (vim.visualMode) ? args.repeat : 1;\n        if (args.linewise) {\n          // The only way to delete a newline is to delete until the start of\n          // the next line, so in linewise mode evalInput will include the next\n          // line. We don't want this in indent, so we go back a line.\n          endLine--;\n        }\n        for (var i = startLine; i <= endLine; i++) {\n          for (var j = 0; j < repeat; j++) {\n            cm.indentLine(i, args.indentRight);\n          }\n        }\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      indentAuto: function(cm, _args, ranges) {\n        cm.execCommand(\"indentAuto\");\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      changeCase: function(cm, args, ranges, oldAnchor, newHead) {\n        var selections = cm.getSelections();\n        var swapped = [];\n        var toLower = args.toLower;\n        for (var j = 0; j < selections.length; j++) {\n          var toSwap = selections[j];\n          var text = '';\n          if (toLower === true) {\n            text = toSwap.toLowerCase();\n          } else if (toLower === false) {\n            text = toSwap.toUpperCase();\n          } else {\n            for (var i = 0; i < toSwap.length; i++) {\n              var character = toSwap.charAt(i);\n              text += isUpperCase(character) ? character.toLowerCase() :\n                  character.toUpperCase();\n            }\n          }\n          swapped.push(text);\n        }\n        cm.replaceSelections(swapped);\n        if (args.shouldMoveCursor){\n          return newHead;\n        } else if (!cm.state.vim.visualMode && args.linewise && ranges[0].anchor.line + 1 == ranges[0].head.line) {\n          return motions.moveToFirstNonWhiteSpaceCharacter(cm, oldAnchor);\n        } else if (args.linewise){\n          return oldAnchor;\n        } else {\n          return cursorMin(ranges[0].anchor, ranges[0].head);\n        }\n      },\n      yank: function(cm, args, ranges, oldAnchor) {\n        var vim = cm.state.vim;\n        var text = cm.getSelection();\n        var endPos = vim.visualMode\n          ? cursorMin(vim.sel.anchor, vim.sel.head, ranges[0].head, ranges[0].anchor)\n          : oldAnchor;\n        if (['+', '*'].indexOf(args.registerName) !== -1) {\n          copyToClipboard(text)\n          cm.focus()\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'yank',\n            text, args.linewise, vim.visualBlock);\n        return endPos;\n      }\n    };\n\n    function defineOperator(name, fn) {\n      operators[name] = fn;\n    }\n\n    var actions = {\n      jumpListWalk: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat;\n        var forward = actionArgs.forward;\n        var jumpList = vimGlobalState.jumpList;\n\n        var mark = jumpList.move(cm, forward ? repeat : -repeat);\n        var markPos = mark ? mark.find() : undefined;\n        markPos = markPos ? markPos : cm.getCursor();\n        cm.setCursor(markPos);\n      },\n      scroll: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat || 1;\n        var lineHeight = cm.defaultTextHeight();\n        var top = cm.getScrollInfo().top;\n        var delta = lineHeight * repeat;\n        var newPos = actionArgs.forward ? top + delta : top - delta;\n        var cursor = copyCursor(cm.getCursor());\n        var cursorCoords = cm.charCoords(cursor, 'local');\n        if (actionArgs.forward) {\n          if (newPos > cursorCoords.top) {\n             cursor.line += (newPos - cursorCoords.top) / lineHeight;\n             cursor.line = Math.ceil(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(null, cursorCoords.top);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        } else {\n          var newBottom = newPos + cm.getScrollInfo().clientHeight;\n          if (newBottom < cursorCoords.bottom) {\n             cursor.line -= (cursorCoords.bottom - newBottom) / lineHeight;\n             cursor.line = Math.floor(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(\n                 null, cursorCoords.bottom - cm.getScrollInfo().clientHeight);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        }\n      },\n      scrollToCursor: function(cm, actionArgs) {\n        var lineNum = cm.getCursor().line;\n        var charCoords = cm.charCoords(Pos(lineNum, 0), 'local');\n        var height = cm.getScrollInfo().clientHeight;\n        var y = charCoords.top;\n        var lineHeight = charCoords.bottom - y;\n        switch (actionArgs.position) {\n          case 'center': y = y - (height / 2) + lineHeight;\n            break;\n          case 'bottom': y = y - height + lineHeight;\n            break;\n        }\n        cm.scrollTo(null, y);\n      },\n      replayMacro: function(cm, actionArgs, vim) {\n        var registerName = actionArgs.selectedCharacter;\n        var repeat = actionArgs.repeat;\n        var macroModeState = vimGlobalState.macroModeState;\n        if (registerName == '@') {\n          registerName = macroModeState.latestRegister;\n        } else {\n          macroModeState.latestRegister = registerName;\n        }\n        while(repeat--){\n          executeMacroRegister(cm, vim, macroModeState, registerName);\n        }\n      },\n      enterMacroRecordMode: function(cm, actionArgs) {\n        var macroModeState = vimGlobalState.macroModeState;\n        var registerName = actionArgs.selectedCharacter;\n        if (vimGlobalState.registerController.isValidRegister(registerName)) {\n          macroModeState.enterMacroRecordMode(cm, registerName);\n        }\n      },\n      toggleOverwrite: function(cm) {\n        if (!cm.state.overwrite) {\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n      },\n      enterInsertMode: function(cm, actionArgs, vim) {\n        if (cm.getOption('readOnly')) { return; }\n        vim.insertMode = true;\n        vim.insertModeRepeat = actionArgs && actionArgs.repeat || 1;\n        var insertAt = (actionArgs) ? actionArgs.insertAt : null;\n        var sel = vim.sel;\n        var head = actionArgs.head || cm.getCursor('head');\n        var height = cm.listSelections().length;\n        if (insertAt == 'eol') {\n          head = Pos(head.line, lineLength(cm, head.line));\n        } else if (insertAt == 'bol') {\n          head = Pos(head.line, 0);\n        } else if (insertAt == 'charAfter') {\n          head = offsetCursor(head, 0, 1);\n        } else if (insertAt == 'firstNonBlank') {\n          head = motions.moveToFirstNonWhiteSpaceCharacter(cm, head);\n        } else if (insertAt == 'startOfSelectedArea') {\n          if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line < sel.anchor.line) {\n              head = sel.head;\n            } else {\n              head = Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.min(sel.head.ch, sel.anchor.ch));\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'endOfSelectedArea') {\n            if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line >= sel.anchor.line) {\n              head = offsetCursor(sel.head, 0, 1);\n            } else {\n              head = Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.max(sel.head.ch + 1, sel.anchor.ch));\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'inplace') {\n          if (vim.visualMode){\n            return;\n          }\n        } else if (insertAt == 'lastEdit') {\n          head = getLastEditPos(cm) || head;\n        }\n        cm.setOption('disableInput', false);\n        if (actionArgs && actionArgs.replace) {\n          // Handle Replace-mode as a special case of insert mode.\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n        if (!vimGlobalState.macroModeState.isPlaying) {\n          // Only record if not replaying.\n          cm.on('change', onChange);\n          CodeMirror.on(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        selectForInsert(cm, head, height);\n      },\n      toggleVisualMode: function(cm, actionArgs, vim) {\n        var repeat = actionArgs.repeat;\n        var anchor = cm.getCursor();\n        var head;\n        // TODO: The repeat should actually select number of characters/lines\n        //     equal to the repeat times the size of the previous visual\n        //     operation.\n        if (!vim.visualMode) {\n          // Entering visual mode\n          vim.visualMode = true;\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          head = clipCursorToContent(\n              cm, Pos(anchor.line, anchor.ch + repeat - 1));\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n        } else if (vim.visualLine ^ actionArgs.linewise ||\n            vim.visualBlock ^ actionArgs.blockwise) {\n          // Toggling between modes\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n        } else {\n          exitVisualMode(cm);\n        }\n      },\n      reselectLastSelection: function(cm, _actionArgs, vim) {\n        var lastSelection = vim.lastSelection;\n        if (vim.visualMode) {\n          updateLastSelection(cm, vim);\n        }\n        if (lastSelection) {\n          var anchor = lastSelection.anchorMark.find();\n          var head = lastSelection.headMark.find();\n          if (!anchor || !head) {\n            // If the marks have been destroyed due to edits, do nothing.\n            return;\n          }\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          vim.visualMode = true;\n          vim.visualLine = lastSelection.visualLine;\n          vim.visualBlock = lastSelection.visualBlock;\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n          CodeMirror.signal(cm, 'vim-mode-change', {\n            mode: 'visual',\n            subMode: vim.visualLine ? 'linewise' :\n                     vim.visualBlock ? 'blockwise' : ''});\n        }\n      },\n      joinLines: function(cm, actionArgs, vim) {\n        var curStart, curEnd;\n        if (vim.visualMode) {\n          curStart = cm.getCursor('anchor');\n          curEnd = cm.getCursor('head');\n          if (cursorIsBefore(curEnd, curStart)) {\n            var tmp = curEnd;\n            curEnd = curStart;\n            curStart = tmp;\n          }\n          curEnd.ch = lineLength(cm, curEnd.line) - 1;\n        } else {\n          // Repeat is the number of lines to join. Minimum 2 lines.\n          var repeat = Math.max(actionArgs.repeat, 2);\n          curStart = cm.getCursor();\n          curEnd = clipCursorToContent(cm, Pos(curStart.line + repeat - 1,\n                                               Infinity));\n        }\n        var finalCh = 0;\n        for (var i = curStart.line; i < curEnd.line; i++) {\n          finalCh = lineLength(cm, curStart.line);\n          var tmp = Pos(curStart.line + 1,\n                        lineLength(cm, curStart.line + 1));\n          var text = cm.getRange(curStart, tmp);\n          text = actionArgs.keepSpaces\n            ? text.replace(/\\n\\r?/g, '')\n            : text.replace(/\\n\\s*/g, ' ');\n          cm.replaceRange(text, curStart, tmp);\n        }\n        var curFinalPos = Pos(curStart.line, finalCh);\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curFinalPos);\n      },\n      newLineAndEnterInsertMode: function(cm, actionArgs, vim) {\n        vim.insertMode = true;\n        var insertAt = copyCursor(cm.getCursor());\n        if (insertAt.line === cm.firstLine() && !actionArgs.after) {\n          // Special case for inserting newline before start of document.\n          cm.replaceRange('\\n', Pos(cm.firstLine(), 0));\n          cm.setCursor(cm.firstLine(), 0);\n        } else {\n          insertAt.line = (actionArgs.after) ? insertAt.line :\n              insertAt.line - 1;\n          insertAt.ch = lineLength(cm, insertAt.line);\n          cm.setCursor(insertAt);\n          var newlineFn = CodeMirror.commands.newlineAndIndentContinueComment ||\n              CodeMirror.commands.newlineAndIndent;\n          newlineFn(cm);\n        }\n        this.enterInsertMode(cm, { repeat: actionArgs.repeat }, vim);\n      },\n      paste: function(cm, actionArgs, vim) {\n        var cur = copyCursor(cm.getCursor());\n        var register = vimGlobalState.registerController.getRegister(\n            actionArgs.registerName);\n        var text = register.toString();\n        if (!text) {\n          return;\n        }\n        if (actionArgs.matchIndent) {\n          var tabSize = cm.getOption(\"tabSize\");\n          // length that considers tabs and tabSize\n          var whitespaceLength = function(str) {\n            var tabs = (str.split(\"\\t\").length - 1);\n            var spaces = (str.split(\" \").length - 1);\n            return tabs * tabSize + spaces * 1;\n          };\n          var currentLine = cm.getLine(cm.getCursor().line);\n          var indent = whitespaceLength(currentLine.match(/^\\s*/)[0]);\n          // chomp last newline b/c don't want it to match /^\\s*/gm\n          var chompedText = text.replace(/\\n$/, '');\n          var wasChomped = text !== chompedText;\n          var firstIndent = whitespaceLength(text.match(/^\\s*/)[0]);\n          var text = chompedText.replace(/^\\s*/gm, function(wspace) {\n            var newIndent = indent + (whitespaceLength(wspace) - firstIndent);\n            if (newIndent < 0) {\n              return \"\";\n            }\n            else if (cm.getOption(\"indentWithTabs\")) {\n              var quotient = Math.floor(newIndent / tabSize);\n              return Array(quotient + 1).join('\\t');\n            }\n            else {\n              return Array(newIndent + 1).join(' ');\n            }\n          });\n          text += wasChomped ? \"\\n\" : \"\";\n        }\n        if (actionArgs.repeat > 1) {\n          var text = Array(actionArgs.repeat + 1).join(text);\n        }\n        var linewise = register.linewise;\n        var blockwise = register.blockwise;\n        if (blockwise) {\n          text = text.split('\\n');\n          if (linewise) {\n              text.pop();\n          }\n          for (var i = 0; i < text.length; i++) {\n            text[i] = (text[i] == '') ? ' ' : text[i];\n          }\n          cur.ch += actionArgs.after ? 1 : 0;\n          cur.ch = Math.min(lineLength(cm, cur.line), cur.ch);\n        } else if (linewise) {\n          if(vim.visualMode) {\n            text = vim.visualLine ? text.slice(0, -1) : '\\n' + text.slice(0, text.length - 1) + '\\n';\n          } else if (actionArgs.after) {\n            // Move the newline at the end to the start instead, and paste just\n            // before the newline character of the line we are on right now.\n            text = '\\n' + text.slice(0, text.length - 1);\n            cur.ch = lineLength(cm, cur.line);\n          } else {\n            cur.ch = 0;\n          }\n        } else {\n          cur.ch += actionArgs.after ? 1 : 0;\n        }\n        var curPosFinal;\n        var idx;\n        if (vim.visualMode) {\n          //  save the pasted text for reselection if the need arises\n          vim.lastPastedText = text;\n          var lastSelectionCurEnd;\n          var selectedArea = getSelectedAreaRange(cm, vim);\n          var selectionStart = selectedArea[0];\n          var selectionEnd = selectedArea[1];\n          var selectedText = cm.getSelection();\n          var selections = cm.listSelections();\n          var emptyStrings = new Array(selections.length).join('1').split('1');\n          // save the curEnd marker before it get cleared due to cm.replaceRange.\n          if (vim.lastSelection) {\n            lastSelectionCurEnd = vim.lastSelection.headMark.find();\n          }\n          // push the previously selected text to unnamed register\n          vimGlobalState.registerController.unnamedRegister.setText(selectedText);\n          if (blockwise) {\n            // first delete the selected text\n            cm.replaceSelections(emptyStrings);\n            // Set new selections as per the block length of the yanked text\n            selectionEnd = Pos(selectionStart.line + text.length-1, selectionStart.ch);\n            cm.setCursor(selectionStart);\n            selectBlock(cm, selectionEnd);\n            cm.replaceSelections(text);\n            curPosFinal = selectionStart;\n          } else if (vim.visualBlock) {\n            cm.replaceSelections(emptyStrings);\n            cm.setCursor(selectionStart);\n            cm.replaceRange(text, selectionStart, selectionStart);\n            curPosFinal = selectionStart;\n          } else {\n            cm.replaceRange(text, selectionStart, selectionEnd);\n            curPosFinal = cm.posFromIndex(cm.indexFromPos(selectionStart) + text.length - 1);\n          }\n          // restore the the curEnd marker\n          if(lastSelectionCurEnd) {\n            vim.lastSelection.headMark = cm.setBookmark(lastSelectionCurEnd);\n          }\n          if (linewise) {\n            curPosFinal.ch=0;\n          }\n        } else {\n          if (blockwise) {\n            cm.setCursor(cur);\n            for (var i = 0; i < text.length; i++) {\n              var line = cur.line+i;\n              if (line > cm.lastLine()) {\n                cm.replaceRange('\\n',  Pos(line, 0));\n              }\n              var lastCh = lineLength(cm, line);\n              if (lastCh < cur.ch) {\n                extendLineToColumn(cm, line, cur.ch);\n              }\n            }\n            cm.setCursor(cur);\n            selectBlock(cm, Pos(cur.line + text.length-1, cur.ch));\n            cm.replaceSelections(text);\n            curPosFinal = cur;\n          } else {\n            cm.replaceRange(text, cur);\n            // Now fine tune the cursor to where we want it.\n            if (linewise && actionArgs.after) {\n              curPosFinal = Pos(\n              cur.line + 1,\n              findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line + 1)));\n            } else if (linewise && !actionArgs.after) {\n              curPosFinal = Pos(\n                cur.line,\n                findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line)));\n            } else if (!linewise && actionArgs.after) {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length - 1);\n            } else {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length);\n            }\n          }\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curPosFinal);\n      },\n      undo: function(cm, actionArgs) {\n        cm.operation(function() {\n          repeatFn(cm, CodeMirror.commands.undo, actionArgs.repeat)();\n          cm.setCursor(cm.getCursor('anchor'));\n        });\n      },\n      redo: function(cm, actionArgs) {\n        repeatFn(cm, CodeMirror.commands.redo, actionArgs.repeat)();\n      },\n      setRegister: function(_cm, actionArgs, vim) {\n        vim.inputState.registerName = actionArgs.selectedCharacter;\n      },\n      setMark: function(cm, actionArgs, vim) {\n        var markName = actionArgs.selectedCharacter;\n        updateMark(cm, vim, markName, cm.getCursor());\n      },\n      replace: function(cm, actionArgs, vim) {\n        var replaceWith = actionArgs.selectedCharacter;\n        var curStart = cm.getCursor();\n        var replaceTo;\n        var curEnd;\n        var selections = cm.listSelections();\n        if (vim.visualMode) {\n          curStart = cm.getCursor('start');\n          curEnd = cm.getCursor('end');\n        } else {\n          var line = cm.getLine(curStart.line);\n          replaceTo = curStart.ch + actionArgs.repeat;\n          if (replaceTo > line.length) {\n            replaceTo=line.length;\n          }\n          curEnd = Pos(curStart.line, replaceTo);\n        }\n        if (replaceWith=='\\n') {\n          if (!vim.visualMode) cm.replaceRange('', curStart, curEnd);\n          // special case, where vim help says to replace by just one line-break\n          (CodeMirror.commands.newlineAndIndentContinueComment || CodeMirror.commands.newlineAndIndent)(cm);\n        } else {\n          var replaceWithStr = cm.getRange(curStart, curEnd);\n          //replace all characters in range by selected, but keep linebreaks\n          replaceWithStr = replaceWithStr.replace(/[^\\n]/g, replaceWith);\n          if (vim.visualBlock) {\n            // Tabs are split in visua block before replacing\n            var spaces = new Array(cm.getOption(\"tabSize\")+1).join(' ');\n            replaceWithStr = cm.getSelection();\n            replaceWithStr = replaceWithStr.replace(/\\t/g, spaces).replace(/[^\\n]/g, replaceWith).split('\\n');\n            cm.replaceSelections(replaceWithStr);\n          } else {\n            cm.replaceRange(replaceWithStr, curStart, curEnd);\n          }\n          if (vim.visualMode) {\n            curStart = cursorIsBefore(selections[0].anchor, selections[0].head) ?\n                         selections[0].anchor : selections[0].head;\n            cm.setCursor(curStart);\n            exitVisualMode(cm, false);\n          } else {\n            cm.setCursor(offsetCursor(curEnd, 0, -1));\n          }\n        }\n      },\n      incrementNumberToken: function(cm, actionArgs) {\n        var cur = cm.getCursor();\n        var lineStr = cm.getLine(cur.line);\n        var re = /(-?)(?:(0x)([\\da-f]+)|(0b|0|)(\\d+))/gi;\n        var match;\n        var start;\n        var end;\n        var numberStr;\n        while ((match = re.exec(lineStr)) !== null) {\n          start = match.index;\n          end = start + match[0].length;\n          if (cur.ch < end)break;\n        }\n        if (!actionArgs.backtrack && (end <= cur.ch))return;\n        if (match) {\n          var baseStr = match[2] || match[4]\n          var digits = match[3] || match[5]\n          var increment = actionArgs.increase ? 1 : -1;\n          var base = {'0b': 2, '0': 8, '': 10, '0x': 16}[baseStr.toLowerCase()];\n          var number = parseInt(match[1] + digits, base) + (increment * actionArgs.repeat);\n          numberStr = number.toString(base);\n          var zeroPadding = baseStr ? new Array(digits.length - numberStr.length + 1 + match[1].length).join('0') : ''\n          if (numberStr.charAt(0) === '-') {\n            numberStr = '-' + baseStr + zeroPadding + numberStr.substr(1);\n          } else {\n            numberStr = baseStr + zeroPadding + numberStr;\n          }\n          var from = Pos(cur.line, start);\n          var to = Pos(cur.line, end);\n          cm.replaceRange(numberStr, from, to);\n        } else {\n          return;\n        }\n        cm.setCursor(Pos(cur.line, start + numberStr.length - 1));\n      },\n      repeatLastEdit: function(cm, actionArgs, vim) {\n        var lastEditInputState = vim.lastEditInputState;\n        if (!lastEditInputState) { return; }\n        var repeat = actionArgs.repeat;\n        if (repeat && actionArgs.repeatIsExplicit) {\n          vim.lastEditInputState.repeatOverride = repeat;\n        } else {\n          repeat = vim.lastEditInputState.repeatOverride || repeat;\n        }\n        repeatLastEdit(cm, vim, repeat, false /** repeatForInsert */);\n      },\n      indent: function(cm, actionArgs) {\n        cm.indentLine(cm.getCursor().line, actionArgs.indentRight);\n      },\n      exitInsertMode: exitInsertMode\n    };\n\n    function defineAction(name, fn) {\n      actions[name] = fn;\n    }\n\n    /*\n     * Below are miscellaneous utility functions used by vim.js\n     */\n\n    /**\n     * Clips cursor to ensure that line is within the buffer's range\n     * If includeLineBreak is true, then allow cur.ch == lineLength.\n     */\n    function clipCursorToContent(cm, cur) {\n      var vim = cm.state.vim;\n      var includeLineBreak = vim.insertMode || vim.visualMode;\n      var line = Math.min(Math.max(cm.firstLine(), cur.line), cm.lastLine() );\n      var maxCh = lineLength(cm, line) - 1 + !!includeLineBreak;\n      var ch = Math.min(Math.max(0, cur.ch), maxCh);\n      return Pos(line, ch);\n    }\n    function copyArgs(args) {\n      var ret = {};\n      for (var prop in args) {\n        if (args.hasOwnProperty(prop)) {\n          ret[prop] = args[prop];\n        }\n      }\n      return ret;\n    }\n    function offsetCursor(cur, offsetLine, offsetCh) {\n      if (typeof offsetLine === 'object') {\n        offsetCh = offsetLine.ch;\n        offsetLine = offsetLine.line;\n      }\n      return Pos(cur.line + offsetLine, cur.ch + offsetCh);\n    }\n    function commandMatches(keys, keyMap, context, inputState) {\n      // Partial matches are not applied. They inform the key handler\n      // that the current key sequence is a subsequence of a valid key\n      // sequence, so that the key buffer is not cleared.\n      var match, partial = [], full = [];\n      for (var i = 0; i < keyMap.length; i++) {\n        var command = keyMap[i];\n        if (context == 'insert' && command.context != 'insert' ||\n            command.context && command.context != context ||\n            inputState.operator && command.type == 'action' ||\n            !(match = commandMatch(keys, command.keys))) { continue; }\n        if (match == 'partial') { partial.push(command); }\n        if (match == 'full') { full.push(command); }\n      }\n      return {\n        partial: partial.length && partial,\n        full: full.length && full\n      };\n    }\n    function commandMatch(pressed, mapped) {\n      if (mapped.slice(-11) == '<character>') {\n        // Last character matches anything.\n        var prefixLen = mapped.length - 11;\n        var pressedPrefix = pressed.slice(0, prefixLen);\n        var mappedPrefix = mapped.slice(0, prefixLen);\n        return pressedPrefix == mappedPrefix && pressed.length > prefixLen ? 'full' :\n               mappedPrefix.indexOf(pressedPrefix) == 0 ? 'partial' : false;\n      } else {\n        return pressed == mapped ? 'full' :\n               mapped.indexOf(pressed) == 0 ? 'partial' : false;\n      }\n    }\n    function lastChar(keys) {\n      var match = /^.*(<[^>]+>)$/.exec(keys);\n      var selectedCharacter = match ? match[1] : keys.slice(-1);\n      if (selectedCharacter.length > 1){\n        switch(selectedCharacter){\n          case '<CR>':\n            selectedCharacter='\\n';\n            break;\n          case '<Space>':\n            selectedCharacter=' ';\n            break;\n          default:\n            selectedCharacter='';\n            break;\n        }\n      }\n      return selectedCharacter;\n    }\n    function repeatFn(cm, fn, repeat) {\n      return function() {\n        for (var i = 0; i < repeat; i++) {\n          fn(cm);\n        }\n      };\n    }\n    function copyCursor(cur) {\n      return Pos(cur.line, cur.ch);\n    }\n    function cursorEqual(cur1, cur2) {\n      return cur1.ch == cur2.ch && cur1.line == cur2.line;\n    }\n    function cursorIsBefore(cur1, cur2) {\n      if (cur1.line < cur2.line) {\n        return true;\n      }\n      if (cur1.line == cur2.line && cur1.ch < cur2.ch) {\n        return true;\n      }\n      return false;\n    }\n    function cursorMin(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMin.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur1 : cur2;\n    }\n    function cursorMax(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMax.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur2 : cur1;\n    }\n    function cursorIsBetween(cur1, cur2, cur3) {\n      // returns true if cur2 is between cur1 and cur3.\n      var cur1before2 = cursorIsBefore(cur1, cur2);\n      var cur2before3 = cursorIsBefore(cur2, cur3);\n      return cur1before2 && cur2before3;\n    }\n    function lineLength(cm, lineNum) {\n      return cm.getLine(lineNum).length;\n    }\n    function trim(s) {\n      if (s.trim) {\n        return s.trim();\n      }\n      return s.replace(/^\\s+|\\s+$/g, '');\n    }\n    function escapeRegex(s) {\n      return s.replace(/([.?*+$\\[\\]\\/\\\\(){}|\\-])/g, '\\\\$1');\n    }\n    function extendLineToColumn(cm, lineNum, column) {\n      var endCh = lineLength(cm, lineNum);\n      var spaces = new Array(column-endCh+1).join(' ');\n      cm.setCursor(Pos(lineNum, endCh));\n      cm.replaceRange(spaces, cm.getCursor());\n    }\n    // This functions selects a rectangular block\n    // of text with selectionEnd as any of its corner\n    // Height of block:\n    // Difference in selectionEnd.line and first/last selection.line\n    // Width of the block:\n    // Distance between selectionEnd.ch and any(first considered here) selection.ch\n    function selectBlock(cm, selectionEnd) {\n      var selections = [], ranges = cm.listSelections();\n      var head = copyCursor(cm.clipPos(selectionEnd));\n      var isClipped = !cursorEqual(selectionEnd, head);\n      var curHead = cm.getCursor('head');\n      var primIndex = getIndex(ranges, curHead);\n      var wasClipped = cursorEqual(ranges[primIndex].head, ranges[primIndex].anchor);\n      var max = ranges.length - 1;\n      var index = max - primIndex > primIndex ? max : 0;\n      var base = ranges[index].anchor;\n\n      var firstLine = Math.min(base.line, head.line);\n      var lastLine = Math.max(base.line, head.line);\n      var baseCh = base.ch, headCh = head.ch;\n\n      var dir = ranges[index].head.ch - baseCh;\n      var newDir = headCh - baseCh;\n      if (dir > 0 && newDir <= 0) {\n        baseCh++;\n        if (!isClipped) { headCh--; }\n      } else if (dir < 0 && newDir >= 0) {\n        baseCh--;\n        if (!wasClipped) { headCh++; }\n      } else if (dir < 0 && newDir == -1) {\n        baseCh--;\n        headCh++;\n      }\n      for (var line = firstLine; line <= lastLine; line++) {\n        var range = {anchor: new Pos(line, baseCh), head: new Pos(line, headCh)};\n        selections.push(range);\n      }\n      cm.setSelections(selections);\n      selectionEnd.ch = headCh;\n      base.ch = baseCh;\n      return base;\n    }\n    function selectForInsert(cm, head, height) {\n      var sel = [];\n      for (var i = 0; i < height; i++) {\n        var lineHead = offsetCursor(head, i, 0);\n        sel.push({anchor: lineHead, head: lineHead});\n      }\n      cm.setSelections(sel, 0);\n    }\n    // getIndex returns the index of the cursor in the selections.\n    function getIndex(ranges, cursor, end) {\n      for (var i = 0; i < ranges.length; i++) {\n        var atAnchor = end != 'head' && cursorEqual(ranges[i].anchor, cursor);\n        var atHead = end != 'anchor' && cursorEqual(ranges[i].head, cursor);\n        if (atAnchor || atHead) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    function getSelectedAreaRange(cm, vim) {\n      var lastSelection = vim.lastSelection;\n      var getCurrentSelectedAreaRange = function() {\n        var selections = cm.listSelections();\n        var start =  selections[0];\n        var end = selections[selections.length-1];\n        var selectionStart = cursorIsBefore(start.anchor, start.head) ? start.anchor : start.head;\n        var selectionEnd = cursorIsBefore(end.anchor, end.head) ? end.head : end.anchor;\n        return [selectionStart, selectionEnd];\n      };\n      var getLastSelectedAreaRange = function() {\n        var selectionStart = cm.getCursor();\n        var selectionEnd = cm.getCursor();\n        var block = lastSelection.visualBlock;\n        if (block) {\n          var width = block.width;\n          var height = block.height;\n          selectionEnd = Pos(selectionStart.line + height, selectionStart.ch + width);\n          var selections = [];\n          // selectBlock creates a 'proper' rectangular block.\n          // We do not want that in all cases, so we manually set selections.\n          for (var i = selectionStart.line; i < selectionEnd.line; i++) {\n            var anchor = Pos(i, selectionStart.ch);\n            var head = Pos(i, selectionEnd.ch);\n            var range = {anchor: anchor, head: head};\n            selections.push(range);\n          }\n          cm.setSelections(selections);\n        } else {\n          var start = lastSelection.anchorMark.find();\n          var end = lastSelection.headMark.find();\n          var line = end.line - start.line;\n          var ch = end.ch - start.ch;\n          selectionEnd = {line: selectionEnd.line + line, ch: line ? selectionEnd.ch : ch + selectionEnd.ch};\n          if (lastSelection.visualLine) {\n            selectionStart = Pos(selectionStart.line, 0);\n            selectionEnd = Pos(selectionEnd.line, lineLength(cm, selectionEnd.line));\n          }\n          cm.setSelection(selectionStart, selectionEnd);\n        }\n        return [selectionStart, selectionEnd];\n      };\n      if (!vim.visualMode) {\n      // In case of replaying the action.\n        return getLastSelectedAreaRange();\n      } else {\n        return getCurrentSelectedAreaRange();\n      }\n    }\n    // Updates the previous selection with the current selection's values. This\n    // should only be called in visual mode.\n    function updateLastSelection(cm, vim) {\n      var anchor = vim.sel.anchor;\n      var head = vim.sel.head;\n      // To accommodate the effect of lastPastedText in the last selection\n      if (vim.lastPastedText) {\n        head = cm.posFromIndex(cm.indexFromPos(anchor) + vim.lastPastedText.length);\n        vim.lastPastedText = null;\n      }\n      vim.lastSelection = {'anchorMark': cm.setBookmark(anchor),\n                           'headMark': cm.setBookmark(head),\n                           'anchor': copyCursor(anchor),\n                           'head': copyCursor(head),\n                           'visualMode': vim.visualMode,\n                           'visualLine': vim.visualLine,\n                           'visualBlock': vim.visualBlock};\n    }\n    function expandSelection(cm, start, end) {\n      var sel = cm.state.vim.sel;\n      var head = sel.head;\n      var anchor = sel.anchor;\n      var tmp;\n      if (cursorIsBefore(end, start)) {\n        tmp = end;\n        end = start;\n        start = tmp;\n      }\n      if (cursorIsBefore(head, anchor)) {\n        head = cursorMin(start, head);\n        anchor = cursorMax(anchor, end);\n      } else {\n        anchor = cursorMin(start, anchor);\n        head = cursorMax(head, end);\n        head = offsetCursor(head, 0, -1);\n        if (head.ch == -1 && head.line != cm.firstLine()) {\n          head = Pos(head.line - 1, lineLength(cm, head.line - 1));\n        }\n      }\n      return [anchor, head];\n    }\n    /**\n     * Updates the CodeMirror selection to match the provided vim selection.\n     * If no arguments are given, it uses the current vim selection state.\n     */\n    function updateCmSelection(cm, sel, mode) {\n      var vim = cm.state.vim;\n      sel = sel || vim.sel;\n      var mode = mode ||\n        vim.visualLine ? 'line' : vim.visualBlock ? 'block' : 'char';\n      var cmSel = makeCmSelection(cm, sel, mode);\n      cm.setSelections(cmSel.ranges, cmSel.primary);\n      updateFakeCursor(cm);\n    }\n    function makeCmSelection(cm, sel, mode, exclusive) {\n      var head = copyCursor(sel.head);\n      var anchor = copyCursor(sel.anchor);\n      if (mode == 'char') {\n        var headOffset = !exclusive && !cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        var anchorOffset = cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        head = offsetCursor(sel.head, 0, headOffset);\n        anchor = offsetCursor(sel.anchor, 0, anchorOffset);\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'line') {\n        if (!cursorIsBefore(sel.head, sel.anchor)) {\n          anchor.ch = 0;\n\n          var lastLine = cm.lastLine();\n          if (head.line > lastLine) {\n            head.line = lastLine;\n          }\n          head.ch = lineLength(cm, head.line);\n        } else {\n          head.ch = 0;\n          anchor.ch = lineLength(cm, anchor.line);\n        }\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'block') {\n        var top = Math.min(anchor.line, head.line),\n            left = Math.min(anchor.ch, head.ch),\n            bottom = Math.max(anchor.line, head.line),\n            right = Math.max(anchor.ch, head.ch) + 1;\n        var height = bottom - top + 1;\n        var primary = head.line == top ? 0 : height - 1;\n        var ranges = [];\n        for (var i = 0; i < height; i++) {\n          ranges.push({\n            anchor: Pos(top + i, left),\n            head: Pos(top + i, right)\n          });\n        }\n        return {\n          ranges: ranges,\n          primary: primary\n        };\n      }\n    }\n    function getHead(cm) {\n      var cur = cm.getCursor('head');\n      if (cm.getSelection().length == 1) {\n        // Small corner case when only 1 character is selected. The \"real\"\n        // head is the left of head and anchor.\n        cur = cursorMin(cur, cm.getCursor('anchor'));\n      }\n      return cur;\n    }\n\n    /**\n     * If moveHead is set to false, the CodeMirror selection will not be\n     * touched. The caller assumes the responsibility of putting the cursor\n    * in the right place.\n     */\n    function exitVisualMode(cm, moveHead) {\n      var vim = cm.state.vim;\n      if (moveHead !== false) {\n        cm.setCursor(clipCursorToContent(cm, vim.sel.head));\n      }\n      updateLastSelection(cm, vim);\n      vim.visualMode = false;\n      vim.visualLine = false;\n      vim.visualBlock = false;\n      if (!vim.insertMode) CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      clearFakeCursor(vim);\n    }\n\n    // Remove any trailing newlines from the selection. For\n    // example, with the caret at the start of the last word on the line,\n    // 'dw' should word, but not the newline, while 'w' should advance the\n    // caret to the first character of the next line.\n    function clipToLine(cm, curStart, curEnd) {\n      var selection = cm.getRange(curStart, curEnd);\n      // Only clip if the selection ends with trailing newline + whitespace\n      if (/\\n\\s*$/.test(selection)) {\n        var lines = selection.split('\\n');\n        // We know this is all whitespace.\n        lines.pop();\n\n        // Cases:\n        // 1. Last word is an empty line - do not clip the trailing '\\n'\n        // 2. Last word is not an empty line - clip the trailing '\\n'\n        var line;\n        // Find the line containing the last word, and clip all whitespace up\n        // to it.\n        for (var line = lines.pop(); lines.length > 0 && line && isWhiteSpaceString(line); line = lines.pop()) {\n          curEnd.line--;\n          curEnd.ch = 0;\n        }\n        // If the last word is not an empty line, clip an additional newline\n        if (line) {\n          curEnd.line--;\n          curEnd.ch = lineLength(cm, curEnd.line);\n        } else {\n          curEnd.ch = 0;\n        }\n      }\n    }\n\n    // Expand the selection to line ends.\n    function expandSelectionToLine(_cm, curStart, curEnd) {\n      curStart.ch = 0;\n      curEnd.ch = 0;\n      curEnd.line++;\n    }\n\n    function findFirstNonWhiteSpaceCharacter(text) {\n      if (!text) {\n        return 0;\n      }\n      var firstNonWS = text.search(/\\S/);\n      return firstNonWS == -1 ? text.length : firstNonWS;\n    }\n\n    function expandWordUnderCursor(cm, inclusive, _forward, bigWord, noSymbol) {\n      var cur = getHead(cm);\n      var line = cm.getLine(cur.line);\n      var idx = cur.ch;\n\n      // Seek to first word or non-whitespace character, depending on if\n      // noSymbol is true.\n      var test = noSymbol ? wordCharTest[0] : bigWordCharTest [0];\n      while (!test(line.charAt(idx))) {\n        idx++;\n        if (idx >= line.length) { return null; }\n      }\n\n      if (bigWord) {\n        test = bigWordCharTest[0];\n      } else {\n        test = wordCharTest[0];\n        if (!test(line.charAt(idx))) {\n          test = wordCharTest[1];\n        }\n      }\n\n      var end = idx, start = idx;\n      while (test(line.charAt(end)) && end < line.length) { end++; }\n      while (test(line.charAt(start)) && start >= 0) { start--; }\n      start++;\n\n      if (inclusive) {\n        // If present, include all whitespace after word.\n        // Otherwise, include all whitespace before word, except indentation.\n        var wordEnd = end;\n        while (/\\s/.test(line.charAt(end)) && end < line.length) { end++; }\n        if (wordEnd == end) {\n          var wordStart = start;\n          while (/\\s/.test(line.charAt(start - 1)) && start > 0) { start--; }\n          if (!start) { start = wordStart; }\n        }\n      }\n      return { start: Pos(cur.line, start), end: Pos(cur.line, end) };\n    }\n\n    /**\n     * Depends on the following:\n     *\n     * - editor mode should be htmlmixedmode / xml\n     * - mode/xml/xml.js should be loaded\n     * - addon/fold/xml-fold.js should be loaded\n     *\n     * If any of the above requirements are not true, this function noops.\n     *\n     * This is _NOT_ a 100% accurate implementation of vim tag text objects.\n     * The following caveats apply (based off cursory testing, I'm sure there\n     * are other discrepancies):\n     *\n     * - Does not work inside comments:\n     *   ```\n     *   <!-- <div>broken</div> -->\n     *   ```\n     * - Does not work when tags have different cases:\n     *   ```\n     *   <div>broken</DIV>\n     *   ```\n     * - Does not work when cursor is inside a broken tag:\n     *   ```\n     *   <div><brok><en></div>\n     *   ```\n     */\n    function expandTagUnderCursor(cm, head, inclusive) {\n      var cur = head;\n      if (!CodeMirror.findMatchingTag || !CodeMirror.findEnclosingTag) {\n        return { start: cur, end: cur };\n      }\n\n      var tags = CodeMirror.findMatchingTag(cm, head) || CodeMirror.findEnclosingTag(cm, head);\n      if (!tags || !tags.open || !tags.close) {\n        return { start: cur, end: cur };\n      }\n\n      if (inclusive) {\n        return { start: tags.open.from, end: tags.close.to };\n      }\n      return { start: tags.open.to, end: tags.close.from };\n    }\n\n    function recordJumpPosition(cm, oldCur, newCur) {\n      if (!cursorEqual(oldCur, newCur)) {\n        vimGlobalState.jumpList.add(cm, oldCur, newCur);\n      }\n    }\n\n    function recordLastCharacterSearch(increment, args) {\n        vimGlobalState.lastCharacterSearch.increment = increment;\n        vimGlobalState.lastCharacterSearch.forward = args.forward;\n        vimGlobalState.lastCharacterSearch.selectedCharacter = args.selectedCharacter;\n    }\n\n    var symbolToMode = {\n        '(': 'bracket', ')': 'bracket', '{': 'bracket', '}': 'bracket',\n        '[': 'section', ']': 'section',\n        '*': 'comment', '/': 'comment',\n        'm': 'method', 'M': 'method',\n        '#': 'preprocess'\n    };\n    var findSymbolModes = {\n      bracket: {\n        isComplete: function(state) {\n          if (state.nextCh === state.symb) {\n            state.depth++;\n            if (state.depth >= 1)return true;\n          } else if (state.nextCh === state.reverseSymb) {\n            state.depth--;\n          }\n          return false;\n        }\n      },\n      section: {\n        init: function(state) {\n          state.curMoveThrough = true;\n          state.symb = (state.forward ? ']' : '[') === state.symb ? '{' : '}';\n        },\n        isComplete: function(state) {\n          return state.index === 0 && state.nextCh === state.symb;\n        }\n      },\n      comment: {\n        isComplete: function(state) {\n          var found = state.lastCh === '*' && state.nextCh === '/';\n          state.lastCh = state.nextCh;\n          return found;\n        }\n      },\n      // TODO: The original Vim implementation only operates on level 1 and 2.\n      // The current implementation doesn't check for code block level and\n      // therefore it operates on any levels.\n      method: {\n        init: function(state) {\n          state.symb = (state.symb === 'm' ? '{' : '}');\n          state.reverseSymb = state.symb === '{' ? '}' : '{';\n        },\n        isComplete: function(state) {\n          if (state.nextCh === state.symb)return true;\n          return false;\n        }\n      },\n      preprocess: {\n        init: function(state) {\n          state.index = 0;\n        },\n        isComplete: function(state) {\n          if (state.nextCh === '#') {\n            var token = state.lineText.match(/#(\\w+)/)[1];\n            if (token === 'endif') {\n              if (state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth++;\n            } else if (token === 'if') {\n              if (!state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth--;\n            }\n            if (token === 'else' && state.depth === 0)return true;\n          }\n          return false;\n        }\n      }\n    };\n    function findSymbol(cm, repeat, forward, symb) {\n      var cur = copyCursor(cm.getCursor());\n      var increment = forward ? 1 : -1;\n      var endLine = forward ? cm.lineCount() : -1;\n      var curCh = cur.ch;\n      var line = cur.line;\n      var lineText = cm.getLine(line);\n      var state = {\n        lineText: lineText,\n        nextCh: lineText.charAt(curCh),\n        lastCh: null,\n        index: curCh,\n        symb: symb,\n        reverseSymb: (forward ?  { ')': '(', '}': '{' } : { '(': ')', '{': '}' })[symb],\n        forward: forward,\n        depth: 0,\n        curMoveThrough: false\n      };\n      var mode = symbolToMode[symb];\n      if (!mode)return cur;\n      var init = findSymbolModes[mode].init;\n      var isComplete = findSymbolModes[mode].isComplete;\n      if (init) { init(state); }\n      while (line !== endLine && repeat) {\n        state.index += increment;\n        state.nextCh = state.lineText.charAt(state.index);\n        if (!state.nextCh) {\n          line += increment;\n          state.lineText = cm.getLine(line) || '';\n          if (increment > 0) {\n            state.index = 0;\n          } else {\n            var lineLen = state.lineText.length;\n            state.index = (lineLen > 0) ? (lineLen-1) : 0;\n          }\n          state.nextCh = state.lineText.charAt(state.index);\n        }\n        if (isComplete(state)) {\n          cur.line = line;\n          cur.ch = state.index;\n          repeat--;\n        }\n      }\n      if (state.nextCh || state.curMoveThrough) {\n        return Pos(line, state.index);\n      }\n      return cur;\n    }\n\n    /*\n     * Returns the boundaries of the next word. If the cursor in the middle of\n     * the word, then returns the boundaries of the current word, starting at\n     * the cursor. If the cursor is at the start/end of a word, and we are going\n     * forward/backward, respectively, find the boundaries of the next word.\n     *\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Cursor} cur The cursor position.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only [a-zA-Z0-9] characters count as part of the word.\n     * @param {boolean} emptyLineIsWord True if empty lines should be treated\n     *     as words.\n     * @return {Object{from:number, to:number, line: number}} The boundaries of\n     *     the word, or null if there are no more words.\n     */\n    function findWord(cm, cur, forward, bigWord, emptyLineIsWord) {\n      var lineNum = cur.line;\n      var pos = cur.ch;\n      var line = cm.getLine(lineNum);\n      var dir = forward ? 1 : -1;\n      var charTests = bigWord ? bigWordCharTest: wordCharTest;\n\n      if (emptyLineIsWord && line == '') {\n        lineNum += dir;\n        line = cm.getLine(lineNum);\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        pos = (forward) ? 0 : line.length;\n      }\n\n      while (true) {\n        if (emptyLineIsWord && line == '') {\n          return { from: 0, to: 0, line: lineNum };\n        }\n        var stop = (dir > 0) ? line.length : -1;\n        var wordStart = stop, wordEnd = stop;\n        // Find bounds of next word.\n        while (pos != stop) {\n          var foundWord = false;\n          for (var i = 0; i < charTests.length && !foundWord; ++i) {\n            if (charTests[i](line.charAt(pos))) {\n              wordStart = pos;\n              // Advance to end of word.\n              while (pos != stop && charTests[i](line.charAt(pos))) {\n                pos += dir;\n              }\n              wordEnd = pos;\n              foundWord = wordStart != wordEnd;\n              if (wordStart == cur.ch && lineNum == cur.line &&\n                  wordEnd == wordStart + dir) {\n                // We started at the end of a word. Find the next one.\n                continue;\n              } else {\n                return {\n                  from: Math.min(wordStart, wordEnd + 1),\n                  to: Math.max(wordStart, wordEnd),\n                  line: lineNum };\n              }\n            }\n          }\n          if (!foundWord) {\n            pos += dir;\n          }\n        }\n        // Advance to next/prev line.\n        lineNum += dir;\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        line = cm.getLine(lineNum);\n        pos = (dir > 0) ? 0 : line.length;\n      }\n    }\n\n    /**\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Pos} cur The position to start from.\n     * @param {int} repeat Number of words to move past.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} wordEnd True to move to end of word. False to move to\n     *     beginning of word.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only alphabet characters count as part of the word.\n     * @return {Cursor} The position the cursor should move to.\n     */\n    function moveToWord(cm, cur, repeat, forward, wordEnd, bigWord) {\n      var curStart = copyCursor(cur);\n      var words = [];\n      if (forward && !wordEnd || !forward && wordEnd) {\n        repeat++;\n      }\n      // For 'e', empty lines are not considered words, go figure.\n      var emptyLineIsWord = !(forward && wordEnd);\n      for (var i = 0; i < repeat; i++) {\n        var word = findWord(cm, cur, forward, bigWord, emptyLineIsWord);\n        if (!word) {\n          var eodCh = lineLength(cm, cm.lastLine());\n          words.push(forward\n              ? {line: cm.lastLine(), from: eodCh, to: eodCh}\n              : {line: 0, from: 0, to: 0});\n          break;\n        }\n        words.push(word);\n        cur = Pos(word.line, forward ? (word.to - 1) : word.from);\n      }\n      var shortCircuit = words.length != repeat;\n      var firstWord = words[0];\n      var lastWord = words.pop();\n      if (forward && !wordEnd) {\n        // w\n        if (!shortCircuit && (firstWord.from != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return Pos(lastWord.line, lastWord.from);\n      } else if (forward && wordEnd) {\n        return Pos(lastWord.line, lastWord.to - 1);\n      } else if (!forward && wordEnd) {\n        // ge\n        if (!shortCircuit && (firstWord.to != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return Pos(lastWord.line, lastWord.to);\n      } else {\n        // b\n        return Pos(lastWord.line, lastWord.from);\n      }\n    }\n\n    function moveToEol(cm, head, motionArgs, vim, keepHPos) {\n      var cur = head;\n      var retval= Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      var end=cm.clipPos(retval);\n      end.ch--;\n      if (!keepHPos) {\n        vim.lastHPos = Infinity;\n        vim.lastHSPos = cm.charCoords(end,'div').left;\n      }\n      return retval;\n    }\n\n    function moveToCharacter(cm, repeat, forward, character) {\n      var cur = cm.getCursor();\n      var start = cur.ch;\n      var idx;\n      for (var i = 0; i < repeat; i ++) {\n        var line = cm.getLine(cur.line);\n        idx = charIdxInLine(start, line, character, forward, true);\n        if (idx == -1) {\n          return null;\n        }\n        start = idx;\n      }\n      return Pos(cm.getCursor().line, idx);\n    }\n\n    function moveToColumn(cm, repeat) {\n      // repeat is always >= 1, so repeat - 1 always corresponds\n      // to the column we want to go to.\n      var line = cm.getCursor().line;\n      return clipCursorToContent(cm, Pos(line, repeat - 1));\n    }\n\n    function updateMark(cm, vim, markName, pos) {\n      if (!inArray(markName, validMarks)) {\n        return;\n      }\n      if (vim.marks[markName]) {\n        vim.marks[markName].clear();\n      }\n      vim.marks[markName] = cm.setBookmark(pos);\n    }\n\n    function charIdxInLine(start, line, character, forward, includeChar) {\n      // Search for char in line.\n      // motion_options: {forward, includeChar}\n      // If includeChar = true, include it too.\n      // If forward = true, search forward, else search backwards.\n      // If char is not found on this line, do nothing\n      var idx;\n      if (forward) {\n        idx = line.indexOf(character, start + 1);\n        if (idx != -1 && !includeChar) {\n          idx -= 1;\n        }\n      } else {\n        idx = line.lastIndexOf(character, start - 1);\n        if (idx != -1 && !includeChar) {\n          idx += 1;\n        }\n      }\n      return idx;\n    }\n\n    function findParagraph(cm, head, repeat, dir, inclusive) {\n      var line = head.line;\n      var min = cm.firstLine();\n      var max = cm.lastLine();\n      var start, end, i = line;\n      function isEmpty(i) { return !cm.getLine(i); }\n      function isBoundary(i, dir, any) {\n        if (any) { return isEmpty(i) != isEmpty(i + dir); }\n        return !isEmpty(i) && isEmpty(i + dir);\n      }\n      if (dir) {\n        while (min <= i && i <= max && repeat > 0) {\n          if (isBoundary(i, dir)) { repeat--; }\n          i += dir;\n        }\n        return new Pos(i, 0);\n      }\n\n      var vim = cm.state.vim;\n      if (vim.visualLine && isBoundary(line, 1, true)) {\n        var anchor = vim.sel.anchor;\n        if (isBoundary(anchor.line, -1, true)) {\n          if (!inclusive || anchor.line != line) {\n            line += 1;\n          }\n        }\n      }\n      var startState = isEmpty(line);\n      for (i = line; i <= max && repeat; i++) {\n        if (isBoundary(i, 1, true)) {\n          if (!inclusive || isEmpty(i) != startState) {\n            repeat--;\n          }\n        }\n      }\n      end = new Pos(i, 0);\n      // select boundary before paragraph for the last one\n      if (i > max && !startState) { startState = true; }\n      else { inclusive = false; }\n      for (i = line; i > min; i--) {\n        if (!inclusive || isEmpty(i) == startState || i == line) {\n          if (isBoundary(i, -1, true)) { break; }\n        }\n      }\n      start = new Pos(i, 0);\n      return { start: start, end: end };\n    }\n\n    function findSentence(cm, cur, repeat, dir) {\n\n      /*\n        Takes an index object\n        {\n          line: the line string,\n          ln: line number,\n          pos: index in line,\n          dir: direction of traversal (-1 or 1)\n        }\n        and modifies the line, ln, and pos members to represent the\n        next valid position or sets them to null if there are\n        no more valid positions.\n       */\n      function nextChar(cm, idx) {\n        if (idx.pos + idx.dir < 0 || idx.pos + idx.dir >= idx.line.length) {\n          idx.ln += idx.dir;\n          if (!isLine(cm, idx.ln)) {\n            idx.line = null;\n            idx.ln = null;\n            idx.pos = null;\n            return;\n          }\n          idx.line = cm.getLine(idx.ln);\n          idx.pos = (idx.dir > 0) ? 0 : idx.line.length - 1;\n        }\n        else {\n          idx.pos += idx.dir;\n        }\n      }\n\n      /*\n        Performs one iteration of traversal in forward direction\n        Returns an index object of the new location\n       */\n      function forward(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n        var stop = (line === \"\");\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        }\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: curr.pos,\n        }\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n          last_valid.ln = curr.ln;\n          last_valid.pos = curr.pos;\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (stop && curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n            && !stop\n            && (curr.pos === curr.line.length - 1\n              || isWhiteSpaceString(curr.line[curr.pos + 1]))) {\n            stop = true;\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the last non whitespace character on the last\n          valid line in the case that we reach the end of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = line.length - 1; i >= 0; --i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n\n        return last_valid;\n\n      }\n\n      /*\n        Performs one iteration of traversal in reverse direction\n        Returns an index object of the new location\n       */\n      function reverse(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        }\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: null,\n        };\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            if (last_valid.pos !== null) {\n              return last_valid;\n            }\n            else {\n              return { ln: curr.ln, pos: curr.pos };\n            }\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n              && last_valid.pos !== null\n              && !(curr.ln === last_valid.ln && curr.pos + 1 === last_valid.pos)) {\n            return last_valid;\n          }\n          else if (curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            skip_empty_lines = false;\n            last_valid = { ln: curr.ln, pos: curr.pos }\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the first non whitespace character on the last\n          valid line in the case that we reach the beginning of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = 0; i < line.length; ++i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n        return last_valid;\n      }\n\n      var curr_index = {\n        ln: cur.line,\n        pos: cur.ch,\n      };\n\n      while (repeat > 0) {\n        if (dir < 0) {\n          curr_index = reverse(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        else {\n          curr_index = forward(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        repeat--;\n      }\n\n      return Pos(curr_index.ln, curr_index.pos);\n    }\n\n    // TODO: perhaps this finagling of start and end positions belongs\n    // in codemirror/replaceRange?\n    function selectCompanionObject(cm, head, symb, inclusive) {\n      var cur = head, start, end;\n\n      var bracketRegexp = ({\n        '(': /[()]/, ')': /[()]/,\n        '[': /[[\\]]/, ']': /[[\\]]/,\n        '{': /[{}]/, '}': /[{}]/,\n        '<': /[<>]/, '>': /[<>]/})[symb];\n      var openSym = ({\n        '(': '(', ')': '(',\n        '[': '[', ']': '[',\n        '{': '{', '}': '{',\n        '<': '<', '>': '<'})[symb];\n      var curChar = cm.getLine(cur.line).charAt(cur.ch);\n      // Due to the behavior of scanForBracket, we need to add an offset if the\n      // cursor is on a matching open bracket.\n      var offset = curChar === openSym ? 1 : 0;\n\n      start = cm.scanForBracket(Pos(cur.line, cur.ch + offset), -1, undefined, {'bracketRegex': bracketRegexp});\n      end = cm.scanForBracket(Pos(cur.line, cur.ch + offset), 1, undefined, {'bracketRegex': bracketRegexp});\n\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      start = start.pos;\n      end = end.pos;\n\n      if ((start.line == end.line && start.ch > end.ch)\n          || (start.line > end.line)) {\n        var tmp = start;\n        start = end;\n        end = tmp;\n      }\n\n      if (inclusive) {\n        end.ch += 1;\n      } else {\n        start.ch += 1;\n      }\n\n      return { start: start, end: end };\n    }\n\n    // Takes in a symbol and a cursor and tries to simulate text objects that\n    // have identical opening and closing symbols\n    // TODO support across multiple lines\n    function findBeginningAndEnd(cm, head, symb, inclusive) {\n      var cur = copyCursor(head);\n      var line = cm.getLine(cur.line);\n      var chars = line.split('');\n      var start, end, i, len;\n      var firstIndex = chars.indexOf(symb);\n\n      // the decision tree is to always look backwards for the beginning first,\n      // but if the cursor is in front of the first instance of the symb,\n      // then move the cursor forward\n      if (cur.ch < firstIndex) {\n        cur.ch = firstIndex;\n        // Why is this line even here???\n        // cm.setCursor(cur.line, firstIndex+1);\n      }\n      // otherwise if the cursor is currently on the closing symbol\n      else if (firstIndex < cur.ch && chars[cur.ch] == symb) {\n        end = cur.ch; // assign end to the current cursor\n        --cur.ch; // make sure to look backwards\n      }\n\n      // if we're currently on the symbol, we've got a start\n      if (chars[cur.ch] == symb && !end) {\n        start = cur.ch + 1; // assign start to ahead of the cursor\n      } else {\n        // go backwards to find the start\n        for (i = cur.ch; i > -1 && !start; i--) {\n          if (chars[i] == symb) {\n            start = i + 1;\n          }\n        }\n      }\n\n      // look forwards for the end symbol\n      if (start && !end) {\n        for (i = start, len = chars.length; i < len && !end; i++) {\n          if (chars[i] == symb) {\n            end = i;\n          }\n        }\n      }\n\n      // nothing found\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      // include the symbols\n      if (inclusive) {\n        --start; ++end;\n      }\n\n      return {\n        start: Pos(cur.line, start),\n        end: Pos(cur.line, end)\n      };\n    }\n\n    // Search functions\n    defineOption('pcre', true, 'boolean');\n    function SearchState() {}\n    SearchState.prototype = {\n      getQuery: function() {\n        return vimGlobalState.query;\n      },\n      setQuery: function(query) {\n        vimGlobalState.query = query;\n      },\n      getOverlay: function() {\n        return this.searchOverlay;\n      },\n      setOverlay: function(overlay) {\n        this.searchOverlay = overlay;\n      },\n      isReversed: function() {\n        return vimGlobalState.isReversed;\n      },\n      setReversed: function(reversed) {\n        vimGlobalState.isReversed = reversed;\n      },\n      getScrollbarAnnotate: function() {\n        return this.annotate;\n      },\n      setScrollbarAnnotate: function(annotate) {\n        this.annotate = annotate;\n      }\n    };\n    function getSearchState(cm) {\n      var vim = cm.state.vim;\n      return vim.searchState_ || (vim.searchState_ = new SearchState());\n    }\n    function dialog(cm, template, shortText, onClose, options) {\n      if (cm.openDialog) {\n        cm.openDialog(template, onClose, { bottom: true, value: options.value,\n            onKeyDown: options.onKeyDown, onKeyUp: options.onKeyUp,\n            selectValueOnOpen: false});\n      }\n      else {\n        onClose(prompt(shortText, ''));\n      }\n    }\n    function splitBySlash(argString) {\n      return splitBySeparator(argString, '/');\n    }\n\n    function findUnescapedSlashes(argString) {\n      return findUnescapedSeparators(argString, '/');\n    }\n\n    function splitBySeparator(argString, separator) {\n      var slashes = findUnescapedSeparators(argString, separator) || [];\n      if (!slashes.length) return [];\n      var tokens = [];\n      // in case of strings like foo/bar\n      if (slashes[0] !== 0) return;\n      for (var i = 0; i < slashes.length; i++) {\n        if (typeof slashes[i] == 'number')\n          tokens.push(argString.substring(slashes[i] + 1, slashes[i+1]));\n      }\n      return tokens;\n    }\n\n    function findUnescapedSeparators(str, separator) {\n      if (!separator)\n        separator = '/';\n\n      var escapeNextChar = false;\n      var slashes = [];\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n        if (!escapeNextChar && c == separator) {\n          slashes.push(i);\n        }\n        escapeNextChar = !escapeNextChar && (c == '\\\\');\n      }\n      return slashes;\n    }\n\n    // Translates a search string from ex (vim) syntax into javascript form.\n    function translateRegex(str) {\n      // When these match, add a '\\' if unescaped or remove one if escaped.\n      var specials = '|(){';\n      // Remove, but never add, a '\\' for these.\n      var unescape = '}';\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        var specialComesNext = (n && specials.indexOf(n) != -1);\n        if (escapeNextChar) {\n          if (c !== '\\\\' || !specialComesNext) {\n            out.push(c);\n          }\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            // Treat the unescape list as special for removing, but not adding '\\'.\n            if (n && unescape.indexOf(n) != -1) {\n              specialComesNext = true;\n            }\n            // Not passing this test means removing a '\\'.\n            if (!specialComesNext || n === '\\\\') {\n              out.push(c);\n            }\n          } else {\n            out.push(c);\n            if (specialComesNext && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Translates the replace part of a search and replace from ex (vim) syntax into\n    // javascript form.  Similar to translateRegex, but additionally fixes back references\n    // (translates '\\[0..9]' to '$[0..9]') and follows different rules for escaping '$'.\n    var charUnescapes = {'\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t'};\n    function translateRegexReplace(str) {\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        if (charUnescapes[c + n]) {\n          out.push(charUnescapes[c+n]);\n          i++;\n        } else if (escapeNextChar) {\n          // At any point in the loop, escapeNextChar is true if the previous\n          // character was a '\\' and was not escaped.\n          out.push(c);\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            if ((isNumber(n) || n === '$')) {\n              out.push('$');\n            } else if (n !== '/' && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          } else {\n            if (c === '$') {\n              out.push('$');\n            }\n            out.push(c);\n            if (n === '/') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Unescape \\ and / in the replace part, for PCRE mode.\n    var unescapes = {'\\\\/': '/', '\\\\\\\\': '\\\\', '\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t', '\\\\&':'&'};\n    function unescapeRegexReplace(str) {\n      var stream = new CodeMirror.StringStream(str);\n      var output = [];\n      while (!stream.eol()) {\n        // Search for \\.\n        while (stream.peek() && stream.peek() != '\\\\') {\n          output.push(stream.next());\n        }\n        var matched = false;\n        for (var matcher in unescapes) {\n          if (stream.match(matcher, true)) {\n            matched = true;\n            output.push(unescapes[matcher]);\n            break;\n          }\n        }\n        if (!matched) {\n          // Don't change anything\n          output.push(stream.next());\n        }\n      }\n      return output.join('');\n    }\n\n    /**\n     * Extract the regular expression from the query and return a Regexp object.\n     * Returns null if the query is blank.\n     * If ignoreCase is passed in, the Regexp object will have the 'i' flag set.\n     * If smartCase is passed in, and the query contains upper case letters,\n     *   then ignoreCase is overridden, and the 'i' flag will not be set.\n     * If the query contains the /i in the flag part of the regular expression,\n     *   then both ignoreCase and smartCase are ignored, and 'i' will be passed\n     *   through to the Regex object.\n     */\n    function parseQuery(query, ignoreCase, smartCase) {\n      // First update the last search register\n      var lastSearchRegister = vimGlobalState.registerController.getRegister('/');\n      lastSearchRegister.setText(query);\n      // Check if the query is already a regex.\n      if (query instanceof RegExp) { return query; }\n      // First try to extract regex + flags from the input. If no flags found,\n      // extract just the regex. IE does not accept flags directly defined in\n      // the regex string in the form /regex/flags\n      var slashes = findUnescapedSlashes(query);\n      var regexPart;\n      var forceIgnoreCase;\n      if (!slashes.length) {\n        // Query looks like 'regexp'\n        regexPart = query;\n      } else {\n        // Query looks like 'regexp/...'\n        regexPart = query.substring(0, slashes[0]);\n        var flagsPart = query.substring(slashes[0]);\n        forceIgnoreCase = (flagsPart.indexOf('i') != -1);\n      }\n      if (!regexPart) {\n        return null;\n      }\n      if (!getOption('pcre')) {\n        regexPart = translateRegex(regexPart);\n      }\n      if (smartCase) {\n        ignoreCase = (/^[^A-Z]*$/).test(regexPart);\n      }\n      var regexp = new RegExp(regexPart,\n          (ignoreCase || forceIgnoreCase) ? 'i' : undefined);\n      return regexp;\n    }\n    function showConfirm(cm, text) {\n      if (cm.openNotification) {\n        cm.openNotification('<span style=\"color: red\">' + text + '</span>',\n                            {bottom: true, duration: 5000});\n      } else {\n        alert(text);\n      }\n    }\n    function makePrompt(prefix, desc) {\n      var raw = '<span style=\"font-family: monospace; white-space: pre\">' +\n          (prefix || \"\") + '<input type=\"text\" autocorrect=\"off\" ' +\n          'autocapitalize=\"off\" spellcheck=\"false\"></span>';\n      if (desc)\n        raw += ' <span style=\"color: #888\">' + desc + '</span>';\n      return raw;\n    }\n    var searchPromptDesc = '(Javascript regexp)';\n    function showPrompt(cm, options) {\n      var shortText = (options.prefix || '') + ' ' + (options.desc || '');\n      var prompt = makePrompt(options.prefix, options.desc);\n      dialog(cm, prompt, shortText, options.onClose, options);\n    }\n    function regexEqual(r1, r2) {\n      if (r1 instanceof RegExp && r2 instanceof RegExp) {\n          var props = ['global', 'multiline', 'ignoreCase', 'source'];\n          for (var i = 0; i < props.length; i++) {\n              var prop = props[i];\n              if (r1[prop] !== r2[prop]) {\n                  return false;\n              }\n          }\n          return true;\n      }\n      return false;\n    }\n    // Returns true if the query is valid.\n    function updateSearchQuery(cm, rawQuery, ignoreCase, smartCase) {\n      if (!rawQuery) {\n        return;\n      }\n      var state = getSearchState(cm);\n      var query = parseQuery(rawQuery, !!ignoreCase, !!smartCase);\n      if (!query) {\n        return;\n      }\n      highlightSearchMatches(cm, query);\n      if (regexEqual(query, state.getQuery())) {\n        return query;\n      }\n      state.setQuery(query);\n      return query;\n    }\n    function searchOverlay(query) {\n      if (query.source.charAt(0) == '^') {\n        var matchSol = true;\n      }\n      return {\n        token: function(stream) {\n          if (matchSol && !stream.sol()) {\n            stream.skipToEnd();\n            return;\n          }\n          var match = stream.match(query, false);\n          if (match) {\n            if (match[0].length == 0) {\n              // Matched empty string, skip to next.\n              stream.next();\n              return 'searching';\n            }\n            if (!stream.sol()) {\n              // Backtrack 1 to match \\b\n              stream.backUp(1);\n              if (!query.exec(stream.next() + match[0])) {\n                stream.next();\n                return null;\n              }\n            }\n            stream.match(query);\n            return 'searching';\n          }\n          while (!stream.eol()) {\n            stream.next();\n            if (stream.match(query, false)) break;\n          }\n        },\n        query: query\n      };\n    }\n    var highlightTimeout = 0;\n    function highlightSearchMatches(cm, query) {\n      clearTimeout(highlightTimeout);\n      highlightTimeout = setTimeout(function() {\n        var searchState = getSearchState(cm);\n        var overlay = searchState.getOverlay();\n        if (!overlay || query != overlay.query) {\n          if (overlay) {\n            cm.removeOverlay(overlay);\n          }\n          overlay = searchOverlay(query);\n          cm.addOverlay(overlay);\n          if (cm.showMatchesOnScrollbar) {\n            if (searchState.getScrollbarAnnotate()) {\n              searchState.getScrollbarAnnotate().clear();\n            }\n            searchState.setScrollbarAnnotate(cm.showMatchesOnScrollbar(query));\n          }\n          searchState.setOverlay(overlay);\n        }\n      }, 50);\n    }\n    function findNext(cm, prev, query, repeat) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n        for (var i = 0; i < repeat; i++) {\n          var found = cursor.find(prev);\n          if (i == 0 && found && cursorEqual(cursor.from(), pos)) { found = cursor.find(prev); }\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? Pos(cm.lastLine()) : Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return cursor.from();\n      });\n    }\n    /**\n     * Pretty much the same as `findNext`, except for the following differences:\n     *\n     * 1. Before starting the search, move to the previous search. This way if our cursor is\n     * already inside a match, we should return the current match.\n     * 2. Rather than only returning the cursor's from, we return the cursor's from and to as a tuple.\n     */\n    function findNextFromAndToInclusive(cm, prev, query, repeat, vim) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n\n        // Go back one result to ensure that if the cursor is currently a match, we keep it.\n        var found = cursor.find(!prev);\n\n        // If we haven't moved, go back one more (similar to if i==0 logic in findNext).\n        if (!vim.visualMode && found && cursorEqual(cursor.from(), pos)) {\n          cursor.find(!prev);\n        }\n\n        for (var i = 0; i < repeat; i++) {\n          found = cursor.find(prev);\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? Pos(cm.lastLine()) : Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return [cursor.from(), cursor.to()];\n      });\n    }\n    function clearSearchHighlight(cm) {\n      var state = getSearchState(cm);\n      cm.removeOverlay(getSearchState(cm).getOverlay());\n      state.setOverlay(null);\n      if (state.getScrollbarAnnotate()) {\n        state.getScrollbarAnnotate().clear();\n        state.setScrollbarAnnotate(null);\n      }\n    }\n    /**\n     * Check if pos is in the specified range, INCLUSIVE.\n     * Range can be specified with 1 or 2 arguments.\n     * If the first range argument is an array, treat it as an array of line\n     * numbers. Match pos against any of the lines.\n     * If the first range argument is a number,\n     *   if there is only 1 range argument, check if pos has the same line\n     *       number\n     *   if there are 2 range arguments, then check if pos is in between the two\n     *       range arguments.\n     */\n    function isInRange(pos, start, end) {\n      if (typeof pos != 'number') {\n        // Assume it is a cursor position. Get the line number.\n        pos = pos.line;\n      }\n      if (start instanceof Array) {\n        return inArray(pos, start);\n      } else {\n        if (end) {\n          return (pos >= start && pos <= end);\n        } else {\n          return pos == start;\n        }\n      }\n    }\n    function getUserVisibleLines(cm) {\n      var scrollInfo = cm.getScrollInfo();\n      var occludeToleranceTop = 6;\n      var occludeToleranceBottom = 10;\n      var from = cm.coordsChar({left:0, top: occludeToleranceTop + scrollInfo.top}, 'local');\n      var bottomY = scrollInfo.clientHeight - occludeToleranceBottom + scrollInfo.top;\n      var to = cm.coordsChar({left:0, top: bottomY}, 'local');\n      return {top: from.line, bottom: to.line};\n    }\n\n    function getMarkPos(cm, vim, markName) {\n      if (markName == '\\'' || markName == '`') {\n        return vimGlobalState.jumpList.find(cm, -1) || Pos(0, 0);\n      } else if (markName == '.') {\n        return getLastEditPos(cm);\n      }\n\n      var mark = vim.marks[markName];\n      return mark && mark.find();\n    }\n\n    function getLastEditPos(cm) {\n      var done = cm.doc.history.done;\n      for (var i = done.length; i--;) {\n        if (done[i].changes) {\n          return copyCursor(done[i].changes[0].to);\n        }\n      }\n    }\n\n    var ExCommandDispatcher = function() {\n      this.buildCommandMap_();\n    };\n    ExCommandDispatcher.prototype = {\n      processCommand: function(cm, input, opt_params) {\n        var that = this;\n        cm.operation(function () {\n          cm.curOp.isVimOp = true;\n          that._processCommand(cm, input, opt_params);\n        });\n      },\n      _processCommand: function(cm, input, opt_params) {\n        var vim = cm.state.vim;\n        var commandHistoryRegister = vimGlobalState.registerController.getRegister(':');\n        var previousCommand = commandHistoryRegister.toString();\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        var inputStream = new CodeMirror.StringStream(input);\n        // update \": with the latest command whether valid or invalid\n        commandHistoryRegister.setText(input);\n        var params = opt_params || {};\n        params.input = input;\n        try {\n          this.parseInput_(cm, inputStream, params);\n        } catch(e) {\n          showConfirm(cm, e);\n          throw e;\n        }\n        var command;\n        var commandName;\n        if (!params.commandName) {\n          // If only a line range is defined, move to the line.\n          if (params.line !== undefined) {\n            commandName = 'move';\n          }\n        } else {\n          command = this.matchCommand_(params.commandName);\n          if (command) {\n            commandName = command.name;\n            if (command.excludeFromCommandHistory) {\n              commandHistoryRegister.setText(previousCommand);\n            }\n            this.parseCommandArgs_(inputStream, params, command);\n            if (command.type == 'exToKey') {\n              // Handle Ex to Key mapping.\n              for (var i = 0; i < command.toKeys.length; i++) {\n                CodeMirror.Vim.handleKey(cm, command.toKeys[i], 'mapping');\n              }\n              return;\n            } else if (command.type == 'exToEx') {\n              // Handle Ex to Ex mapping.\n              this.processCommand(cm, command.toInput);\n              return;\n            }\n          }\n        }\n        if (!commandName) {\n          showConfirm(cm, 'Not an editor command \":' + input + '\"');\n          return;\n        }\n        try {\n          exCommands[commandName](cm, params);\n          // Possibly asynchronous commands (e.g. substitute, which might have a\n          // user confirmation), are responsible for calling the callback when\n          // done. All others have it taken care of for them here.\n          if ((!command || !command.possiblyAsync) && params.callback) {\n            params.callback();\n          }\n        } catch(e) {\n          showConfirm(cm, e);\n          throw e;\n        }\n      },\n      parseInput_: function(cm, inputStream, result) {\n        inputStream.eatWhile(':');\n        // Parse range.\n        if (inputStream.eat('%')) {\n          result.line = cm.firstLine();\n          result.lineEnd = cm.lastLine();\n        } else {\n          result.line = this.parseLineSpec_(cm, inputStream);\n          if (result.line !== undefined && inputStream.eat(',')) {\n            result.lineEnd = this.parseLineSpec_(cm, inputStream);\n          }\n        }\n\n        // Parse command name.\n        var commandMatch = inputStream.match(/^(\\w+|!!|@@|[!#&*<=>@~])/);\n        if (commandMatch) {\n          result.commandName = commandMatch[1];\n        } else {\n          result.commandName = inputStream.match(/.*/)[0];\n        }\n\n        return result;\n      },\n      parseLineSpec_: function(cm, inputStream) {\n        var numberMatch = inputStream.match(/^(\\d+)/);\n        if (numberMatch) {\n          // Absolute line number plus offset (N+M or N-M) is probably a typo,\n          // not something the user actually wanted. (NB: vim does allow this.)\n          return parseInt(numberMatch[1], 10) - 1;\n        }\n        switch (inputStream.next()) {\n          case '.':\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          case '$':\n            return this.parseLineSpecOffset_(inputStream, cm.lastLine());\n          case '\\'':\n            var markName = inputStream.next();\n            var markPos = getMarkPos(cm, cm.state.vim, markName);\n            if (!markPos) throw new Error('Mark not set');\n            return this.parseLineSpecOffset_(inputStream, markPos.line);\n          case '-':\n          case '+':\n            inputStream.backUp(1);\n            // Offset is relative to current line if not otherwise specified.\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          default:\n            inputStream.backUp(1);\n            return undefined;\n        }\n      },\n      parseLineSpecOffset_: function(inputStream, line) {\n        var offsetMatch = inputStream.match(/^([+-])?(\\d+)/);\n        if (offsetMatch) {\n          var offset = parseInt(offsetMatch[2], 10);\n          if (offsetMatch[1] == \"-\") {\n            line -= offset;\n          } else {\n            line += offset;\n          }\n        }\n        return line;\n      },\n      parseCommandArgs_: function(inputStream, params, command) {\n        if (inputStream.eol()) {\n          return;\n        }\n        params.argString = inputStream.match(/.*/)[0];\n        // Parse command-line arguments\n        var delim = command.argDelimiter || /\\s+/;\n        var args = trim(params.argString).split(delim);\n        if (args.length && args[0]) {\n          params.args = args;\n        }\n      },\n      matchCommand_: function(commandName) {\n        // Return the command in the command map that matches the shortest\n        // prefix of the passed in command name. The match is guaranteed to be\n        // unambiguous if the defaultExCommandMap's shortNames are set up\n        // correctly. (see @code{defaultExCommandMap}).\n        for (var i = commandName.length; i > 0; i--) {\n          var prefix = commandName.substring(0, i);\n          if (this.commandMap_[prefix]) {\n            var command = this.commandMap_[prefix];\n            if (command.name.indexOf(commandName) === 0) {\n              return command;\n            }\n          }\n        }\n        return null;\n      },\n      buildCommandMap_: function() {\n        this.commandMap_ = {};\n        for (var i = 0; i < defaultExCommandMap.length; i++) {\n          var command = defaultExCommandMap[i];\n          var key = command.shortName || command.name;\n          this.commandMap_[key] = command;\n        }\n      },\n      map: function(lhs, rhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Ex to Ex mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToEx',\n              toInput: rhs.substring(1),\n              user: true\n            };\n          } else {\n            // Ex to key mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToKey',\n              toKeys: rhs,\n              user: true\n            };\n          }\n        } else {\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Key to Ex mapping.\n            var mapping = {\n              keys: lhs,\n              type: 'keyToEx',\n              exArgs: { input: rhs.substring(1) }\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          } else {\n            // Key to key mapping\n            var mapping = {\n              keys: lhs,\n              type: 'keyToKey',\n              toKeys: rhs\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          }\n        }\n      },\n      unmap: function(lhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          // Ex to Ex or Ex to key mapping\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (this.commandMap_[commandName] && this.commandMap_[commandName].user) {\n            delete this.commandMap_[commandName];\n            return;\n          }\n        } else {\n          // Key to Ex or key to key mapping\n          var keys = lhs;\n          for (var i = 0; i < defaultKeymap.length; i++) {\n            if (keys == defaultKeymap[i].keys\n                && defaultKeymap[i].context === ctx) {\n              defaultKeymap.splice(i, 1);\n              return;\n            }\n          }\n        }\n        throw Error('No such mapping.');\n      }\n    };\n\n    var exCommands = {\n      colorscheme: function(cm, params) {\n        if (!params.args || params.args.length < 1) {\n          showConfirm(cm, cm.getOption('theme'));\n          return;\n        }\n        cm.setOption('theme', params.args[0]);\n      },\n      map: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 2) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        exCommandDispatcher.map(mapArgs[0], mapArgs[1], ctx);\n      },\n      imap: function(cm, params) { this.map(cm, params, 'insert'); },\n      nmap: function(cm, params) { this.map(cm, params, 'normal'); },\n      vmap: function(cm, params) { this.map(cm, params, 'visual'); },\n      unmap: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 1) {\n          if (cm) {\n            showConfirm(cm, 'No such mapping: ' + params.input);\n          }\n          return;\n        }\n        exCommandDispatcher.unmap(mapArgs[0], ctx);\n      },\n      move: function(cm, params) {\n        commandDispatcher.processCommand(cm, cm.state.vim, {\n            type: 'motion',\n            motion: 'moveToLineOrEdgeOfDocument',\n            motionArgs: { forward: false, explicitRepeat: true,\n              linewise: true },\n            repeatOverride: params.line+1});\n      },\n      set: function(cm, params) {\n        var setArgs = params.args;\n        // Options passed through to the setOption/getOption calls. May be passed in by the\n        // local/global versions of the set command\n        var setCfg = params.setCfg || {};\n        if (!setArgs || setArgs.length < 1) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        var expr = setArgs[0].split('=');\n        var optionName = expr[0];\n        var value = expr[1];\n        var forceGet = false;\n\n        if (optionName.charAt(optionName.length - 1) == '?') {\n          // If post-fixed with ?, then the set is actually a get.\n          if (value) { throw Error('Trailing characters: ' + params.argString); }\n          optionName = optionName.substring(0, optionName.length - 1);\n          forceGet = true;\n        }\n        if (value === undefined && optionName.substring(0, 2) == 'no') {\n          // To set boolean options to false, the option name is prefixed with\n          // 'no'.\n          optionName = optionName.substring(2);\n          value = false;\n        }\n\n        var optionIsBoolean = options[optionName] && options[optionName].type == 'boolean';\n        if (optionIsBoolean && value == undefined) {\n          // Calling set with a boolean option sets it to true.\n          value = true;\n        }\n        // If no value is provided, then we assume this is a get.\n        if (!optionIsBoolean && value === undefined || forceGet) {\n          var oldValue = getOption(optionName, cm, setCfg);\n          if (oldValue instanceof Error) {\n            showConfirm(cm, oldValue.message);\n          } else if (oldValue === true || oldValue === false) {\n            showConfirm(cm, ' ' + (oldValue ? '' : 'no') + optionName);\n          } else {\n            showConfirm(cm, '  ' + optionName + '=' + oldValue);\n          }\n        } else {\n          var setOptionReturn = setOption(optionName, value, cm, setCfg);\n          if (setOptionReturn instanceof Error) {\n            showConfirm(cm, setOptionReturn.message);\n          }\n        }\n      },\n      setlocal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'local'};\n        this.set(cm, params);\n      },\n      setglobal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'global'};\n        this.set(cm, params);\n      },\n      registers: function(cm, params) {\n        var regArgs = params.args;\n        var registers = vimGlobalState.registerController.registers;\n        var regInfo = '----------Registers----------<br><br>';\n        if (!regArgs) {\n          for (var registerName in registers) {\n            var text = registers[registerName].toString();\n            if (text.length) {\n              regInfo += '\"' + registerName + '    ' + text + '<br>';\n            }\n          }\n        } else {\n          var registerName;\n          regArgs = regArgs.join('');\n          for (var i = 0; i < regArgs.length; i++) {\n            registerName = regArgs.charAt(i);\n            if (!vimGlobalState.registerController.isValidRegister(registerName)) {\n              continue;\n            }\n            var register = registers[registerName] || new Register();\n            regInfo += '\"' + registerName + '    ' + register.toString() + '<br>';\n          }\n        }\n        showConfirm(cm, regInfo);\n      },\n      sort: function(cm, params) {\n        var reverse, ignoreCase, unique, number, pattern;\n        function parseArgs() {\n          if (params.argString) {\n            var args = new CodeMirror.StringStream(params.argString);\n            if (args.eat('!')) { reverse = true; }\n            if (args.eol()) { return; }\n            if (!args.eatSpace()) { return 'Invalid arguments'; }\n            var opts = args.match(/([dinuox]+)?\\s*(\\/.+\\/)?\\s*/);\n            if (!opts && !args.eol()) { return 'Invalid arguments'; }\n            if (opts[1]) {\n              ignoreCase = opts[1].indexOf('i') != -1;\n              unique = opts[1].indexOf('u') != -1;\n              var decimal = opts[1].indexOf('d') != -1 || opts[1].indexOf('n') != -1 && 1;\n              var hex = opts[1].indexOf('x') != -1 && 1;\n              var octal = opts[1].indexOf('o') != -1 && 1;\n              if (decimal + hex + octal > 1) { return 'Invalid arguments'; }\n              number = decimal && 'decimal' || hex && 'hex' || octal && 'octal';\n            }\n            if (opts[2]) {\n              pattern = new RegExp(opts[2].substr(1, opts[2].length - 2), ignoreCase ? 'i' : '');\n            }\n          }\n        }\n        var err = parseArgs();\n        if (err) {\n          showConfirm(cm, err + ': ' + params.argString);\n          return;\n        }\n        var lineStart = params.line || cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        if (lineStart == lineEnd) { return; }\n        var curStart = Pos(lineStart, 0);\n        var curEnd = Pos(lineEnd, lineLength(cm, lineEnd));\n        var text = cm.getRange(curStart, curEnd).split('\\n');\n        var numberRegex = pattern ? pattern :\n           (number == 'decimal') ? /(-?)([\\d]+)/ :\n           (number == 'hex') ? /(-?)(?:0x)?([0-9a-f]+)/i :\n           (number == 'octal') ? /([0-7]+)/ : null;\n        var radix = (number == 'decimal') ? 10 : (number == 'hex') ? 16 : (number == 'octal') ? 8 : null;\n        var numPart = [], textPart = [];\n        if (number || pattern) {\n          for (var i = 0; i < text.length; i++) {\n            var matchPart = pattern ? text[i].match(pattern) : null;\n            if (matchPart && matchPart[0] != '') {\n              numPart.push(matchPart);\n            } else if (!pattern && numberRegex.exec(text[i])) {\n              numPart.push(text[i]);\n            } else {\n              textPart.push(text[i]);\n            }\n          }\n        } else {\n          textPart = text;\n        }\n        function compareFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a = a.toLowerCase(); b = b.toLowerCase(); }\n          var anum = number && numberRegex.exec(a);\n          var bnum = number && numberRegex.exec(b);\n          if (!anum) { return a < b ? -1 : 1; }\n          anum = parseInt((anum[1] + anum[2]).toLowerCase(), radix);\n          bnum = parseInt((bnum[1] + bnum[2]).toLowerCase(), radix);\n          return anum - bnum;\n        }\n        function comparePatternFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a[0] = a[0].toLowerCase(); b[0] = b[0].toLowerCase(); }\n          return (a[0] < b[0]) ? -1 : 1;\n        }\n        numPart.sort(pattern ? comparePatternFn : compareFn);\n        if (pattern) {\n          for (var i = 0; i < numPart.length; i++) {\n            numPart[i] = numPart[i].input;\n          }\n        } else if (!number) { textPart.sort(compareFn); }\n        text = (!reverse) ? textPart.concat(numPart) : numPart.concat(textPart);\n        if (unique) { // Remove duplicate lines\n          var textOld = text;\n          var lastLine;\n          text = [];\n          for (var i = 0; i < textOld.length; i++) {\n            if (textOld[i] != lastLine) {\n              text.push(textOld[i]);\n            }\n            lastLine = textOld[i];\n          }\n        }\n        cm.replaceRange(text.join('\\n'), curStart, curEnd);\n      },\n      global: function(cm, params) {\n        // a global command is of the form\n        // :[range]g/pattern/[cmd]\n        // argString holds the string /pattern/[cmd]\n        var argString = params.argString;\n        if (!argString) {\n          showConfirm(cm, 'Regular Expression missing from global');\n          return;\n        }\n        // range is specified here\n        var lineStart = (params.line !== undefined) ? params.line : cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        // get the tokens from argString\n        var tokens = splitBySlash(argString);\n        var regexPart = argString, cmd;\n        if (tokens.length) {\n          regexPart = tokens[0];\n          cmd = tokens.slice(1, tokens.length).join('/');\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise\n          // use the regex part as the new query.\n          try {\n           updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n             true /** smartCase */);\n          } catch (e) {\n           showConfirm(cm, 'Invalid regex: ' + regexPart);\n           return;\n          }\n        }\n        // now that we have the regexPart, search for regex matches in the\n        // specified range of lines\n        var query = getSearchState(cm).getQuery();\n        var matchedLines = [], content = '';\n        for (var i = lineStart; i <= lineEnd; i++) {\n          var matched = query.test(cm.getLine(i));\n          if (matched) {\n            matchedLines.push(i+1);\n            content+= cm.getLine(i) + '<br>';\n          }\n        }\n        // if there is no [cmd], just display the list of matched lines\n        if (!cmd) {\n          showConfirm(cm, content);\n          return;\n        }\n        var index = 0;\n        var nextCommand = function() {\n          if (index < matchedLines.length) {\n            var command = matchedLines[index] + cmd;\n            exCommandDispatcher.processCommand(cm, command, {\n              callback: nextCommand\n            });\n          }\n          index++;\n        };\n        nextCommand();\n      },\n      substitute: function(cm, params) {\n        if (!cm.getSearchCursor) {\n          throw new Error('Search feature not available. Requires searchcursor.js or ' +\n              'any other getSearchCursor implementation.');\n        }\n        var argString = params.argString;\n        var tokens = argString ? splitBySeparator(argString, argString[0]) : [];\n        var regexPart, replacePart = '', trailing, flagsPart, count;\n        var confirm = false; // Whether to confirm each replace.\n        var global = false; // True to replace all instances on a line, false to replace only 1.\n        if (tokens.length) {\n          regexPart = tokens[0];\n          if (getOption('pcre') && regexPart !== '') {\n              regexPart = new RegExp(regexPart).source; //normalize not escaped characters\n          }\n          replacePart = tokens[1];\n          if (regexPart && regexPart[regexPart.length - 1] === '$') {\n            regexPart = regexPart.slice(0, regexPart.length - 1) + '\\\\n';\n            replacePart = replacePart ? replacePart + '\\n' : '\\n';\n          }\n          if (replacePart !== undefined) {\n            if (getOption('pcre')) {\n              replacePart = unescapeRegexReplace(replacePart.replace(/([^\\\\])&/g,\"$1$$&\"));\n            } else {\n              replacePart = translateRegexReplace(replacePart);\n            }\n            vimGlobalState.lastSubstituteReplacePart = replacePart;\n          }\n          trailing = tokens[2] ? tokens[2].split(' ') : [];\n        } else {\n          // either the argString is empty or its of the form ' hello/world'\n          // actually splitBySlash returns a list of tokens\n          // only if the string starts with a '/'\n          if (argString && argString.length) {\n            showConfirm(cm, 'Substitutions should be of the form ' +\n                ':s/pattern/replace/');\n            return;\n          }\n        }\n        // After the 3rd slash, we can have flags followed by a space followed\n        // by count.\n        if (trailing) {\n          flagsPart = trailing[0];\n          count = parseInt(trailing[1]);\n          if (flagsPart) {\n            if (flagsPart.indexOf('c') != -1) {\n              confirm = true;\n              flagsPart.replace('c', '');\n            }\n            if (flagsPart.indexOf('g') != -1) {\n              global = true;\n              flagsPart.replace('g', '');\n            }\n            if (getOption('pcre')) {\n               regexPart = regexPart + '/' + flagsPart;\n            } else {\n               regexPart = regexPart.replace(/\\//g, \"\\\\/\") + '/' + flagsPart;\n            }\n          }\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise use\n          // the regex part as the new query.\n          try {\n            updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n              true /** smartCase */);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + regexPart);\n            return;\n          }\n        }\n        replacePart = replacePart || vimGlobalState.lastSubstituteReplacePart;\n        if (replacePart === undefined) {\n          showConfirm(cm, 'No previous substitute regular expression');\n          return;\n        }\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        var lineStart = (params.line !== undefined) ? params.line : cm.getCursor().line;\n        var lineEnd = params.lineEnd || lineStart;\n        if (lineStart == cm.firstLine() && lineEnd == cm.lastLine()) {\n          lineEnd = Infinity;\n        }\n        if (count) {\n          lineStart = lineEnd;\n          lineEnd = lineStart + count - 1;\n        }\n        var startPos = clipCursorToContent(cm, Pos(lineStart, 0));\n        var cursor = cm.getSearchCursor(query, startPos);\n        doReplace(cm, confirm, global, lineStart, lineEnd, cursor, query, replacePart, params.callback);\n      },\n      redo: CodeMirror.commands.redo,\n      undo: CodeMirror.commands.undo,\n      write: function(cm) {\n        if (CodeMirror.commands.save) {\n          // If a save command is defined, call it.\n          CodeMirror.commands.save(cm);\n        } else if (cm.save) {\n          // Saves to text area if no save command is defined and cm.save() is available.\n          cm.save();\n        }\n      },\n      nohlsearch: function(cm) {\n        clearSearchHighlight(cm);\n      },\n      yank: function (cm) {\n        var cur = copyCursor(cm.getCursor());\n        var line = cur.line;\n        var lineText = cm.getLine(line);\n        vimGlobalState.registerController.pushText(\n          '0', 'yank', lineText, true, true);\n      },\n      delmarks: function(cm, params) {\n        if (!params.argString || !trim(params.argString)) {\n          showConfirm(cm, 'Argument required');\n          return;\n        }\n\n        var state = cm.state.vim;\n        var stream = new CodeMirror.StringStream(trim(params.argString));\n        while (!stream.eol()) {\n          stream.eatSpace();\n\n          // Record the streams position at the beginning of the loop for use\n          // in error messages.\n          var count = stream.pos;\n\n          if (!stream.match(/[a-zA-Z]/, false)) {\n            showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n            return;\n          }\n\n          var sym = stream.next();\n          // Check if this symbol is part of a range\n          if (stream.match('-', true)) {\n            // This symbol is part of a range.\n\n            // The range must terminate at an alphabetic character.\n            if (!stream.match(/[a-zA-Z]/, false)) {\n              showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n              return;\n            }\n\n            var startMark = sym;\n            var finishMark = stream.next();\n            // The range must terminate at an alphabetic character which\n            // shares the same case as the start of the range.\n            if (isLowerCase(startMark) && isLowerCase(finishMark) ||\n                isUpperCase(startMark) && isUpperCase(finishMark)) {\n              var start = startMark.charCodeAt(0);\n              var finish = finishMark.charCodeAt(0);\n              if (start >= finish) {\n                showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n                return;\n              }\n\n              // Because marks are always ASCII values, and we have\n              // determined that they are the same case, we can use\n              // their char codes to iterate through the defined range.\n              for (var j = 0; j <= finish - start; j++) {\n                var mark = String.fromCharCode(start + j);\n                delete state.marks[mark];\n              }\n            } else {\n              showConfirm(cm, 'Invalid argument: ' + startMark + '-');\n              return;\n            }\n          } else {\n            // This symbol is a valid mark, and is not part of a range.\n            delete state.marks[sym];\n          }\n        }\n      }\n    };\n\n    var exCommandDispatcher = new ExCommandDispatcher();\n\n    /**\n    * @param {CodeMirror} cm CodeMirror instance we are in.\n    * @param {boolean} confirm Whether to confirm each replace.\n    * @param {Cursor} lineStart Line to start replacing from.\n    * @param {Cursor} lineEnd Line to stop replacing at.\n    * @param {RegExp} query Query for performing matches with.\n    * @param {string} replaceWith Text to replace matches with. May contain $1,\n    *     $2, etc for replacing captured groups using Javascript replace.\n    * @param {function()} callback A callback for when the replace is done.\n    */\n    function doReplace(cm, confirm, global, lineStart, lineEnd, searchCursor, query,\n        replaceWith, callback) {\n      // Set up all the functions.\n      cm.state.vim.exMode = true;\n      var done = false;\n      var lastPos = searchCursor.from();\n      function replaceAll() {\n        cm.operation(function() {\n          while (!done) {\n            replace();\n            next();\n          }\n          stop();\n        });\n      }\n      function replace() {\n        var text = cm.getRange(searchCursor.from(), searchCursor.to());\n        var newText = text.replace(query, replaceWith);\n        searchCursor.replace(newText);\n      }\n      function next() {\n        // The below only loops to skip over multiple occurrences on the same\n        // line when 'global' is not true.\n        while(searchCursor.findNext() &&\n              isInRange(searchCursor.from(), lineStart, lineEnd)) {\n          if (!global && lastPos && searchCursor.from().line == lastPos.line) {\n            continue;\n          }\n          cm.scrollIntoView(searchCursor.from(), 30);\n          cm.setSelection(searchCursor.from(), searchCursor.to());\n          lastPos = searchCursor.from();\n          done = false;\n          return;\n        }\n        done = true;\n      }\n      function stop(close) {\n        if (close) { close(); }\n        cm.focus();\n        if (lastPos) {\n          cm.setCursor(lastPos);\n          var vim = cm.state.vim;\n          vim.exMode = false;\n          vim.lastHPos = vim.lastHSPos = lastPos.ch;\n        }\n        if (callback) { callback(); }\n      }\n      function onPromptKeyDown(e, _value, close) {\n        // Swallow all keys.\n        CodeMirror.e_stop(e);\n        var keyName = CodeMirror.keyName(e);\n        switch (keyName) {\n          case 'Y':\n            replace(); next(); break;\n          case 'N':\n            next(); break;\n          case 'A':\n            // replaceAll contains a call to close of its own. We don't want it\n            // to fire too early or multiple times.\n            var savedCallback = callback;\n            callback = undefined;\n            cm.operation(replaceAll);\n            callback = savedCallback;\n            break;\n          case 'L':\n            replace();\n            // fall through and exit.\n          case 'Q':\n          case 'Esc':\n          case 'Ctrl-C':\n          case 'Ctrl-[':\n            stop(close);\n            break;\n        }\n        if (done) { stop(close); }\n        return true;\n      }\n\n      // Actually do replace.\n      next();\n      if (done) {\n        showConfirm(cm, 'No matches for ' + query.source);\n        return;\n      }\n      if (!confirm) {\n        replaceAll();\n        if (callback) { callback(); }\n        return;\n      }\n      showPrompt(cm, {\n        prefix: 'replace with <strong>' + replaceWith + '</strong> (y/n/a/q/l)',\n        onKeyDown: onPromptKeyDown\n      });\n    }\n\n    CodeMirror.keyMap.vim = {\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function exitInsertMode(cm) {\n      var vim = cm.state.vim;\n      var macroModeState = vimGlobalState.macroModeState;\n      var insertModeChangeRegister = vimGlobalState.registerController.getRegister('.');\n      var isPlaying = macroModeState.isPlaying;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!isPlaying) {\n        cm.off('change', onChange);\n        CodeMirror.off(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n      }\n      if (!isPlaying && vim.insertModeRepeat > 1) {\n        // Perform insert mode repeat for commands like 3,a and 3,o.\n        repeatLastEdit(cm, vim, vim.insertModeRepeat - 1,\n            true /** repeatForInsert */);\n        vim.lastEditInputState.repeatOverride = vim.insertModeRepeat;\n      }\n      delete vim.insertModeRepeat;\n      vim.insertMode = false;\n      cm.setCursor(cm.getCursor().line, cm.getCursor().ch-1);\n      cm.setOption('keyMap', 'vim');\n      cm.setOption('disableInput', true);\n      cm.toggleOverwrite(false); // exit replace mode if we were in it.\n      // update the \". register before exiting insert mode\n      insertModeChangeRegister.setText(lastChange.changes.join(''));\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      if (macroModeState.isRecording) {\n        logInsertModeChange(macroModeState);\n      }\n    }\n\n    function _mapCommand(command) {\n      defaultKeymap.unshift(command);\n    }\n\n    function mapCommand(keys, type, name, args, extra) {\n      var command = {keys: keys, type: type};\n      command[type] = name;\n      command[type + \"Args\"] = args;\n      for (var key in extra)\n        command[key] = extra[key];\n      _mapCommand(command);\n    }\n\n    // The timeout in milliseconds for the two-character ESC keymap should be\n    // adjusted according to your typing speed to prevent false positives.\n    defineOption('insertModeEscKeysTimeout', 200, 'number');\n\n    CodeMirror.keyMap['vim-insert'] = {\n      // TODO: override navigation keys so that Esc will cancel automatic\n      // indentation from o, O, i_<CR>\n      fallthrough: ['default'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    CodeMirror.keyMap['vim-replace'] = {\n      'Backspace': 'goCharLeft',\n      fallthrough: ['vim-insert'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function executeMacroRegister(cm, vim, macroModeState, registerName) {\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (registerName == ':') {\n        // Read-only register containing last Ex command.\n        if (register.keyBuffer[0]) {\n          exCommandDispatcher.processCommand(cm, register.keyBuffer[0]);\n        }\n        macroModeState.isPlaying = false;\n        return;\n      }\n      var keyBuffer = register.keyBuffer;\n      var imc = 0;\n      macroModeState.isPlaying = true;\n      macroModeState.replaySearchQueries = register.searchQueries.slice(0);\n      for (var i = 0; i < keyBuffer.length; i++) {\n        var text = keyBuffer[i];\n        var match, key;\n        while (text) {\n          // Pull off one command key, which is either a single character\n          // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n          match = (/<\\w+-.+?>|<\\w+>|./).exec(text);\n          key = match[0];\n          text = text.substring(match.index + key.length);\n          CodeMirror.Vim.handleKey(cm, key, 'macro');\n          if (vim.insertMode) {\n            var changes = register.insertModeChanges[imc++].changes;\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes =\n                changes;\n            repeatInsertModeChanges(cm, changes, 1);\n            exitInsertMode(cm);\n          }\n        }\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function logKey(macroModeState, key) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register) {\n        register.pushText(key);\n      }\n    }\n\n    function logInsertModeChange(macroModeState) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushInsertModeChanges) {\n        register.pushInsertModeChanges(macroModeState.lastInsertModeChanges);\n      }\n    }\n\n    function logSearchQuery(macroModeState, query) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushSearchQuery) {\n        register.pushSearchQuery(query);\n      }\n    }\n\n    /**\n     * Listens for changes made in insert mode.\n     * Should only be active in insert mode.\n     */\n    function onChange(cm, changeObj) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!macroModeState.isPlaying) {\n        while(changeObj) {\n          lastChange.expectCursorActivityForChange = true;\n          if (lastChange.ignoreCount > 1) {\n            lastChange.ignoreCount--;\n          } else if (changeObj.origin == '+input' || changeObj.origin == 'paste'\n              || changeObj.origin === undefined /* only in testing */) {\n            var selectionCount = cm.listSelections().length;\n            if (selectionCount > 1)\n              lastChange.ignoreCount = selectionCount;\n            var text = changeObj.text.join('\\n');\n            if (lastChange.maybeReset) {\n              lastChange.changes = [];\n              lastChange.maybeReset = false;\n            }\n            if (text) {\n              if (cm.state.overwrite && !/\\n/.test(text)) {\n                lastChange.changes.push([text]);\n              } else {\n                lastChange.changes.push(text);\n              }\n            }\n          }\n          // Change objects may be chained with next.\n          changeObj = changeObj.next;\n        }\n      }\n    }\n\n    /**\n    * Listens for any kind of cursor activity on CodeMirror.\n    */\n    function onCursorActivity(cm) {\n      var vim = cm.state.vim;\n      if (vim.insertMode) {\n        // Tracking cursor activity in insert mode (for macro support).\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        var lastChange = macroModeState.lastInsertModeChanges;\n        if (lastChange.expectCursorActivityForChange) {\n          lastChange.expectCursorActivityForChange = false;\n        } else {\n          // Cursor moved outside the context of an edit. Reset the change.\n          lastChange.maybeReset = true;\n        }\n      } else if (!cm.curOp.isVimOp) {\n        handleExternalSelection(cm, vim);\n      }\n      if (vim.visualMode) {\n        updateFakeCursor(cm);\n      }\n    }\n    /**\n     * Keeps track of a fake cursor to support visual mode cursor behavior.\n     */\n    function updateFakeCursor(cm) {\n      var className = 'cm-animate-fat-cursor';\n      var vim = cm.state.vim;\n      var from = clipCursorToContent(cm, copyCursor(vim.sel.head));\n      var to = offsetCursor(from, 0, 1);\n      clearFakeCursor(vim);\n      // In visual mode, the cursor may be positioned over EOL.\n      if (from.ch == cm.getLine(from.line).length) {\n        var widget = document.createElement(\"span\");\n        widget.textContent = \"\\u00a0\";\n        widget.className = className;\n        vim.fakeCursorBookmark = cm.setBookmark(from, {widget: widget});\n      } else {\n        vim.fakeCursor = cm.markText(from, to, {className: className});\n      }\n    }\n    function clearFakeCursor(vim) {\n      if (vim.fakeCursor) {\n        vim.fakeCursor.clear();\n        vim.fakeCursor = null;\n      }\n      if (vim.fakeCursorBookmark) {\n        vim.fakeCursorBookmark.clear();\n        vim.fakeCursorBookmark = null;\n      }\n    }\n    function handleExternalSelection(cm, vim) {\n      var anchor = cm.getCursor('anchor');\n      var head = cm.getCursor('head');\n      // Enter or exit visual mode to match mouse selection.\n      if (vim.visualMode && !cm.somethingSelected()) {\n        exitVisualMode(cm, false);\n      } else if (!vim.visualMode && !vim.insertMode && cm.somethingSelected()) {\n        vim.visualMode = true;\n        vim.visualLine = false;\n        CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\"});\n      }\n      if (vim.visualMode) {\n        // Bind CodeMirror selection model to vim selection model.\n        // Mouse selections are considered visual characterwise.\n        var headOffset = !cursorIsBefore(head, anchor) ? -1 : 0;\n        var anchorOffset = cursorIsBefore(head, anchor) ? -1 : 0;\n        head = offsetCursor(head, 0, headOffset);\n        anchor = offsetCursor(anchor, 0, anchorOffset);\n        vim.sel = {\n          anchor: anchor,\n          head: head\n        };\n        updateMark(cm, vim, '<', cursorMin(head, anchor));\n        updateMark(cm, vim, '>', cursorMax(head, anchor));\n      } else if (!vim.insertMode) {\n        // Reset lastHPos if selection was modified by something outside of vim mode e.g. by mouse.\n        vim.lastHPos = cm.getCursor().ch;\n      }\n    }\n\n    /** Wrapper for special keys pressed in insert mode */\n    function InsertModeKey(keyName) {\n      this.keyName = keyName;\n    }\n\n    /**\n    * Handles raw key down events from the text area.\n    * - Should only be active in insert mode.\n    * - For recording deletes in insert mode.\n    */\n    function onKeyEventTargetKeyDown(e) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      var keyName = CodeMirror.keyName(e);\n      if (!keyName) { return; }\n      function onKeyFound() {\n        if (lastChange.maybeReset) {\n          lastChange.changes = [];\n          lastChange.maybeReset = false;\n        }\n        lastChange.changes.push(new InsertModeKey(keyName));\n        return true;\n      }\n      if (keyName.indexOf('Delete') != -1 || keyName.indexOf('Backspace') != -1) {\n        CodeMirror.lookupKey(keyName, 'vim-insert', onKeyFound);\n      }\n    }\n\n    /**\n     * Repeats the last edit, which includes exactly 1 command and at most 1\n     * insert. Operator and motion commands are read from lastEditInputState,\n     * while action commands are read from lastEditActionCommand.\n     *\n     * If repeatForInsert is true, then the function was called by\n     * exitInsertMode to repeat the insert mode changes the user just made. The\n     * corresponding enterInsertMode call was made with a count.\n     */\n    function repeatLastEdit(cm, vim, repeat, repeatForInsert) {\n      var macroModeState = vimGlobalState.macroModeState;\n      macroModeState.isPlaying = true;\n      var isAction = !!vim.lastEditActionCommand;\n      var cachedInputState = vim.inputState;\n      function repeatCommand() {\n        if (isAction) {\n          commandDispatcher.processAction(cm, vim, vim.lastEditActionCommand);\n        } else {\n          commandDispatcher.evalInput(cm, vim);\n        }\n      }\n      function repeatInsert(repeat) {\n        if (macroModeState.lastInsertModeChanges.changes.length > 0) {\n          // For some reason, repeat cw in desktop VIM does not repeat\n          // insert mode changes. Will conform to that behavior.\n          repeat = !vim.lastEditActionCommand ? 1 : repeat;\n          var changeObject = macroModeState.lastInsertModeChanges;\n          repeatInsertModeChanges(cm, changeObject.changes, repeat);\n        }\n      }\n      vim.inputState = vim.lastEditInputState;\n      if (isAction && vim.lastEditActionCommand.interlaceInsertRepeat) {\n        // o and O repeat have to be interlaced with insert repeats so that the\n        // insertions appear on separate lines instead of the last line.\n        for (var i = 0; i < repeat; i++) {\n          repeatCommand();\n          repeatInsert(1);\n        }\n      } else {\n        if (!repeatForInsert) {\n          // Hack to get the cursor to end up at the right place. If I is\n          // repeated in insert mode repeat, cursor will be 1 insert\n          // change set left of where it should be.\n          repeatCommand();\n        }\n        repeatInsert(repeat);\n      }\n      vim.inputState = cachedInputState;\n      if (vim.insertMode && !repeatForInsert) {\n        // Don't exit insert mode twice. If repeatForInsert is set, then we\n        // were called by an exitInsertMode call lower on the stack.\n        exitInsertMode(cm);\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function repeatInsertModeChanges(cm, changes, repeat) {\n      function keyHandler(binding) {\n        if (typeof binding == 'string') {\n          CodeMirror.commands[binding](cm);\n        } else {\n          binding(cm);\n        }\n        return true;\n      }\n      var head = cm.getCursor('head');\n      var visualBlock = vimGlobalState.macroModeState.lastInsertModeChanges.visualBlock;\n      if (visualBlock) {\n        // Set up block selection again for repeating the changes.\n        selectForInsert(cm, head, visualBlock + 1);\n        repeat = cm.listSelections().length;\n        cm.setCursor(head);\n      }\n      for (var i = 0; i < repeat; i++) {\n        if (visualBlock) {\n          cm.setCursor(offsetCursor(head, i, 0));\n        }\n        for (var j = 0; j < changes.length; j++) {\n          var change = changes[j];\n          if (change instanceof InsertModeKey) {\n            CodeMirror.lookupKey(change.keyName, 'vim-insert', keyHandler);\n          } else if (typeof change == \"string\") {\n            var cur = cm.getCursor();\n            cm.replaceRange(change, cur, cur);\n          } else {\n            var start = cm.getCursor();\n            var end = offsetCursor(start, 0, change[0].length);\n            cm.replaceRange(change[0], start, end);\n          }\n        }\n      }\n      if (visualBlock) {\n        cm.setCursor(offsetCursor(head, 0, 1));\n      }\n    }\n\n    resetVimGlobalState();\n    return vimApi;\n  };\n  // Initialize Vim and make it available as an API.\n  CodeMirror.Vim = Vim();\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../markdown/markdown\", \"../../addon/mode/overlay\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?]))/i\n\nCodeMirror.defineMode(\"gfm\", function(config, modeConfig) {\n  var codeDepth = 0;\n  function blankLine(state) {\n    state.code = false;\n    return null;\n  }\n  var gfmOverlay = {\n    startState: function() {\n      return {\n        code: false,\n        codeBlock: false,\n        ateSpace: false\n      };\n    },\n    copyState: function(s) {\n      return {\n        code: s.code,\n        codeBlock: s.codeBlock,\n        ateSpace: s.ateSpace\n      };\n    },\n    token: function(stream, state) {\n      state.combineTokens = null;\n\n      // Hack to prevent formatting override inside code blocks (block and inline)\n      if (state.codeBlock) {\n        if (stream.match(/^```+/)) {\n          state.codeBlock = false;\n          return null;\n        }\n        stream.skipToEnd();\n        return null;\n      }\n      if (stream.sol()) {\n        state.code = false;\n      }\n      if (stream.sol() && stream.match(/^```+/)) {\n        stream.skipToEnd();\n        state.codeBlock = true;\n        return null;\n      }\n      // If this block is changed, it may need to be updated in Markdown mode\n      if (stream.peek() === '`') {\n        stream.next();\n        var before = stream.pos;\n        stream.eatWhile('`');\n        var difference = 1 + stream.pos - before;\n        if (!state.code) {\n          codeDepth = difference;\n          state.code = true;\n        } else {\n          if (difference === codeDepth) { // Must be exact\n            state.code = false;\n          }\n        }\n        return null;\n      } else if (state.code) {\n        stream.next();\n        return null;\n      }\n      // Check if space. If so, links can be formatted later on\n      if (stream.eatSpace()) {\n        state.ateSpace = true;\n        return null;\n      }\n      if (stream.sol() || state.ateSpace) {\n        state.ateSpace = false;\n        if (modeConfig.gitHubSpice !== false) {\n          if(stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n            // User/Project@SHA\n            // User@SHA\n            // SHA\n            state.combineTokens = true;\n            return \"link\";\n          } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n            // User/Project#Num\n            // User#Num\n            // #Num\n            state.combineTokens = true;\n            return \"link\";\n          }\n        }\n      }\n      if (stream.match(urlRE) &&\n          stream.string.slice(stream.start - 2, stream.start) != \"](\" &&\n          (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n        // URLs\n        // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n        // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n        // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n        state.combineTokens = true;\n        return \"link\";\n      }\n      stream.next();\n      return null;\n    },\n    blankLine: blankLine\n  };\n\n  var markdownConfig = {\n    taskLists: true,\n    strikethrough: true,\n    emoji: true\n  };\n  for (var attr in modeConfig) {\n    markdownConfig[attr] = modeConfig[attr];\n  }\n  markdownConfig.name = \"markdown\";\n  return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n\n}, \"markdown\");\n\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"markdown\", function(cmCfg, modeCfg) {\n\n  var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n  var htmlModeMissing = htmlMode.name == \"null\"\n\n  function getMode(name) {\n    if (CodeMirror.findModeByName) {\n      var found = CodeMirror.findModeByName(name);\n      if (found) name = found.mime || found.mimes[0];\n    }\n    var mode = CodeMirror.getMode(cmCfg, name);\n    return mode.name == \"null\" ? null : mode;\n  }\n\n  // Should characters that affect highlighting be highlighted separate?\n  // Does not include characters that will be output (such as `1.` and `-` for lists)\n  if (modeCfg.highlightFormatting === undefined)\n    modeCfg.highlightFormatting = false;\n\n  // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n  // Excess `>` will emit `error` token.\n  if (modeCfg.maxBlockquoteDepth === undefined)\n    modeCfg.maxBlockquoteDepth = 0;\n\n  // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n  if (modeCfg.taskLists === undefined) modeCfg.taskLists = false;\n\n  // Turn on strikethrough syntax\n  if (modeCfg.strikethrough === undefined)\n    modeCfg.strikethrough = false;\n\n  if (modeCfg.emoji === undefined)\n    modeCfg.emoji = false;\n\n  if (modeCfg.fencedCodeBlockHighlighting === undefined)\n    modeCfg.fencedCodeBlockHighlighting = true;\n\n  if (modeCfg.fencedCodeBlockDefaultMode === undefined)\n    modeCfg.fencedCodeBlockDefaultMode = 'text/plain';\n\n  if (modeCfg.xml === undefined)\n    modeCfg.xml = true;\n\n  // Allow token types to be overridden by user-provided token types.\n  if (modeCfg.tokenTypeOverrides === undefined)\n    modeCfg.tokenTypeOverrides = {};\n\n  var tokenTypes = {\n    header: \"header\",\n    code: \"comment\",\n    quote: \"quote\",\n    list1: \"variable-2\",\n    list2: \"variable-3\",\n    list3: \"keyword\",\n    hr: \"hr\",\n    image: \"image\",\n    imageAltText: \"image-alt-text\",\n    imageMarker: \"image-marker\",\n    formatting: \"formatting\",\n    linkInline: \"link\",\n    linkEmail: \"link\",\n    linkText: \"link\",\n    linkHref: \"string\",\n    em: \"em\",\n    strong: \"strong\",\n    strikethrough: \"strikethrough\",\n    emoji: \"builtin\"\n  };\n\n  for (var tokenType in tokenTypes) {\n    if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n      tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n    }\n  }\n\n  var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/\n  ,   listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/\n  ,   taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n  ,   atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/\n  ,   setextHeaderRE = /^ {0,3}(?:\\={1,}|-{2,})\\s*$/\n  ,   textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/\n  ,   fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w\\/+#-]*)[^\\n`]*$/\n  ,   linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n  ,   punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/\n  ,   expandedTab = \"    \" // CommonMark specifies tab as 4 spaces\n\n  function switchInline(stream, state, f) {\n    state.f = state.inline = f;\n    return f(stream, state);\n  }\n\n  function switchBlock(stream, state, f) {\n    state.f = state.block = f;\n    return f(stream, state);\n  }\n\n  function lineIsEmpty(line) {\n    return !line || !/\\S/.test(line.string)\n  }\n\n  // Blocks\n\n  function blankLine(state) {\n    // Reset linkTitle state\n    state.linkTitle = false;\n    state.linkHref = false;\n    state.linkText = false;\n    // Reset EM state\n    state.em = false;\n    // Reset STRONG state\n    state.strong = false;\n    // Reset strikethrough state\n    state.strikethrough = false;\n    // Reset state.quote\n    state.quote = 0;\n    // Reset state.indentedCode\n    state.indentedCode = false;\n    if (state.f == htmlBlock) {\n      var exit = htmlModeMissing\n      if (!exit) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n        exit = inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n          (!inner.state.context && inner.state.tokenize.isInText)\n      }\n      if (exit) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    // Reset state.trailingSpace\n    state.trailingSpace = 0;\n    state.trailingSpaceNewLine = false;\n    // Mark this line as blank\n    state.prevLine = state.thisLine\n    state.thisLine = {stream: null}\n    return null;\n  }\n\n  function blockNormal(stream, state) {\n    var firstTokenOnLine = stream.column() === state.indentation;\n    var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n    var prevLineIsIndentedCode = state.indentedCode;\n    var prevLineIsHr = state.prevLine.hr;\n    var prevLineIsList = state.list !== false;\n    var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n\n    state.indentedCode = false;\n\n    var lineIndentation = state.indentation;\n    // compute once per line (on first token)\n    if (state.indentationDiff === null) {\n      state.indentationDiff = state.indentation;\n      if (prevLineIsList) {\n        state.list = null;\n        // While this list item's marker's indentation is less than the deepest\n        //  list item's content's indentation,pop the deepest list item\n        //  indentation off the stack, and update block indentation state\n        while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n          state.listStack.pop();\n          if (state.listStack.length) {\n            state.indentation = state.listStack[state.listStack.length - 1];\n          // less than the first list's indent -> the line is no longer a list\n          } else {\n            state.list = false;\n          }\n        }\n        if (state.list !== false) {\n          state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1]\n        }\n      }\n    }\n\n    // not comprehensive (currently only for setext detection purposes)\n    var allowsInlineContinuation = (\n        !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header &&\n        (!prevLineIsList || !prevLineIsIndentedCode) &&\n        !state.prevLine.fencedCodeEnd\n    );\n\n    var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) &&\n      state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n\n    var match = null;\n    if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd ||\n         state.prevLine.header || prevLineLineIsEmpty)) {\n      stream.skipToEnd();\n      state.indentedCode = true;\n      return tokenTypes.code;\n    } else if (stream.eatSpace()) {\n      return null;\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n      state.quote = 0;\n      state.header = match[1].length;\n      state.thisLine.header = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      state.f = state.inline;\n      return getType(state);\n    } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n      state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n      if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n      stream.eatSpace();\n      return getType(state);\n    } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n      var listType = match[1] ? \"ol\" : \"ul\";\n\n      state.indentation = lineIndentation + stream.current().length;\n      state.list = true;\n      state.quote = 0;\n\n      // Add this list item's content's indentation to the stack\n      state.listStack.push(state.indentation);\n      // Reset inline styles which shouldn't propagate aross list items\n      state.em = false;\n      state.strong = false;\n      state.code = false;\n      state.strikethrough = false;\n\n      if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n        state.taskList = true;\n      }\n      state.f = state.inline;\n      if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n      return getType(state);\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n      state.quote = 0;\n      state.fencedEndRE = new RegExp(match[1] + \"+ *$\");\n      // try switching mode\n      state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2] || modeCfg.fencedCodeBlockDefaultMode );\n      if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n      state.f = state.block = local;\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      state.code = -1\n      return getType(state);\n    // SETEXT has lowest block-scope precedence after HR, so check it after\n    //  the others (code, blockquote, list...)\n    } else if (\n      // if setext set, indicates line after ---/===\n      state.setext || (\n        // line before ---/===\n        (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false &&\n        !state.code && !isHr && !linkDefRE.test(stream.string) &&\n        (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))\n      )\n    ) {\n      if ( !state.setext ) {\n        state.header = match[0].charAt(0) == '=' ? 1 : 2;\n        state.setext = state.header;\n      } else {\n        state.header = state.setext;\n        // has no effect on type so we can reset it now\n        state.setext = 0;\n        stream.skipToEnd();\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      }\n      state.thisLine.header = true;\n      state.f = state.inline;\n      return getType(state);\n    } else if (isHr) {\n      stream.skipToEnd();\n      state.hr = true;\n      state.thisLine.hr = true;\n      return tokenTypes.hr;\n    } else if (stream.peek() === '[') {\n      return switchInline(stream, state, footnoteLink);\n    }\n\n    return switchInline(stream, state, state.inline);\n  }\n\n  function htmlBlock(stream, state) {\n    var style = htmlMode.token(stream, state.htmlState);\n    if (!htmlModeMissing) {\n      var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n      if ((inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n           (!inner.state.context && inner.state.tokenize.isInText)) ||\n          (state.md_inside && stream.current().indexOf(\">\") > -1)) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    return style;\n  }\n\n  function local(stream, state) {\n    var currListInd = state.listStack[state.listStack.length - 1] || 0;\n    var hasExitedList = state.indentation < currListInd;\n    var maxFencedEndInd = currListInd + 3;\n    if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      var returnType;\n      if (!hasExitedList) returnType = getType(state)\n      state.localMode = state.localState = null;\n      state.block = blockNormal;\n      state.f = inlineNormal;\n      state.fencedEndRE = null;\n      state.code = 0\n      state.thisLine.fencedCodeEnd = true;\n      if (hasExitedList) return switchBlock(stream, state, state.block);\n      return returnType;\n    } else if (state.localMode) {\n      return state.localMode.token(stream, state.localState);\n    } else {\n      stream.skipToEnd();\n      return tokenTypes.code;\n    }\n  }\n\n  // Inline\n  function getType(state) {\n    var styles = [];\n\n    if (state.formatting) {\n      styles.push(tokenTypes.formatting);\n\n      if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n      for (var i = 0; i < state.formatting.length; i++) {\n        styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n        if (state.formatting[i] === \"header\") {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n        }\n\n        // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n        // Add `error` instead if the maximum blockquote nesting depth is passed\n        if (state.formatting[i] === \"quote\") {\n          if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n          } else {\n            styles.push(\"error\");\n          }\n        }\n      }\n    }\n\n    if (state.taskOpen) {\n      styles.push(\"meta\");\n      return styles.length ? styles.join(' ') : null;\n    }\n    if (state.taskClosed) {\n      styles.push(\"property\");\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    if (state.linkHref) {\n      styles.push(tokenTypes.linkHref, \"url\");\n    } else { // Only apply inline styles to non-url text\n      if (state.strong) { styles.push(tokenTypes.strong); }\n      if (state.em) { styles.push(tokenTypes.em); }\n      if (state.strikethrough) { styles.push(tokenTypes.strikethrough); }\n      if (state.emoji) { styles.push(tokenTypes.emoji); }\n      if (state.linkText) { styles.push(tokenTypes.linkText); }\n      if (state.code) { styles.push(tokenTypes.code); }\n      if (state.image) { styles.push(tokenTypes.image); }\n      if (state.imageAltText) { styles.push(tokenTypes.imageAltText, \"link\"); }\n      if (state.imageMarker) { styles.push(tokenTypes.imageMarker); }\n    }\n\n    if (state.header) { styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header); }\n\n    if (state.quote) {\n      styles.push(tokenTypes.quote);\n\n      // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n      if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n        styles.push(tokenTypes.quote + \"-\" + state.quote);\n      } else {\n        styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n      }\n    }\n\n    if (state.list !== false) {\n      var listMod = (state.listStack.length - 1) % 3;\n      if (!listMod) {\n        styles.push(tokenTypes.list1);\n      } else if (listMod === 1) {\n        styles.push(tokenTypes.list2);\n      } else {\n        styles.push(tokenTypes.list3);\n      }\n    }\n\n    if (state.trailingSpaceNewLine) {\n      styles.push(\"trailing-space-new-line\");\n    } else if (state.trailingSpace) {\n      styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n    }\n\n    return styles.length ? styles.join(' ') : null;\n  }\n\n  function handleText(stream, state) {\n    if (stream.match(textRE, true)) {\n      return getType(state);\n    }\n    return undefined;\n  }\n\n  function inlineNormal(stream, state) {\n    var style = state.text(stream, state);\n    if (typeof style !== 'undefined')\n      return style;\n\n    if (state.list) { // List marker (*, +, -, 1., etc)\n      state.list = null;\n      return getType(state);\n    }\n\n    if (state.taskList) {\n      var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n      if (taskOpen) state.taskOpen = true;\n      else state.taskClosed = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"task\";\n      state.taskList = false;\n      return getType(state);\n    }\n\n    state.taskOpen = false;\n    state.taskClosed = false;\n\n    if (state.header && stream.match(/^#+$/, true)) {\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      return getType(state);\n    }\n\n    var ch = stream.next();\n\n    // Matches link titles present on next line\n    if (state.linkTitle) {\n      state.linkTitle = false;\n      var matchCh = ch;\n      if (ch === '(') {\n        matchCh = ')';\n      }\n      matchCh = (matchCh+'').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n      if (stream.match(new RegExp(regex), true)) {\n        return tokenTypes.linkHref;\n      }\n    }\n\n    // If this block is changed, it may need to be updated in GFM mode\n    if (ch === '`') {\n      var previousFormatting = state.formatting;\n      if (modeCfg.highlightFormatting) state.formatting = \"code\";\n      stream.eatWhile('`');\n      var count = stream.current().length\n      if (state.code == 0 && (!state.quote || count == 1)) {\n        state.code = count\n        return getType(state)\n      } else if (count == state.code) { // Must be exact\n        var t = getType(state)\n        state.code = 0\n        return t\n      } else {\n        state.formatting = previousFormatting\n        return getType(state)\n      }\n    } else if (state.code) {\n      return getType(state);\n    }\n\n    if (ch === '\\\\') {\n      stream.next();\n      if (modeCfg.highlightFormatting) {\n        var type = getType(state);\n        var formattingEscape = tokenTypes.formatting + \"-escape\";\n        return type ? type + \" \" + formattingEscape : formattingEscape;\n      }\n    }\n\n    if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n      state.imageMarker = true;\n      state.image = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n      state.imageMarker = false;\n      state.imageAltText = true\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.imageAltText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      var type = getType(state);\n      state.imageAltText = false;\n      state.image = false;\n      state.inline = state.f = linkHref;\n      return type;\n    }\n\n    if (ch === '[' && !state.image) {\n      if (state.linkText && stream.match(/^.*?\\]/)) return getType(state)\n      state.linkText = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.linkText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      state.linkText = false;\n      state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal\n      return type;\n    }\n\n    if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkEmail;\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n      var end = stream.string.indexOf(\">\", stream.pos);\n      if (end != -1) {\n        var atts = stream.string.substring(stream.start, end);\n        if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n      }\n      stream.backUp(1);\n      state.htmlState = CodeMirror.startState(htmlMode);\n      return switchBlock(stream, state, htmlBlock);\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n      state.md_inside = false;\n      return \"tag\";\n    } else if (ch === \"*\" || ch === \"_\") {\n      var len = 1, before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2)\n      while (len < 3 && stream.eat(ch)) len++\n      var after = stream.peek() || \" \"\n      // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n      var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before))\n      var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after))\n      var setEm = null, setStrong = null\n      if (len % 2) { // Em\n        if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setEm = true\n        else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setEm = false\n      }\n      if (len > 1) { // Strong\n        if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setStrong = true\n        else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setStrong = false\n      }\n      if (setStrong != null || setEm != null) {\n        if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\"\n        if (setEm === true) state.em = ch\n        if (setStrong === true) state.strong = ch\n        var t = getType(state)\n        if (setEm === false) state.em = false\n        if (setStrong === false) state.strong = false\n        return t\n      }\n    } else if (ch === ' ') {\n      if (stream.eat('*') || stream.eat('_')) { // Probably surrounded by spaces\n        if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n          return getType(state);\n        } else { // Not surrounded by spaces, back up pointer\n          stream.backUp(1);\n        }\n      }\n    }\n\n    if (modeCfg.strikethrough) {\n      if (ch === '~' && stream.eatWhile(ch)) {\n        if (state.strikethrough) {// Remove strikethrough\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          var t = getType(state);\n          state.strikethrough = false;\n          return t;\n        } else if (stream.match(/^[^\\s]/, false)) {// Add strikethrough\n          state.strikethrough = true;\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          return getType(state);\n        }\n      } else if (ch === ' ') {\n        if (stream.match(/^~~/, true)) { // Probably surrounded by space\n          if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n            return getType(state);\n          } else { // Not surrounded by spaces, back up pointer\n            stream.backUp(2);\n          }\n        }\n      }\n    }\n\n    if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n      state.emoji = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n      var retType = getType(state);\n      state.emoji = false;\n      return retType;\n    }\n\n    if (ch === ' ') {\n      if (stream.match(/^ +$/, false)) {\n        state.trailingSpace++;\n      } else if (state.trailingSpace) {\n        state.trailingSpaceNewLine = true;\n      }\n    }\n\n    return getType(state);\n  }\n\n  function linkInline(stream, state) {\n    var ch = stream.next();\n\n    if (ch === \">\") {\n      state.f = state.inline = inlineNormal;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    stream.match(/^[^>]+/, true);\n\n    return tokenTypes.linkInline;\n  }\n\n  function linkHref(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    var ch = stream.next();\n    if (ch === '(' || ch === '[') {\n      state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n      if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n      state.linkHref = true;\n      return getType(state);\n    }\n    return 'error';\n  }\n\n  var linkRE = {\n    \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n    \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n  }\n\n  function getLinkHrefInside(endChar) {\n    return function(stream, state) {\n      var ch = stream.next();\n\n      if (ch === endChar) {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        var returnState = getType(state);\n        state.linkHref = false;\n        return returnState;\n      }\n\n      stream.match(linkRE[endChar])\n      state.linkHref = true;\n      return getType(state);\n    };\n  }\n\n  function footnoteLink(stream, state) {\n    if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n      state.f = footnoteLinkInside;\n      stream.next(); // Consume [\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      state.linkText = true;\n      return getType(state);\n    }\n    return switchInline(stream, state, inlineNormal);\n  }\n\n  function footnoteLinkInside(stream, state) {\n    if (stream.match(/^\\]:/, true)) {\n      state.f = state.inline = footnoteUrl;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var returnType = getType(state);\n      state.linkText = false;\n      return returnType;\n    }\n\n    stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n\n    return tokenTypes.linkText;\n  }\n\n  function footnoteUrl(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    // Match URL\n    stream.match(/^[^\\s]+/, true);\n    // Check for link title\n    if (stream.peek() === undefined) { // End of line, set flag to check next line\n      state.linkTitle = true;\n    } else { // More content on line, check if link title\n      stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n    }\n    state.f = state.inline = inlineNormal;\n    return tokenTypes.linkHref + \" url\";\n  }\n\n  var mode = {\n    startState: function() {\n      return {\n        f: blockNormal,\n\n        prevLine: {stream: null},\n        thisLine: {stream: null},\n\n        block: blockNormal,\n        htmlState: null,\n        indentation: 0,\n\n        inline: inlineNormal,\n        text: handleText,\n\n        formatting: false,\n        linkText: false,\n        linkHref: false,\n        linkTitle: false,\n        code: 0,\n        em: false,\n        strong: false,\n        header: 0,\n        setext: 0,\n        hr: false,\n        taskList: false,\n        list: false,\n        listStack: [],\n        quote: 0,\n        trailingSpace: 0,\n        trailingSpaceNewLine: false,\n        strikethrough: false,\n        emoji: false,\n        fencedEndRE: null\n      };\n    },\n\n    copyState: function(s) {\n      return {\n        f: s.f,\n\n        prevLine: s.prevLine,\n        thisLine: s.thisLine,\n\n        block: s.block,\n        htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n        indentation: s.indentation,\n\n        localMode: s.localMode,\n        localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n\n        inline: s.inline,\n        text: s.text,\n        formatting: false,\n        linkText: s.linkText,\n        linkTitle: s.linkTitle,\n        linkHref: s.linkHref,\n        code: s.code,\n        em: s.em,\n        strong: s.strong,\n        strikethrough: s.strikethrough,\n        emoji: s.emoji,\n        header: s.header,\n        setext: s.setext,\n        hr: s.hr,\n        taskList: s.taskList,\n        list: s.list,\n        listStack: s.listStack.slice(0),\n        quote: s.quote,\n        indentedCode: s.indentedCode,\n        trailingSpace: s.trailingSpace,\n        trailingSpaceNewLine: s.trailingSpaceNewLine,\n        md_inside: s.md_inside,\n        fencedEndRE: s.fencedEndRE\n      };\n    },\n\n    token: function(stream, state) {\n\n      // Reset state.formatting\n      state.formatting = false;\n\n      if (stream != state.thisLine.stream) {\n        state.header = 0;\n        state.hr = false;\n\n        if (stream.match(/^\\s*$/, true)) {\n          blankLine(state);\n          return null;\n        }\n\n        state.prevLine = state.thisLine\n        state.thisLine = {stream: stream}\n\n        // Reset state.taskList\n        state.taskList = false;\n\n        // Reset state.trailingSpace\n        state.trailingSpace = 0;\n        state.trailingSpaceNewLine = false;\n\n        if (!state.localState) {\n          state.f = state.block;\n          if (state.f != htmlBlock) {\n            var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n            state.indentation = indentation;\n            state.indentationDiff = null;\n            if (indentation > 0) return null;\n          }\n        }\n      }\n      return state.f(stream, state);\n    },\n\n    innerMode: function(state) {\n      if (state.block == htmlBlock) return {state: state.htmlState, mode: htmlMode};\n      if (state.localState) return {state: state.localState, mode: state.localMode};\n      return {state: state, mode: mode};\n    },\n\n    indent: function(state, textAfter, line) {\n      if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line)\n      if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line)\n      return CodeMirror.Pass\n    },\n\n    blankLine: blankLine,\n\n    getType: getType,\n\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n    fold: \"markdown\"\n  };\n  return mode;\n}, \"xml\");\n\nCodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n\nCodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n}\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  allowMissingTagName: false,\n  caseFold: false\n}\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit\n  var config = {}\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig\n  for (var prop in defaults) config[prop] = defaults[prop]\n  for (var prop in config_) config[prop] = config_[prop]\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    }\n  }\n\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName;\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return attrState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return closeState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null}\n      if (baseIndent != null) state.baseIndent = baseIndent\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState\n    },\n\n    xmlCurrentTag: function(state) {\n      return state.tagName ? {name: state.tagName, close: state.type == \"closeTag\"} : null\n    },\n\n    xmlCurrentContext: function(state) {\n      var context = []\n      for (var cx = state.context; cx; cx = cx.prev)\n        if (cx.tagName) context.push(cx.tagName)\n      return context.reverse()\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [\n    {name: \"APL\", mime: \"text/apl\", mode: \"apl\", ext: [\"dyalog\", \"apl\"]},\n    {name: \"PGP\", mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"], mode: \"asciiarmor\", ext: [\"asc\", \"pgp\", \"sig\"]},\n    {name: \"ASN.1\", mime: \"text/x-ttcn-asn\", mode: \"asn.1\", ext: [\"asn\", \"asn1\"]},\n    {name: \"Asterisk\", mime: \"text/x-asterisk\", mode: \"asterisk\", file: /^extensions\\.conf$/i},\n    {name: \"Brainfuck\", mime: \"text/x-brainfuck\", mode: \"brainfuck\", ext: [\"b\", \"bf\"]},\n    {name: \"C\", mime: \"text/x-csrc\", mode: \"clike\", ext: [\"c\", \"h\", \"ino\"]},\n    {name: \"C++\", mime: \"text/x-c++src\", mode: \"clike\", ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"], alias: [\"cpp\"]},\n    {name: \"Cobol\", mime: \"text/x-cobol\", mode: \"cobol\", ext: [\"cob\", \"cpy\"]},\n    {name: \"C#\", mime: \"text/x-csharp\", mode: \"clike\", ext: [\"cs\"], alias: [\"csharp\", \"cs\"]},\n    {name: \"Clojure\", mime: \"text/x-clojure\", mode: \"clojure\", ext: [\"clj\", \"cljc\", \"cljx\"]},\n    {name: \"ClojureScript\", mime: \"text/x-clojurescript\", mode: \"clojure\", ext: [\"cljs\"]},\n    {name: \"Closure Stylesheets (GSS)\", mime: \"text/x-gss\", mode: \"css\", ext: [\"gss\"]},\n    {name: \"CMake\", mime: \"text/x-cmake\", mode: \"cmake\", ext: [\"cmake\", \"cmake.in\"], file: /^CMakeLists\\.txt$/},\n    {name: \"CoffeeScript\", mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"], mode: \"coffeescript\", ext: [\"coffee\"], alias: [\"coffee\", \"coffee-script\"]},\n    {name: \"Common Lisp\", mime: \"text/x-common-lisp\", mode: \"commonlisp\", ext: [\"cl\", \"lisp\", \"el\"], alias: [\"lisp\"]},\n    {name: \"Cypher\", mime: \"application/x-cypher-query\", mode: \"cypher\", ext: [\"cyp\", \"cypher\"]},\n    {name: \"Cython\", mime: \"text/x-cython\", mode: \"python\", ext: [\"pyx\", \"pxd\", \"pxi\"]},\n    {name: \"Crystal\", mime: \"text/x-crystal\", mode: \"crystal\", ext: [\"cr\"]},\n    {name: \"CSS\", mime: \"text/css\", mode: \"css\", ext: [\"css\"]},\n    {name: \"CSV\", mime: \"text/x-csv\", mode: \"csv\", ext: [\"csv\"]},\n    {name: \"CQL\", mime: \"text/x-cassandra\", mode: \"sql\", ext: [\"cql\"]},\n    {name: \"D\", mime: \"text/x-d\", mode: \"d\", ext: [\"d\"]},\n    {name: \"Dart\", mimes: [\"application/dart\", \"text/x-dart\"], mode: \"dart\", ext: [\"dart\"]},\n    {name: \"diff\", mime: \"text/x-diff\", mode: \"diff\", ext: [\"diff\", \"patch\"]},\n    {name: \"Django\", mime: \"text/x-django\", mode: \"django\"},\n    {name: \"Dockerfile\", mime: \"text/x-dockerfile\", mode: \"dockerfile\", file: /^Dockerfile$/},\n    {name: \"DTD\", mime: \"application/xml-dtd\", mode: \"dtd\", ext: [\"dtd\"]},\n    {name: \"Dylan\", mime: \"text/x-dylan\", mode: \"dylan\", ext: [\"dylan\", \"dyl\", \"intr\"]},\n    {name: \"EBNF\", mime: \"text/x-ebnf\", mode: \"ebnf\"},\n    {name: \"ECL\", mime: \"text/x-ecl\", mode: \"ecl\", ext: [\"ecl\"]},\n    {name: \"edn\", mime: \"application/edn\", mode: \"clojure\", ext: [\"edn\"]},\n    {name: \"Eiffel\", mime: \"text/x-eiffel\", mode: \"eiffel\", ext: [\"e\"]},\n    {name: \"Elm\", mime: \"text/x-elm\", mode: \"elm\", ext: [\"elm\"]},\n    {name: \"Embedded Javascript\", mime: \"application/x-ejs\", mode: \"htmlembedded\", ext: [\"ejs\"]},\n    {name: \"Embedded Ruby\", mime: \"application/x-erb\", mode: \"htmlembedded\", ext: [\"erb\"]},\n    {name: \"Erlang\", mime: \"text/x-erlang\", mode: \"erlang\", ext: [\"erl\"]},\n    {name: \"Esper\", mime: \"text/x-esper\", mode: \"sql\"},\n    {name: \"Factor\", mime: \"text/x-factor\", mode: \"factor\", ext: [\"factor\"]},\n    {name: \"FCL\", mime: \"text/x-fcl\", mode: \"fcl\"},\n    {name: \"Forth\", mime: \"text/x-forth\", mode: \"forth\", ext: [\"forth\", \"fth\", \"4th\"]},\n    {name: \"Fortran\", mime: \"text/x-fortran\", mode: \"fortran\", ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]},\n    {name: \"F#\", mime: \"text/x-fsharp\", mode: \"mllike\", ext: [\"fs\"], alias: [\"fsharp\"]},\n    {name: \"Gas\", mime: \"text/x-gas\", mode: \"gas\", ext: [\"s\"]},\n    {name: \"Gherkin\", mime: \"text/x-feature\", mode: \"gherkin\", ext: [\"feature\"]},\n    {name: \"GitHub Flavored Markdown\", mime: \"text/x-gfm\", mode: \"gfm\", file: /^(readme|contributing|history)\\.md$/i},\n    {name: \"Go\", mime: \"text/x-go\", mode: \"go\", ext: [\"go\"]},\n    {name: \"Groovy\", mime: \"text/x-groovy\", mode: \"groovy\", ext: [\"groovy\", \"gradle\"], file: /^Jenkinsfile$/},\n    {name: \"Graphviz (dot)\", mime: \"application/vnd.graphviz\", mode: 'graphviz', ext: [\"gv\", \"dot\"] },\n    {name: \"Graphviz (neato)\", mime: \"application/vnd.graphviz.neato\", mode: 'graphviz', ext: [\"neato\"] },\n    {name: \"HAML\", mime: \"text/x-haml\", mode: \"haml\", ext: [\"haml\"]},\n    {name: \"Haskell\", mime: \"text/x-haskell\", mode: \"haskell\", ext: [\"hs\"]},\n    {name: \"Haskell (Literate)\", mime: \"text/x-literate-haskell\", mode: \"haskell-literate\", ext: [\"lhs\"]},\n    {name: \"Haxe\", mime: \"text/x-haxe\", mode: \"haxe\", ext: [\"hx\"]},\n    {name: \"HXML\", mime: \"text/x-hxml\", mode: \"haxe\", ext: [\"hxml\"]},\n    {name: \"ASP.NET\", mime: \"application/x-aspx\", mode: \"htmlembedded\", ext: [\"aspx\"], alias: [\"asp\", \"aspx\"]},\n    {name: \"HTML\", mime: \"text/html\", mode: \"htmlmixed\", ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"], alias: [\"xhtml\"]},\n    {name: \"HTTP\", mime: \"message/http\", mode: \"http\"},\n    {name: \"IDL\", mime: \"text/x-idl\", mode: \"idl\", ext: [\"pro\"]},\n    {name: \"Pug\", mime: \"text/x-pug\", mode: \"pug\", ext: [\"jade\", \"pug\"], alias: [\"jade\"]},\n    {name: \"Java\", mime: \"text/x-java\", mode: \"clike\", ext: [\"java\"]},\n    {name: \"Java Server Pages\", mime: \"application/x-jsp\", mode: \"htmlembedded\", ext: [\"jsp\"], alias: [\"jsp\"]},\n    {name: \"JavaScript\", mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n     mode: \"javascript\", ext: [\"js\"], alias: [\"ecmascript\", \"js\", \"node\"]},\n    {name: \"JSON\", mimes: [\"application/json\", \"application/x-json\"], mode: \"javascript\", ext: [\"json\", \"map\"], alias: [\"json5\"]},\n    {name: \"JSON-LD\", mime: \"application/ld+json\", mode: \"javascript\", ext: [\"jsonld\"], alias: [\"jsonld\"]},\n    {name: \"JSX\", mime: \"text/jsx\", mode: \"jsx\", ext: [\"jsx\"]},\n    {name: \"Jinja2\", mime: \"text/jinja2\", mode: \"jinja2\", ext: [\"j2\", \"jinja\", \"jinja2\"]},\n    {name: \"Julia\", mime: \"text/x-julia\", mode: \"julia\", ext: [\"jl\"]},\n    {name: \"Kotlin\", mime: \"text/x-kotlin\", mode: \"clike\", ext: [\"kt\"]},\n    {name: \"LESS\", mime: \"text/x-less\", mode: \"css\", ext: [\"less\"]},\n    {name: \"LiveScript\", mime: \"text/x-livescript\", mode: \"livescript\", ext: [\"ls\"], alias: [\"ls\"]},\n    {name: \"Lua\", mime: \"text/x-lua\", mode: \"lua\", ext: [\"lua\"]},\n    {name: \"Markdown\", mime: \"text/x-markdown\", mode: \"markdown\", ext: [\"markdown\", \"md\", \"mkd\"]},\n    {name: \"mIRC\", mime: \"text/mirc\", mode: \"mirc\"},\n    {name: \"MariaDB SQL\", mime: \"text/x-mariadb\", mode: \"sql\"},\n    {name: \"Mathematica\", mime: \"text/x-mathematica\", mode: \"mathematica\", ext: [\"m\", \"nb\", \"wl\", \"wls\"]},\n    {name: \"Modelica\", mime: \"text/x-modelica\", mode: \"modelica\", ext: [\"mo\"]},\n    {name: \"MUMPS\", mime: \"text/x-mumps\", mode: \"mumps\", ext: [\"mps\"]},\n    {name: \"MS SQL\", mime: \"text/x-mssql\", mode: \"sql\"},\n    {name: \"mbox\", mime: \"application/mbox\", mode: \"mbox\", ext: [\"mbox\"]},\n    {name: \"MySQL\", mime: \"text/x-mysql\", mode: \"sql\"},\n    {name: \"Nginx\", mime: \"text/x-nginx-conf\", mode: \"nginx\", file: /nginx.*\\.conf$/i},\n    {name: \"NSIS\", mime: \"text/x-nsis\", mode: \"nsis\", ext: [\"nsh\", \"nsi\"]},\n    {name: \"NTriples\", mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n     mode: \"ntriples\", ext: [\"nt\", \"nq\"]},\n    {name: \"Objective-C\", mime: \"text/x-objectivec\", mode: \"clike\", ext: [\"m\"], alias: [\"objective-c\", \"objc\"]},\n    {name: \"Objective-C++\", mime: \"text/x-objectivec++\", mode: \"clike\", ext: [\"mm\"], alias: [\"objective-c++\", \"objc++\"]},\n    {name: \"OCaml\", mime: \"text/x-ocaml\", mode: \"mllike\", ext: [\"ml\", \"mli\", \"mll\", \"mly\"]},\n    {name: \"Octave\", mime: \"text/x-octave\", mode: \"octave\", ext: [\"m\"]},\n    {name: \"Oz\", mime: \"text/x-oz\", mode: \"oz\", ext: [\"oz\"]},\n    {name: \"Pascal\", mime: \"text/x-pascal\", mode: \"pascal\", ext: [\"p\", \"pas\"]},\n    {name: \"PEG.js\", mime: \"null\", mode: \"pegjs\", ext: [\"jsonld\"]},\n    {name: \"Perl\", mime: \"text/x-perl\", mode: \"perl\", ext: [\"pl\", \"pm\"]},\n    {name: \"PHP\", mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"], mode: \"php\", ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]},\n    {name: \"Pig\", mime: \"text/x-pig\", mode: \"pig\", ext: [\"pig\"]},\n    {name: \"Plain Text\", mime: \"text/plain\", mode: \"null\", ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]},\n    {name: \"PLSQL\", mime: \"text/x-plsql\", mode: \"sql\", ext: [\"pls\"]},\n    {name: \"PostgreSQL\", mime: \"text/x-pgsql\", mode: \"sql\"},\n    {name: \"PowerShell\", mime: \"application/x-powershell\", mode: \"powershell\", ext: [\"ps1\", \"psd1\", \"psm1\"]},\n    {name: \"Properties files\", mime: \"text/x-properties\", mode: \"properties\", ext: [\"properties\", \"ini\", \"in\"], alias: [\"ini\", \"properties\"]},\n    {name: \"ProtoBuf\", mime: \"text/x-protobuf\", mode: \"protobuf\", ext: [\"proto\"]},\n    {name: \"Python\", mime: \"text/x-python\", mode: \"python\", ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"], file: /^(BUCK|BUILD)$/},\n    {name: \"Puppet\", mime: \"text/x-puppet\", mode: \"puppet\", ext: [\"pp\"]},\n    {name: \"PlantUML\", mime: \"text/x-plantuml\", mode: \"plantuml\"},\n    {name: \"Q\", mime: \"text/x-q\", mode: \"q\", ext: [\"q\"]},\n    {name: \"R\", mime: \"text/x-rsrc\", mode: \"r\", ext: [\"r\", \"R\"], alias: [\"rscript\"]},\n    {name: \"reStructuredText\", mime: \"text/x-rst\", mode: \"rst\", ext: [\"rst\"], alias: [\"rst\"]},\n    {name: \"RPM Changes\", mime: \"text/x-rpm-changes\", mode: \"rpm\"},\n    {name: \"RPM Spec\", mime: \"text/x-rpm-spec\", mode: \"rpm\", ext: [\"spec\"]},\n    {name: \"Ruby\", mime: \"text/x-ruby\", mode: \"ruby\", ext: [\"rb\"], alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]},\n    {name: \"Rust\", mime: \"text/x-rustsrc\", mode: \"rust\", ext: [\"rs\"]},\n    {name: \"SAS\", mime: \"text/x-sas\", mode: \"sas\", ext: [\"sas\"]},\n    {name: \"Sass\", mime: \"text/x-sass\", mode: \"sass\", ext: [\"sass\"]},\n    {name: \"Scala\", mime: \"text/x-scala\", mode: \"clike\", ext: [\"scala\"]},\n    {name: \"Scheme\", mime: \"text/x-scheme\", mode: \"scheme\", ext: [\"scm\", \"ss\"]},\n    {name: \"SCSS\", mime: \"text/x-scss\", mode: \"css\", ext: [\"scss\"]},\n    {name: \"Shell\", mimes: [\"text/x-sh\", \"application/x-sh\"], mode: \"shell\", ext: [\"sh\", \"ksh\", \"bash\"], alias: [\"bash\", \"sh\", \"zsh\"], file: /^PKGBUILD$/},\n    {name: \"Sieve\", mime: \"application/sieve\", mode: \"sieve\", ext: [\"siv\", \"sieve\"]},\n    {name: \"Slim\", mimes: [\"text/x-slim\", \"application/x-slim\"], mode: \"slim\", ext: [\"slim\"]},\n    {name: \"Smalltalk\", mime: \"text/x-stsrc\", mode: \"smalltalk\", ext: [\"st\"]},\n    {name: \"Smarty\", mime: \"text/x-smarty\", mode: \"smarty\", ext: [\"tpl\"]},\n    {name: \"Solr\", mime: \"text/x-solr\", mode: \"solr\"},\n    {name: \"SML\", mime: \"text/x-sml\", mode: \"mllike\", ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]},\n    {name: \"Soy\", mime: \"text/x-soy\", mode: \"soy\", ext: [\"soy\"], alias: [\"closure template\"]},\n    {name: \"SPARQL\", mime: \"application/sparql-query\", mode: \"sparql\", ext: [\"rq\", \"sparql\"], alias: [\"sparul\"]},\n    {name: \"Spreadsheet\", mime: \"text/x-spreadsheet\", mode: \"spreadsheet\", alias: [\"excel\", \"formula\"]},\n    {name: \"SQL\", mime: \"text/x-sql\", mode: \"sql\", ext: [\"sql\"]},\n    {name: \"SQLite\", mime: \"text/x-sqlite\", mode: \"sql\"},\n    {name: \"Squirrel\", mime: \"text/x-squirrel\", mode: \"clike\", ext: [\"nut\"]},\n    {name: \"Stylus\", mime: \"text/x-styl\", mode: \"stylus\", ext: [\"styl\"]},\n    {name: \"Swift\", mime: \"text/x-swift\", mode: \"swift\", ext: [\"swift\"]},\n    {name: \"sTeX\", mime: \"text/x-stex\", mode: \"stex\"},\n    {name: \"LaTeX\", mime: \"text/x-latex\", mode: \"stex\", ext: [\"text\", \"ltx\", \"tex\"], alias: [\"tex\"]},\n    {name: \"SystemVerilog\", mime: \"text/x-systemverilog\", mode: \"verilog\", ext: [\"v\", \"sv\", \"svh\"]},\n    {name: \"Tcl\", mime: \"text/x-tcl\", mode: \"tcl\", ext: [\"tcl\"]},\n    {name: \"Textile\", mime: \"text/x-textile\", mode: \"textile\", ext: [\"textile\"]},\n    {name: \"TiddlyWiki\", mime: \"text/x-tiddlywiki\", mode: \"tiddlywiki\"},\n    {name: \"Tiki wiki\", mime: \"text/tiki\", mode: \"tiki\"},\n    {name: \"TOML\", mime: \"text/x-toml\", mode: \"toml\", ext: [\"toml\"]},\n    {name: \"Tornado\", mime: \"text/x-tornado\", mode: \"tornado\"},\n    {name: \"troff\", mime: \"text/troff\", mode: \"troff\", ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]},\n    {name: \"TTCN\", mime: \"text/x-ttcn\", mode: \"ttcn\", ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]},\n    {name: \"TTCN_CFG\", mime: \"text/x-ttcn-cfg\", mode: \"ttcn-cfg\", ext: [\"cfg\"]},\n    {name: \"Turtle\", mime: \"text/turtle\", mode: \"turtle\", ext: [\"ttl\"]},\n    {name: \"TypeScript\", mime: \"application/typescript\", mode: \"javascript\", ext: [\"ts\"], alias: [\"ts\"]},\n    {name: \"TypeScript-JSX\", mime: \"text/typescript-jsx\", mode: \"jsx\", ext: [\"tsx\"], alias: [\"tsx\"]},\n    {name: \"Twig\", mime: \"text/x-twig\", mode: \"twig\"},\n    {name: \"Web IDL\", mime: \"text/x-webidl\", mode: \"webidl\", ext: [\"webidl\"]},\n    {name: \"VB.NET\", mime: \"text/x-vb\", mode: \"vb\", ext: [\"vb\"]},\n    {name: \"VBScript\", mime: \"text/vbscript\", mode: \"vbscript\", ext: [\"vbs\"]},\n    {name: \"Velocity\", mime: \"text/velocity\", mode: \"velocity\", ext: [\"vtl\"]},\n    {name: \"Verilog\", mime: \"text/x-verilog\", mode: \"verilog\", ext: [\"v\"]},\n    {name: \"VHDL\", mime: \"text/x-vhdl\", mode: \"vhdl\", ext: [\"vhd\", \"vhdl\"]},\n    {name: \"Vue.js Component\", mimes: [\"script/x-vue\", \"text/x-vue\"], mode: \"vue\", ext: [\"vue\"]},\n    {name: \"XML\", mimes: [\"application/xml\", \"text/xml\"], mode: \"xml\", ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"], alias: [\"rss\", \"wsdl\", \"xsd\"]},\n    {name: \"XQuery\", mime: \"application/xquery\", mode: \"xquery\", ext: [\"xy\", \"xquery\"]},\n    {name: \"Yacas\", mime: \"text/x-yacas\", mode: \"yacas\", ext: [\"ys\"]},\n    {name: \"YAML\", mimes: [\"text/x-yaml\", \"text/yaml\"], mode: \"yaml\", ext: [\"yaml\", \"yml\"], alias: [\"yml\"]},\n    {name: \"Z80\", mime: \"text/x-z80\", mode: \"z80\", ext: [\"z80\"]},\n    {name: \"mscgen\", mime: \"text/x-mscgen\", mode: \"mscgen\", ext: [\"mscgen\", \"mscin\", \"msc\"]},\n    {name: \"xu\", mime: \"text/x-xu\", mode: \"mscgen\", ext: [\"xu\"]},\n    {name: \"msgenny\", mime: \"text/x-msgenny\", mode: \"mscgen\", ext: [\"msgenny\"]},\n    {name: \"WebAssembly\", mime: \"text/webassembly\", mode: \"wast\", ext: [\"wat\", \"wast\"]},\n  ];\n  // Ensure all modes have a mime property for backwards compatibility\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function(mime) {\n    mime = mime.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++)\n        if (info.mimes[j] == mime) return info;\n    }\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\")\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\")\n  };\n\n  CodeMirror.findModeByExtension = function(ext) {\n    ext = ext.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++)\n        if (info.ext[j] == ext) return info;\n    }\n  };\n\n  CodeMirror.findModeByFileName = function(filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function(name) {\n    name = name.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++)\n        if (info.alias[j].toLowerCase() == name) return info;\n    }\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineSimpleMode = function(name, states) {\n    CodeMirror.defineMode(name, function(config) {\n      return CodeMirror.simpleMode(config, states);\n    });\n  };\n\n  CodeMirror.simpleMode = function(config, states) {\n    ensureState(states, \"start\");\n    var states_ = {}, meta = states.meta || {}, hasIndentation = false;\n    for (var state in states) if (state != meta && states.hasOwnProperty(state)) {\n      var list = states_[state] = [], orig = states[state];\n      for (var i = 0; i < orig.length; i++) {\n        var data = orig[i];\n        list.push(new Rule(data, states));\n        if (data.indent || data.dedent) hasIndentation = true;\n      }\n    }\n    var mode = {\n      startState: function() {\n        return {state: \"start\", pending: null,\n                local: null, localState: null,\n                indent: hasIndentation ? [] : null};\n      },\n      copyState: function(state) {\n        var s = {state: state.state, pending: state.pending,\n                 local: state.local, localState: null,\n                 indent: state.indent && state.indent.slice(0)};\n        if (state.localState)\n          s.localState = CodeMirror.copyState(state.local.mode, state.localState);\n        if (state.stack)\n          s.stack = state.stack.slice(0);\n        for (var pers = state.persistentStates; pers; pers = pers.next)\n          s.persistentStates = {mode: pers.mode,\n                                spec: pers.spec,\n                                state: pers.state == state.localState ? s.localState : CodeMirror.copyState(pers.mode, pers.state),\n                                next: s.persistentStates};\n        return s;\n      },\n      token: tokenFunction(states_, config),\n      innerMode: function(state) { return state.local && {mode: state.local.mode, state: state.localState}; },\n      indent: indentFunction(states_, meta)\n    };\n    if (meta) for (var prop in meta) if (meta.hasOwnProperty(prop))\n      mode[prop] = meta[prop];\n    return mode;\n  };\n\n  function ensureState(states, name) {\n    if (!states.hasOwnProperty(name))\n      throw new Error(\"Undefined state \" + name + \" in simple mode\");\n  }\n\n  function toRegex(val, caret) {\n    if (!val) return /(?:)/;\n    var flags = \"\";\n    if (val instanceof RegExp) {\n      if (val.ignoreCase) flags = \"i\";\n      val = val.source;\n    } else {\n      val = String(val);\n    }\n    return new RegExp((caret === false ? \"\" : \"^\") + \"(?:\" + val + \")\", flags);\n  }\n\n  function asToken(val) {\n    if (!val) return null;\n    if (val.apply) return val\n    if (typeof val == \"string\") return val.replace(/\\./g, \" \");\n    var result = [];\n    for (var i = 0; i < val.length; i++)\n      result.push(val[i] && val[i].replace(/\\./g, \" \"));\n    return result;\n  }\n\n  function Rule(data, states) {\n    if (data.next || data.push) ensureState(states, data.next || data.push);\n    this.regex = toRegex(data.regex);\n    this.token = asToken(data.token);\n    this.data = data;\n  }\n\n  function tokenFunction(states, config) {\n    return function(stream, state) {\n      if (state.pending && state.pending.length > 0) {\n        var pend = state.pending.shift();\n        if (state.pending.length == 0) state.pending = null;\n        stream.pos += pend.text.length;\n        return pend.token;\n      } else if (state.pending && state.pending.length === 0) {\n        console.warn('Regex capturing group is empty. Please check your regex')\n      }\n\n      if (state.local) {\n        if (state.local.end && stream.match(state.local.end)) {\n          var tok = state.local.endToken || null;\n          state.local = state.localState = null;\n          return tok;\n        } else {\n          var tok = state.local.mode.token(stream, state.localState), m;\n          if (state.local.endScan && (m = state.local.endScan.exec(stream.current())))\n            stream.pos = stream.start + m.index;\n          return tok;\n        }\n      }\n\n      var curState = states[state.state];\n      for (var i = 0; i < curState.length; i++) {\n        var rule = curState[i];\n        var matches = (!rule.data.sol || stream.sol()) && stream.match(rule.regex);\n        if (matches) {\n          if (rule.data.next) {\n            state.state = rule.data.next;\n          } else if (rule.data.push) {\n            (state.stack || (state.stack = [])).push(state.state);\n            state.state = rule.data.push;\n          } else if (rule.data.pop && state.stack && state.stack.length) {\n            state.state = state.stack.pop();\n          }\n\n          if (rule.data.mode)\n            enterLocalMode(config, state, rule.data.mode, rule.token);\n          if (rule.data.indent)\n            state.indent.push(stream.indentation() + config.indentUnit);\n          if (rule.data.dedent)\n            state.indent.pop();\n          var token = rule.token\n          if (token && token.apply) token = token(matches)\n          if (matches.length > 2 && rule.token && typeof rule.token != \"string\") {\n            state.pending = [];\n            for (var j = 2; j < matches.length; j++)\n              if (matches[j])\n                state.pending.push({text: matches[j], token: rule.token[j - 1]});\n            stream.backUp(matches[0].length - (matches[1] ? matches[1].length : 0));\n            return token[0];\n          } else if (token && token.join) {\n            return token[0];\n          } else {\n            return token;\n          }\n        }\n      }\n      stream.next();\n      return null;\n    };\n  }\n\n  function cmp(a, b) {\n    if (a === b) return true;\n    if (!a || typeof a != \"object\" || !b || typeof b != \"object\") return false;\n    var props = 0;\n    for (var prop in a) if (a.hasOwnProperty(prop)) {\n      if (!b.hasOwnProperty(prop) || !cmp(a[prop], b[prop])) return false;\n      props++;\n    }\n    for (var prop in b) if (b.hasOwnProperty(prop)) props--;\n    return props == 0;\n  }\n\n  function enterLocalMode(config, state, spec, token) {\n    var pers;\n    if (spec.persistent) for (var p = state.persistentStates; p && !pers; p = p.next)\n      if (spec.spec ? cmp(spec.spec, p.spec) : spec.mode == p.mode) pers = p;\n    var mode = pers ? pers.mode : spec.mode || CodeMirror.getMode(config, spec.spec);\n    var lState = pers ? pers.state : CodeMirror.startState(mode);\n    if (spec.persistent && !pers)\n      state.persistentStates = {mode: mode, spec: spec.spec, state: lState, next: state.persistentStates};\n\n    state.localState = lState;\n    state.local = {mode: mode,\n                   end: spec.end && toRegex(spec.end),\n                   endScan: spec.end && spec.forceEnd !== false && toRegex(spec.end, false),\n                   endToken: token && token.join ? token[token.length - 1] : token};\n  }\n\n  function indexOf(val, arr) {\n    for (var i = 0; i < arr.length; i++) if (arr[i] === val) return true;\n  }\n\n  function indentFunction(states, meta) {\n    return function(state, textAfter, line) {\n      if (state.local && state.local.mode.indent)\n        return state.local.mode.indent(state.localState, textAfter, line);\n      if (state.indent == null || state.local || meta.dontIndentStates && indexOf(state.state, meta.dontIndentStates) > -1)\n        return CodeMirror.Pass;\n\n      var pos = state.indent.length - 1, rules = states[state.state];\n      scan: for (;;) {\n        for (var i = 0; i < rules.length; i++) {\n          var rule = rules[i];\n          if (rule.data.dedent && rule.data.dedentIfLineStart !== false) {\n            var m = rule.regex.exec(textAfter);\n            if (m && m[0]) {\n              pos--;\n              if (rule.next || rule.push) rules = states[rule.next || rule.push];\n              textAfter = textAfter.slice(m[0].length);\n              continue scan;\n            }\n          }\n        }\n        break;\n      }\n      return pos < 0 ? 0 : state.indent[pos];\n    };\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.multiplexingMode = function(outer /*, others */) {\n  // Others should be {open, close, mode [, delimStyle] [, innerStyle]} objects\n  var others = Array.prototype.slice.call(arguments, 1);\n\n  function indexOf(string, pattern, from, returnEnd) {\n    if (typeof pattern == \"string\") {\n      var found = string.indexOf(pattern, from);\n      return returnEnd && found > -1 ? found + pattern.length : found;\n    }\n    var m = pattern.exec(from ? string.slice(from) : string);\n    return m ? m.index + from + (returnEnd ? m[0].length : 0) : -1;\n  }\n\n  return {\n    startState: function() {\n      return {\n        outer: CodeMirror.startState(outer),\n        innerActive: null,\n        inner: null\n      };\n    },\n\n    copyState: function(state) {\n      return {\n        outer: CodeMirror.copyState(outer, state.outer),\n        innerActive: state.innerActive,\n        inner: state.innerActive && CodeMirror.copyState(state.innerActive.mode, state.inner)\n      };\n    },\n\n    token: function(stream, state) {\n      if (!state.innerActive) {\n        var cutOff = Infinity, oldContent = stream.string;\n        for (var i = 0; i < others.length; ++i) {\n          var other = others[i];\n          var found = indexOf(oldContent, other.open, stream.pos);\n          if (found == stream.pos) {\n            if (!other.parseDelimiters) stream.match(other.open);\n            state.innerActive = other;\n\n            // Get the outer indent, making sure to handle CodeMirror.Pass\n            var outerIndent = 0;\n            if (outer.indent) {\n              var possibleOuterIndent = outer.indent(state.outer, \"\", \"\");\n              if (possibleOuterIndent !== CodeMirror.Pass) outerIndent = possibleOuterIndent;\n            }\n\n            state.inner = CodeMirror.startState(other.mode, outerIndent);\n            return other.delimStyle && (other.delimStyle + \" \" + other.delimStyle + \"-open\");\n          } else if (found != -1 && found < cutOff) {\n            cutOff = found;\n          }\n        }\n        if (cutOff != Infinity) stream.string = oldContent.slice(0, cutOff);\n        var outerToken = outer.token(stream, state.outer);\n        if (cutOff != Infinity) stream.string = oldContent;\n        return outerToken;\n      } else {\n        var curInner = state.innerActive, oldContent = stream.string;\n        if (!curInner.close && stream.sol()) {\n          state.innerActive = state.inner = null;\n          return this.token(stream, state);\n        }\n        var found = curInner.close ? indexOf(oldContent, curInner.close, stream.pos, curInner.parseDelimiters) : -1;\n        if (found == stream.pos && !curInner.parseDelimiters) {\n          stream.match(curInner.close);\n          state.innerActive = state.inner = null;\n          return curInner.delimStyle && (curInner.delimStyle + \" \" + curInner.delimStyle + \"-close\");\n        }\n        if (found > -1) stream.string = oldContent.slice(0, found);\n        var innerToken = curInner.mode.token(stream, state.inner);\n        if (found > -1) stream.string = oldContent;\n\n        if (found == stream.pos && curInner.parseDelimiters)\n          state.innerActive = state.inner = null;\n\n        if (curInner.innerStyle) {\n          if (innerToken) innerToken = innerToken + \" \" + curInner.innerStyle;\n          else innerToken = curInner.innerStyle;\n        }\n\n        return innerToken;\n      }\n    },\n\n    indent: function(state, textAfter, line) {\n      var mode = state.innerActive ? state.innerActive.mode : outer;\n      if (!mode.indent) return CodeMirror.Pass;\n      return mode.indent(state.innerActive ? state.inner : state.outer, textAfter, line);\n    },\n\n    blankLine: function(state) {\n      var mode = state.innerActive ? state.innerActive.mode : outer;\n      if (mode.blankLine) {\n        mode.blankLine(state.innerActive ? state.inner : state.outer);\n      }\n      if (!state.innerActive) {\n        for (var i = 0; i < others.length; ++i) {\n          var other = others[i];\n          if (other.open === \"\\n\") {\n            state.innerActive = other;\n            state.inner = CodeMirror.startState(other.mode, mode.indent ? mode.indent(state.outer, \"\", \"\") : 0);\n          }\n        }\n      } else if (state.innerActive.close === \"\\n\") {\n        state.innerActive = state.inner = null;\n      }\n    },\n\n    electricChars: outer.electricChars,\n\n    innerMode: function(state) {\n      return state.inner ? {state: state.inner, mode: state.innerActive.mode} : {state: state.outer, mode: outer};\n    }\n  };\n};\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var WRAP_CLASS = \"CodeMirror-activeline\";\n  var BACK_CLASS = \"CodeMirror-activeline-background\";\n  var GUTT_CLASS = \"CodeMirror-activeline-gutter\";\n\n  CodeMirror.defineOption(\"styleActiveLine\", false, function(cm, val, old) {\n    var prev = old == CodeMirror.Init ? false : old;\n    if (val == prev) return\n    if (prev) {\n      cm.off(\"beforeSelectionChange\", selectionChange);\n      clearActiveLines(cm);\n      delete cm.state.activeLines;\n    }\n    if (val) {\n      cm.state.activeLines = [];\n      updateActiveLines(cm, cm.listSelections());\n      cm.on(\"beforeSelectionChange\", selectionChange);\n    }\n  });\n\n  function clearActiveLines(cm) {\n    for (var i = 0; i < cm.state.activeLines.length; i++) {\n      cm.removeLineClass(cm.state.activeLines[i], \"wrap\", WRAP_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], \"background\", BACK_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], \"gutter\", GUTT_CLASS);\n    }\n  }\n\n  function sameArray(a, b) {\n    if (a.length != b.length) return false;\n    for (var i = 0; i < a.length; i++)\n      if (a[i] != b[i]) return false;\n    return true;\n  }\n\n  function updateActiveLines(cm, ranges) {\n    var active = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      var option = cm.getOption(\"styleActiveLine\");\n      if (typeof option == \"object\" && option.nonEmpty ? range.anchor.line != range.head.line : !range.empty())\n        continue\n      var line = cm.getLineHandleVisualStart(range.head.line);\n      if (active[active.length - 1] != line) active.push(line);\n    }\n    if (sameArray(cm.state.activeLines, active)) return;\n    cm.operation(function() {\n      clearActiveLines(cm);\n      for (var i = 0; i < active.length; i++) {\n        cm.addLineClass(active[i], \"wrap\", WRAP_CLASS);\n        cm.addLineClass(active[i], \"background\", BACK_CLASS);\n        cm.addLineClass(active[i], \"gutter\", GUTT_CLASS);\n      }\n      cm.state.activeLines = active;\n    });\n  }\n\n  function selectionChange(cm, sel) {\n    updateActiveLines(cm, sel.ranges);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./searchcursor\"), require(\"../dialog/dialog\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../dialog/dialog\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query == \"string\")\n      query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\"), caseInsensitive ? \"gi\" : \"g\");\n    else if (!query.global)\n      query = new RegExp(query.source, query.ignoreCase ? \"gi\" : \"g\");\n\n    return {token: function(stream) {\n      query.lastIndex = stream.pos;\n      var match = query.exec(stream.string);\n      if (match && match.index == stream.pos) {\n        stream.pos += match[0].length || 1;\n        return \"searching\";\n      } else if (match) {\n        stream.pos = match.index;\n      } else {\n        stream.skipToEnd();\n      }\n    }};\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query == \"string\" && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, {caseFold: queryCaseInsensitive(query), multiline: true});\n  }\n\n  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n    cm.openDialog(text, onEnter, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose: function() { clearSearch(cm); },\n      onKeyDown: onKeyDown\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {value: deflt, selectValueOnOpen: true});\n    else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);\n    else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\([nrt\\\\])/g, function(match, ch) {\n      if (ch == \"n\") return \"\\n\"\n      if (ch == \"r\") return \"\\r\"\n      if (ch == \"t\") return \"\\t\"\n      if (ch == \"\\\\\") return \"\\\\\"\n      return match\n    })\n  }\n\n  function parseQuery(query) {\n    var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (isRE) {\n      try { query = new RegExp(isRE[1], isRE[2].indexOf(\"i\") == -1 ? \"\" : \"i\"); }\n      catch(e) {} // Not a regular expression after all, do a string search\n    } else {\n      query = parseString(query)\n    }\n    if (typeof query == \"string\" ? query == \"\" : query.test(\"\"))\n      query = /x^/;\n    return query;\n  }\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent, immediate) {\n    var state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    var q = cm.getSelection() || state.lastQuery;\n    if (q instanceof RegExp && q.source == \"x^\") q = null\n    if (persistent && cm.openDialog) {\n      var hiding = null\n      var searchNext = function(query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n        if (query != state.queryText) {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n        }\n        if (hiding) hiding.style.opacity = 1\n        findNext(cm, event.shiftKey, function(_, to) {\n          var dialog\n          if (to.line < 3 && document.querySelector &&\n              (dialog = cm.display.wrapper.querySelector(\".CodeMirror-dialog\")) &&\n              dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, \"window\").top)\n            (hiding = dialog).style.opacity = .4\n        })\n      };\n      persistentDialog(cm, getQueryDialog(cm), q, searchNext, function(event, query) {\n        var keyName = CodeMirror.keyName(event)\n        var extra = cm.getOption('extraKeys'), cmd = (extra && extra[keyName]) || CodeMirror.keyMap[cm.getOption(\"keyMap\")][keyName]\n        if (cmd == \"findNext\" || cmd == \"findPrev\" ||\n          cmd == \"findPersistentNext\" || cmd == \"findPersistentPrev\") {\n          CodeMirror.e_stop(event);\n          startSearch(cm, getSearchState(cm), query);\n          cm.execCommand(cmd);\n        } else if (cmd == \"find\" || cmd == \"findPersistent\") {\n          CodeMirror.e_stop(event);\n          searchNext(query, event);\n        }\n      });\n      if (immediate && q) {\n        startSearch(cm, state, q);\n        findNext(cm, rev);\n      }\n    } else {\n      dialog(cm, getQueryDialog(cm), \"Search for:\", q, function(query) {\n        if (query && !state.query) cm.operation(function() {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n          findNext(cm, rev);\n        });\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {cm.operation(function() {\n    var state = getSearchState(cm);\n    var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n    if (!cursor.find(rev)) {\n      cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n      if (!cursor.find(rev)) return;\n    }\n    cm.setSelection(cursor.from(), cursor.to());\n    cm.scrollIntoView({from: cursor.from(), to: cursor.to()}, 20);\n    state.posFrom = cursor.from(); state.posTo = cursor.to();\n    if (callback) callback(cursor.from(), cursor.to())\n  });}\n\n  function clearSearch(cm) {cm.operation(function() {\n    var state = getSearchState(cm);\n    state.lastQuery = state.query;\n    if (!state.query) return;\n    state.query = state.queryText = null;\n    cm.removeOverlay(state.overlay);\n    if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n  });}\n\n\n  function getQueryDialog(cm)  {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase(\"Search:\") + '</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">' + cm.phrase(\"(Use /re/ syntax for regexp search)\") + '</span>';\n  }\n  function getReplaceQueryDialog(cm) {\n    return ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">' + cm.phrase(\"(Use /re/ syntax for regexp search)\") + '</span>';\n  }\n  function getReplacementQueryDialog(cm) {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase(\"With:\") + '</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/>';\n  }\n  function getDoReplaceConfirm(cm) {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase(\"Replace?\") + '</span> <button>' + cm.phrase(\"Yes\") + '</button> <button>' + cm.phrase(\"No\") + '</button> <button>' + cm.phrase(\"All\") + '</button> <button>' + cm.phrase(\"Stop\") + '</button> ';\n  }\n\n  function replaceAll(cm, query, text) {\n    cm.operation(function() {\n      for (var cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query != \"string\") {\n          var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption(\"readOnly\")) return;\n    var query = cm.getSelection() || getSearchState(cm).lastQuery;\n    var dialogText = '<span class=\"CodeMirror-search-label\">' + (all ? cm.phrase(\"Replace all:\") : cm.phrase(\"Replace:\")) + '</span>';\n    dialog(cm, dialogText + getReplaceQueryDialog(cm), dialogText, query, function(query) {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, getReplacementQueryDialog(cm), cm.phrase(\"Replace with:\"), \"\", function(text) {\n        text = parseString(text)\n        if (all) {\n          replaceAll(cm, query, text)\n        } else {\n          clearSearch(cm);\n          var cursor = getSearchCursor(cm, query, cm.getCursor(\"from\"));\n          var advance = function() {\n            var start = cursor.from(), match;\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext()) ||\n                  (start && cursor.from().line == start.line && cursor.from().ch == start.ch)) return;\n            }\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({from: cursor.from(), to: cursor.to()});\n            confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase(\"Replace?\"),\n                          [function() {doReplace(match);}, advance,\n                           function() {replaceAll(cm, query, text)}]);\n          };\n          var doReplace = function(match) {\n            cursor.replace(typeof query == \"string\" ? text :\n                           text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n            advance();\n          };\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function(cm) {clearSearch(cm); doSearch(cm);};\n  CodeMirror.commands.findPersistent = function(cm) {clearSearch(cm); doSearch(cm, false, true);};\n  CodeMirror.commands.findPersistentNext = function(cm) {doSearch(cm, false, true, true);};\n  CodeMirror.commands.findPersistentPrev = function(cm) {doSearch(cm, true, true, true);};\n  CodeMirror.commands.findNext = doSearch;\n  CodeMirror.commands.findPrev = function(cm) {doSearch(cm, true);};\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n  CodeMirror.commands.replaceAll = function(cm) {replace(cm, true);};\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Defines jumpToLine command. Uses dialog.js if present.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../dialog/dialog\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../dialog/dialog\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {value: deflt, selectValueOnOpen: true});\n    else f(prompt(shortText, deflt));\n  }\n\n  function getJumpDialog(cm) {\n    return cm.phrase(\"Jump to line:\") + ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">' + cm.phrase(\"(Use line:column or scroll% syntax)\") + '</span>';\n  }\n\n  function interpretLine(cm, string) {\n    var num = Number(string)\n    if (/^[-+]/.test(string)) return cm.getCursor().line + num\n    else return num - 1\n  }\n\n  CodeMirror.commands.jumpToLine = function(cm) {\n    var cur = cm.getCursor();\n    dialog(cm, getJumpDialog(cm), cm.phrase(\"Jump to line:\"), (cur.line + 1) + \":\" + cur.ch, function(posStr) {\n      if (!posStr) return;\n\n      var match;\n      if (match = /^\\s*([\\+\\-]?\\d+)\\s*\\:\\s*(\\d+)\\s*$/.exec(posStr)) {\n        cm.setCursor(interpretLine(cm, match[1]), Number(match[2]))\n      } else if (match = /^\\s*([\\+\\-]?\\d+(\\.\\d+)?)\\%\\s*/.exec(posStr)) {\n        var line = Math.round(cm.lineCount() * Number(match[1]) / 100);\n        if (/^[-+]/.test(match[1])) line = cur.line + line + 1;\n        cm.setCursor(line - 1, cur.ch);\n      } else if (match = /^\\s*\\:?\\s*([\\+\\-]?\\d+)\\s*/.exec(posStr)) {\n        cm.setCursor(interpretLine(cm, match[1]), cur.ch);\n      }\n    });\n  };\n\n  CodeMirror.keyMap[\"default\"][\"Alt-G\"] = \"jumpToLine\";\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Highlighting text that matches the selection\n//\n// Defines an option highlightSelectionMatches, which, when enabled,\n// will style strings that match the selection throughout the\n// document.\n//\n// The option can be set to true to simply enable it, or to a\n// {minChars, style, wordsOnly, showToken, delay} object to explicitly\n// configure it. minChars is the minimum amount of characters that should be\n// selected for the behavior to occur, and style is the token style to\n// apply to the matches. This will be prefixed by \"cm-\" to create an\n// actual CSS class name. If wordsOnly is enabled, the matches will be\n// highlighted only if the selected text is a word. showToken, when enabled,\n// will cause the current token to be highlighted when nothing is selected.\n// delay is used to specify how much time to wait, in milliseconds, before\n// highlighting the matches. If annotateScrollbar is enabled, the occurences\n// will be highlighted on the scrollbar via the matchesonscrollbar addon.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./matchesonscrollbar\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./matchesonscrollbar\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var defaults = {\n    style: \"matchhighlight\",\n    minChars: 2,\n    delay: 100,\n    wordsOnly: false,\n    annotateScrollbar: false,\n    showToken: false,\n    trim: true\n  }\n\n  function State(options) {\n    this.options = {}\n    for (var name in defaults)\n      this.options[name] = (options && options.hasOwnProperty(name) ? options : defaults)[name]\n    this.overlay = this.timeout = null;\n    this.matchesonscroll = null;\n    this.active = false;\n  }\n\n  CodeMirror.defineOption(\"highlightSelectionMatches\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      removeOverlay(cm);\n      clearTimeout(cm.state.matchHighlighter.timeout);\n      cm.state.matchHighlighter = null;\n      cm.off(\"cursorActivity\", cursorActivity);\n      cm.off(\"focus\", onFocus)\n    }\n    if (val) {\n      var state = cm.state.matchHighlighter = new State(val);\n      if (cm.hasFocus()) {\n        state.active = true\n        highlightMatches(cm)\n      } else {\n        cm.on(\"focus\", onFocus)\n      }\n      cm.on(\"cursorActivity\", cursorActivity);\n    }\n  });\n\n  function cursorActivity(cm) {\n    var state = cm.state.matchHighlighter;\n    if (state.active || cm.hasFocus()) scheduleHighlight(cm, state)\n  }\n\n  function onFocus(cm) {\n    var state = cm.state.matchHighlighter\n    if (!state.active) {\n      state.active = true\n      scheduleHighlight(cm, state)\n    }\n  }\n\n  function scheduleHighlight(cm, state) {\n    clearTimeout(state.timeout);\n    state.timeout = setTimeout(function() {highlightMatches(cm);}, state.options.delay);\n  }\n\n  function addOverlay(cm, query, hasBoundary, style) {\n    var state = cm.state.matchHighlighter;\n    cm.addOverlay(state.overlay = makeOverlay(query, hasBoundary, style));\n    if (state.options.annotateScrollbar && cm.showMatchesOnScrollbar) {\n      var searchFor = hasBoundary ? new RegExp((/\\w/.test(query.charAt(0)) ? \"\\\\b\" : \"\") +\n                                               query.replace(/[\\\\\\[.+*?(){|^$]/g, \"\\\\$&\") +\n                                               (/\\w/.test(query.charAt(query.length - 1)) ? \"\\\\b\" : \"\")) : query;\n      state.matchesonscroll = cm.showMatchesOnScrollbar(searchFor, false,\n        {className: \"CodeMirror-selection-highlight-scrollbar\"});\n    }\n  }\n\n  function removeOverlay(cm) {\n    var state = cm.state.matchHighlighter;\n    if (state.overlay) {\n      cm.removeOverlay(state.overlay);\n      state.overlay = null;\n      if (state.matchesonscroll) {\n        state.matchesonscroll.clear();\n        state.matchesonscroll = null;\n      }\n    }\n  }\n\n  function highlightMatches(cm) {\n    cm.operation(function() {\n      var state = cm.state.matchHighlighter;\n      removeOverlay(cm);\n      if (!cm.somethingSelected() && state.options.showToken) {\n        var re = state.options.showToken === true ? /[\\w$]/ : state.options.showToken;\n        var cur = cm.getCursor(), line = cm.getLine(cur.line), start = cur.ch, end = start;\n        while (start && re.test(line.charAt(start - 1))) --start;\n        while (end < line.length && re.test(line.charAt(end))) ++end;\n        if (start < end)\n          addOverlay(cm, line.slice(start, end), re, state.options.style);\n        return;\n      }\n      var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n      if (from.line != to.line) return;\n      if (state.options.wordsOnly && !isWord(cm, from, to)) return;\n      var selection = cm.getRange(from, to)\n      if (state.options.trim) selection = selection.replace(/^\\s+|\\s+$/g, \"\")\n      if (selection.length >= state.options.minChars)\n        addOverlay(cm, selection, false, state.options.style);\n    });\n  }\n\n  function isWord(cm, from, to) {\n    var str = cm.getRange(from, to);\n    if (str.match(/^\\w+$/) !== null) {\n        if (from.ch > 0) {\n            var pos = {line: from.line, ch: from.ch - 1};\n            var chr = cm.getRange(pos, from);\n            if (chr.match(/\\W/) === null) return false;\n        }\n        if (to.ch < cm.getLine(from.line).length) {\n            var pos = {line: to.line, ch: to.ch + 1};\n            var chr = cm.getRange(to, pos);\n            if (chr.match(/\\W/) === null) return false;\n        }\n        return true;\n    } else return false;\n  }\n\n  function boundariesAround(stream, re) {\n    return (!stream.start || !re.test(stream.string.charAt(stream.start - 1))) &&\n      (stream.pos == stream.string.length || !re.test(stream.string.charAt(stream.pos)));\n  }\n\n  function makeOverlay(query, hasBoundary, style) {\n    return {token: function(stream) {\n      if (stream.match(query) &&\n          (!hasBoundary || boundariesAround(stream, hasBoundary)))\n        return style;\n      stream.next();\n      stream.skipTo(query.charAt(0)) || stream.skipToEnd();\n    }};\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function Bar(cls, orientation, scroll) {\n    this.orientation = orientation;\n    this.scroll = scroll;\n    this.screen = this.total = this.size = 1;\n    this.pos = 0;\n\n    this.node = document.createElement(\"div\");\n    this.node.className = cls + \"-\" + orientation;\n    this.inner = this.node.appendChild(document.createElement(\"div\"));\n\n    var self = this;\n    CodeMirror.on(this.inner, \"mousedown\", function(e) {\n      if (e.which != 1) return;\n      CodeMirror.e_preventDefault(e);\n      var axis = self.orientation == \"horizontal\" ? \"pageX\" : \"pageY\";\n      var start = e[axis], startpos = self.pos;\n      function done() {\n        CodeMirror.off(document, \"mousemove\", move);\n        CodeMirror.off(document, \"mouseup\", done);\n      }\n      function move(e) {\n        if (e.which != 1) return done();\n        self.moveTo(startpos + (e[axis] - start) * (self.total / self.size));\n      }\n      CodeMirror.on(document, \"mousemove\", move);\n      CodeMirror.on(document, \"mouseup\", done);\n    });\n\n    CodeMirror.on(this.node, \"click\", function(e) {\n      CodeMirror.e_preventDefault(e);\n      var innerBox = self.inner.getBoundingClientRect(), where;\n      if (self.orientation == \"horizontal\")\n        where = e.clientX < innerBox.left ? -1 : e.clientX > innerBox.right ? 1 : 0;\n      else\n        where = e.clientY < innerBox.top ? -1 : e.clientY > innerBox.bottom ? 1 : 0;\n      self.moveTo(self.pos + where * self.screen);\n    });\n\n    function onWheel(e) {\n      var moved = CodeMirror.wheelEventPixels(e)[self.orientation == \"horizontal\" ? \"x\" : \"y\"];\n      var oldPos = self.pos;\n      self.moveTo(self.pos + moved);\n      if (self.pos != oldPos) CodeMirror.e_preventDefault(e);\n    }\n    CodeMirror.on(this.node, \"mousewheel\", onWheel);\n    CodeMirror.on(this.node, \"DOMMouseScroll\", onWheel);\n  }\n\n  Bar.prototype.setPos = function(pos, force) {\n    if (pos < 0) pos = 0;\n    if (pos > this.total - this.screen) pos = this.total - this.screen;\n    if (!force && pos == this.pos) return false;\n    this.pos = pos;\n    this.inner.style[this.orientation == \"horizontal\" ? \"left\" : \"top\"] =\n      (pos * (this.size / this.total)) + \"px\";\n    return true\n  };\n\n  Bar.prototype.moveTo = function(pos) {\n    if (this.setPos(pos)) this.scroll(pos, this.orientation);\n  }\n\n  var minButtonSize = 10;\n\n  Bar.prototype.update = function(scrollSize, clientSize, barSize) {\n    var sizeChanged = this.screen != clientSize || this.total != scrollSize || this.size != barSize\n    if (sizeChanged) {\n      this.screen = clientSize;\n      this.total = scrollSize;\n      this.size = barSize;\n    }\n\n    var buttonSize = this.screen * (this.size / this.total);\n    if (buttonSize < minButtonSize) {\n      this.size -= minButtonSize - buttonSize;\n      buttonSize = minButtonSize;\n    }\n    this.inner.style[this.orientation == \"horizontal\" ? \"width\" : \"height\"] =\n      buttonSize + \"px\";\n    this.setPos(this.pos, sizeChanged);\n  };\n\n  function SimpleScrollbars(cls, place, scroll) {\n    this.addClass = cls;\n    this.horiz = new Bar(cls, \"horizontal\", scroll);\n    place(this.horiz.node);\n    this.vert = new Bar(cls, \"vertical\", scroll);\n    place(this.vert.node);\n    this.width = null;\n  }\n\n  SimpleScrollbars.prototype.update = function(measure) {\n    if (this.width == null) {\n      var style = window.getComputedStyle ? window.getComputedStyle(this.horiz.node) : this.horiz.node.currentStyle;\n      if (style) this.width = parseInt(style.height);\n    }\n    var width = this.width || 0;\n\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    this.vert.node.style.display = needsV ? \"block\" : \"none\";\n    this.horiz.node.style.display = needsH ? \"block\" : \"none\";\n\n    if (needsV) {\n      this.vert.update(measure.scrollHeight, measure.clientHeight,\n                       measure.viewHeight - (needsH ? width : 0));\n      this.vert.node.style.bottom = needsH ? width + \"px\" : \"0\";\n    }\n    if (needsH) {\n      this.horiz.update(measure.scrollWidth, measure.clientWidth,\n                        measure.viewWidth - (needsV ? width : 0) - measure.barLeft);\n      this.horiz.node.style.right = needsV ? width + \"px\" : \"0\";\n      this.horiz.node.style.left = measure.barLeft + \"px\";\n    }\n\n    return {right: needsV ? width : 0, bottom: needsH ? width : 0};\n  };\n\n  SimpleScrollbars.prototype.setScrollTop = function(pos) {\n    this.vert.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.setScrollLeft = function(pos) {\n    this.horiz.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.clear = function() {\n    var parent = this.horiz.node.parentNode;\n    parent.removeChild(this.horiz.node);\n    parent.removeChild(this.vert.node);\n  };\n\n  CodeMirror.scrollbarModel.simple = function(place, scroll) {\n    return new SimpleScrollbars(\"CodeMirror-simplescroll\", place, scroll);\n  };\n  CodeMirror.scrollbarModel.overlay = function(place, scroll) {\n    return new SimpleScrollbars(\"CodeMirror-overlayscroll\", place, scroll);\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  CodeMirror.defineExtension(\"addPanel\", function (node, options) {\n    options = options || {};\n\n    if (!this.state.panels) initPanels(this);\n\n    var info = this.state.panels;\n    var wrapper = info.wrapper;\n    var cmWrapper = this.getWrapperElement();\n    var replace = options.replace instanceof Panel && !options.replace.cleared;\n\n    if (options.after instanceof Panel && !options.after.cleared) {\n      wrapper.insertBefore(node, options.before.node.nextSibling);\n    } else if (options.before instanceof Panel && !options.before.cleared) {\n      wrapper.insertBefore(node, options.before.node);\n    } else if (replace) {\n      wrapper.insertBefore(node, options.replace.node);\n      options.replace.clear(true);\n    } else if (options.position == \"bottom\") {\n      wrapper.appendChild(node);\n    } else if (options.position == \"before-bottom\") {\n      wrapper.insertBefore(node, cmWrapper.nextSibling);\n    } else if (options.position == \"after-top\") {\n      wrapper.insertBefore(node, cmWrapper);\n    } else {\n      wrapper.insertBefore(node, wrapper.firstChild);\n    }\n\n    var height = (options && options.height) || node.offsetHeight;\n\n    var panel = new Panel(this, node, options, height);\n    info.panels.push(panel);\n\n    this.setSize();\n    if (options.stable && isAtTop(this, node))\n      this.scrollTo(null, this.getScrollInfo().top + height);\n\n    return panel;\n  });\n\n  function Panel(cm, node, options, height) {\n    this.cm = cm;\n    this.node = node;\n    this.options = options;\n    this.height = height;\n    this.cleared = false;\n  }\n\n  /* when skipRemove is true, clear() was called from addPanel().\n   * Thus removePanels() should not be called (issue 5518) */\n  Panel.prototype.clear = function (skipRemove) {\n    if (this.cleared) return;\n    this.cleared = true;\n    var info = this.cm.state.panels;\n    info.panels.splice(info.panels.indexOf(this), 1);\n    this.cm.setSize();\n    if (this.options.stable && isAtTop(this.cm, this.node))\n      this.cm.scrollTo(null, this.cm.getScrollInfo().top - this.height)\n    info.wrapper.removeChild(this.node);\n    if (info.panels.length == 0 && !skipRemove) removePanels(this.cm);\n  };\n\n  Panel.prototype.changed = function () {\n    this.height = this.node.getBoundingClientRect().height;\n    this.cm.setSize();\n  };\n\n  function initPanels(cm) {\n    var wrap = cm.getWrapperElement();\n    var style = window.getComputedStyle ? window.getComputedStyle(wrap) : wrap.currentStyle;\n    var height = parseInt(style.height);\n    var info = cm.state.panels = {\n      setHeight: wrap.style.height,\n      panels: [],\n      wrapper: document.createElement(\"div\")\n    };\n    wrap.parentNode.insertBefore(info.wrapper, wrap);\n    var hasFocus = cm.hasFocus();\n    info.wrapper.appendChild(wrap);\n    if (hasFocus) cm.focus();\n\n    cm._setSize = cm.setSize;\n    if (height != null) cm.setSize = function (width, newHeight) {\n      if (!newHeight) newHeight = info.wrapper.offsetHeight;\n      info.setHeight = newHeight;\n      if (typeof newHeight != \"number\") {\n        var px = /^(\\d+\\.?\\d*)px$/.exec(newHeight);\n        if (px) {\n          newHeight = Number(px[1]);\n        } else {\n          info.wrapper.style.height = newHeight;\n          newHeight = info.wrapper.offsetHeight;\n        }\n      }\n      var editorheight = newHeight - info.panels\n        .map(function (p) { return p.node.getBoundingClientRect().height; })\n        .reduce(function (a, b) { return a + b; }, 0);\n      cm._setSize(width, editorheight);\n      height = newHeight;\n    };\n  }\n\n  function removePanels(cm) {\n    var info = cm.state.panels;\n    cm.state.panels = null;\n\n    var wrap = cm.getWrapperElement();\n    info.wrapper.parentNode.replaceChild(wrap, info.wrapper);\n    wrap.style.height = info.setHeight;\n    cm.setSize = cm._setSize;\n    cm.setSize();\n  }\n\n  function isAtTop(cm, dom) {\n    for (var sibling = dom.nextSibling; sibling; sibling = sibling.nextSibling)\n      if (sibling == cm.getWrapperElement()) return true\n    return false\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm) })\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose)\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false, input = cm.getInputField()\n      if (input.nodeName == \"TEXTAREA\")\n        empty = !input.value\n      else if (cm.lineCount() == 1)\n        empty = !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent)\n      if (empty) setPlaceholder(cm)\n      else clearPlaceholder(cm)\n    }, 20)\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function(cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);\n    else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {scrollTop: window.pageYOffset, scrollLeft: window.pageXOffset,\n                                  width: wrap.style.width, height: wrap.style.height};\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width; wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n\n  CodeMirror.defineOption(\"autoRefresh\", false, function(cm, val) {\n    if (cm.state.autoRefresh) {\n      stopListening(cm, cm.state.autoRefresh)\n      cm.state.autoRefresh = null\n    }\n    if (val && cm.display.wrapper.offsetHeight == 0)\n      startListening(cm, cm.state.autoRefresh = {delay: val.delay || 250})\n  })\n\n  function startListening(cm, state) {\n    function check() {\n      if (cm.display.wrapper.offsetHeight) {\n        stopListening(cm, state)\n        if (cm.display.lastWrapHeight != cm.display.wrapper.clientHeight)\n          cm.refresh()\n      } else {\n        state.timeout = setTimeout(check, state.delay)\n      }\n    }\n    state.timeout = setTimeout(check, state.delay)\n    state.hurry = function() {\n      clearTimeout(state.timeout)\n      state.timeout = setTimeout(check, 50)\n    }\n    CodeMirror.on(window, \"mouseup\", state.hurry)\n    CodeMirror.on(window, \"keyup\", state.hurry)\n  }\n\n  function stopListening(_cm, state) {\n    clearTimeout(state.timeout)\n    CodeMirror.off(window, \"mouseup\", state.hurry)\n    CodeMirror.off(window, \"keyup\", state.hurry)\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    closeBefore: \")]}'\\\":;>\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, \"pairs\"))\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  function ensureBound(chars) {\n    for (var i = 0; i < chars.length; i++) {\n      var ch = chars.charAt(i), key = \"'\" + ch + \"'\"\n      if (!keyMap[key]) keyMap[key] = handler(ch)\n    }\n  }\n  ensureBound(defaults.pairs + \"`\")\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      var linesep = cm.lineSeparator() || \"\\n\";\n      cm.replaceSelection(linesep + linesep, null);\n      cm.execCommand(\"goCharLeft\");\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n\n    var closeBefore = getOption(conf,\"closeBefore\");\n\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {\n        if (cur.ch > 2 && /\\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2)))) return CodeMirror.Pass;\n        curType = \"addFour\";\n      } else if (identical) {\n        var prev = cur.ch == 0 ? \" \" : cm.getRange(Pos(cur.line, cur.ch - 1), cur)\n        if (!CodeMirror.isWordChar(next) && prev != ch && !CodeMirror.isWordChar(prev)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (next.length === 0 || /\\s/.test(next) || closeBefore.indexOf(next) > -1)) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        cm.execCommand(\"goCharRight\");\n      } else if (type == \"skipThree\") {\n        for (var i = 0; i < 3; i++)\n          cm.execCommand(\"goCharRight\");\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand(\"goCharLeft\");\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        cm.execCommand(\"goCharRight\");\n      }\n    });\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch &&\n      (pos.ch == 0 || !/\\bstring/.test(cm.getTokenTypeAt(pos)))\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"matchTags\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchTags);\n      cm.off(\"viewportChange\", maybeUpdateMatch);\n      clear(cm);\n    }\n    if (val) {\n      cm.state.matchBothTags = typeof val == \"object\" && val.bothTags;\n      cm.on(\"cursorActivity\", doMatchTags);\n      cm.on(\"viewportChange\", maybeUpdateMatch);\n      doMatchTags(cm);\n    }\n  });\n\n  function clear(cm) {\n    if (cm.state.tagHit) cm.state.tagHit.clear();\n    if (cm.state.tagOther) cm.state.tagOther.clear();\n    cm.state.tagHit = cm.state.tagOther = null;\n  }\n\n  function doMatchTags(cm) {\n    cm.state.failedTagMatch = false;\n    cm.operation(function() {\n      clear(cm);\n      if (cm.somethingSelected()) return;\n      var cur = cm.getCursor(), range = cm.getViewport();\n      range.from = Math.min(range.from, cur.line); range.to = Math.max(cur.line + 1, range.to);\n      var match = CodeMirror.findMatchingTag(cm, cur, range);\n      if (!match) return;\n      if (cm.state.matchBothTags) {\n        var hit = match.at == \"open\" ? match.open : match.close;\n        if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, {className: \"CodeMirror-matchingtag\"});\n      }\n      var other = match.at == \"close\" ? match.open : match.close;\n      if (other)\n        cm.state.tagOther = cm.markText(other.from, other.to, {className: \"CodeMirror-matchingtag\"});\n      else\n        cm.state.failedTagMatch = true;\n    });\n  }\n\n  function maybeUpdateMatch(cm) {\n    if (cm.state.failedTagMatch) doMatchTags(cm);\n  }\n\n  CodeMirror.commands.toMatchingTag = function(cm) {\n    var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n    if (found) {\n      var other = found.at == \"close\" ? found.open : found.close;\n      if (other) cm.extendSelection(other.to, other.from);\n    }\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n/**\n * Tag-closer extension for CodeMirror.\n *\n * This extension adds an \"autoCloseTags\" option that can be set to\n * either true to get the default behavior, or an object to further\n * configure its behavior.\n *\n * These are supported options:\n *\n * `whenClosing` (default true)\n *   Whether to autoclose when the '/' of a closing tag is typed.\n * `whenOpening` (default true)\n *   Whether to autoclose the tag when the final '>' of an opening\n *   tag is typed.\n * `dontCloseTags` (default is empty tags for HTML, none for XML)\n *   An array of tag names that should not be autoclosed.\n * `indentTags` (default is block tags for HTML, none for XML)\n *   An array of tag names that should, when opened, cause a\n *   blank line to be added inside the tag, and the blank line and\n *   closing line to be indented.\n * `emptyTags` (default is none)\n *   An array of XML tag names that should be autoclosed with '/>'.\n *\n * See demos/closetag.html for a usage example.\n */\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"autoCloseTags\", false, function(cm, val, old) {\n    if (old != CodeMirror.Init && old)\n      cm.removeKeyMap(\"autoCloseTags\");\n    if (!val) return;\n    var map = {name: \"autoCloseTags\"};\n    if (typeof val != \"object\" || val.whenClosing !== false)\n      map[\"'/'\"] = function(cm) { return autoCloseSlash(cm); };\n    if (typeof val != \"object\" || val.whenOpening !== false)\n      map[\"'>'\"] = function(cm) { return autoCloseGT(cm); };\n    cm.addKeyMap(map);\n  });\n\n  var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\",\n                       \"source\", \"track\", \"wbr\"];\n  var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\",\n                    \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n  function autoCloseGT(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    var opt = cm.getOption(\"autoCloseTags\");\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      var tagInfo = inner.mode.xmlCurrentTag && inner.mode.xmlCurrentTag(state)\n      var tagName = tagInfo && tagInfo.name\n      if (!tagName) return CodeMirror.Pass\n\n      var html = inner.mode.configuration == \"html\";\n      var dontCloseTags = (typeof opt == \"object\" && opt.dontCloseTags) || (html && htmlDontClose);\n      var indentTags = (typeof opt == \"object\" && opt.indentTags) || (html && htmlIndent);\n\n      if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n      var lowerTagName = tagName.toLowerCase();\n      // Don't process the '>' at the end of an end-tag or self-closing tag\n      if (!tagName ||\n          tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) ||\n          tok.type == \"tag\" && tagInfo.close ||\n          tok.string.indexOf(\"/\") == (pos.ch - tok.start - 1) || // match something like <someTagName />\n          dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 ||\n          closingTagExists(cm, inner.mode.xmlCurrentContext && inner.mode.xmlCurrentContext(state) || [], tagName, pos, true))\n        return CodeMirror.Pass;\n\n      var emptyTags = typeof opt == \"object\" && opt.emptyTags;\n      if (emptyTags && indexOf(emptyTags, tagName) > -1) {\n        replacements[i] = { text: \"/>\", newPos: CodeMirror.Pos(pos.line, pos.ch + 2) };\n        continue;\n      }\n\n      var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n      replacements[i] = {indent: indent,\n                         text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n                         newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1)};\n    }\n\n    var dontIndentOnAutoClose = (typeof opt == \"object\" && opt.dontIndentOnAutoClose);\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var info = replacements[i];\n      cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n      var sel = cm.listSelections().slice(0);\n      sel[i] = {head: info.newPos, anchor: info.newPos};\n      cm.setSelections(sel);\n      if (!dontIndentOnAutoClose && info.indent) {\n        cm.indentLine(info.newPos.line, null, true);\n        cm.indentLine(info.newPos.line + 1, null, true);\n      }\n    }\n  }\n\n  function autoCloseCurrent(cm, typingSlash) {\n    var ranges = cm.listSelections(), replacements = [];\n    var head = typingSlash ? \"/\" : \"</\";\n    var opt = cm.getOption(\"autoCloseTags\");\n    var dontIndentOnAutoClose = (typeof opt == \"object\" && opt.dontIndentOnSlash);\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" ||\n                          tok.start != pos.ch - 1))\n        return CodeMirror.Pass;\n      // Kludge to get around the fact that we are not in XML mode\n      // when completing in JS/CSS snippet in htmlmixed mode. Does not\n      // work for other XML embedded languages (there is no general\n      // way to go from a mixed mode to its current XML state).\n      var replacement, mixed = inner.mode.name != \"xml\" && cm.getMode().name == \"htmlmixed\"\n      if (mixed && inner.mode.name == \"javascript\") {\n        replacement = head + \"script\";\n      } else if (mixed && inner.mode.name == \"css\") {\n        replacement = head + \"style\";\n      } else {\n        var context = inner.mode.xmlCurrentContext && inner.mode.xmlCurrentContext(state)\n        if (!context || (context.length && closingTagExists(cm, context, context[context.length - 1], pos)))\n          return CodeMirror.Pass;\n        replacement = head + context[context.length - 1]\n      }\n      if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n      replacements[i] = replacement;\n    }\n    cm.replaceSelections(replacements);\n    ranges = cm.listSelections();\n    if (!dontIndentOnAutoClose) {\n        for (var i = 0; i < ranges.length; i++)\n            if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line)\n                cm.indentLine(ranges[i].head.line);\n    }\n  }\n\n  function autoCloseSlash(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    return autoCloseCurrent(cm, true);\n  }\n\n  CodeMirror.commands.closeTag = function(cm) { return autoCloseCurrent(cm); };\n\n  function indexOf(collection, elt) {\n    if (collection.indexOf) return collection.indexOf(elt);\n    for (var i = 0, e = collection.length; i < e; ++i)\n      if (collection[i] == elt) return i;\n    return -1;\n  }\n\n  // If xml-fold is loaded, we use its functionality to try and verify\n  // whether a given tag is actually unclosed.\n  function closingTagExists(cm, context, tagName, pos, newTag) {\n    if (!CodeMirror.scanForClosingTag) return false;\n    var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n    var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n    if (!nextClose || nextClose.tag != tagName) return false;\n    // If the immediate wrapping context contains onCx instances of\n    // the same tag, a closing tag only exists if there are at least\n    // that many closing tags of that type following.\n    var onCx = newTag ? 1 : 0\n    for (var i = context.length - 1; i >= 0; i--) {\n      if (context[i] == tagName) ++onCx\n      else break\n    }\n    pos = nextClose.to;\n    for (var i = 1; i < onCx; i++) {\n      var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n      if (!next || next.tag != tagName) return false;\n      pos = next.to;\n    }\n    return true;\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-]\\s|(\\d+)([.)]))(\\[\\s\\]\\s|\\[x\\]\\s|\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-]\\s|(\\d+)[.)])(\\[\\s\\]\\s*|\\[x\\]\\s|\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head;\n\n      // If we're not in Markdown mode, fall back to normal newlineAndIndent\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n\n      var line = cm.getLine(pos.line), match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n      if (!ranges[i].empty() || (!inList && !inQuote) || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n      if (emptyListRE.test(line)) {\n        var endOfQuote = inQuote && />\\s*$/.test(line)\n        var endOfList = !/>\\s*$/.test(line)\n        if (endOfQuote || endOfList) cm.replaceRange(\"\", {\n          line: pos.line, ch: 0\n        }, {\n          line: pos.line, ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var disableAutoIncrement = cm.getOption(\"disableAutoIncrementMarkdownListNumbers\") || false\n        var indent = match[1], after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet\n        if (numbered) {\n          bullet = (disableAutoIncrement ? 1 : (parseInt(match[3], 10) + 1)) + match[4];\n        } else {\n          bullet = match[2].replace(\"x\", \" \");\n        }\n        after = after.replace('[x]', '[ ]'); // make todo list default unchecked\n        replacements[i] = \"\\n\" + indent + bullet + after;\n\n        if (numbered && !disableAutoIncrement) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  };\n\n  // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line, lookAhead = 0, skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)), startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber), nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = (parseInt(startItem[3], 10) + lookAhead - skipCount);\n        var nextNumber = (parseInt(nextItem[3], 10)), itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(\n            nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]),\n          {\n            line: nextLineNumber, ch: 0\n          }, {\n            line: nextLineNumber, ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return;\n          // This doesn't run if the next line immediatley indents, as it is\n          // not clear of the users intention (new indented item or same level)\n          if ((startIndent.length < nextIndent.length) && (lookAhead === 1)) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var noOptions = {};\n  var nonWS = /[^\\s\\u00a0]/;\n  var Pos = CodeMirror.Pos, cmp = CodeMirror.cmpPos;\n\n  function firstNonWS(str) {\n    var found = str.search(nonWS);\n    return found == -1 ? 0 : found;\n  }\n\n  CodeMirror.commands.toggleComment = function(cm) {\n    cm.toggleComment();\n  };\n\n  CodeMirror.defineExtension(\"toggleComment\", function(options) {\n    if (!options) options = noOptions;\n    var cm = this;\n    var minLine = Infinity, ranges = this.listSelections(), mode = null;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      if (from.line >= minLine) continue;\n      if (to.line >= minLine) to = Pos(minLine, 0);\n      minLine = from.line;\n      if (mode == null) {\n        if (cm.uncomment(from, to, options)) mode = \"un\";\n        else { cm.lineComment(from, to, options); mode = \"line\"; }\n      } else if (mode == \"un\") {\n        cm.uncomment(from, to, options);\n      } else {\n        cm.lineComment(from, to, options);\n      }\n    }\n  });\n\n  // Rough heuristic to try and detect lines that are part of multi-line string\n  function probablyInsideString(cm, pos, line) {\n    return /\\bstring\\b/.test(cm.getTokenTypeAt(Pos(pos.line, 0))) && !/^[\\'\\\"\\`]/.test(line)\n  }\n\n  function getMode(cm, pos) {\n    var mode = cm.getMode()\n    return mode.useInnerComments === false || !mode.innerMode ? mode : cm.getModeAt(pos)\n  }\n\n  CodeMirror.defineExtension(\"lineComment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = getMode(self, from);\n    var firstLine = self.getLine(from.line);\n    if (firstLine == null || probablyInsideString(self, from, firstLine)) return;\n\n    var commentString = options.lineComment || mode.lineComment;\n    if (!commentString) {\n      if (options.blockCommentStart || mode.blockCommentStart) {\n        options.fullLines = true;\n        self.blockComment(from, to, options);\n      }\n      return;\n    }\n\n    var end = Math.min(to.ch != 0 || to.line == from.line ? to.line + 1 : to.line, self.lastLine() + 1);\n    var pad = options.padding == null ? \" \" : options.padding;\n    var blankLines = options.commentBlankLines || from.line == to.line;\n\n    self.operation(function() {\n      if (options.indent) {\n        var baseString = null;\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i);\n          var whitespace = line.slice(0, firstNonWS(line));\n          if (baseString == null || baseString.length > whitespace.length) {\n            baseString = whitespace;\n          }\n        }\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i), cut = baseString.length;\n          if (!blankLines && !nonWS.test(line)) continue;\n          if (line.slice(0, cut) != baseString) cut = firstNonWS(line);\n          self.replaceRange(baseString + commentString + pad, Pos(i, 0), Pos(i, cut));\n        }\n      } else {\n        for (var i = from.line; i < end; ++i) {\n          if (blankLines || nonWS.test(self.getLine(i)))\n            self.replaceRange(commentString + pad, Pos(i, 0));\n        }\n      }\n    });\n  });\n\n  CodeMirror.defineExtension(\"blockComment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = getMode(self, from);\n    var startString = options.blockCommentStart || mode.blockCommentStart;\n    var endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) {\n      if ((options.lineComment || mode.lineComment) && options.fullLines != false)\n        self.lineComment(from, to, options);\n      return;\n    }\n    if (/\\bcomment\\b/.test(self.getTokenTypeAt(Pos(from.line, 0)))) return\n\n    var end = Math.min(to.line, self.lastLine());\n    if (end != from.line && to.ch == 0 && nonWS.test(self.getLine(end))) --end;\n\n    var pad = options.padding == null ? \" \" : options.padding;\n    if (from.line > end) return;\n\n    self.operation(function() {\n      if (options.fullLines != false) {\n        var lastLineHasText = nonWS.test(self.getLine(end));\n        self.replaceRange(pad + endString, Pos(end));\n        self.replaceRange(startString + pad, Pos(from.line, 0));\n        var lead = options.blockCommentLead || mode.blockCommentLead;\n        if (lead != null) for (var i = from.line + 1; i <= end; ++i)\n          if (i != end || lastLineHasText)\n            self.replaceRange(lead + pad, Pos(i, 0));\n      } else {\n        var atCursor = cmp(self.getCursor(\"to\"), to) == 0, empty = !self.somethingSelected()\n        self.replaceRange(endString, to);\n        if (atCursor) self.setSelection(empty ? to : self.getCursor(\"from\"), to)\n        self.replaceRange(startString, from);\n      }\n    });\n  });\n\n  CodeMirror.defineExtension(\"uncomment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = getMode(self, from);\n    var end = Math.min(to.ch != 0 || to.line == from.line ? to.line : to.line - 1, self.lastLine()), start = Math.min(from.line, end);\n\n    // Try finding line comments\n    var lineString = options.lineComment || mode.lineComment, lines = [];\n    var pad = options.padding == null ? \" \" : options.padding, didSomething;\n    lineComment: {\n      if (!lineString) break lineComment;\n      for (var i = start; i <= end; ++i) {\n        var line = self.getLine(i);\n        var found = line.indexOf(lineString);\n        if (found > -1 && !/comment/.test(self.getTokenTypeAt(Pos(i, found + 1)))) found = -1;\n        if (found == -1 && nonWS.test(line)) break lineComment;\n        if (found > -1 && nonWS.test(line.slice(0, found))) break lineComment;\n        lines.push(line);\n      }\n      self.operation(function() {\n        for (var i = start; i <= end; ++i) {\n          var line = lines[i - start];\n          var pos = line.indexOf(lineString), endPos = pos + lineString.length;\n          if (pos < 0) continue;\n          if (line.slice(endPos, endPos + pad.length) == pad) endPos += pad.length;\n          didSomething = true;\n          self.replaceRange(\"\", Pos(i, pos), Pos(i, endPos));\n        }\n      });\n      if (didSomething) return true;\n    }\n\n    // Try block comments\n    var startString = options.blockCommentStart || mode.blockCommentStart;\n    var endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) return false;\n    var lead = options.blockCommentLead || mode.blockCommentLead;\n    var startLine = self.getLine(start), open = startLine.indexOf(startString)\n    if (open == -1) return false\n    var endLine = end == start ? startLine : self.getLine(end)\n    var close = endLine.indexOf(endString, end == start ? open + startString.length : 0);\n    var insideStart = Pos(start, open + 1), insideEnd = Pos(end, close + 1)\n    if (close == -1 ||\n        !/comment/.test(self.getTokenTypeAt(insideStart)) ||\n        !/comment/.test(self.getTokenTypeAt(insideEnd)) ||\n        self.getRange(insideStart, insideEnd, \"\\n\").indexOf(endString) > -1)\n      return false;\n\n    // Avoid killing block comments completely outside the selection.\n    // Positions of the last startString before the start of the selection, and the first endString after it.\n    var lastStart = startLine.lastIndexOf(startString, from.ch);\n    var firstEnd = lastStart == -1 ? -1 : startLine.slice(0, from.ch).indexOf(endString, lastStart + startString.length);\n    if (lastStart != -1 && firstEnd != -1 && firstEnd + endString.length != from.ch) return false;\n    // Positions of the first endString after the end of the selection, and the last startString before it.\n    firstEnd = endLine.indexOf(endString, to.ch);\n    var almostLastStart = endLine.slice(to.ch).lastIndexOf(startString, firstEnd - to.ch);\n    lastStart = (firstEnd == -1 || almostLastStart == -1) ? -1 : to.ch + almostLastStart;\n    if (firstEnd != -1 && lastStart != -1 && lastStart != to.ch) return false;\n\n    self.operation(function() {\n      self.replaceRange(\"\", Pos(end, close - (pad && endLine.slice(close - pad.length, close) == pad ? pad.length : 0)),\n                        Pos(end, close + endString.length));\n      var openEnd = open + startString.length;\n      if (pad && startLine.slice(openEnd, openEnd + pad.length) == pad) openEnd += pad.length;\n      self.replaceRange(\"\", Pos(start, open), Pos(start, openEnd));\n      if (lead) for (var i = start + 1; i <= end; ++i) {\n        var line = self.getLine(i), found = line.indexOf(lead);\n        if (found == -1 || nonWS.test(line.slice(0, found))) continue;\n        var foundEnd = found + lead.length;\n        if (pad && line.slice(foundEnd, foundEnd + pad.length) == pad) foundEnd += pad.length;\n        self.replaceRange(\"\", Pos(i, found), Pos(i, foundEnd));\n      }\n    });\n    return true;\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var nonspace = /\\S/g;\n  var repeat = String.prototype.repeat || function (n) { return Array(n + 1).join(this); };\n  function continueComment(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), mode, inserts = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head\n      if (!/\\bcomment\\b/.test(cm.getTokenTypeAt(pos))) return CodeMirror.Pass;\n      var modeHere = cm.getModeAt(pos)\n      if (!mode) mode = modeHere;\n      else if (mode != modeHere) return CodeMirror.Pass;\n\n      var insert = null, line, found;\n      var blockStart = mode.blockCommentStart, lineCmt = mode.lineComment;\n      if (blockStart && mode.blockCommentContinue) {\n        line = cm.getLine(pos.line);\n        var end = line.lastIndexOf(mode.blockCommentEnd, pos.ch - mode.blockCommentEnd.length);\n        // 1. if this block comment ended\n        // 2. if this is actually inside a line comment\n        if (end != -1 && end == pos.ch - mode.blockCommentEnd.length ||\n            lineCmt && (found = line.lastIndexOf(lineCmt, pos.ch - 1)) > -1 &&\n            /\\bcomment\\b/.test(cm.getTokenTypeAt({line: pos.line, ch: found + 1}))) {\n          // ...then don't continue it\n        } else if (pos.ch >= blockStart.length &&\n                   (found = line.lastIndexOf(blockStart, pos.ch - blockStart.length)) > -1 &&\n                   found > end) {\n          // reuse the existing leading spaces/tabs/mixed\n          // or build the correct indent using CM's tab/indent options\n          if (nonspaceAfter(0, line) >= found) {\n            insert = line.slice(0, found);\n          } else {\n            var tabSize = cm.options.tabSize, numTabs;\n            found = CodeMirror.countColumn(line, found, tabSize);\n            insert = !cm.options.indentWithTabs ? repeat.call(\" \", found) :\n              repeat.call(\"\\t\", (numTabs = Math.floor(found / tabSize))) +\n              repeat.call(\" \", found - tabSize * numTabs);\n          }\n        } else if ((found = line.indexOf(mode.blockCommentContinue)) > -1 &&\n                   found <= pos.ch &&\n                   found <= nonspaceAfter(0, line)) {\n          insert = line.slice(0, found);\n        }\n        if (insert != null) insert += mode.blockCommentContinue\n      }\n      if (insert == null && lineCmt && continueLineCommentEnabled(cm)) {\n        if (line == null) line = cm.getLine(pos.line);\n        found = line.indexOf(lineCmt);\n        // cursor at pos 0, line comment also at pos 0 => shift it down, don't continue\n        if (!pos.ch && !found) insert = \"\";\n        // continue only if the line starts with an optional space + line comment\n        else if (found > -1 && nonspaceAfter(0, line) >= found) {\n          // don't continue if there's only space(s) after cursor or the end of the line\n          insert = nonspaceAfter(pos.ch, line) > -1;\n          // but always continue if the next line starts with a line comment too\n          if (!insert) {\n            var next = cm.getLine(pos.line + 1) || '',\n                nextFound = next.indexOf(lineCmt);\n            insert = nextFound > -1 && nonspaceAfter(0, next) >= nextFound || null;\n          }\n          if (insert) {\n            insert = line.slice(0, found) + lineCmt +\n                     line.slice(found + lineCmt.length).match(/^\\s*/)[0];\n          }\n        }\n      }\n      if (insert == null) return CodeMirror.Pass;\n      inserts[i] = \"\\n\" + insert;\n    }\n\n    cm.operation(function() {\n      for (var i = ranges.length - 1; i >= 0; i--)\n        cm.replaceRange(inserts[i], ranges[i].from(), ranges[i].to(), \"+insert\");\n    });\n  }\n\n  function nonspaceAfter(ch, str) {\n    nonspace.lastIndex = ch;\n    var m = nonspace.exec(str);\n    return m ? m.index : -1;\n  }\n\n  function continueLineCommentEnabled(cm) {\n    var opt = cm.getOption(\"continueComments\");\n    if (opt && typeof opt == \"object\")\n      return opt.continueLineComment !== false;\n    return true;\n  }\n\n  CodeMirror.defineOption(\"continueComments\", null, function(cm, val, prev) {\n    if (prev && prev != CodeMirror.Init)\n      cm.removeKeyMap(\"continueComment\");\n    if (val) {\n      var key = \"Enter\";\n      if (typeof val == \"string\")\n        key = val;\n      else if (typeof val == \"object\" && val.key)\n        key = val.key;\n      var map = {name: \"continueComment\"};\n      map[key] = continueComment;\n      cm.addKeyMap(map);\n    }\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n\n  function findParagraph(cm, pos, options) {\n    var startRE = options.paragraphStart || cm.getHelper(pos, \"paragraphStart\");\n    for (var start = pos.line, first = cm.firstLine(); start > first; --start) {\n      var line = cm.getLine(start);\n      if (startRE && startRE.test(line)) break;\n      if (!/\\S/.test(line)) { ++start; break; }\n    }\n    var endRE = options.paragraphEnd || cm.getHelper(pos, \"paragraphEnd\");\n    for (var end = pos.line + 1, last = cm.lastLine(); end <= last; ++end) {\n      var line = cm.getLine(end);\n      if (endRE && endRE.test(line)) { ++end; break; }\n      if (!/\\S/.test(line)) break;\n    }\n    return {from: start, to: end};\n  }\n\n  function findBreakPoint(text, column, wrapOn, killTrailingSpace, forceBreak) {\n    var at = column\n    while (at < text.length && text.charAt(at) == \" \") at++\n    for (; at > 0; --at)\n      if (wrapOn.test(text.slice(at - 1, at + 1))) break;\n\n    if (at == 0 && !forceBreak) {\n      // didn't find a break point before column, in non-forceBreak mode try to\n      // find one after 'column'.\n      for (at = column + 1; at < text.length - 1; ++at) {\n        if (wrapOn.test(text.slice(at - 1, at + 1))) break;\n      }\n    }\n\n    for (var first = true;; first = false) {\n      var endOfText = at;\n      if (killTrailingSpace)\n        while (text.charAt(endOfText - 1) == \" \") --endOfText;\n      if (endOfText == 0 && first) at = column;\n      else return {from: endOfText, to: at};\n    }\n  }\n\n  function wrapRange(cm, from, to, options) {\n    from = cm.clipPos(from); to = cm.clipPos(to);\n    var column = options.column || 80;\n    var wrapOn = options.wrapOn || /\\s\\S|-[^\\.\\d]/;\n    var forceBreak = options.forceBreak !== false;\n    var killTrailing = options.killTrailingSpace !== false;\n    var changes = [], curLine = \"\", curNo = from.line;\n    var lines = cm.getRange(from, to, false);\n    if (!lines.length) return null;\n    var leadingSpace = lines[0].match(/^[ \\t]*/)[0];\n    if (leadingSpace.length >= column) column = leadingSpace.length + 1\n\n    for (var i = 0; i < lines.length; ++i) {\n      var text = lines[i], oldLen = curLine.length, spaceInserted = 0;\n      if (curLine && text && !wrapOn.test(curLine.charAt(curLine.length - 1) + text.charAt(0))) {\n        curLine += \" \";\n        spaceInserted = 1;\n      }\n      var spaceTrimmed = \"\";\n      if (i) {\n        spaceTrimmed = text.match(/^\\s*/)[0];\n        text = text.slice(spaceTrimmed.length);\n      }\n      curLine += text;\n      if (i) {\n        var firstBreak = curLine.length > column && leadingSpace == spaceTrimmed &&\n          findBreakPoint(curLine, column, wrapOn, killTrailing, forceBreak);\n        // If this isn't broken, or is broken at a different point, remove old break\n        if (!firstBreak || firstBreak.from != oldLen || firstBreak.to != oldLen + spaceInserted) {\n          changes.push({text: [spaceInserted ? \" \" : \"\"],\n                        from: Pos(curNo, oldLen),\n                        to: Pos(curNo + 1, spaceTrimmed.length)});\n        } else {\n          curLine = leadingSpace + text;\n          ++curNo;\n        }\n      }\n      while (curLine.length > column) {\n        var bp = findBreakPoint(curLine, column, wrapOn, killTrailing, forceBreak);\n        if (bp.from != bp.to || forceBreak) {\n          changes.push({text: [\"\", leadingSpace],\n                        from: Pos(curNo, bp.from),\n                        to: Pos(curNo, bp.to)});\n          curLine = leadingSpace + curLine.slice(bp.to);\n          ++curNo;\n        } else {\n          break;\n        }\n      }\n    }\n    if (changes.length) cm.operation(function() {\n      for (var i = 0; i < changes.length; ++i) {\n        var change = changes[i];\n        if (change.text || CodeMirror.cmpPos(change.from, change.to))\n          cm.replaceRange(change.text, change.from, change.to);\n      }\n    });\n    return changes.length ? {from: changes[0].from, to: CodeMirror.changeEnd(changes[changes.length - 1])} : null;\n  }\n\n  CodeMirror.defineExtension(\"wrapParagraph\", function(pos, options) {\n    options = options || {};\n    if (!pos) pos = this.getCursor();\n    var para = findParagraph(this, pos, options);\n    return wrapRange(this, Pos(para.from, 0), Pos(para.to - 1), options);\n  });\n\n  CodeMirror.commands.wrapLines = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), at = cm.lastLine() + 1;\n      for (var i = ranges.length - 1; i >= 0; i--) {\n        var range = ranges[i], span;\n        if (range.empty()) {\n          var para = findParagraph(cm, range.head, {});\n          span = {from: Pos(para.from, 0), to: Pos(para.to - 1)};\n        } else {\n          span = {from: range.from(), to: range.to()};\n        }\n        if (span.to.line >= at) continue;\n        at = span.from.line;\n        wrapRange(cm, span.from, span.to, {});\n      }\n    });\n  };\n\n  CodeMirror.defineExtension(\"wrapRange\", function(from, to, options) {\n    return wrapRange(this, from, to, options || {});\n  });\n\n  CodeMirror.defineExtension(\"wrapParagraphsInRange\", function(from, to, options) {\n    options = options || {};\n    var cm = this, paras = [];\n    for (var line = from.line; line <= to.line;) {\n      var para = findParagraph(cm, Pos(line, 0), options);\n      paras.push(para);\n      line = para.to;\n    }\n    var madeChange = false;\n    if (paras.length) cm.operation(function() {\n      for (var i = paras.length - 1; i >= 0; --i)\n        madeChange = madeChange || wrapRange(cm, Pos(paras[i].from, 0), Pos(paras[i].to - 1), options);\n    });\n    return madeChange;\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.registerHelper(\"fold\", \"brace\", function(cm, start) {\n  var line = start.line, lineText = cm.getLine(line);\n  var tokenType;\n\n  function findOpening(openCh) {\n    for (var at = start.ch, pass = 0;;) {\n      var found = at <= 0 ? -1 : lineText.lastIndexOf(openCh, at - 1);\n      if (found == -1) {\n        if (pass == 1) break;\n        pass = 1;\n        at = lineText.length;\n        continue;\n      }\n      if (pass == 1 && found < start.ch) break;\n      tokenType = cm.getTokenTypeAt(CodeMirror.Pos(line, found + 1));\n      if (!/^(comment|string)/.test(tokenType)) return found + 1;\n      at = found - 1;\n    }\n  }\n\n  var startToken = \"{\", endToken = \"}\", startCh = findOpening(\"{\");\n  if (startCh == null) {\n    startToken = \"[\", endToken = \"]\";\n    startCh = findOpening(\"[\");\n  }\n\n  if (startCh == null) return;\n  var count = 1, lastLine = cm.lastLine(), end, endCh;\n  outer: for (var i = line; i <= lastLine; ++i) {\n    var text = cm.getLine(i), pos = i == line ? startCh : 0;\n    for (;;) {\n      var nextOpen = text.indexOf(startToken, pos), nextClose = text.indexOf(endToken, pos);\n      if (nextOpen < 0) nextOpen = text.length;\n      if (nextClose < 0) nextClose = text.length;\n      pos = Math.min(nextOpen, nextClose);\n      if (pos == text.length) break;\n      if (cm.getTokenTypeAt(CodeMirror.Pos(i, pos + 1)) == tokenType) {\n        if (pos == nextOpen) ++count;\n        else if (!--count) { end = i; endCh = pos; break outer; }\n      }\n      ++pos;\n    }\n  }\n  if (end == null || line == end) return;\n  return {from: CodeMirror.Pos(line, startCh),\n          to: CodeMirror.Pos(end, endCh)};\n});\n\nCodeMirror.registerHelper(\"fold\", \"import\", function(cm, start) {\n  function hasImport(line) {\n    if (line < cm.firstLine() || line > cm.lastLine()) return null;\n    var start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n    if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n    if (start.type != \"keyword\" || start.string != \"import\") return null;\n    // Now find closing semicolon, return its position\n    for (var i = line, e = Math.min(cm.lastLine(), line + 10); i <= e; ++i) {\n      var text = cm.getLine(i), semi = text.indexOf(\";\");\n      if (semi != -1) return {startCh: start.end, end: CodeMirror.Pos(i, semi)};\n    }\n  }\n\n  var startLine = start.line, has = hasImport(startLine), prev;\n  if (!has || hasImport(startLine - 1) || ((prev = hasImport(startLine - 2)) && prev.end.line == startLine - 1))\n    return null;\n  for (var end = has.end;;) {\n    var next = hasImport(end.line + 1);\n    if (next == null) break;\n    end = next.end;\n  }\n  return {from: cm.clipPos(CodeMirror.Pos(startLine, has.startCh + 1)), to: end};\n});\n\nCodeMirror.registerHelper(\"fold\", \"include\", function(cm, start) {\n  function hasInclude(line) {\n    if (line < cm.firstLine() || line > cm.lastLine()) return null;\n    var start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n    if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n    if (start.type == \"meta\" && start.string.slice(0, 8) == \"#include\") return start.start + 8;\n  }\n\n  var startLine = start.line, has = hasInclude(startLine);\n  if (has == null || hasInclude(startLine - 1) != null) return null;\n  for (var end = startLine;;) {\n    var next = hasInclude(end + 1);\n    if (next == null) break;\n    ++end;\n  }\n  return {from: CodeMirror.Pos(startLine, has + 1),\n          to: cm.clipPos(CodeMirror.Pos(end))};\n});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./foldcode\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./foldcode\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"foldGutter\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off(\"gutterClick\", onGutterClick);\n      cm.off(\"changes\", onChange);\n      cm.off(\"viewportChange\", onViewportChange);\n      cm.off(\"fold\", onFold);\n      cm.off(\"unfold\", onFold);\n      cm.off(\"swapDoc\", onChange);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on(\"gutterClick\", onGutterClick);\n      cm.on(\"changes\", onChange);\n      cm.on(\"viewportChange\", onViewportChange);\n      cm.on(\"fold\", onFold);\n      cm.on(\"unfold\", onFold);\n      cm.on(\"swapDoc\", onChange);\n    }\n  });\n\n  var Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = \"CodeMirror-foldgutter\";\n    if (opts.indicatorOpen == null) opts.indicatorOpen = \"CodeMirror-foldgutter-open\";\n    if (opts.indicatorFolded == null) opts.indicatorFolded = \"CodeMirror-foldgutter-folded\";\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    var marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));\n    for (var i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) {\n        var fromPos = marks[i].find(-1);\n        if (fromPos && fromPos.line === line)\n          return marks[i];\n      }\n    }\n  }\n\n  function marker(spec) {\n    if (typeof spec == \"string\") {\n      var elt = document.createElement(\"div\");\n      elt.className = spec + \" CodeMirror-guttermarker-subtle\";\n      return elt;\n    } else {\n      return spec.cloneNode(true);\n    }\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    var opts = cm.state.foldGutter.options, cur = from - 1;\n    var minSize = cm.foldOption(opts, \"minFoldSize\");\n    var func = cm.foldOption(opts, \"rangeFinder\");\n    // we can reuse the built-in indicator element if its className matches the new state\n    var clsFolded = typeof opts.indicatorFolded == \"string\" && classTest(opts.indicatorFolded);\n    var clsOpen = typeof opts.indicatorOpen == \"string\" && classTest(opts.indicatorOpen);\n    cm.eachLine(from, to, function(line) {\n      ++cur;\n      var mark = null;\n      var old = line.gutterMarkers;\n      if (old) old = old[opts.gutter];\n      if (isFolded(cm, cur)) {\n        if (clsFolded && old && clsFolded.test(old.className)) return;\n        mark = marker(opts.indicatorFolded);\n      } else {\n        var pos = Pos(cur, 0);\n        var range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize) {\n          if (clsOpen && old && clsOpen.test(old.className)) return;\n          mark = marker(opts.indicatorOpen);\n        }\n      }\n      if (!mark && !old) return;\n      cm.setGutterMarker(line, opts.gutter, mark);\n    });\n  }\n\n  // copied from CodeMirror/src/util/dom.js\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  function updateInViewport(cm) {\n    var vp = cm.getViewport(), state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(function() {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from; state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    if (gutter != opts.gutter) return;\n    var folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts);\n  }\n\n  function onChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() { updateInViewport(cm); }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() {\n      var vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(function() {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var line = from.line;\n    if (line >= state.from && line < state.to)\n      updateFoldInfo(cm, line, line + 1);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.registerHelper(\"fold\", \"markdown\", function(cm, start) {\n  var maxDepth = 100;\n\n  function isHeader(lineNo) {\n    var tokentype = cm.getTokenTypeAt(CodeMirror.Pos(lineNo, 0));\n    return tokentype && /\\bheader\\b/.test(tokentype);\n  }\n\n  function headerLevel(lineNo, line, nextLine) {\n    var match = line && line.match(/^#+/);\n    if (match && isHeader(lineNo)) return match[0].length;\n    match = nextLine && nextLine.match(/^[=\\-]+\\s*$/);\n    if (match && isHeader(lineNo + 1)) return nextLine[0] == \"=\" ? 1 : 2;\n    return maxDepth;\n  }\n\n  var firstLine = cm.getLine(start.line), nextLine = cm.getLine(start.line + 1);\n  var level = headerLevel(start.line, firstLine, nextLine);\n  if (level === maxDepth) return undefined;\n\n  var lastLineNo = cm.lastLine();\n  var end = start.line, nextNextLine = cm.getLine(end + 2);\n  while (end < lastLineNo) {\n    if (headerLevel(end + 1, nextLine, nextNextLine) <= level) break;\n    ++end;\n    nextLine = nextNextLine;\n    nextNextLine = cm.getLine(end + 2);\n  }\n\n  return {\n    from: CodeMirror.Pos(start.line, firstLine.length),\n    to: CodeMirror.Pos(end, cm.getLine(end).length)\n  };\n});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// declare global: diff_match_patch, DIFF_INSERT, DIFF_DELETE, DIFF_EQUAL\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\")); // Note non-packaged dependency diff_match_patch\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"diff_match_patch\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var Pos = CodeMirror.Pos;\n  var svgNS = \"http://www.w3.org/2000/svg\";\n\n  function DiffView(mv, type) {\n    this.mv = mv;\n    this.type = type;\n    this.classes = type == \"left\"\n      ? {chunk: \"CodeMirror-merge-l-chunk\",\n         start: \"CodeMirror-merge-l-chunk-start\",\n         end: \"CodeMirror-merge-l-chunk-end\",\n         insert: \"CodeMirror-merge-l-inserted\",\n         del: \"CodeMirror-merge-l-deleted\",\n         connect: \"CodeMirror-merge-l-connect\"}\n      : {chunk: \"CodeMirror-merge-r-chunk\",\n         start: \"CodeMirror-merge-r-chunk-start\",\n         end: \"CodeMirror-merge-r-chunk-end\",\n         insert: \"CodeMirror-merge-r-inserted\",\n         del: \"CodeMirror-merge-r-deleted\",\n         connect: \"CodeMirror-merge-r-connect\"};\n  }\n\n  DiffView.prototype = {\n    constructor: DiffView,\n    init: function(pane, orig, options) {\n      this.edit = this.mv.edit;\n      ;(this.edit.state.diffViews || (this.edit.state.diffViews = [])).push(this);\n      this.orig = CodeMirror(pane, copyObj({value: orig, readOnly: !this.mv.options.allowEditingOriginals}, copyObj(options)));\n      if (this.mv.options.connect == \"align\") {\n        if (!this.edit.state.trackAlignable) this.edit.state.trackAlignable = new TrackAlignable(this.edit)\n        this.orig.state.trackAlignable = new TrackAlignable(this.orig)\n      }\n      this.lockButton.title = this.edit.phrase(\"Toggle locked scrolling\");\n\n      this.orig.state.diffViews = [this];\n      var classLocation = options.chunkClassLocation || \"background\";\n      if (Object.prototype.toString.call(classLocation) != \"[object Array]\") classLocation = [classLocation]\n      this.classes.classLocation = classLocation\n\n      this.diff = getDiff(asString(orig), asString(options.value), this.mv.options.ignoreWhitespace);\n      this.chunks = getChunks(this.diff);\n      this.diffOutOfDate = this.dealigned = false;\n      this.needsScrollSync = null\n\n      this.showDifferences = options.showDifferences !== false;\n    },\n    registerEvents: function(otherDv) {\n      this.forceUpdate = registerUpdate(this);\n      setScrollLock(this, true, false);\n      registerScroll(this, otherDv);\n    },\n    setShowDifferences: function(val) {\n      val = val !== false;\n      if (val != this.showDifferences) {\n        this.showDifferences = val;\n        this.forceUpdate(\"full\");\n      }\n    }\n  };\n\n  function ensureDiff(dv) {\n    if (dv.diffOutOfDate) {\n      dv.diff = getDiff(dv.orig.getValue(), dv.edit.getValue(), dv.mv.options.ignoreWhitespace);\n      dv.chunks = getChunks(dv.diff);\n      dv.diffOutOfDate = false;\n      CodeMirror.signal(dv.edit, \"updateDiff\", dv.diff);\n    }\n  }\n\n  var updating = false;\n  function registerUpdate(dv) {\n    var edit = {from: 0, to: 0, marked: []};\n    var orig = {from: 0, to: 0, marked: []};\n    var debounceChange, updatingFast = false;\n    function update(mode) {\n      updating = true;\n      updatingFast = false;\n      if (mode == \"full\") {\n        if (dv.svg) clear(dv.svg);\n        if (dv.copyButtons) clear(dv.copyButtons);\n        clearMarks(dv.edit, edit.marked, dv.classes);\n        clearMarks(dv.orig, orig.marked, dv.classes);\n        edit.from = edit.to = orig.from = orig.to = 0;\n      }\n      ensureDiff(dv);\n      if (dv.showDifferences) {\n        updateMarks(dv.edit, dv.diff, edit, DIFF_INSERT, dv.classes);\n        updateMarks(dv.orig, dv.diff, orig, DIFF_DELETE, dv.classes);\n      }\n\n      if (dv.mv.options.connect == \"align\")\n        alignChunks(dv);\n      makeConnections(dv);\n      if (dv.needsScrollSync != null) syncScroll(dv, dv.needsScrollSync)\n\n      updating = false;\n    }\n    function setDealign(fast) {\n      if (updating) return;\n      dv.dealigned = true;\n      set(fast);\n    }\n    function set(fast) {\n      if (updating || updatingFast) return;\n      clearTimeout(debounceChange);\n      if (fast === true) updatingFast = true;\n      debounceChange = setTimeout(update, fast === true ? 20 : 250);\n    }\n    function change(_cm, change) {\n      if (!dv.diffOutOfDate) {\n        dv.diffOutOfDate = true;\n        edit.from = edit.to = orig.from = orig.to = 0;\n      }\n      // Update faster when a line was added/removed\n      setDealign(change.text.length - 1 != change.to.line - change.from.line);\n    }\n    function swapDoc() {\n      dv.diffOutOfDate = true;\n      dv.dealigned = true;\n      update(\"full\");\n    }\n    dv.edit.on(\"change\", change);\n    dv.orig.on(\"change\", change);\n    dv.edit.on(\"swapDoc\", swapDoc);\n    dv.orig.on(\"swapDoc\", swapDoc);\n    if (dv.mv.options.connect == \"align\") {\n      CodeMirror.on(dv.edit.state.trackAlignable, \"realign\", setDealign)\n      CodeMirror.on(dv.orig.state.trackAlignable, \"realign\", setDealign)\n    }\n    dv.edit.on(\"viewportChange\", function() { set(false); });\n    dv.orig.on(\"viewportChange\", function() { set(false); });\n    update();\n    return update;\n  }\n\n  function registerScroll(dv, otherDv) {\n    dv.edit.on(\"scroll\", function() {\n      syncScroll(dv, true) && makeConnections(dv);\n    });\n    dv.orig.on(\"scroll\", function() {\n      syncScroll(dv, false) && makeConnections(dv);\n      if (otherDv) syncScroll(otherDv, true) && makeConnections(otherDv);\n    });\n  }\n\n  function syncScroll(dv, toOrig) {\n    // Change handler will do a refresh after a timeout when diff is out of date\n    if (dv.diffOutOfDate) {\n      if (dv.lockScroll && dv.needsScrollSync == null) dv.needsScrollSync = toOrig\n      return false\n    }\n    dv.needsScrollSync = null\n    if (!dv.lockScroll) return true;\n    var editor, other, now = +new Date;\n    if (toOrig) { editor = dv.edit; other = dv.orig; }\n    else { editor = dv.orig; other = dv.edit; }\n    // Don't take action if the position of this editor was recently set\n    // (to prevent feedback loops)\n    if (editor.state.scrollSetBy == dv && (editor.state.scrollSetAt || 0) + 250 > now) return false;\n\n    var sInfo = editor.getScrollInfo();\n    if (dv.mv.options.connect == \"align\") {\n      targetPos = sInfo.top;\n    } else {\n      var halfScreen = .5 * sInfo.clientHeight, midY = sInfo.top + halfScreen;\n      var mid = editor.lineAtHeight(midY, \"local\");\n      var around = chunkBoundariesAround(dv.chunks, mid, toOrig);\n      var off = getOffsets(editor, toOrig ? around.edit : around.orig);\n      var offOther = getOffsets(other, toOrig ? around.orig : around.edit);\n      var ratio = (midY - off.top) / (off.bot - off.top);\n      var targetPos = (offOther.top - halfScreen) + ratio * (offOther.bot - offOther.top);\n\n      var botDist, mix;\n      // Some careful tweaking to make sure no space is left out of view\n      // when scrolling to top or bottom.\n      if (targetPos > sInfo.top && (mix = sInfo.top / halfScreen) < 1) {\n        targetPos = targetPos * mix + sInfo.top * (1 - mix);\n      } else if ((botDist = sInfo.height - sInfo.clientHeight - sInfo.top) < halfScreen) {\n        var otherInfo = other.getScrollInfo();\n        var botDistOther = otherInfo.height - otherInfo.clientHeight - targetPos;\n        if (botDistOther > botDist && (mix = botDist / halfScreen) < 1)\n          targetPos = targetPos * mix + (otherInfo.height - otherInfo.clientHeight - botDist) * (1 - mix);\n      }\n    }\n\n    other.scrollTo(sInfo.left, targetPos);\n    other.state.scrollSetAt = now;\n    other.state.scrollSetBy = dv;\n    return true;\n  }\n\n  function getOffsets(editor, around) {\n    var bot = around.after;\n    if (bot == null) bot = editor.lastLine() + 1;\n    return {top: editor.heightAtLine(around.before || 0, \"local\"),\n            bot: editor.heightAtLine(bot, \"local\")};\n  }\n\n  function setScrollLock(dv, val, action) {\n    dv.lockScroll = val;\n    if (val && action != false) syncScroll(dv, DIFF_INSERT) && makeConnections(dv);\n    (val ? CodeMirror.addClass : CodeMirror.rmClass)(dv.lockButton, \"CodeMirror-merge-scrolllock-enabled\");\n  }\n\n  // Updating the marks for editor content\n\n  function removeClass(editor, line, classes) {\n    var locs = classes.classLocation\n    for (var i = 0; i < locs.length; i++) {\n      editor.removeLineClass(line, locs[i], classes.chunk);\n      editor.removeLineClass(line, locs[i], classes.start);\n      editor.removeLineClass(line, locs[i], classes.end);\n    }\n  }\n\n  function clearMarks(editor, arr, classes) {\n    for (var i = 0; i < arr.length; ++i) {\n      var mark = arr[i];\n      if (mark instanceof CodeMirror.TextMarker)\n        mark.clear();\n      else if (mark.parent)\n        removeClass(editor, mark, classes);\n    }\n    arr.length = 0;\n  }\n\n  // FIXME maybe add a margin around viewport to prevent too many updates\n  function updateMarks(editor, diff, state, type, classes) {\n    var vp = editor.getViewport();\n    editor.operation(function() {\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        clearMarks(editor, state.marked, classes);\n        markChanges(editor, diff, type, state.marked, vp.from, vp.to, classes);\n        state.from = vp.from; state.to = vp.to;\n      } else {\n        if (vp.from < state.from) {\n          markChanges(editor, diff, type, state.marked, vp.from, state.from, classes);\n          state.from = vp.from;\n        }\n        if (vp.to > state.to) {\n          markChanges(editor, diff, type, state.marked, state.to, vp.to, classes);\n          state.to = vp.to;\n        }\n      }\n    });\n  }\n\n  function addClass(editor, lineNr, classes, main, start, end) {\n    var locs = classes.classLocation, line = editor.getLineHandle(lineNr);\n    for (var i = 0; i < locs.length; i++) {\n      if (main) editor.addLineClass(line, locs[i], classes.chunk);\n      if (start) editor.addLineClass(line, locs[i], classes.start);\n      if (end) editor.addLineClass(line, locs[i], classes.end);\n    }\n    return line;\n  }\n\n  function markChanges(editor, diff, type, marks, from, to, classes) {\n    var pos = Pos(0, 0);\n    var top = Pos(from, 0), bot = editor.clipPos(Pos(to - 1));\n    var cls = type == DIFF_DELETE ? classes.del : classes.insert;\n    function markChunk(start, end) {\n      var bfrom = Math.max(from, start), bto = Math.min(to, end);\n      for (var i = bfrom; i < bto; ++i)\n        marks.push(addClass(editor, i, classes, true, i == start, i == end - 1));\n      // When the chunk is empty, make sure a horizontal line shows up\n      if (start == end && bfrom == end && bto == end) {\n        if (bfrom)\n          marks.push(addClass(editor, bfrom - 1, classes, false, false, true));\n        else\n          marks.push(addClass(editor, bfrom, classes, false, true, false));\n      }\n    }\n\n    var chunkStart = 0, pending = false;\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i], tp = part[0], str = part[1];\n      if (tp == DIFF_EQUAL) {\n        var cleanFrom = pos.line + (startOfLineClean(diff, i) ? 0 : 1);\n        moveOver(pos, str);\n        var cleanTo = pos.line + (endOfLineClean(diff, i) ? 1 : 0);\n        if (cleanTo > cleanFrom) {\n          if (pending) { markChunk(chunkStart, cleanFrom); pending = false }\n          chunkStart = cleanTo;\n        }\n      } else {\n        pending = true\n        if (tp == type) {\n          var end = moveOver(pos, str, true);\n          var a = posMax(top, pos), b = posMin(bot, end);\n          if (!posEq(a, b))\n            marks.push(editor.markText(a, b, {className: cls}));\n          pos = end;\n        }\n      }\n    }\n    if (pending) markChunk(chunkStart, pos.line + 1);\n  }\n\n  // Updating the gap between editor and original\n\n  function makeConnections(dv) {\n    if (!dv.showDifferences) return;\n\n    if (dv.svg) {\n      clear(dv.svg);\n      var w = dv.gap.offsetWidth;\n      attrs(dv.svg, \"width\", w, \"height\", dv.gap.offsetHeight);\n    }\n    if (dv.copyButtons) clear(dv.copyButtons);\n\n    var vpEdit = dv.edit.getViewport(), vpOrig = dv.orig.getViewport();\n    var outerTop = dv.mv.wrap.getBoundingClientRect().top\n    var sTopEdit = outerTop - dv.edit.getScrollerElement().getBoundingClientRect().top + dv.edit.getScrollInfo().top\n    var sTopOrig = outerTop - dv.orig.getScrollerElement().getBoundingClientRect().top + dv.orig.getScrollInfo().top;\n    for (var i = 0; i < dv.chunks.length; i++) {\n      var ch = dv.chunks[i];\n      if (ch.editFrom <= vpEdit.to && ch.editTo >= vpEdit.from &&\n          ch.origFrom <= vpOrig.to && ch.origTo >= vpOrig.from)\n        drawConnectorsForChunk(dv, ch, sTopOrig, sTopEdit, w);\n    }\n  }\n\n  function getMatchingOrigLine(editLine, chunks) {\n    var editStart = 0, origStart = 0;\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      if (chunk.editTo > editLine && chunk.editFrom <= editLine) return null;\n      if (chunk.editFrom > editLine) break;\n      editStart = chunk.editTo;\n      origStart = chunk.origTo;\n    }\n    return origStart + (editLine - editStart);\n  }\n\n  // Combines information about chunks and widgets/markers to return\n  // an array of lines, in a single editor, that probably need to be\n  // aligned with their counterparts in the editor next to it.\n  function alignableFor(cm, chunks, isOrig) {\n    var tracker = cm.state.trackAlignable\n    var start = cm.firstLine(), trackI = 0\n    var result = []\n    for (var i = 0;; i++) {\n      var chunk = chunks[i]\n      var chunkStart = !chunk ? 1e9 : isOrig ? chunk.origFrom : chunk.editFrom\n      for (; trackI < tracker.alignable.length; trackI += 2) {\n        var n = tracker.alignable[trackI] + 1\n        if (n <= start) continue\n        if (n <= chunkStart) result.push(n)\n        else break\n      }\n      if (!chunk) break\n      result.push(start = isOrig ? chunk.origTo : chunk.editTo)\n    }\n    return result\n  }\n\n  // Given information about alignable lines in two editors, fill in\n  // the result (an array of three-element arrays) to reflect the\n  // lines that need to be aligned with each other.\n  function mergeAlignable(result, origAlignable, chunks, setIndex) {\n    var rI = 0, origI = 0, chunkI = 0, diff = 0\n    outer: for (;; rI++) {\n      var nextR = result[rI], nextO = origAlignable[origI]\n      if (!nextR && nextO == null) break\n\n      var rLine = nextR ? nextR[0] : 1e9, oLine = nextO == null ? 1e9 : nextO\n      while (chunkI < chunks.length) {\n        var chunk = chunks[chunkI]\n        if (chunk.origFrom <= oLine && chunk.origTo > oLine) {\n          origI++\n          rI--\n          continue outer;\n        }\n        if (chunk.editTo > rLine) {\n          if (chunk.editFrom <= rLine) continue outer;\n          break\n        }\n        diff += (chunk.origTo - chunk.origFrom) - (chunk.editTo - chunk.editFrom)\n        chunkI++\n      }\n      if (rLine == oLine - diff) {\n        nextR[setIndex] = oLine\n        origI++\n      } else if (rLine < oLine - diff) {\n        nextR[setIndex] = rLine + diff\n      } else {\n        var record = [oLine - diff, null, null]\n        record[setIndex] = oLine\n        result.splice(rI, 0, record)\n        origI++\n      }\n    }\n  }\n\n  function findAlignedLines(dv, other) {\n    var alignable = alignableFor(dv.edit, dv.chunks, false), result = []\n    if (other) for (var i = 0, j = 0; i < other.chunks.length; i++) {\n      var n = other.chunks[i].editTo\n      while (j < alignable.length && alignable[j] < n) j++\n      if (j == alignable.length || alignable[j] != n) alignable.splice(j++, 0, n)\n    }\n    for (var i = 0; i < alignable.length; i++)\n      result.push([alignable[i], null, null])\n\n    mergeAlignable(result, alignableFor(dv.orig, dv.chunks, true), dv.chunks, 1)\n    if (other)\n      mergeAlignable(result, alignableFor(other.orig, other.chunks, true), other.chunks, 2)\n\n    return result\n  }\n\n  function alignChunks(dv, force) {\n    if (!dv.dealigned && !force) return;\n    if (!dv.orig.curOp) return dv.orig.operation(function() {\n      alignChunks(dv, force);\n    });\n\n    dv.dealigned = false;\n    var other = dv.mv.left == dv ? dv.mv.right : dv.mv.left;\n    if (other) {\n      ensureDiff(other);\n      other.dealigned = false;\n    }\n    var linesToAlign = findAlignedLines(dv, other);\n\n    // Clear old aligners\n    var aligners = dv.mv.aligners;\n    for (var i = 0; i < aligners.length; i++)\n      aligners[i].clear();\n    aligners.length = 0;\n\n    var cm = [dv.edit, dv.orig], scroll = [], offset = []\n    if (other) cm.push(other.orig);\n    for (var i = 0; i < cm.length; i++) {\n      scroll.push(cm[i].getScrollInfo().top);\n      offset.push(-cm[i].getScrollerElement().getBoundingClientRect().top)\n    }\n\n    if (offset[0] != offset[1] || cm.length == 3 && offset[1] != offset[2])\n      alignLines(cm, offset, [0, 0, 0], aligners)\n    for (var ln = 0; ln < linesToAlign.length; ln++)\n      alignLines(cm, offset, linesToAlign[ln], aligners);\n\n    for (var i = 0; i < cm.length; i++)\n      cm[i].scrollTo(null, scroll[i]);\n  }\n\n  function alignLines(cm, cmOffset, lines, aligners) {\n    var maxOffset = -1e8, offset = [];\n    for (var i = 0; i < cm.length; i++) if (lines[i] != null) {\n      var off = cm[i].heightAtLine(lines[i], \"local\") - cmOffset[i];\n      offset[i] = off;\n      maxOffset = Math.max(maxOffset, off);\n    }\n    for (var i = 0; i < cm.length; i++) if (lines[i] != null) {\n      var diff = maxOffset - offset[i];\n      if (diff > 1)\n        aligners.push(padAbove(cm[i], lines[i], diff));\n    }\n  }\n\n  function padAbove(cm, line, size) {\n    var above = true;\n    if (line > cm.lastLine()) {\n      line--;\n      above = false;\n    }\n    var elt = document.createElement(\"div\");\n    elt.className = \"CodeMirror-merge-spacer\";\n    elt.style.height = size + \"px\"; elt.style.minWidth = \"1px\";\n    return cm.addLineWidget(line, elt, {height: size, above: above, mergeSpacer: true, handleMouseEvents: true});\n  }\n\n  function drawConnectorsForChunk(dv, chunk, sTopOrig, sTopEdit, w) {\n    var flip = dv.type == \"left\";\n    var top = dv.orig.heightAtLine(chunk.origFrom, \"local\", true) - sTopOrig;\n    if (dv.svg) {\n      var topLpx = top;\n      var topRpx = dv.edit.heightAtLine(chunk.editFrom, \"local\", true) - sTopEdit;\n      if (flip) { var tmp = topLpx; topLpx = topRpx; topRpx = tmp; }\n      var botLpx = dv.orig.heightAtLine(chunk.origTo, \"local\", true) - sTopOrig;\n      var botRpx = dv.edit.heightAtLine(chunk.editTo, \"local\", true) - sTopEdit;\n      if (flip) { var tmp = botLpx; botLpx = botRpx; botRpx = tmp; }\n      var curveTop = \" C \" + w/2 + \" \" + topRpx + \" \" + w/2 + \" \" + topLpx + \" \" + (w + 2) + \" \" + topLpx;\n      var curveBot = \" C \" + w/2 + \" \" + botLpx + \" \" + w/2 + \" \" + botRpx + \" -1 \" + botRpx;\n      attrs(dv.svg.appendChild(document.createElementNS(svgNS, \"path\")),\n            \"d\", \"M -1 \" + topRpx + curveTop + \" L \" + (w + 2) + \" \" + botLpx + curveBot + \" z\",\n            \"class\", dv.classes.connect);\n    }\n    if (dv.copyButtons) {\n      var copy = dv.copyButtons.appendChild(elt(\"div\", dv.type == \"left\" ? \"\\u21dd\" : \"\\u21dc\",\n                                                \"CodeMirror-merge-copy\"));\n      var editOriginals = dv.mv.options.allowEditingOriginals;\n      copy.title = dv.edit.phrase(editOriginals ? \"Push to left\" : \"Revert chunk\");\n      copy.chunk = chunk;\n      copy.style.top = (chunk.origTo > chunk.origFrom ? top : dv.edit.heightAtLine(chunk.editFrom, \"local\") - sTopEdit) + \"px\";\n\n      if (editOriginals) {\n        var topReverse = dv.edit.heightAtLine(chunk.editFrom, \"local\") - sTopEdit;\n        var copyReverse = dv.copyButtons.appendChild(elt(\"div\", dv.type == \"right\" ? \"\\u21dd\" : \"\\u21dc\",\n                                                         \"CodeMirror-merge-copy-reverse\"));\n        copyReverse.title = \"Push to right\";\n        copyReverse.chunk = {editFrom: chunk.origFrom, editTo: chunk.origTo,\n                             origFrom: chunk.editFrom, origTo: chunk.editTo};\n        copyReverse.style.top = topReverse + \"px\";\n        dv.type == \"right\" ? copyReverse.style.left = \"2px\" : copyReverse.style.right = \"2px\";\n      }\n    }\n  }\n\n  function copyChunk(dv, to, from, chunk) {\n    if (dv.diffOutOfDate) return;\n    var origStart = chunk.origTo > from.lastLine() ? Pos(chunk.origFrom - 1) : Pos(chunk.origFrom, 0)\n    var origEnd = Pos(chunk.origTo, 0)\n    var editStart = chunk.editTo > to.lastLine() ? Pos(chunk.editFrom - 1) : Pos(chunk.editFrom, 0)\n    var editEnd = Pos(chunk.editTo, 0)\n    var handler = dv.mv.options.revertChunk\n    if (handler)\n      handler(dv.mv, from, origStart, origEnd, to, editStart, editEnd)\n    else\n      to.replaceRange(from.getRange(origStart, origEnd), editStart, editEnd)\n  }\n\n  // Merge view, containing 0, 1, or 2 diff views.\n\n  var MergeView = CodeMirror.MergeView = function(node, options) {\n    if (!(this instanceof MergeView)) return new MergeView(node, options);\n\n    this.options = options;\n    var origLeft = options.origLeft, origRight = options.origRight == null ? options.orig : options.origRight;\n\n    var hasLeft = origLeft != null, hasRight = origRight != null;\n    var panes = 1 + (hasLeft ? 1 : 0) + (hasRight ? 1 : 0);\n    var wrap = [], left = this.left = null, right = this.right = null;\n    var self = this;\n\n    if (hasLeft) {\n      left = this.left = new DiffView(this, \"left\");\n      var leftPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-left\");\n      wrap.push(leftPane);\n      wrap.push(buildGap(left));\n    }\n\n    var editPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-editor\");\n    wrap.push(editPane);\n\n    if (hasRight) {\n      right = this.right = new DiffView(this, \"right\");\n      wrap.push(buildGap(right));\n      var rightPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-right\");\n      wrap.push(rightPane);\n    }\n\n    (hasRight ? rightPane : editPane).className += \" CodeMirror-merge-pane-rightmost\";\n\n    wrap.push(elt(\"div\", null, null, \"height: 0; clear: both;\"));\n\n    var wrapElt = this.wrap = node.appendChild(elt(\"div\", wrap, \"CodeMirror-merge CodeMirror-merge-\" + panes + \"pane\"));\n    this.edit = CodeMirror(editPane, copyObj(options));\n\n    if (left) left.init(leftPane, origLeft, options);\n    if (right) right.init(rightPane, origRight, options);\n    if (options.collapseIdentical)\n      this.editor().operation(function() {\n        collapseIdenticalStretches(self, options.collapseIdentical);\n      });\n    if (options.connect == \"align\") {\n      this.aligners = [];\n      alignChunks(this.left || this.right, true);\n    }\n    if (left) left.registerEvents(right)\n    if (right) right.registerEvents(left)\n\n\n    var onResize = function() {\n      if (left) makeConnections(left);\n      if (right) makeConnections(right);\n    };\n    CodeMirror.on(window, \"resize\", onResize);\n    var resizeInterval = setInterval(function() {\n      for (var p = wrapElt.parentNode; p && p != document.body; p = p.parentNode) {}\n      if (!p) { clearInterval(resizeInterval); CodeMirror.off(window, \"resize\", onResize); }\n    }, 5000);\n  };\n\n  function buildGap(dv) {\n    var lock = dv.lockButton = elt(\"div\", null, \"CodeMirror-merge-scrolllock\");\n    var lockWrap = elt(\"div\", [lock], \"CodeMirror-merge-scrolllock-wrap\");\n    CodeMirror.on(lock, \"click\", function() { setScrollLock(dv, !dv.lockScroll); });\n    var gapElts = [lockWrap];\n    if (dv.mv.options.revertButtons !== false) {\n      dv.copyButtons = elt(\"div\", null, \"CodeMirror-merge-copybuttons-\" + dv.type);\n      CodeMirror.on(dv.copyButtons, \"click\", function(e) {\n        var node = e.target || e.srcElement;\n        if (!node.chunk) return;\n        if (node.className == \"CodeMirror-merge-copy-reverse\") {\n          copyChunk(dv, dv.orig, dv.edit, node.chunk);\n          return;\n        }\n        copyChunk(dv, dv.edit, dv.orig, node.chunk);\n      });\n      gapElts.unshift(dv.copyButtons);\n    }\n    if (dv.mv.options.connect != \"align\") {\n      var svg = document.createElementNS && document.createElementNS(svgNS, \"svg\");\n      if (svg && !svg.createSVGRect) svg = null;\n      dv.svg = svg;\n      if (svg) gapElts.push(svg);\n    }\n\n    return dv.gap = elt(\"div\", gapElts, \"CodeMirror-merge-gap\");\n  }\n\n  MergeView.prototype = {\n    constructor: MergeView,\n    editor: function() { return this.edit; },\n    rightOriginal: function() { return this.right && this.right.orig; },\n    leftOriginal: function() { return this.left && this.left.orig; },\n    setShowDifferences: function(val) {\n      if (this.right) this.right.setShowDifferences(val);\n      if (this.left) this.left.setShowDifferences(val);\n    },\n    rightChunks: function() {\n      if (this.right) { ensureDiff(this.right); return this.right.chunks; }\n    },\n    leftChunks: function() {\n      if (this.left) { ensureDiff(this.left); return this.left.chunks; }\n    }\n  };\n\n  function asString(obj) {\n    if (typeof obj == \"string\") return obj;\n    else return obj.getValue();\n  }\n\n  // Operations on diffs\n  var dmp;\n  function getDiff(a, b, ignoreWhitespace) {\n    if (!dmp) dmp = new diff_match_patch();\n\n    var diff = dmp.diff_main(a, b);\n    // The library sometimes leaves in empty parts, which confuse the algorithm\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i];\n      if (ignoreWhitespace ? !/[^ \\t]/.test(part[1]) : !part[1]) {\n        diff.splice(i--, 1);\n      } else if (i && diff[i - 1][0] == part[0]) {\n        diff.splice(i--, 1);\n        diff[i][1] += part[1];\n      }\n    }\n    return diff;\n  }\n\n  function getChunks(diff) {\n    var chunks = [];\n    if (!diff.length) return chunks;\n    var startEdit = 0, startOrig = 0;\n    var edit = Pos(0, 0), orig = Pos(0, 0);\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i], tp = part[0];\n      if (tp == DIFF_EQUAL) {\n        var startOff = !startOfLineClean(diff, i) || edit.line < startEdit || orig.line < startOrig ? 1 : 0;\n        var cleanFromEdit = edit.line + startOff, cleanFromOrig = orig.line + startOff;\n        moveOver(edit, part[1], null, orig);\n        var endOff = endOfLineClean(diff, i) ? 1 : 0;\n        var cleanToEdit = edit.line + endOff, cleanToOrig = orig.line + endOff;\n        if (cleanToEdit > cleanFromEdit) {\n          if (i) chunks.push({origFrom: startOrig, origTo: cleanFromOrig,\n                              editFrom: startEdit, editTo: cleanFromEdit});\n          startEdit = cleanToEdit; startOrig = cleanToOrig;\n        }\n      } else {\n        moveOver(tp == DIFF_INSERT ? edit : orig, part[1]);\n      }\n    }\n    if (startEdit <= edit.line || startOrig <= orig.line)\n      chunks.push({origFrom: startOrig, origTo: orig.line + 1,\n                   editFrom: startEdit, editTo: edit.line + 1});\n    return chunks;\n  }\n\n  function endOfLineClean(diff, i) {\n    if (i == diff.length - 1) return true;\n    var next = diff[i + 1][1];\n    if ((next.length == 1 && i < diff.length - 2) || next.charCodeAt(0) != 10) return false;\n    if (i == diff.length - 2) return true;\n    next = diff[i + 2][1];\n    return (next.length > 1 || i == diff.length - 3) && next.charCodeAt(0) == 10;\n  }\n\n  function startOfLineClean(diff, i) {\n    if (i == 0) return true;\n    var last = diff[i - 1][1];\n    if (last.charCodeAt(last.length - 1) != 10) return false;\n    if (i == 1) return true;\n    last = diff[i - 2][1];\n    return last.charCodeAt(last.length - 1) == 10;\n  }\n\n  function chunkBoundariesAround(chunks, n, nInEdit) {\n    var beforeE, afterE, beforeO, afterO;\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      var fromLocal = nInEdit ? chunk.editFrom : chunk.origFrom;\n      var toLocal = nInEdit ? chunk.editTo : chunk.origTo;\n      if (afterE == null) {\n        if (fromLocal > n) { afterE = chunk.editFrom; afterO = chunk.origFrom; }\n        else if (toLocal > n) { afterE = chunk.editTo; afterO = chunk.origTo; }\n      }\n      if (toLocal <= n) { beforeE = chunk.editTo; beforeO = chunk.origTo; }\n      else if (fromLocal <= n) { beforeE = chunk.editFrom; beforeO = chunk.origFrom; }\n    }\n    return {edit: {before: beforeE, after: afterE}, orig: {before: beforeO, after: afterO}};\n  }\n\n  function collapseSingle(cm, from, to) {\n    cm.addLineClass(from, \"wrap\", \"CodeMirror-merge-collapsed-line\");\n    var widget = document.createElement(\"span\");\n    widget.className = \"CodeMirror-merge-collapsed-widget\";\n    widget.title = cm.phrase(\"Identical text collapsed. Click to expand.\");\n    var mark = cm.markText(Pos(from, 0), Pos(to - 1), {\n      inclusiveLeft: true,\n      inclusiveRight: true,\n      replacedWith: widget,\n      clearOnEnter: true\n    });\n    function clear() {\n      mark.clear();\n      cm.removeLineClass(from, \"wrap\", \"CodeMirror-merge-collapsed-line\");\n    }\n    if (mark.explicitlyCleared) clear();\n    CodeMirror.on(widget, \"click\", clear);\n    mark.on(\"clear\", clear);\n    CodeMirror.on(widget, \"click\", clear);\n    return {mark: mark, clear: clear};\n  }\n\n  function collapseStretch(size, editors) {\n    var marks = [];\n    function clear() {\n      for (var i = 0; i < marks.length; i++) marks[i].clear();\n    }\n    for (var i = 0; i < editors.length; i++) {\n      var editor = editors[i];\n      var mark = collapseSingle(editor.cm, editor.line, editor.line + size);\n      marks.push(mark);\n      mark.mark.on(\"clear\", clear);\n    }\n    return marks[0].mark;\n  }\n\n  function unclearNearChunks(dv, margin, off, clear) {\n    for (var i = 0; i < dv.chunks.length; i++) {\n      var chunk = dv.chunks[i];\n      for (var l = chunk.editFrom - margin; l < chunk.editTo + margin; l++) {\n        var pos = l + off;\n        if (pos >= 0 && pos < clear.length) clear[pos] = false;\n      }\n    }\n  }\n\n  function collapseIdenticalStretches(mv, margin) {\n    if (typeof margin != \"number\") margin = 2;\n    var clear = [], edit = mv.editor(), off = edit.firstLine();\n    for (var l = off, e = edit.lastLine(); l <= e; l++) clear.push(true);\n    if (mv.left) unclearNearChunks(mv.left, margin, off, clear);\n    if (mv.right) unclearNearChunks(mv.right, margin, off, clear);\n\n    for (var i = 0; i < clear.length; i++) {\n      if (clear[i]) {\n        var line = i + off;\n        for (var size = 1; i < clear.length - 1 && clear[i + 1]; i++, size++) {}\n        if (size > margin) {\n          var editors = [{line: line, cm: edit}];\n          if (mv.left) editors.push({line: getMatchingOrigLine(line, mv.left.chunks), cm: mv.left.orig});\n          if (mv.right) editors.push({line: getMatchingOrigLine(line, mv.right.chunks), cm: mv.right.orig});\n          var mark = collapseStretch(size, editors);\n          if (mv.options.onCollapse) mv.options.onCollapse(mv, line, size, mark);\n        }\n      }\n    }\n  }\n\n  // General utilities\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) e.className = className;\n    if (style) e.style.cssText = style;\n    if (typeof content == \"string\") e.appendChild(document.createTextNode(content));\n    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);\n    return e;\n  }\n\n  function clear(node) {\n    for (var count = node.childNodes.length; count > 0; --count)\n      node.removeChild(node.firstChild);\n  }\n\n  function attrs(elt) {\n    for (var i = 1; i < arguments.length; i += 2)\n      elt.setAttribute(arguments[i], arguments[i+1]);\n  }\n\n  function copyObj(obj, target) {\n    if (!target) target = {};\n    for (var prop in obj) if (obj.hasOwnProperty(prop)) target[prop] = obj[prop];\n    return target;\n  }\n\n  function moveOver(pos, str, copy, other) {\n    var out = copy ? Pos(pos.line, pos.ch) : pos, at = 0;\n    for (;;) {\n      var nl = str.indexOf(\"\\n\", at);\n      if (nl == -1) break;\n      ++out.line;\n      if (other) ++other.line;\n      at = nl + 1;\n    }\n    out.ch = (at ? 0 : out.ch) + (str.length - at);\n    if (other) other.ch = (at ? 0 : other.ch) + (str.length - at);\n    return out;\n  }\n\n  // Tracks collapsed markers and line widgets, in order to be able to\n  // accurately align the content of two editors.\n\n  var F_WIDGET = 1, F_WIDGET_BELOW = 2, F_MARKER = 4\n\n  function TrackAlignable(cm) {\n    this.cm = cm\n    this.alignable = []\n    this.height = cm.doc.height\n    var self = this\n    cm.on(\"markerAdded\", function(_, marker) {\n      if (!marker.collapsed) return\n      var found = marker.find(1)\n      if (found != null) self.set(found.line, F_MARKER)\n    })\n    cm.on(\"markerCleared\", function(_, marker, _min, max) {\n      if (max != null && marker.collapsed)\n        self.check(max, F_MARKER, self.hasMarker)\n    })\n    cm.on(\"markerChanged\", this.signal.bind(this))\n    cm.on(\"lineWidgetAdded\", function(_, widget, lineNo) {\n      if (widget.mergeSpacer) return\n      if (widget.above) self.set(lineNo - 1, F_WIDGET_BELOW)\n      else self.set(lineNo, F_WIDGET)\n    })\n    cm.on(\"lineWidgetCleared\", function(_, widget, lineNo) {\n      if (widget.mergeSpacer) return\n      if (widget.above) self.check(lineNo - 1, F_WIDGET_BELOW, self.hasWidgetBelow)\n      else self.check(lineNo, F_WIDGET, self.hasWidget)\n    })\n    cm.on(\"lineWidgetChanged\", this.signal.bind(this))\n    cm.on(\"change\", function(_, change) {\n      var start = change.from.line, nBefore = change.to.line - change.from.line\n      var nAfter = change.text.length - 1, end = start + nAfter\n      if (nBefore || nAfter) self.map(start, nBefore, nAfter)\n      self.check(end, F_MARKER, self.hasMarker)\n      if (nBefore || nAfter) self.check(change.from.line, F_MARKER, self.hasMarker)\n    })\n    cm.on(\"viewportChange\", function() {\n      if (self.cm.doc.height != self.height) self.signal()\n    })\n  }\n\n  TrackAlignable.prototype = {\n    signal: function() {\n      CodeMirror.signal(this, \"realign\")\n      this.height = this.cm.doc.height\n    },\n\n    set: function(n, flags) {\n      var pos = -1\n      for (; pos < this.alignable.length; pos += 2) {\n        var diff = this.alignable[pos] - n\n        if (diff == 0) {\n          if ((this.alignable[pos + 1] & flags) == flags) return\n          this.alignable[pos + 1] |= flags\n          this.signal()\n          return\n        }\n        if (diff > 0) break\n      }\n      this.signal()\n      this.alignable.splice(pos, 0, n, flags)\n    },\n\n    find: function(n) {\n      for (var i = 0; i < this.alignable.length; i += 2)\n        if (this.alignable[i] == n) return i\n      return -1\n    },\n\n    check: function(n, flag, pred) {\n      var found = this.find(n)\n      if (found == -1 || !(this.alignable[found + 1] & flag)) return\n      if (!pred.call(this, n)) {\n        this.signal()\n        var flags = this.alignable[found + 1] & ~flag\n        if (flags) this.alignable[found + 1] = flags\n        else this.alignable.splice(found, 2)\n      }\n    },\n\n    hasMarker: function(n) {\n      var handle = this.cm.getLineHandle(n)\n      if (handle.markedSpans) for (var i = 0; i < handle.markedSpans.length; i++)\n        if (handle.markedSpans[i].marker.collapsed && handle.markedSpans[i].to != null)\n          return true\n      return false\n    },\n\n    hasWidget: function(n) {\n      var handle = this.cm.getLineHandle(n)\n      if (handle.widgets) for (var i = 0; i < handle.widgets.length; i++)\n        if (!handle.widgets[i].above && !handle.widgets[i].mergeSpacer) return true\n      return false\n    },\n\n    hasWidgetBelow: function(n) {\n      if (n == this.cm.lastLine()) return false\n      var handle = this.cm.getLineHandle(n + 1)\n      if (handle.widgets) for (var i = 0; i < handle.widgets.length; i++)\n        if (handle.widgets[i].above && !handle.widgets[i].mergeSpacer) return true\n      return false\n    },\n\n    map: function(from, nBefore, nAfter) {\n      var diff = nAfter - nBefore, to = from + nBefore, widgetFrom = -1, widgetTo = -1\n      for (var i = 0; i < this.alignable.length; i += 2) {\n        var n = this.alignable[i]\n        if (n == from && (this.alignable[i + 1] & F_WIDGET_BELOW)) widgetFrom = i\n        if (n == to && (this.alignable[i + 1] & F_WIDGET_BELOW)) widgetTo = i\n        if (n <= from) continue\n        else if (n < to) this.alignable.splice(i--, 2)\n        else this.alignable[i] += diff\n      }\n      if (widgetFrom > -1) {\n        var flags = this.alignable[widgetFrom + 1]\n        if (flags == F_WIDGET_BELOW) this.alignable.splice(widgetFrom, 2)\n        else this.alignable[widgetFrom + 1] = flags & ~F_WIDGET_BELOW\n      }\n      if (widgetTo > -1 && nAfter)\n        this.set(from + nAfter, F_WIDGET_BELOW)\n    }\n  }\n\n  function posMin(a, b) { return (a.line - b.line || a.ch - b.ch) < 0 ? a : b; }\n  function posMax(a, b) { return (a.line - b.line || a.ch - b.ch) > 0 ? a : b; }\n  function posEq(a, b) { return a.line == b.line && a.ch == b.ch; }\n\n  function findPrevDiff(chunks, start, isOrig) {\n    for (var i = chunks.length - 1; i >= 0; i--) {\n      var chunk = chunks[i];\n      var to = (isOrig ? chunk.origTo : chunk.editTo) - 1;\n      if (to < start) return to;\n    }\n  }\n\n  function findNextDiff(chunks, start, isOrig) {\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      var from = (isOrig ? chunk.origFrom : chunk.editFrom);\n      if (from > start) return from;\n    }\n  }\n\n  function goNearbyDiff(cm, dir) {\n    var found = null, views = cm.state.diffViews, line = cm.getCursor().line;\n    if (views) for (var i = 0; i < views.length; i++) {\n      var dv = views[i], isOrig = cm == dv.orig;\n      ensureDiff(dv);\n      var pos = dir < 0 ? findPrevDiff(dv.chunks, line, isOrig) : findNextDiff(dv.chunks, line, isOrig);\n      if (pos != null && (found == null || (dir < 0 ? pos > found : pos < found)))\n        found = pos;\n    }\n    if (found != null)\n      cm.setCursor(found, 0);\n    else\n      return CodeMirror.Pass;\n  }\n\n  CodeMirror.commands.goNextDiff = function(cm) {\n    return goNearbyDiff(cm, 1);\n  };\n  CodeMirror.commands.goPrevDiff = function(cm) {\n    return goNearbyDiff(cm, -1);\n  };\n});\n","/*** IMPORTS FROM imports-loader ***/\n'use strict';\nimport CodeMirror from \"codemirror\";\n\n/**\n * codemirror-spell-checker v1.0.6\n * Copyright Next Step Webs, Inc.\n * @link https://github.com/NextStepWebs/codemirror-spell-checker\n * @license MIT\n */\n\"use strict\";var Typo=function(e,t,r,n){if(n=n||{},this.platform=n.platform||\"chrome\",this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=n.flags||{},e){if(this.dictionary=e,\"chrome\"==this.platform)t||(t=this._readFile(chrome.extension.getURL(\"lib/typo/dictionaries/\"+e+\"/\"+e+\".aff\"))),r||(r=this._readFile(chrome.extension.getURL(\"lib/typo/dictionaries/\"+e+\"/\"+e+\".dic\")));else{var i=n.dictionaryPath||\"\";t||(t=this._readFile(i+\"/\"+e+\"/\"+e+\".aff\")),r||(r=this._readFile(i+\"/\"+e+\"/\"+e+\".dic\"))}this.rules=this._parseAFF(t),this.compoundRuleCodes={};for(var a=0,s=this.compoundRules.length;s>a;a++)for(var o=this.compoundRules[a],l=0,u=o.length;u>l;l++)this.compoundRuleCodes[o[l]]=[];\"ONLYINCOMPOUND\"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]),this.dictionaryTable=this._parseDIC(r);for(var a in this.compoundRuleCodes)0==this.compoundRuleCodes[a].length&&delete this.compoundRuleCodes[a];for(var a=0,s=this.compoundRules.length;s>a;a++){for(var h=this.compoundRules[a],c=\"\",l=0,u=h.length;u>l;l++){var p=h[l];c+=p in this.compoundRuleCodes?\"(\"+this.compoundRuleCodes[p].join(\"|\")+\")\":p}this.compoundRules[a]=RegExp(c,\"i\")}}return this};Typo.prototype={load:function(e){for(var t in e)this[t]=e[t];return this},_readFile:function(e,t){t||(t=\"ISO8859-1\");var r=new XMLHttpRequest;return r.open(\"GET\",e,!1),r.overrideMimeType&&r.overrideMimeType(\"text/plain; charset=\"+t),r.send(null),r.responseText},_parseAFF:function(e){var t={};e=this._removeAffixComments(e);for(var r=e.split(\"\\n\"),n=0,i=r.length;i>n;n++){var a=r[n],s=a.split(/\\s+/),o=s[0];if(\"PFX\"==o||\"SFX\"==o){for(var l=s[1],u=s[2],h=parseInt(s[3],10),c=[],p=n+1,f=n+1+h;f>p;p++){var a=r[p],d=a.split(/\\s+/),v=d[2],g=d[3].split(\"/\"),m=g[0];\"0\"===m&&(m=\"\");var y=this.parseRuleCodes(g[1]),_=d[4],C={};C.add=m,y.length>0&&(C.continuationClasses=y),\".\"!==_&&(C.match=RegExp(\"SFX\"===o?_+\"$\":\"^\"+_)),\"0\"!=v&&(C.remove=\"SFX\"===o?RegExp(v+\"$\"):v),c.push(C)}t[l]={type:o,combineable:\"Y\"==u,entries:c},n+=h}else if(\"COMPOUNDRULE\"===o){for(var h=parseInt(s[1],10),p=n+1,f=n+1+h;f>p;p++){var a=r[p],d=a.split(/\\s+/);this.compoundRules.push(d[1])}n+=h}else if(\"REP\"===o){var d=a.split(/\\s+/);3===d.length&&this.replacementTable.push([d[1],d[2]])}else this.flags[o]=s[1]}return t},_removeAffixComments:function(e){return e=e.replace(/#.*$/gm,\"\"),e=e.replace(/^\\s\\s*/m,\"\").replace(/\\s\\s*$/m,\"\"),e=e.replace(/\\n{2,}/g,\"\\n\"),e=e.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\")},_parseDIC:function(e){function t(e,t){e in n&&\"object\"==typeof n[e]||(n[e]=[]),n[e].push(t)}e=this._removeDicComments(e);for(var r=e.split(\"\\n\"),n={},i=1,a=r.length;a>i;i++){var s=r[i],o=s.split(\"/\",2),l=o[0];if(o.length>1){var u=this.parseRuleCodes(o[1]);\"NEEDAFFIX\"in this.flags&&-1!=u.indexOf(this.flags.NEEDAFFIX)||t(l,u);for(var h=0,c=u.length;c>h;h++){var p=u[h],f=this.rules[p];if(f)for(var d=this._applyRule(l,f),v=0,g=d.length;g>v;v++){var m=d[v];if(t(m,[]),f.combineable)for(var y=h+1;c>y;y++){var _=u[y],C=this.rules[_];if(C&&C.combineable&&f.type!=C.type)for(var R=this._applyRule(m,C),b=0,F=R.length;F>b;b++){var x=R[b];t(x,[])}}}p in this.compoundRuleCodes&&this.compoundRuleCodes[p].push(l)}}else t(l.trim(),[])}return n},_removeDicComments:function(e){return e=e.replace(/^\\t.*$/gm,\"\")},parseRuleCodes:function(e){if(!e)return[];if(!(\"FLAG\"in this.flags))return e.split(\"\");if(\"long\"===this.flags.FLAG){for(var t=[],r=0,n=e.length;n>r;r+=2)t.push(e.substr(r,2));return t}return\"num\"===this.flags.FLAG?textCode.split(\",\"):void 0},_applyRule:function(e,t){for(var r=t.entries,n=[],i=0,a=r.length;a>i;i++){var s=r[i];if(!s.match||e.match(s.match)){var o=e;if(s.remove&&(o=o.replace(s.remove,\"\")),\"SFX\"===t.type?o+=s.add:o=s.add+o,n.push(o),\"continuationClasses\"in s)for(var l=0,u=s.continuationClasses.length;u>l;l++){var h=this.rules[s.continuationClasses[l]];h&&(n=n.concat(this._applyRule(o,h)))}}}return n},check:function(e){var t=e.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var r=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(r,\"KEEPCASE\"))return!1;if(this.checkExact(r))return!0}var n=t.toLowerCase();if(n!==t){if(this.hasFlag(n,\"KEEPCASE\"))return!1;if(this.checkExact(n))return!0}return!1},checkExact:function(e){var t=this.dictionaryTable[e];if(void 0===t){if(\"COMPOUNDMIN\"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(var r=0,n=this.compoundRules.length;n>r;r++)if(e.match(this.compoundRules[r]))return!0;return!1}for(var r=0,n=t.length;n>r;r++)if(!this.hasFlag(e,\"ONLYINCOMPOUND\",t[r]))return!0;return!1},hasFlag:function(e,t,r){if(t in this.flags){if(void 0===r)var r=Array.prototype.concat.apply([],this.dictionaryTable[e]);if(r&&-1!==r.indexOf(this.flags[t]))return!0}return!1},alphabet:\"\",suggest:function(e,t){function r(e){for(var t=[],r=0,n=e.length;n>r;r++){for(var i=e[r],a=[],s=0,o=i.length+1;o>s;s++)a.push([i.substring(0,s),i.substring(s,i.length)]);for(var l=[],s=0,o=a.length;o>s;s++){var h=a[s];h[1]&&l.push(h[0]+h[1].substring(1))}for(var c=[],s=0,o=a.length;o>s;s++){var h=a[s];h[1].length>1&&c.push(h[0]+h[1][1]+h[1][0]+h[1].substring(2))}for(var p=[],s=0,o=a.length;o>s;s++){var h=a[s];if(h[1])for(var f=0,d=u.alphabet.length;d>f;f++)p.push(h[0]+u.alphabet[f]+h[1].substring(1))}for(var v=[],s=0,o=a.length;o>s;s++){var h=a[s];if(h[1])for(var f=0,d=u.alphabet.length;d>f;f++)p.push(h[0]+u.alphabet[f]+h[1])}t=t.concat(l),t=t.concat(c),t=t.concat(p),t=t.concat(v)}return t}function n(e){for(var t=[],r=0;r<e.length;r++)u.check(e[r])&&t.push(e[r]);return t}function i(e){function i(e,t){return e[1]<t[1]?-1:1}for(var a=r([e]),s=r(a),o=n(a).concat(n(s)),l={},h=0,c=o.length;c>h;h++)o[h]in l?l[o[h]]+=1:l[o[h]]=1;var p=[];for(var h in l)p.push([h,l[h]]);p.sort(i).reverse();for(var f=[],h=0,c=Math.min(t,p.length);c>h;h++)u.hasFlag(p[h][0],\"NOSUGGEST\")||f.push(p[h][0]);return f}if(t||(t=5),this.check(e))return[];for(var a=0,s=this.replacementTable.length;s>a;a++){var o=this.replacementTable[a];if(-1!==e.indexOf(o[0])){var l=e.replace(o[0],o[1]);if(this.check(l))return[l]}}var u=this;return u.alphabet=\"abcdefghijklmnopqrstuvwxyz\",i(e)}};window.num_loaded=0;var aff_loading=!1,dic_loading=!1,aff_data=\"\",dic_data=\"\",typo;CodeMirror.defineMode(\"spell-checker\",function(e){if(!aff_loading){aff_loading=!0;var t=new XMLHttpRequest;t.open(\"GET\",serverurl+\"/vendor/codemirror-spell-checker/en_US.aff\",!0),t.onload=function(){4===t.readyState&&200===t.status&&(aff_data=t.responseText,num_loaded++,2==num_loaded&&(typo=new Typo(\"en_US\",aff_data,dic_data,{platform:\"any\"})))},t.send(null)}if(!dic_loading){dic_loading=!0;var r=new XMLHttpRequest;r.open(\"GET\",serverurl+\"/vendor/codemirror-spell-checker/en_US.dic\",!0),r.onload=function(){4===r.readyState&&200===r.status&&(dic_data=r.responseText,num_loaded++,2==num_loaded&&(typo=new Typo(\"en_US\",aff_data,dic_data,{platform:\"any\"})))},r.send(null)}var n=\"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \",i=/^[A-Za-z][A-Za-z0-9']+$/,a={token:function(e){var t=e.peek(),r=\"\";if(n.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!n.includes(t);)r+=t,e.next();return i.test(r)&&typo&&!typo.check(r)?\"spell-error\":null}},s=CodeMirror.getMode(e,e.backdrop||\"text/plain\");return CodeMirror.overlayMode(s,a,!0)}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});\n","/*jslint newcap: true */\n/*global XMLHttpRequest: false, FormData: false */\n/*\n * Inline Text Attachment\n *\n * Author: Roy van Kaathoven\n * Contact: ik@royvankaathoven.nl\n */\n(function(document, window) {\n  'use strict';\n\n  var inlineAttachment = function(options, instance) {\n    this.settings = inlineAttachment.util.merge(options, inlineAttachment.defaults);\n    this.editor = instance;\n    this.filenameTag = '{filename}';\n    this.lastValue = null;\n  };\n\n  /**\n   * Will holds the available editors\n   *\n   * @type {Object}\n   */\n  inlineAttachment.editors = {};\n\n  /**\n   * Utility functions\n   */\n  inlineAttachment.util = {\n\n    /**\n     * Simple function to merge the given objects\n     *\n     * @param {Object[]} object Multiple object parameters\n     * @returns {Object}\n     */\n    merge: function() {\n      var result = {};\n      for (var i = arguments.length - 1; i >= 0; i--) {\n        var obj = arguments[i];\n        for (var k in obj) {\n          if (obj.hasOwnProperty(k)) {\n            result[k] = obj[k];\n          }\n        }\n      }\n      return result;\n    },\n\n    /**\n     * Append a line of text at the bottom, ensuring there aren't unnecessary newlines\n     *\n     * @param {String} appended Current content\n     * @param {String} previous Value which should be appended after the current content\n     */\n    appendInItsOwnLine: function(previous, appended) {\n      return (previous + \"\\n\\n[[D]]\" + appended)\n        .replace(/(\\n{2,})\\[\\[D\\]\\]/, \"\\n\\n\")\n        .replace(/^(\\n*)/, \"\");\n    },\n\n    /**\n     * Inserts the given value at the current cursor position of the textarea element\n     *\n     * @param  {HtmlElement} el\n     * @param  {String} value Text which will be inserted at the cursor position\n     */\n    insertTextAtCursor: function(el, text) {\n      var scrollPos = el.scrollTop,\n        strPos = 0,\n        browser = false,\n        range;\n\n      if ((el.selectionStart || el.selectionStart === '0')) {\n        browser = \"ff\";\n      } else if (document.selection) {\n        browser = \"ie\";\n      }\n\n      if (browser === \"ie\") {\n        el.focus();\n        range = document.selection.createRange();\n        range.moveStart('character', -el.value.length);\n        strPos = range.text.length;\n      } else if (browser === \"ff\") {\n        strPos = el.selectionStart;\n      }\n\n      var front = (el.value).substring(0, strPos);\n      var back = (el.value).substring(strPos, el.value.length);\n      el.value = front + text + back;\n      strPos = strPos + text.length;\n      if (browser === \"ie\") {\n        el.focus();\n        range = document.selection.createRange();\n        range.moveStart('character', -el.value.length);\n        range.moveStart('character', strPos);\n        range.moveEnd('character', 0);\n        range.select();\n      } else if (browser === \"ff\") {\n        el.selectionStart = strPos;\n        el.selectionEnd = strPos;\n        el.focus();\n      }\n      el.scrollTop = scrollPos;\n    }\n  };\n\n  /**\n   * Default configuration options\n   *\n   * @type {Object}\n   */\n  inlineAttachment.defaults = {\n    /**\n     * URL where the file will be send\n     */\n    uploadUrl: 'uploadimage',\n\n    /**\n     * Which method will be used to send the file to the upload URL\n     */\n    uploadMethod: 'POST',\n\n    /**\n     * Name in which the file will be placed\n     */\n    uploadFieldName: 'image',\n\n    /**\n     * Extension which will be used when a file extension could not\n     * be detected\n     */\n    defaultExtension: 'png',\n\n    /**\n     * JSON field which refers to the uploaded file URL\n     */\n    jsonFieldName: 'link',\n\n    /**\n     * Allowed MIME types\n     */\n    allowedTypes: window.allowedUploadMimeTypes,\n\n    /**\n     * Text which will be inserted when dropping or pasting a file.\n     * Acts as a placeholder which will be replaced when the file is done with uploading\n     */\n    progressText: '![Uploading file...{filename}]()',\n\n    /**\n     * When a file has successfully been uploaded the progressText\n     * will be replaced by the urlText, the {filename} tag will be replaced\n     * by the filename that has been returned by the server\n     */\n    urlText: \"![]({filename})\",\n\n    /**\n     * Text which will be used when uploading has failed\n     */\n    errorText: \"Error uploading file\",\n\n    /**\n     * Extra parameters which will be send when uploading a file\n     */\n    extraParams: {},\n\n    /**\n     * Extra headers which will be send when uploading a file\n     */\n    extraHeaders: {},\n\n    /**\n     * Before the file is send\n     */\n    beforeFileUpload: function() {\n      return true;\n    },\n\n    /**\n     * Triggers when a file is dropped or pasted\n     */\n    onFileReceived: function() {},\n\n    /**\n     * Custom upload handler\n     *\n     * @return {Boolean} when false is returned it will prevent default upload behavior\n     */\n    onFileUploadResponse: function() {\n      return true;\n    },\n\n    /**\n     * Custom error handler. Runs after removing the placeholder text and before the alert().\n     * Return false from this function to prevent the alert dialog.\n     *\n     * @return {Boolean} when false is returned it will prevent default error behavior\n     */\n    onFileUploadError: function() {\n      return true;\n    },\n\n    /**\n     * When a file has succesfully been uploaded\n     */\n    onFileUploaded: function() {}\n  };\n\n  /**\n   * Uploads the blob\n   *\n   * @param  {Blob} file blob data received from event.dataTransfer object\n   * @return {XMLHttpRequest} request object which sends the file\n   */\n  inlineAttachment.prototype.uploadFile = function(file, id) {\n    var me = this,\n      formData = new FormData(),\n      xhr = new XMLHttpRequest(),\n      id = id,\n      settings = this.settings,\n      extension = settings.defaultExtension;\n\n    if (typeof settings.setupFormData === 'function') {\n      settings.setupFormData(formData, file);\n    }\n\n    // Attach the file. If coming from clipboard, add a default filename (only works in Chrome for now)\n    // http://stackoverflow.com/questions/6664967/how-to-give-a-blob-uploaded-as-formdata-a-file-name\n    if (file.name) {\n      var fileNameMatches = file.name.match(/\\.(.+)$/);\n      if (fileNameMatches) {\n        extension = fileNameMatches[1];\n      }\n    }\n\n    var remoteFilename = \"image-\" + Date.now() + \".\" + extension;\n    if (typeof settings.remoteFilename === 'function') {\n      remoteFilename = settings.remoteFilename(file);\n    }\n\n    formData.append(settings.uploadFieldName, file, remoteFilename);\n\n    // Append the extra parameters to the formdata\n    if (typeof settings.extraParams === \"object\") {\n      for (var key in settings.extraParams) {\n        if (settings.extraParams.hasOwnProperty(key)) {\n          formData.append(key, settings.extraParams[key]);\n        }\n      }\n    }\n\n    xhr.open('POST', settings.uploadUrl);\n\n    // Add any available extra headers\n    if (typeof settings.extraHeaders === \"object\") {\n        for (var header in settings.extraHeaders) {\n            if (settings.extraHeaders.hasOwnProperty(header)) {\n                xhr.setRequestHeader(header, settings.extraHeaders[header]);\n            }\n        }\n    }\n\n    xhr.onload = function() {\n      // If HTTP status is OK or Created\n      if (xhr.status === 200 || xhr.status === 201) {\n        me.onFileUploadResponse(xhr, id);\n      } else {\n        me.onFileUploadError(xhr, id);\n      }\n    };\n    if (settings.beforeFileUpload(xhr) !== false) {\n      xhr.send(formData);\n    }\n    return xhr;\n  };\n\n  /**\n   * Returns if the given file is allowed to handle\n   *\n   * @param {File} clipboard data file\n   */\n  inlineAttachment.prototype.isFileAllowed = function(file) {\n    if (this.settings.allowedTypes.indexOf('*') === 0){\n      return true;\n    } else {\n      return this.settings.allowedTypes.indexOf(file.type) >= 0;\n    }\n  };\n\n  /**\n   * Handles upload response\n   *\n   * @param  {XMLHttpRequest} xhr\n   * @return {Void}\n   */\n  inlineAttachment.prototype.onFileUploadResponse = function(xhr, id) {\n    if (this.settings.onFileUploadResponse.call(this, xhr) !== false) {\n      var result = JSON.parse(xhr.responseText),\n        filename = result[this.settings.jsonFieldName];\n\n      if (result && filename) {\n          var replacements = [];\n          var string = this.settings.progressText.replace(this.filenameTag, id);\n          var lines = this.editor.getValue().split('\\n');\n        var newValue = this.settings.urlText.replace(this.filenameTag, filename);\n          for(var i = 0; i < lines.length; i++) {\n            var ch = lines[i].indexOf(string);\n            if(ch != -1)\n                replacements.push({replacement:newValue, from:{line:i, ch:ch}, to:{line:i, ch:ch + string.length}});\n        }\n          for(var i = 0; i < replacements.length; i++)\n            this.editor.replaceRange(replacements[i]);\n      }\n    }\n  };\n\n\n  /**\n   * Called when a file has failed to upload\n   *\n   * @param  {XMLHttpRequest} xhr\n   * @return {Void}\n   */\n  inlineAttachment.prototype.onFileUploadError = function(xhr, id) {\n    if (this.settings.onFileUploadError.call(this, xhr) !== false) {\n      var replacements = [];\n      var string = this.settings.progressText.replace(this.filenameTag, id);\n      var lines = this.editor.getValue().split('\\n');\n        for(var i = 0; i < lines.length; i++) {\n            var ch = lines[i].indexOf(this.lastValue);\n            if(ch != -1)\n                replacements.push({replacement:\"\", from:{line:i, ch:ch}, to:{line:i, ch:ch + string.length}});\n        }\n        for(var i = 0; i < replacements.length; i++)\n            this.editor.replaceRange(replacements[i]);\n    }\n  };\n\n  /**\n   * Called when a file has been inserted, either by drop or paste\n   *\n   * @param  {File} file\n   * @return {Void}\n   */\n  inlineAttachment.prototype.onFileInserted = function(file, id) {\n    if (this.settings.onFileReceived.call(this, file) !== false) {\n      this.lastValue = this.settings.progressText.replace(this.filenameTag, id);\n      this.editor.insertValue(this.lastValue + \"\\n\");\n    }\n  };\n\n\n  /**\n   * Called when a paste event occured\n   * @param  {Event} e\n   * @return {Boolean} if the event was handled\n   */\n  inlineAttachment.prototype.onPaste = function(e) {\n    var result = false,\n      clipboardData = e.clipboardData,\n      items;\n\n    if (typeof clipboardData === \"object\") {\n      items = clipboardData.items || clipboardData.files || [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        if (this.isFileAllowed(item)) {\n          result = true;\n          var id = ID();\n          var file = item.getAsFile();\n          if (file !== null) {\n            this.onFileInserted(file, id);\n            this.uploadFile(file, id);\n          }\n        }\n      }\n    }\n\n    if (result) { e.preventDefault(); }\n\n    return result;\n  };\n\n  /**\n   * Called when a drop event occures\n   * @param  {Event} e\n   * @return {Boolean} if the event was handled\n   */\n  inlineAttachment.prototype.onDrop = function(e) {\n    var result = false;\n    for (var i = 0; i < e.dataTransfer.files.length; i++) {\n      var file = e.dataTransfer.files[i];\n      if (this.isFileAllowed(file)) {\n        result = true;\n        var id = ID();\n        this.onFileInserted(file, id);\n        this.uploadFile(file, id);\n      }\n    }\n\n    return result;\n  };\n\n  window.inlineAttachment = inlineAttachment;\n\n})(document, window);\n\n// Generate unique IDs for use as pseudo-private/protected names.\n// Similar in concept to\n// <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\n//\n// The goals of this function are twofold:\n//\n// * Provide a way to generate a string guaranteed to be unique when compared\n//   to other strings generated by this function.\n// * Make the string complex enough that it is highly unlikely to be\n//   accidentally duplicated by hand (this is key if you're using `ID`\n//   as a private/protected name on an object).\n//\n// Use:\n//\n//     var privateName = ID();\n//     var o = { 'public': 'foo' };\n//     o[privateName] = 'bar';\nvar ID = function () {\n  // Math.random should be unique because of its seeding algorithm.\n  // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n  // after the decimal.\n  return '_' + Math.random().toString(36).substr(2, 9);\n};\n","/*jslint newcap: true */\n/*global inlineAttachment: false */\n/**\n * CodeMirror version for inlineAttachment\n *\n * Call inlineAttachment.attach(editor) to attach to a codemirror instance\n */\n(function() {\n  'use strict';\n\n  var codeMirrorEditor = function(instance) {\n\n    if (!instance.getWrapperElement) {\n      throw \"Invalid CodeMirror object given\";\n    }\n\n    this.codeMirror = instance;\n  };\n\n  codeMirrorEditor.prototype.getValue = function() {\n    return this.codeMirror.getValue();\n  };\n\n  codeMirrorEditor.prototype.insertValue = function(val) {\n    this.codeMirror.replaceSelection(val);\n  };\n\n  codeMirrorEditor.prototype.setValue = function(val) {\n    var cursor = this.codeMirror.getCursor();\n    this.codeMirror.setValue(val);\n    this.codeMirror.setCursor(cursor);\n  };\n    \n  codeMirrorEditor.prototype.replaceRange = function(val) {\n    this.codeMirror.replaceRange(val.replacement, val.from, val.to, \"+input\");\n  };\n\n  /**\n   * Attach InlineAttachment to CodeMirror\n   *\n   * @param {CodeMirror} codeMirror\n   */\n  codeMirrorEditor.attach = function(codeMirror, options) {\n\n    options = options || {};\n\n    var editor = new codeMirrorEditor(codeMirror),\n      inlineattach = new inlineAttachment(options, editor),\n      el = codeMirror.getWrapperElement();\n\n    el.addEventListener('paste', function(e) {\n      inlineattach.onPaste(e);\n    }, false);\n\n    codeMirror.setOption('onDragEvent', function(data, e) {\n      if (e.type === \"drop\") {\n        e.stopPropagation();\n        e.preventDefault();\n        return inlineattach.onDrop(e);\n      }\n    });\n  };\n\n  inlineAttachment.editors.codemirror3 = codeMirrorEditor;\n\n  var codeMirrorEditor4 = function(instance) {\n    codeMirrorEditor.call(this, instance);\n  };\n\n  codeMirrorEditor4.attach = function(codeMirror, options) {\n\n    options = options || {};\n\n    var editor = new codeMirrorEditor(codeMirror),\n      inlineattach = new inlineAttachment(options, editor),\n      el = codeMirror.getWrapperElement();\n\n    el.addEventListener('paste', function(e) {\n      inlineattach.onPaste(e);\n    }, false);\n\n    codeMirror.on('drop', function(data, e) {\n      if (inlineattach.onDrop(e)) {\n        e.stopPropagation();\n        e.preventDefault();\n        return true;\n      } else {\n        return false;\n      }\n    });\n      \n    return inlineattach;\n  };\n\n  inlineAttachment.editors.codemirror4 = codeMirrorEditor4;\n\n})();","const wrapSymbols = ['*', '_', '~', '^', '+', '=']\n\nexport function wrapTextWith (editor, cm, symbol) {\n  if (!cm.getSelection()) {\n    return CodeMirror.Pass\n  } else {\n    const ranges = cm.listSelections()\n    for (let i = 0; i < ranges.length; i++) {\n      const range = ranges[i]\n      if (!range.empty()) {\n        const from = range.from()\n        const to = range.to()\n\n        if (symbol !== 'Backspace') {\n          const selection = cm.getRange(from, to)\n          const anchorIndex = editor.indexFromPos(ranges[i].anchor)\n          const headIndex = editor.indexFromPos(ranges[i].head)\n          cm.replaceRange(symbol + selection + symbol, from, to, '+input')\n          if (anchorIndex > headIndex) {\n            ranges[i].anchor.ch += symbol.length\n            ranges[i].head.ch += symbol.length\n          } else {\n            ranges[i].head.ch += symbol.length\n            ranges[i].anchor.ch += symbol.length\n          }\n          cm.setSelections(ranges)\n        } else {\n          const preEndPos = {\n            line: to.line,\n            ch: to.ch + symbol.length\n          }\n          const preText = cm.getRange(to, preEndPos)\n          const preIndex = wrapSymbols.indexOf(preText)\n          const postEndPos = {\n            line: from.line,\n            ch: from.ch - symbol.length\n          }\n          const postText = cm.getRange(postEndPos, from)\n          const postIndex = wrapSymbols.indexOf(postText)\n          // check if surround symbol are list in array and matched\n          if (preIndex > -1 && postIndex > -1 && preIndex === postIndex) {\n            cm.replaceRange('', to, preEndPos, '+delete')\n            cm.replaceRange('', postEndPos, from, '+delete')\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function insertText (cm, text, cursorEnd = 0) {\n  const cursor = cm.getCursor()\n  cm.replaceSelection(text, cursor, cursor)\n  cm.focus()\n  cm.setCursor({ line: cursor.line, ch: cursor.ch + cursorEnd })\n}\n\nexport function insertLink (cm, isImage) {\n  const cursor = cm.getCursor()\n  const ranges = cm.listSelections()\n  const linkEnd = '](https://)'\n  const symbol = (isImage) ? '![' : '['\n\n  for (let i = 0; i < ranges.length; i++) {\n    const range = ranges[i]\n    if (!range.empty()) {\n      const from = range.from()\n      const to = range.to()\n      const anchorIndex = editor.indexFromPos(ranges[i].anchor)\n      const headIndex = editor.indexFromPos(ranges[i].head)\n      let selection = cm.getRange(from, to)\n      selection = symbol + selection + linkEnd\n      cm.replaceRange(selection, from, to)\n      if (anchorIndex > headIndex) {\n        ranges[i].anchor.ch += symbol.length\n        ranges[i].head.ch += symbol.length\n      } else {\n        ranges[i].head.ch += symbol.length\n        ranges[i].anchor.ch += symbol.length\n      }\n      cm.setSelections(ranges)\n    } else {\n      cm.replaceRange(symbol + linkEnd, cursor, cursor)\n      cm.setCursor({ line: cursor.line, ch: cursor.ch + symbol.length + linkEnd.length })\n    }\n  }\n  cm.focus()\n}\n\nexport function insertHeader (cm) {\n  const cursor = cm.getCursor()\n  const startOfLine = { line: cursor.line, ch: 0 }\n  const startOfLineText = cm.getRange(startOfLine, { line: cursor.line, ch: 1 })\n  // See if it is already a header\n  if (startOfLineText === '#') {\n    cm.replaceRange('#', startOfLine, startOfLine)\n  } else {\n    cm.replaceRange('# ', startOfLine, startOfLine)\n  }\n  cm.focus()\n}\n\nexport function insertOnStartOfLines (cm, symbol) {\n  const cursor = cm.getCursor()\n  const ranges = cm.listSelections()\n\n  for (let i = 0; i < ranges.length; i++) {\n    const range = ranges[i]\n    if (!range.empty()) {\n      const cursorFrom = range.from()\n      const cursorTo = range.to()\n      const firstLineStart = { line: cursorFrom.line, ch: 0 }\n      const lastLineEnd = { line: cursorTo.line, ch: cm.getLine(cursorTo.line).length }\n      let selection = cm.getRange(firstLineStart, lastLineEnd)\n      selection = selection.replace(/\\n/g, '\\n' + symbol)\n      selection = symbol + selection\n      cm.replaceRange(selection, firstLineStart, lastLineEnd)\n    } else {\n      cm.replaceRange(symbol, { line: cursor.line, ch: 0 }, { line: cursor.line, ch: 0 })\n    }\n  }\n  cm.setCursor({ line: cursor.line, ch: cursor.ch + symbol.length })\n  cm.focus()\n}\n","const config = {\n  docmaxlength: null\n}\n\nexport default config\n","module.exports = \"<div class=\\\"status-bar\\\">    <div class=\\\"status-info\\\">        <div class=\\\"status-cursor\\\">          <span class=\\\"status-line-column\\\"></span>          <span class=\\\"status-selection\\\"></span>        </div>        <div class=\\\"status-file\\\"></div>    </div>    <div class=\\\"status-indicators\\\">        <div class=\\\"status-length\\\"></div>        <div class=\\\"status-preferences dropup toggle-dropdown pull-right\\\">            <a id=\\\"preferencesLabel\\\" class=\\\"ui-preferences-label text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Click to change preferences\\\">                <i class=\\\"fa fa-wrench fa-fw\\\"></i>            </a>            <ul class=\\\"dropdown-menu\\\" aria-labelledby=\\\"preferencesLabel\\\">                <li class=\\\"ui-preferences-override-browser-keymap\\\"><a><label>Allow override browser keymap&nbsp;&nbsp;<input type=\\\"checkbox\\\"></label></a></li>            </ul>        </div>        <div class=\\\"status-keymap dropup pull-right\\\">            <a id=\\\"keymapLabel\\\" class=\\\"ui-keymap-label text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Click to change keymap\\\">            Sublime            </a>            <ul class=\\\"dropdown-menu\\\" aria-labelledby=\\\"keymapLabel\\\">                <li class=\\\"ui-keymap-sublime\\\"><a>Sublime</a></li>                <li class=\\\"ui-keymap-emacs\\\"><a>Emacs</a></li>                <li class=\\\"ui-keymap-vim\\\"><a>Vim</a></li>            </ul>        </div>        <div class=\\\"status-indent\\\">            <div class=\\\"indent-type\\\" title=\\\"Click to switch indentation type\\\">Spaces:</div>            <div class=\\\"indent-width-label\\\" title=\\\"Click to change indentation size\\\">4</div>            <input class=\\\"indent-width-input hidden\\\" type=\\\"number\\\" min=\\\"1\\\" max=\\\"10\\\" maxlength=\\\"2\\\" size=\\\"2\\\">        </div>        <div class=\\\"status-theme\\\">            <a class=\\\"ui-theme-toggle\\\" title=\\\"Toggle editor theme\\\"><i class=\\\"fa fa-sun-o fa-fw\\\"></i></a>        </div>        <div class=\\\"status-spellcheck\\\">            <a class=\\\"ui-spellcheck-toggle\\\" title=\\\"Toggle spellcheck\\\"><i class=\\\"fa fa-check fa-fw\\\"></i></a>        </div>    </div></div>\"","module.exports = \"<div class=\\\"toolbar\\\">  <div class=\\\"btn-toolbar\\\" role=\\\"toolbar\\\" aria-label=\\\"Editor toolbar\\\">    <div class=\\\"btn-group\\\" role=\\\"group\\\">      <a id=\\\"makeBold\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Bold\\\">          <i class=\\\"fa fa-bold fa-fw\\\"></i>      </a>      <a id=\\\"makeItalic\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Italic\\\">          <i class=\\\"fa fa-italic fa-fw\\\"></i>      </a>      <a id=\\\"makeStrike\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Strikethrough\\\">          <i class=\\\"fa fa-strikethrough fa-fw\\\"></i>      </a>      <a id=\\\"makeHeader\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Heading\\\">          <i class=\\\"fa fa-h1 fa-fw\\\">H</i>      </a>      <a id=\\\"makeCode\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Code\\\">          <i class=\\\"fa fa-code fa-fw\\\"></i>      </a>      <a id=\\\"makeQuote\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Quote\\\">          <i class=\\\"fa fa-quote-right fa-fw\\\"></i>      </a>      <a id=\\\"makeGenericList\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"List\\\">          <i class=\\\"fa fa-list fa-fw\\\"></i>      </a>      <a id=\\\"makeOrderedList\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Numbered List\\\">          <i class=\\\"fa fa-list-ol fa-fw\\\"></i>      </a>      <a id=\\\"makeCheckList\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Check List\\\">          <i class=\\\"fa fa-check-square fa-fw\\\"></i>      </a>      <a id=\\\"makeLink\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Link\\\">          <i class=\\\"fa fa-link fa-fw\\\"></i>      </a>      <a id=\\\"makeImage\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Image\\\">          <i class=\\\"fa fa-image fa-fw\\\"></i>      </a>      <a id=\\\"uploadImage\\\" class=\\\"btn btn-sm btn-file ui-upload-image\\\" title=\\\"Upload Image\\\">          <i class=\\\"fa fa-upload fa-fw\\\"></i><input type=\\\"file\\\" accept=\\\"image/*\\\" name=\\\"upload\\\" multiple title=\\\"Upload Image\\\">      </a>      <a id=\\\"makeTable\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Table\\\">          <i class=\\\"fa fa-table fa-fw\\\"></i>      </a>      <a id=\\\"makeLine\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Line\\\">          <i class=\\\"fa fa-minus fa-fw\\\"></i>      </a>      <a id=\\\"makeComment\\\" class=\\\"btn btn-sm text-uppercase\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" title=\\\"Comment\\\">          <i class=\\\"fa fa-comment fa-fw\\\"></i>      </a>    </div>  </div></div>\"","// extracted by mini-css-extract-plugin\nexport {};","/*\n * Showup.js jQuery Plugin\n * http://github.com/jonschlinkert/showup\n *\n * Copyright (c) 2013 Jon Schlinkert, contributors\n * Licensed under the MIT License (MIT).\n */\n\n\n(function( $ ) {\n  $.fn.showUp = function(ele, options) {\n    options = options || {};\n\n    var target         = $(ele);\n    var down           = options.down        || 'navbar-hide';\n    var up             = options.up          || 'navbar-show';\n    var btnHideShow    = options.btnHideShow || '.btn-hide-show';\n    var hideOffset     = options.offset      || 60;\n    var previousScroll = 0;\n\tvar isHide\t\t   = false;\n\n    $(window).scroll(function () {\n\t\tcheckScrollTop();\n    });\n\t\n\t$(window).resize(function () {\n\t\tcheckScrollTop();\n    });\n\t\n\t$(window).mousewheel(function () {\n\t\tcheckScrollTop();\n    });\n\t\n\tfunction checkScrollTop()\n\t{\n\t\ttarget.clearQueue();\n\t\ttarget.stop();\n\t  var currentScroll = $(this).scrollTop();\n      if (currentScroll > hideOffset && !target.hasClass('locked')) {\n          if(Math.abs(previousScroll - currentScroll) < 50) return;\n        if (currentScroll > previousScroll) {\n          // Action on scroll down\n\t\t  target.removeClass(up).addClass(down);\n        } else if (currentScroll < previousScroll) {\n          // Action on scroll up\n\t\t  target.removeClass(down).addClass(up);\n        }\n      } else {\n\t\ttarget.removeClass(down).addClass(up);\n\t  }\n      previousScroll = $(this).scrollTop();\n\t}\n\n    // Toggle visibility of target on click\n    $(btnHideShow).click(function () {\n      if (target.hasClass(down)) {\n        target.removeClass(down).addClass(up);\n      } else {\n        target.removeClass(up).addClass(down);\n      }\n    });\n  };\n})( jQuery );\n\n// TODO: make customizable\n$(document).ready(function () {\n  var duration      = 420;\n  var showOffset    = 220;\n  var btnFixed      = '.btn-fixed-bottom';\n  var btnToTopClass = '.back-to-top';\n\n  $(window).scroll(function () {\n    if ($(this).scrollTop() > showOffset) {\n      $(btnFixed).fadeIn(duration);\n    } else {\n      $(btnFixed).fadeOut(duration);\n    }\n  });\n\n  $(btnToTopClass).click(function (event) {\n    event.preventDefault();\n    $('html, body').animate({\n      scrollTop: 0\n    }, duration);\n    return false;\n  });\n});","// extracted by mini-css-extract-plugin\nexport {};","module.exports = io;","var bind = window.addEventListener ? 'addEventListener' : 'attachEvent',\n  unbind = window.removeEventListener ? 'removeEventListener' : 'detachEvent',\n  prefix = bind !== 'addEventListener' ? 'on' : '',\n  toArray = require('./to-array')\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el, NodeList, HTMLCollection or Array\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\n\nexports.bind = function (el, type, fn, capture) {\n  el = toArray(el)\n  for (var i = 0, il = el.length; i < il; i++) {\n    el[i][bind](prefix + type, fn, capture || false)\n  }\n}\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el, NodeList, HTMLCollection or Array\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\n\nexports.unbind = function (el, type, fn, capture) {\n  el = toArray(el)\n  for (var i = 0, il = el.length; i < il; i++) {\n    el[i][unbind](prefix + type, fn, capture || false)\n  }\n}\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * `wait` milliseconds. If `immediate` is true, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @param {Function} fn\n * @param {Integer} wait\n * @param {Boolean} immediate\n * @api public\n */\n\nexports.debounce = function (fn, wait, immediate) {\n  var timeout\n  return wait\n    ? function () {\n        var context = this,\n          args = arguments\n        var later = function () {\n          timeout = null\n          if (!immediate) fn.apply(context, args)\n        }\n        var callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) fn.apply(context, args)\n      }\n    : fn\n}\n","/**\n * Module dependencies.\n */\n\nvar index = require('./index-of')\n\n/**\n * Whitespace regexp.\n */\n\nvar re = /\\s+/\n\n/**\n * toString reference.\n */\n\nvar toString = Object.prototype.toString\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nmodule.exports = function (el) {\n  return new ClassList(el)\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required')\n  }\n  this.el = el\n  this.list = el.classList\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function (name) {\n  // classList\n  if (this.list) {\n    this.list.add(name)\n    return this\n  }\n\n  // fallback\n  var arr = this.array()\n  var i = index(arr, name)\n  if (!~i) arr.push(name)\n  this.el.className = arr.join(' ')\n  return this\n}\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function (name) {\n  // classList\n  if (this.list) {\n    this.list.remove(name)\n    return this\n  }\n\n  // fallback\n  var arr = this.array()\n  var i = index(arr, name)\n  if (~i) arr.splice(i, 1)\n  this.el.className = arr.join(' ')\n  return this\n}\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function (name, force) {\n  // classList\n  if (this.list) {\n    if ('undefined' !== typeof force) {\n      if (force !== this.list.toggle(name, force)) {\n        this.list.toggle(name) // toggle again to correct\n      }\n    } else {\n      this.list.toggle(name)\n    }\n    return this\n  }\n\n  // fallback\n  if ('undefined' !== typeof force) {\n    if (!force) {\n      this.remove(name)\n    } else {\n      this.add(name)\n    }\n  } else {\n    if (this.has(name)) {\n      this.remove(name)\n    } else {\n      this.add(name)\n    }\n  }\n\n  return this\n}\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function () {\n  var className = this.el.getAttribute('class') || ''\n  var str = className.replace(/^\\s+|\\s+$/g, '')\n  var arr = str.split(re)\n  if ('' === arr[0]) arr.shift()\n  return arr\n}\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has = ClassList.prototype.contains = function (name) {\n  return this.list ? this.list.contains(name) : !!~index(this.array(), name)\n}\n"],"sourceRoot":""}